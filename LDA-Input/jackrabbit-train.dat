2161
maven project maven project pend mail list feedback 'm attach out-dat zip use stuff review build upon propos flow 1 review maven specif element zip project.xml header.txt license.txt notice.txt checkstyle.xml project.properti xdoc directori note know license.txt mayb header.txt correct per earlier discuss 2 new packag layout/cod svn refactor move maven relat file place thought one artifact generat bat file support directori jar run sampl app could use idea maven generat b local maven repo get jcr-api.jar current think same non-redistribut artifact user respons download local repositori
jcr mixintyp properti inconsit addmixin throw except node.addmixin throw except due valid check rather intern jcr mixintyp still contain newli ad nodetyp subsequ call item.sav store properti effect nodetyp affect though
jira notif set jackrabbit 's jira notif go dev mail list get annoy easili switch differ list turn notif peopl regist watcher let know best .roy
versioniteratorimpl problem meet problem versioniter classic nextvers /hasnext loop versioniter becom endless think problem peek/pop misprint public version nextvers internalvers ret internalvers successors. b peek /b chang internalvers ret internalvers successors. b pop /b
multipl propertydef name possibl ad properti def name differ set exampl one singlevalu one multivalu last respect creat properti problem nameditemdef hashmap effectivenodetyp rather must contain list def rather def
version.issam object work version interfac implement frontend versionimpl class extend nodewrapp deleg intern nodeimpl class turn extend itemimpl say node node version 1.0 version version retriev 1.0 node version basevers node.getbasevers expect baseversion.issam version even basevers version fail versionimpl deleg issam call delegate thus call becom versionimpl basevers .delegatee.issam version method implement itemimpl class delegate nodeimpl extend latter implement itemimpl.issam return true itemimpl case versionimpl version nodewrapp node itemimpl probabl best solut would nodeimpl.issam check whether otheritem nodewrapp und use nodewrapp otheritem .delegate otheritem delegate call anoth track itemimpl.issam probabl fast check whether otheritem actual instanc prevent type check
save might creat new transient properti seem new node save parent node new properti might get creat save persist properti new node must save exampl consid mixin type extver extend standard type mix version node node parent.addnod newnod nt base node.addmixin extver mix version properti exist save new node parent.sav mix version properti like jcr ischeckedout exist node node.getproperti jcr ischeckedout .isnew true fix node.sav last node.sav opert would done repositoryexcept would result node.checkin would done immedi parent.sav seem counterintuit seem like error wonder whether properti ad upon node.addmixin least parent.sav might say must add properti also save
xmlpersistencemanag incorrect handl properti jcr properti instanc written xmlpersistencemanag java.util.properti file load loadpropertyst method properti file unfortun reload method tri re-load properti state xml file possibl
disabl searchmanag previous version e.g svn tag 0.1-spec0.14 possibl disabl searchmanag configur search index path current revis nullpointerexcept thrown search index configur miss tough rest system would support miss search index configur suggest extend search index configur interpret workspacecfg.init follow element srchconfig wspelem.getchild search_index_el srchconfig null string pathattr srchconfig.getattributevalu path_attrib pathattr null pathattr.length 0 searchindexdir replacevar pathattr var read search index configur avail reason switch searchmanag use case enabl searchmanag yield perform degrad factor 10 instead take around 500ms still long save 3 node 15 properti would take around 5 second save amount data need searchmanag use case
xml|object persistencemanager.destroy may fail destroy method objectpersistencemanag class tri delet file without check exist may result filesystemexcept thrown accord specif filesystem.deletefil filesystemexcept thrown path denot file anoth error occur jackrabbit localfilesystem implement silent ignor request delet non-exist file intern implement interfac throw filesystemexcept case caus destroy fail suggest destroy method extend first check exist file prevent thrown note appli objectpersistencemanag also xmlpersistencemanag
persistentnode.stor ignor status store look perform bottl neck came across issu persistentnodest ask store persistentnodestate.stor method call persistencemanag store problem problem persistentnodest modifi object need store doi anyway consum cycl case deep unmodifi hierarchi result node written persist noth come method send event case unmodifi node state notifystateupd complet nonsens noth actual updat suggest modifi persistentnodestate.stor method work modifi note encount issu whili track perform problem creat version node turn locat somewher within persistentversionmanager.createversionhistori nodeimpl method predomin store method consum time
observ test fail path return event.getpath wrong alway return path parent node connect event e.g node /foo/bar creat path /foo return instead /foo/bar issu introduc chang api version 0.14 0.15
creat save mix version node creat two versionhistori node step creat new mix version node creat new versionhistori node jcr persistentversionstor set new node 's versionhistori properti uuid versionhistori node save session altern save parent new node creat new versionhistori node jcr persistentversionstor set node 's versionhistori properti uuid versionhistori node see end two versionhistori node node first versionhistori node never use second versionhistori node use
multithread issu version multithread environ two thread access version histori inconsist state may encount concret first thread current check node version histori attach second thread walk version histori mean self-built iter access successor version get next visit certain point second point may encount itemnotfoundexcept stack trace similar javax.jcr.itemnotfoundexcept c9bd405b-dff4-46ef-845c-d98e073e473a org.apache.jackrabbit.core.itemmanager.createiteminst itemmanager.java:354 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:230 org.apache.jackrabbit.core.sessionimpl.getnodebyuuid sessionimpl.java:494 org.apache.jackrabbit.core.version.versionimpl.getsuccessor versionimpl.java:86 seem first thread alreadi fill successor version node yet access createiteminst method bug seem enforc easili reproduc
packag org.apache.xml.util exist jdk 1.5.0 execut maven jar fresh check sourc tree fail follow error messag use jdk 1.5.0 /home/jukkaz/src/jackrabbit/src/java/org/apache/jackrabbit/core/xml/docviewsaxeventgenerator.java:24 packag org.apache.xml.util exist import org.apache.xml.utils.xmlchar /home/jukkaz/src/jackrabbit/src/java/org/apache/jackrabbit/core/xml/docviewsaxeventgenerator.java:142 find symbol symbol variabl xmlchar locat class org.apache.jackrabbit.core.xml.docviewsaxeventgener xmlchar.isvalidnam elemnam /home/jukkaz/src/jackrabbit/src/java/org/apache/jackrabbit/core/xml/docviewsaxeventgenerator.java:162 find symbol symbol variabl xmlchar locat class org.apache.jackrabbit.core.xml.docviewsaxeventgener xmlchar.isvalidnam attrnam build succeed without problem jdk 1.4.2_06 found report similar problem upgrad jdk 1.4 1.5 seem org.apache.xml.utils.xmlchar part undocu standard jdk classpath drop jdk 1.5 similar xmlchar util class found org.apache.xerces.util packag automat includ xerc depend follow chang fix problem jdk 1.5.0 seem work fine also jdk 1.4.2_06 index src/java/org/apache/jackrabbit/core/xml/docviewsaxeventgenerator.java src/java/org/apache/jackrabbit/core/xml/docviewsaxeventgenerator.java revis 57540 +++ src/java/org/apache/jackrabbit/core/xml/docviewsaxeventgenerator.java work copi -21,7 +21,7 import org.apache.jackrabbit.core.state.propertyst import org.apache.jackrabbit.core.util.base64 import org.apache.log4j.logg -import org.apache.xml.utils.xmlchar +import org.apache.xerces.util.xmlchar import org.xml.sax.contenthandl import org.xml.sax.saxexcept import org.xml.sax.helpers.attributesimpl
log repositori big version histori take long time wenn sessionimpl instanc creat versionmanager.getvirtualitemstateprovid method call method amongst thing load complet version histori memori walk map besid take long time near 1 minut get version histori persistentversionmanager.getversionhistori map version histori ultim result outofmemoryerror current 768 version histori small fraction expect final number version histori applic
nodetyperegistry.validatenodetypedef caus nullpointerexcept nodetyperegistry.registernodetyp nodetypedef check given node type definit circular inherit amongst thing cours node type definit contain list super type validatenodetypedef line 442 caus nullpointerexcept thrown checkforcircularinherit supertyp variabl null check interest access supertyp object validnodetypedef guard null length==0 might ommiss
defaultitemstateprovid contain grow-on cach defaultitemstateprovid class contain privat hashmap item contain refer itemst object bad thing cach grow manag forget unus item exampl repositori fill 9350 node 52813 properti grow item map 1'667'557 entri concret case vm all13at 213mb heap 57mb referenc defaultitemstateprovider.item map
persistentversionmanag contain grow-on cach persistentversionmanag class contain privat hashmap histori contain refer internalversionhistori object bad thing cach grow manag forget unus histori even badder class support on-demand load version histori exampl repositori fill 9350 node 52813 properti grow histori map 1'222'030 entri concret case vm alloc 213mb heap 41mb referenc persistentversionmanager.histori map
classcastexcept bei unregisternodetyp nodetyp various childnod want unregist call nodetypemanag ndmg session.getworkspac .getnodetypemanag nodetyperegistri ntreg nodetypemanagerimpl ndmg .getnodetyperegistri ntreg.unregisternodetyp new qname testuri page get java.lang.classcastexcept org.apache.jackrabbit.core.nodetype.nodetyperegistry.getdependentnodetyp nodetyperegistry.java:1242 org.apache.jackrabbit.core.nodetype.nodetyperegistry.unregisternodetyp nodetyperegistry.java:1120 de.freaquac.test.jcrtest.main jcrtest.java:80 look like qname iter nodetyedef expect
default valu autocr field like null custom nodetyp two properti autocr mandatori creat node want read first properti fill valu get javax.jcr.repositoryexcept unabl get valu /pages/mjo page/jcr content/mjo titl java.lang.arrayindexoutofboundsexcept 0 org.apache.jackrabbit.core.propertyimpl.getvalu propertyimpl.java:378 de.freaquac.test.jcrtest.propiter jcrtest.java:207 set properti except longer thrown sure realli error littl bit anyo default valu null jsr170
arrayindexoutofboundexcept set refer properti node whith multivalu refer properti tri add refer follow spec outdat point 'm sure use right approach add refer referencevalu rv new referencevalu rn.getnod pages/mjo page valu valu rv tstn.setproperti mjo testcon valu session.sav result 2004-12-09 16:11:43,614 warn org.apache.jackrabbit.core.itemmanag node /pages/mjo page invalid definitionid 1512950840 java.lang.arrayindexoutofboundsexcept 0 org.apache.jackrabbit.core.itemimpl.validatetransientitem itemimpl.java:626 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1148 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:633 de.freaquac.test.jcrtest.main jcrtest.java:174 arrayindexoutofboundsexcept never good sign assum 's bug say crx throw except tri
node.checkin throw arrayindexoutofboundsexcept get arrayindexoutofboundsexcept index 0 checking-in node drill code found checkin jcr uuid properti defin opv initi copi node frozen node checkin though implement tri access string valu jcr uuid properti exist henc intern properti implement throw except access first element empti valu array workaround current set jcr uuid properti opv=copi mixin referenc node type could imagin might incorrect accord spec yet work use case
node.addnod scale increas content increas repositori content version time creat new node increas exampl around 6500 node 33500 properti take around 3 second add one singl node attach applic debugg delibaret suspend vm stack trace display time chang intern access list iter persistentnodest nodest .getchildnodeentri string line 362 persistentnode.getnam line 84 persistentversionmanager.getvers string line 278 versionmanager.getvers string line 304 versionitemstateprovider.getnodest nodeid line 124 versionitemstateprovider.haspropertyst propertyid line 154 versionitemstateprovider.hasitemst itemid line 174 sessionitemstatemanager.getitemst itemid line 246 itemmanager.createiteminst itemid line 563 itemmanager.getitem itemid line 332 nodeimpl.getproperti qname line 876 nodeimpl.hasproperti qname line 893 nodeimpl.safeischeckedout line 2515 nodeimpl.internaladdchildnod qname nodetypeimpl string line 527 nodeimpl.internaladdnod string nodetypeimpl string line 475 nodeimpl.internaladdnod string nodetypeimpl line 436 nodeimpl.addnod string string line 1145 seem virtual item state provid ask whatev properti look return call version handler loop child entri current around 1100 entri find one singl entri given uuid besid latter optim certain scale former problem right
sysview import handl auto-cr node import serial system-view via session.importxml method itemexistsexcept thrown node auto-cr child node parent node creat import repositori automat creat auto-cr child node import handler tri creat respect child node except thrown
sysview export/import multivalu properti seem work sysview export multivalu properti differ export singlevalu properti mv-properti contain 1 valu import find correct property-def current throw javax.jcr.nodetype.constraintviolationexcept match properti definit found propertynam
sysview import resolv refer import sysview refer resolv new uuid mix referenc node
autocr attribut propdef instanc serial properti custom node type defin autocreate=tru fact serial custom_nodetypes.xml file dig sourc reveals nodetypedefstore.writedef method write autocr attribut autocr string autocr elem.getattributevalu autocreate_attribut autocr null autocreate.length 0 pd.setautocr boolean.valueof autocr .booleanvalu seem remain copy-past procedur correct code probabl someth like autocr elem.setattribut autocreate_attribut boolean.tostr pd.isautocr
nodetypedefdiff compar restrict nodetypedefdiff class use compar nodetypedef instanc unfortun class report two nodetypedef instanc equal structur differ trivial chang correct result would modif suggest modifi nodetypedefdiff.init method initi type none instead trivial first compar hasorderablechildnod first rais level trivial equal next rest current comparison would follow
nodetyperegistry.reregist unregist depend type nodetyperegistry.reregist allow modifi regist node type differ current regist node type name trivial accord nodetypedefdiff regist new node type definit old node type unregist side effect first step also nodetyp depend extend node type re-regist remov registri modifi node type regist previous regist depend node type regist anymor known make sens temporarili unregist depend node type must regist re-regist node type regist otherwis system may becom pretti useless
select queri fail like xxx322 statement class org.apache.jackrabbit.core.search.lucene.wildcardtermenum 's condit around line 77 like character.islett likepattern.charat fail queri like select type locat /news// text like asd2 chang character.islett likepattern.charat || character.isdigit likepattern.charat
version root node make root node version checkin method fail follow except java.lang.arrayindexoutofboundsexcept 0 org.apache.jackrabbit.core.version.persistence.persistentnode.copyfrom persistentnode.java:589 org.apache.jackrabbit.core.version.persistence.internalfrozennodeimpl.checkin internalfrozennodeimpl.java:277 org.apache.jackrabbit.core.version.persistence.internalfrozennodeimpl.checkin internalfrozennodeimpl.java:307 org.apache.jackrabbit.core.version.persistence.internalfrozennodeimpl.checkin internalfrozennodeimpl.java:307 org.apache.jackrabbit.core.version.persistence.internalversionhistoryimpl.checkin internalversionhistoryimpl.java:354 org.apache.jackrabbit.core.version.persistence.nativepvm.checkin nativepvm.java:506 org.apache.jackrabbit.core.version.versionmanagerimpl.checkin versionmanagerimpl.java:212 org.apache.jackrabbit.core.nodeimpl.checkin nodeimpl.java:2184 com.gtnet.jcr.versionednodetest.testversionrootnod versionednodetest.java:218 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 com.intellij.rt.execution.junit2.junitstarter.main junitstarter.java:31 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 com.intellij.rt.execution.application.appmain.main appmain.java:78
document view importxml fail protect properti jcr primarytyp tri import xml document element contain attribut jcr primarytyp import fail javax.jcr.nodetype.constraintviolationexcept set valu protect properti /testroot/docviewimport/doc/jcr primarytyp org.apache.jackrabbit.core.propertyimpl.setvalu propertyimpl.java:907 org.apache.jackrabbit.core.nodeimpl.setproperti nodeimpl.java:1044 org.apache.jackrabbit.core.xml.docviewimporthandler.startel docviewimporthandler.java:124 org.apache.jackrabbit.core.xml.importhandler.startel importhandler.java:164 org.apache.xerces.parsers.abstractsaxparser.startel unknown sourc org.apache.xerces.impl.xmlnsdocumentscannerimpl.scanstartel unknown sourc org.apache.xerces.impl.xmlnsdocumentscannerimpl nscontentdispatcher.scanrootelementhook unknown sourc org.apache.xerces.impl.xmldocumentfragmentscannerimpl fragmentcontentdispatcher.dispatch unknown sourc org.apache.xerces.impl.xmldocumentfragmentscannerimpl.scandocu unknown sourc org.apache.xerces.parsers.xml11configuration.pars unknown sourc org.apache.xerces.parsers.xml11configuration.pars unknown sourc org.apache.xerces.parsers.xmlparser.pars unknown sourc org.apache.xerces.parsers.abstractsaxparser.pars unknown sourc org.apache.jackrabbit.core.sessionimpl.importxml sessionimpl.java:836 org.apache.jackrabbit.test.api.docviewimporttest.setup docviewimporttest.java:92 com.intellij.rt.execution.junit2.junitstarter.main junitstarter.java:31 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 com.intellij.rt.execution.application.appmain.main appmain.java:78 understand spec correct import process take care attribut determin node type new node base
node merg method doesnt seem recurs thru child right sourc node check nodeimpl.merg seem way process child node wrong call merg child src node come sourc workspac plus case srcnode null would end nullpointerexcept nodeiter ni srcnode.getnod second statment condit
itemmanag issu warn messag node.checkin node.checkout wenn check check node itemmanager.cacheitem method issu warn messag cach entri replac messag might valuabl certain context contetx check node valuabl harm confid
workspace.mov session.mov allow move invalid path call workspace.mov invalid destin path child sourc path e.g move /path /path/path2 result sourc path node remov call session.mov failur stackoverflowerror save call
overwrit refer properti differ type corrupt rep creat node n1 creat node n2 n2.setproperti prop n1 save n2.setproperti prop hello world save n1.remov save except see also referencestest case btw remov properti overwrit differ refer work
version.getrefer work correct sinc /jcr system/jcr versionstorag share among workspac refer version version histori need workspac sensit exampl workspac w1 contain version node n1 respect version histori vh visibl jcr versionstorag call vh.getrefer return jcr versionhistori properti node n1 access repositori use anoth workspac w2 node n2 correspond n1 call vh.getrefer return empti set true version node referenc jcr basevers jcr predecessor properti see also spec chapter 8.2.2.1 jcr versionstorag full set version histori version storag though store singl locat repositori must reflect workspac subtre node /jcr system/jcr versionstorag
provid org.apache.xalan.processor.transformerfactoryimpl found maven jar fail follow error messag fresh jackrabbit sourc tree build fail file /home/hukka/tmp/jackrabbit/maven.xml element ant xslt line 146 column 25 provid org.apache.xalan.processor.transformerfactoryimpl found total time 4 second finish sun feb 13 10:09:03 eet 2005
node.setproperti string string convert valu set valu defin properti via node.setproperti string string method constraintviolationexcept thrown string valu convert valueformatexcept must thrown
xmlpersistencemanag trim string properti valu xmlpersistencemanag trim text properti valu read 's return n't match valu set includ whitespac start end
sql queri jcr path like /foo/ select children queri like select nt base jcr path like /foo/ select children /foo instead descend /foo
persist data version clean correct delet version remov label respect persist data alway proper remov
node.restor fail multipl mixin type restor node one mixin type caus except java.lang.nullpointerexcept org.apache.jackrabbit.core.nodeimpl.restorefrozenst nodeimpl.java:3286 org.apache.jackrabbit.core.nodeimpl.internalrestor nodeimpl.java:3243 org.apache.jackrabbit.core.nodeimpl.internalrestor nodeimpl.java:3210 org.apache.jackrabbit.core.nodeimpl.restor nodeimpl.java:2821 com.gtnet.jcr.versionednodetest.testnodeversionandrestor versionednodetest.java:311 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 com.intellij.rt.execution.junit2.junitstarter.main junitstarter.java:31 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 com.intellij.rt.execution.application.appmain.main appmain.java:78
first step document outdat report manoj prasad develop mail list code configur shown first step document 1 longer date latest jackrabbit sourc differ version element need ad repositori configur file output valu print exampl chang log messag new node type etc multipl valu especi jcr mixintyp properti handl correct document updat 1 http //incubator.apache.org/jackrabbit/firststeps.html
refactor config handl discuss mail list move xml handl separ configurationpars class clean document *config class get rid messi abstractconfig class
remov jdom depend propos sylvain wallez dev mail list replac jdom code config nodetyp xml persist manag code equival standard dom code chang introduc extra line code would remov extern depend avoid unnecessari deploy problem
vfs back file system file system implement back common vfs
allow case insensit search would nice abl search specif properti like fulltext search e.g ignore-cas flag could find subset result select nt base contain bla use someth like select nt base jcr bla like bla current valu must contain bla exact found second queri suggest extend contain function addit argument properti search e.g select nt base contain bla jcr bla could also easili use xpath
workspaceimpl.dispos might caus classnotfoundexcept wenn use jackrabbit environ classload may get inactiv sens load new class possibl anymor shut repositori may result classnotfoundexcept workspaceimpl.dispos reason dispos method observationmanag ask regist event listen remov observationmanag one-by-on ask listen result new eventlisteneriteratorimpl object creat class never use live time repositori would caus classnotfoundexcept class loader laod class anymor specif environ specif environ eclips one plugin manag differ repositori instanc provid separ plugin jackrabbit provid plugin alreadi stop manag plugin tri shutdown jackrabbit repositori eventlisteneriteratorimpl class load anymor dispos workspaceimpl control way fail suggest ad observationmanagerimpl.dispos method call workspaceimpl like workspaceimpl.dispos obsmgr null obsmgr.dispos obsmgr null side effect call getobservationmanag impl observ manag would also creat exist yet side effect dispos method observationmanagerimpl class could also cleanup work addit clear listen list
warn unmapp charact encod utf8 non-ascii charact jackrabbit sourc file caus warn least environ seem warn caus smart quot charact exact warn /home/hukka/workspace/jackrabbit/src/java/org/apache/jackrabbit/core/nodeimpl.java:3068 warn unmapp charact encod utf8 65533 newer 65533 n therefor n updat reflect n /home/hukka/workspace/jackrabbit/src/java/org/apache/jackrabbit/core/nodeimpl.java:3068 warn unmapp charact encod utf8 65533 newer 65533 n therefor n updat reflect n /home/hukka/workspace/jackrabbit/src/java/org/apache/jackrabbit/core/nodeimpl.java:3074 warn unmapp charact encod utf8 n 65533 older 65533 65533 age 65533 n therefor n left alon /home/hukka/workspace/jackrabbit/src/java/org/apache/jackrabbit/core/nodeimpl.java:3074 warn unmapp charact encod utf8 n 65533 older 65533 65533 age 65533 n therefor n left alon /home/hukka/workspace/jackrabbit/src/java/org/apache/jackrabbit/core/nodeimpl.java:3074 warn unmapp charact encod utf8 n 65533 older 65533 65533 age 65533 n therefor n left alon /home/hukka/workspace/jackrabbit/src/java/org/apache/jackrabbit/core/nodeimpl.java:3074 warn unmapp charact encod utf8 n 65533 older 65533 65533 age 65533 n therefor n left alon /home/hukka/workspace/jackrabbit/src/java/org/apache/jackrabbit/core/nodeimpl.java:3376 warn unmapp charact encod utf8 2 n 65533 jcr basevers properti chang point v. /home/hukka/workspace/jackrabbit/src/java/org/apache/jackrabbit/core/nodeimpl.java:3382 warn unmapp charact encod utf8 3 n 65533 jcr ischeckedout properti set fals /home/hukka/workspace/jackrabbit/src/test/org/apache/jackrabbit/test/api/version/checkintest.java:80 warn unmapp charact encod utf8 assertequ version checked-out node 65533 jcr predecessor properti copi new version checkin arrays.aslist npredecessorsvalu arrays.aslist vpredecessorsvalu /home/hukka/workspace/jackrabbit/src/test/org/apache/jackrabbit/init/nodetestdata.java:95 warn unmapp charact encod utf8 writer.writ hello w 65533 rld
nodetype.cansetproperti includ type convers exampl nodetype.cansetproperti string propertynam valu valu must return true properti requir stringvalu valu datevalu
primaryitemnam inherit primaryitemnam defin nodetyp definit inherit one supertyp spec unclear though seem natur behaviour exampl extend nt resourc subtyp forc redefin jcr data primaryitemnam
docview import fail attribut childelem name docimport fail element name one attribut parent element exampl xml version= 1.0 encoding= utf-8 featur plugin= foobar plugin test /plugin /featur import result itemexistsexcept plugin
import must ignor xml prefix attribut xml import current ignor attribut xml namespac e.g. docviewimporthandl 's startel atts.getqnam .startswith xml skip xml space xml lang etc log.debug skip reserved/system attribut atts.getqnam continu signific loss inform sinc xml base xml lang xml id attribut critic content regist xml prefix reserv namespac need xmlns declar treat like attribut use xml exampl http //xformsinstitute.com/essentials/browse/ch03s02.php http //www.zvon.org/howto/output/ http //www.w3.org/math/testsuite/testsuite/torturetests/complexity/complex1.xml http //intertwingly.net/wiki/pie/echoexampl http //support.sas.com/onlinedoc/913/getdoc/en/engxml.hlp/a002973381.htm
/contrib/orm-persistence/ ojbpersistencemanag ojbpersistencemanag seem follow problem 1 ojbpersistencebrok inherit abstractpersistencebrok 's need use non transact implement featur avail jdbc 2 singl broker use 's thread-saf problem inherit abstractpersistencemanag store changelog method synchron 3 broker never close leav open connect 4 's pool one broker 5 write method e.g store nodest state start transact transact start end store changelog log 6 never rollback even item changelog ca n't persist 7 mysql exampl creat myisam tabl n't support transact innodb tabl would appropri 8. jdbc java type map wrong class org.apache.jackrabbit.core.state.orm.ormblobvalu field size chang integ bigint 9 blob valu load arraystoreexcept thrown load propertyid id blobfilevalu ad internalvaluelist instead internalvalu instanc 10. store noderefer store noderefer refer delet ojb persist manag n't delet one problem present hibern implement
refactor davsess acquisit jcr-server 'm subclass webdavserv want use logic find credenti request log repositori instanti davsess unfortun webdavservlet.getsess friend inner class davsessionimpl declar privat chang webdavservlet.getsess protect could overrid even access davsessionimpl ve copi past inner class subclass yuck 's propos make extens 1 creat interfac davsessionprovid org.apache.jackrabbit.serv method public void acquiresess webdavrequest request throw davexcept public void releasesess webdavrequest request 2 make jcrwebdavserv implement davsessionprovid alreadi includ method 3 move webdavservlet davsessionimpl davsessionimpl org.apache.jackrabbit.server.simpl 4 creat davsessionproviderimpl org.apache.jackrabbit.server.simpl implement davsessionprovid return instanc davsessionimpl 5 chang webdavservlet use davsessionprovid rather getsess method use davsessionproviderimpl default subclass overrid setdavsessionprovid
node.canaddmixin string spec method must return fals node lock
lock.getnod return lock holder spec n.getlock .getnod n lock node n subtre lock holder h call return h. n return
remov sourc parent node session move throw save follow code fragment illustr problem creat follow node tree b c d node root.hasnod root.getnod els root.addnod node b a.addnod b node c b.addnod c node d a.addnod d root.sav move c d session.mov /a/b/c /a/d/c remov b a.getnod b .remov expect result node tree d c a.sav last save throw javax.jcr.repositoryexcept inconsist fail retriev transient state
expos regist node type /jcr system/jcr nodetyp spec say 6.8 system node exampl repositori expos node type definit content node type definit locat /jcr system/jcr nodetyp
workspaceconfig.init throw nullpointerexcept search configur miss search configur miss repository.xml configur workspaceconfig.sc field null consequ workspaceconfig.init method throw nullpointerexcept bug especi sinc miss search configur perfect ok result jackrabbit build search index believ realli want matter sinc configur file structur seem impli configur framework dtd inlin configur file configur framework act grace miss wrong unexpect configur element thus exampl file system configur workspaceconfig.fsc would miss workspaceconfig probabl hint point throw nullpointerexcept without explan cours throw anyth still better go wild
session.imperson non-funct current sessionimpl.imperson simpli call repository.login given credenti workspac name session credenti incomplet password miss method throw loginexcept fail authent userid actual mislead text reason failur authent userid best session enough access right imperson userid applic crucial session.imperson implement sens method allow creation session password-less credenti accept method fail fail correct messag
jcr taglib jcr taglib maven generat site http //cablemodem.fibertel.com.ar/edgarpoce/index.html
persistencemanag saniti check librari provid framework test repositori consist repair necessari
eventfilt miss event nodetyp observationlisten regist nodetype-filt get inform event sub-nodetyp one specifi filter nodetyp exampl observationmanag om wsp.getobservationmanag om.addeventlisten listen event.property_ad true null new string nt unstructur true would receiv notif node type rep root base nt unstructur nt unstructur
abstractquerytest.evaluateresultord fail workspac contain enough content method abstractquerytest.evaluateresultord current throw notexecutableexcept workspac contain less two node use order rather fail error messag tell workspac contain suffici content run test
implement anonym login credenti jackrabbit current implement anonym login detect null credenti argument login actual compliant specif spec credenti null assum authent handl mechan extern repositori exampl jaa framework repositori implement exist within context exampl applic server allow handl author request access specifi workspac /spec jackrabbit rather support anonym login defin credenti either subclass simplecredenti predefin known userid read-on access
queri node fail restart queri handler initi index node type definit expos /jcr system/jcr nodetyp howev restart node type registr uuid node chang consist virtualnodest index still use uuid initi index return queri result refer uuid exist workspac anymor short term solut disabl index virtualnodest pleas note appli xpath queri also sql queri cours
text search syntax deviat spec origin jsr 170 eg email david b victor 2005/03/23 queri test xpathquerylevel2test.java src\java\org\apache\jackrabbit\test\api\queri tck method getfulltextstat use testfulltextsearch use word syntax test spec jcrfncontain quick brown -cat section 6.6.4.2 contain function v0.16.3 page 100 outlin ebnf includ word addit paragraph go way explain implicit point think would best omit tck method let test implicit david neuschel repli 2005/03/24 thank point think probabl track tck bug jackrabbit jira http //issues.apache.org/jira/browse/jcr could open bug actual use non-spec compliant queri parser ri actual even bug ri tck thank regard david
webdav locatorfactoryimpl locator.gethref construct root resourc url incorrect cadav report error tri open repositori 's default workspac https //localhost:8443/webdav/ track problem saw someth strang multistatus respons 's href extra tack onto end d multistatus xmlns d= dav d respons d href https //localhost:8443/webdav// /d href webdavservlet rather subclass map default servlet webapp mount /webdav ve configur webdavservlet resourc path prefix incident 'm sure 's meant use see valu empti 's append respons 's href n't know circumst would use request child node https //localhost:8443/webdav/bcm respons 's href form expect d multistatus xmlns d= dav d respons d href https //localhost:8443/webdav/bcm/ /d href found locatorfactoryimpl locator.gethref ad extra sinc request resourc collect patch method add charact itempath cadav stop complain well also patch webdavservlet default empti resourc path prefix one specifi servlet init paramet
itemst changelog retriev sequenc created/modified/delet itemst order hash code 's issu persistencemanag check referenci integr e.g rdbms
move newer vesion common collect would use develop want use jackrabbit applic use newer version librari
jcr path queryresult test sql tck also includ test case xpath queri syntax
call propertydef.getdefaultvalu via rmi result except hi jukka 30.03.2005 15:28:23 *mark servletengin servlet threw except org.apache.jackrabbit.rmi.client.remoteruntimeexcept java.rmi.unmarshalexcept error unmarshal return nest except java.io.writeabortedexcept write abort java.io.notserializableexcept javax.jcr.booleanvalu org.apache.jackrabbit.rmi.client.clientpropertydef.getdefaultvalu clientpropertydef.java:76 regard angela
chang defaultvalu format nodetyp xml jcr valu current defaultvalu serial nodetypes.xml one use intern valu serial rather jcr string serial eg propertydef name= jcr requiredprimarytyp defaultvalu defaultvalu http //www.jcp.org/jcr/nt/1.0 base /defaultvalu /defaultvalu /propertydef handi custom_nodetypes.xml written automat suggest chang serial use jcr valu one propertydef name= jcr requiredprimarytyp defaultvalu defaultvalu nt base /defaultvalu /defaultvalu /propertydef
webdav creat resourc case repositoryexcept access item fail reason pathnotfoundexcept creat resourc rather fail throw 403 report brian
patch jcr-rmi contribut ad version/versionhistori support hi jukka contribut famous rmi extens jackrabbit mani thank way implement eclips plugin access repositori provid great help unfortun contribut includ support version yet took freedom add miss piec provid add contribut thank
build instruct contribut add readm order instruct contribut project ne built
extens patch simpl webdav servlet attach patch make simpl webdav servlet extens subclass provid support object davresourcefactori davlocatorfactori also patch davresourceimpl make importxml importfil method protect subclass use
introduc cach frequent use index lookup queri heavili use hierarchi relat resolv locat step e.g childaxisqueri descendantselfaxisqueri current hierarchi relat look nativ lucen index effici index maintain cach frequent use hierarchi lookup call like indexreader.termdoc term field uuid parent
contrib/orm-persist node order support due limit implement node order n't support option specif jackrabbit provid support orm persist manag due fact databas although same-nam sibl order support guarante given order node child list jackrabbit test use node order derefquerylevel1test look first properti type refer use follow code properti refprop propertyutil.searchprop session testrootnod propertytype.refer searchprop method travers tree stop first properti type specifi node order correct return properti expect one case dereftest return multi-valu refer properti could test failur
mislead contrib/tck-webapp/ repositoryservlet javadoc org.apache.jackrabbit.tck.j2ee.repositoryservlet say put refer applic context accord behavior say put refer class variabl j2ee environ applic context refer servletconext instanc bound web applic
how-to deploy model how-to detail descript step requir deploy model
add plugabl mechan import/export webdav-serv add plugabl mechan improv flexibl configur jcr-server
contrib/jcr-serv improv packag structur org apach jackrabbit webdav dav-specif packag current present spi_jcr former spi spi_simpl former dav-packag server/simpl client webdav-cli lib server jcr jcr-server-class former server simpl client jcr client-sid jcr impl without dav-depend
queryhandler.init take context argument current queryhandler.init method take bunch argument need singl jackrabbit implement queri handler make extens easier argument packag context class extend without effect queryhandl interfac
minim use field lucen index current everi properti name creat field lucen index bloat size index norm file creat field valu index token fulltext index properti name may part term text way lucen must maintain one field properti name approach search term alway combin properti name liter valu e.g instead use termqueri new term prop foo queri must termqueri new termqueri common-field prop foo work general comparison valu comparison oper also like function contain function use fulltext index use differ field anyway use properti name part index term text requir custom sortcompar awar properti name chang backward compat earlier index creat jackrabbit
typo jcr-server io packag javadoc
node 's childnod sync unsuccess save node.sav fail due except persistancemanager.stor changelog success call node.getnod still contain refer node fail persist case even call refresh fals restart jackrabbit order get rid refer usecas kind dummy-cod node.addnod new nt unstructur node.sav itemstateexcept persist node.refresh fals iter itr node.getnod itr.hasnext child itr.nextnod except fail build path new
contrib rmi notserializableexcept org.apache.jackrabbit.rmi.client.remoterepositoryexcept error unmarshal return nest except .java.io.writeabortedexcept write abort java.io.notserializableexcept javax.jcr.namevalu
renam packag core.search core.queri packag org.apache.jackrabbit.core.search renam org.apache.jackrabbit.core.queri consist jcr api packag jackrabbit alreadi use packag name suggest jcr api javax.jcr. subpackag implement jackrabbit one org.apache.jackrabbit.core.search.queryhandl interfac need adapt use new packag name
org.apache.lucene.search.booleanqueri toomanyclaus use oper use queri oper queri engin scale number match properti org.apache.lucene.search.booleanqueri toomanyclaus except thrown
add target jvm maven properti compil actual compat level sources/binari defin project.properti compil jackrabbit 1.5 jdk run older vm would nice add follow properti assur generat jar work differ jvms maven.compile.target=1.4 maven.compile.source=1.4 1.3 target also java 1.3
suggest regard nodeimpl propertyimpl jackrabbit.cor nodeimpl propertyimpl contain respect setproperty/setvalu respect initi valid check indent across various variant could possibl either case place separ method nodeimpl.setproperti also addmixin removemixin orderbefor sanitycheck is-parent-checked-out is-not-protect miss setproperti is-parent-not-lock propertyimpl.setvalu sanitycheck is-parent-checked-out is-not-protect is-value-compatible-with-multivalue-definit note check opposit set singl multipl valu is-parent-not-lock second 'm never sure case childnod childproperti prefer node/properti present jcr api regard angela
javacc grammar generat maven.build.dir /generated-src current javacc grammar src/grammar/ xpath sql process java sourc file src/java/org/apache/jacrabbit/core/query/ xpath sql also normal version control sourc file lead need maintain special svn ignor properti also general issu mix manual written automat generat sourc file maven clean command moment truli restor sourc tree fresh checkout state 'm propos wish free disagre javacc grammar generat java file within maven build directori attach patch modifi javacc maven goal generat file maven.build.dir /generated-src modifi prepare-filesystem goal also add generat sourc path maven.build.dir /generated-src/main/java maven compil set generat sourc includ normal build ps coupl javacc generat file intent modifi jackrabbit ant delet command end jacrabbit generate-*-pars goal specif remov generat file would howev nicer custom modif would need
test case fulli initi first run seem test case o.a.j.test.api.queri o.a.j.test.api proper initi test repositori run test repositori get initi test case later run troublesom test report error thus problem appear right fresh checkout tree cleanup command sequenc illustr problem error messag report initi test run workspac contain test data /testdata/queri workspac contain test data /testdata tri trace caus problem could n't find easili 'm yet familiar test setup svn co maven test junit run org.apache.jackrabbit.test.api.query.testal junit test run 77 failur 30 error 0 time elaps 5,333 sec junit error test org.apache.jackrabbit.test.api.query.testal fail junit run org.apache.jackrabbit.test.api.testal junit test run 534 failur 181 error 0 time elaps 16,105 sec junit error test org.apache.jackrabbit.test.api.testal fail maven test junit run org.apache.jackrabbit.test.api.query.testal junit test run 77 failur 0 error 0 time elaps 5,887 sec junit run org.apache.jackrabbit.test.api.testal junit test run 534 failur 0 error 0 time elaps 18,427 sec maven clean maven test junit run org.apache.jackrabbit.test.api.query.testal junit test run 77 failur 30 error 0 time elaps 13,185 sec junit error test org.apache.jackrabbit.test.api.query.testal fail junit run org.apache.jackrabbit.test.api.testal junit test run 534 failur 181 error 0 time elaps 40,42 sec junit error test org.apache.jackrabbit.test.api.testal fail maven test junit run org.apache.jackrabbit.test.api.query.testal junit test run 77 failur 0 error 0 time elaps 5,942 sec junit run org.apache.jackrabbit.test.api.testal junit test run 534 failur 0 error 0 time elaps 17,797 sec
session.importxml workspace.importxml throw wrong except accord jcr specif section 7.3.6 7.3.7 uuidbehaviour set import_uuid_collision_remove_exist constraintviolationexcept thrown incom node uuid node parentabspath one ancestor current repositoryexcept thrown instead
workspace.copi copi binari properti proper workspac copi work fine everyth els copi hierarchi contain binari properti remov sourc copi remov binari copi newli creat hierarchi well reproduc 1. creat hierarchi type node /site en imag type binari 2. creat anoth hierarchi differ level /site2 3. copi /site/en /site2 till everyth fine proper copi export xml 2 hierarchi see imag actual copi 4. delet /site/en 5. see properti copi /site2/en except binari binari type alway referenc even copi via workspac copi
jackrabbit fail shutdown proper tomcat shut issu alreadi discud http //issues.apache.org/jira/browse/jcr-57 problem occur jackrabbit deploy web-inf/lib directori web applic tomcat dispos jackrabbit tri instanti object class previous load webapp classload tomcat n't allow load new class shut caus repositori close proper annoy set stack trace written log seem two class load situat org.apache.jackrabbit.core.observation.eventlisteneriteratorimpl org.apache.jackrabbit.core.fs.filesystempathutil log server standard output org.apache.catalina.loader.webappclassload loadclass info illeg access web applic instanc stop alreadi could load org.apache.jackrabbit.core.observation.eventlisteneriteratorimpl eventu follow stack trace caus error thrown debug purpos well attempt termin thread caus illeg access function impact repead time shutdown org.apache.catalina.loader.webappclassload loadclass info illeg access web applic instanc stop alreadi could load org.apache.jackrabbit.core.fs.filesystempathutil eventu follow stack trace caus error thrown debug purpos well attempt termin thread caus illeg access function impact quick fix forc preload class normal need shutdown simpli ad static block caller class follow patch make tomcat happi caus class load webapp classload still allow probabl realli eleg perfect work index org/apache/jackrabbit/core/fs/filesystemresource.java src\java\org\apache\jackrabbit\core\fs\filesystemresource.java revis 169503 +++ src\java\org\apache\jackrabbit\core\fs\filesystemresource.java work copi -30,6 +30,11 protect final string path static preload filesystempathutil prevent classload issu shutdown filesystempathutil.class.hashcod creat new code filesystemresourc /code index org/apache/jackrabbit/core/observation/observationmanagerimpl.java src\java\org\apache\jackrabbit\core\observation\observationmanagerimpl.java revis 169503 +++ src\java\org\apache\jackrabbit\core\observation\observationmanagerimpl.java work copi -54,6 +54,11 privat final observationmanagerfactori obsmgrfactori static preload eventlisteneriteratorimpl prevent classload issu shutdown eventlisteneriteratorimpl.class.hashcod creat code observationmanag /code instanc
jcrtest.java first step exampl code creat stringvalu new jcrtest.java file describ first step document http //incubator.apache.org/jackrabbit/firststeps.html jackrabbit incub websit contain line attempt creat stringvalu use new rather use valuefactori interfac caus code fail compil perhap initi test could off-put simpl fix swap line n.setproperti testprop new stringvalu hello world n.setproperti testprop session.getvaluefactori .createvalu hello world
put chang resourc simpl webdav server use simpl webdav server put resourc version mixin node type assign new node without regard whether node type alreadi assign node caus put request chang exist resourc fail 403 error fix augment addmixincommand tri add mixin node type node alreadi
session.import fail resolv propert properti definit case properti get assign wrong definiton import via sysview xml selecteion definit fail follow condit nodetyp contain multi-valu properti single-valu residu properti data import contain one valu multivalu properti creat residu definit later access properti 's valu fail valueformatexcept exampl node-typ properti name myapp name mulitpl true properti name multibl fals sysview sv node sv name= somenod sv properti sv name= jcr primarytyp sv type= name sv valu myapp samplent /sv valu /sv properti sv properti sv name= myapp name sv type= string sv valu least could multi valu /sv valu /sv properti /sv node mayapp name import residul properti
repositori hold onto session instanc logout call session.logout repositori instanc 's activesess map still hold refer session caus problem tri unlock node lock anoth session addlocktoken method reject lock token look code session.logout tri notifi sessionlisten logout repositori implement sessionlisten interfac remov session logout n't regist session receiv logout notif
jcr-server modul remov depend jackrabbit-cor
speedup startup jackrabbit startup get slower item repositori possibl reason version search index
delet binari properti remov blob file filesystem delet binari properti contain node blob-fil sometim get remov reason open fileinputstream get referenc properti valu
orm persistencemanag n't compil orm pms synch latest chang api
extens chang simplewebdavservlet new simplewebdavservlet class lost extens old webdavservlet allow subclass ignor depend repositoryaccessservlet provid support object attach patch add back qualiti
remov old hook implement hard link earli draft jcr specif specifi repositori support hard link woud lead situat item might multipl parent node meantim hard link remov spec unlik re-ad futur revis nevertheless jackrabbit still contain refer support mechan e.g nodestate.parentuuid field remov
bindablerepositoryfactori requir exact resourc type org.apache.jackrabbit.jndi.bindablerepositoryfactori class requir exact class name org.apache.jackrabbit.jndi.bindablerepositori specifi jndi resourc factori respons howev current deploy model 2 howto document suggest generic interfac name javax.jcr.repositori use instead current suggest configur result null jndi resourc issu fix either fix document relax code bindablerepositoryfactori ll attach patch latter pleas comment think best solut issu detect mail list thread http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/2303
unreferenc versionhistori delet automat sinc creation versionhistori trigger creation mix version node remov happen automat soon refer version histroy exist anymor case mix version node workspac belong vh delet version vh remov i.e jcr rootvers left point vh delet aswel
extens patch davresourceimpl attach simpl patch allow subclass davresourceimpl access node repres dav resourc
cach item could lost cach sinc item itemst cach week/soft refer map disappear cach gc cycl code like iscach id return retrieveitem id potenti fail log entri like fail build path c2eeecbe-6126-45a2-a38a-002361095107 3334d748-2790-4004-8bfa-09463624c7c4 child entri 4897c961-f36f-4d46-87bd-f24f152138a4 result
open-scop lock may lost restart might transferr two issu open-scop lock report cédric damioli 1 open-scop lock reappli repositori startup lock non-referenc node lost 2 session hold open-scop lock log lock token automat remov session session abl take respons lock even correct lock token
typo log output jackrabbit/src/java/org/apache/jackrabbit/core/fs/local/localfilesystem.java 133c133 log.info locaafilesystem initi root.getpath log.info localfilesystem initi root.getpath
queri name liter without namespac fail queri name liter without namespac fail exampl foo bla return node foo properti contain string valu bla name valu bla namespac node string valu bla return
version might thread safe check version thread safe
version make use tx exampl begin transact creat node add mix version save creat version checkin cancel transact leav trace version
allow subclass nodetyperead work toward offlin tool import custom namespac node type found need make small chang nodetyperead domwalk could subclass nodetyperead access namespac specifi node type definit file see attach patch
queri string liter broken liter coerc type string liter coerc anoth type e.g integ properti type string match liter found e.g follow queri match prop valu string 1234 prop 1234 queri match properti string valu 1234 integ valu 1234
path parser allow trail slash current implement path class violat spec trail slash allow path syntax clear allow trail slash cours path class violat spec anoth way allow root path valid path syntax spec allow clear error spec cours
document order result node configur queri without order claus perform document order result node quit expens oper document order avail search index document order calcul help itemstatemanag requir load result node state includ ancestor queri lot result node becom quit expens even though actual queri execut fast use case care document order featur made configur paramet queryhandl disabl document order result node
importxml prepend line feed tag valu import use session.importxml result new line charact insert begin tag valu xml version= 1.0 encoding= utf-8 polici xmlns= urn oasi name tc xacml:1.0 polici xmlns xsi= http //www.w3.org/2001/xmlschema-inst policyid= test policy-on rulecombiningalgid= urn oasi name tc xacml:1.0 rule-combining-algorithm ordered-permit-overrid descript policy-descript /descript target becom /test/policies/policy/jcr primarytype=nt unstructur /test/policies/policy/policyid=test policy-on /test/policies/policy/rulecombiningalgid=urn oasi name tc xacml:1.0 rule-combining-algorithm ordered-permit-overrid /test/policies/policy/description/jcr primarytype=nt unstructur /test/policies/policy/description/jcr xmltext/jcr primarytype=nt unstructur /test/policies/policy/description/jcr xmltext/jcr xmlcharacters= policy-descript /test/policies/policy/target/jcr primarytype=nt unstructur case mani lfs insert full exampl xml file xml version= 1.0 encoding= utf-8 polici xmlns= urn oasi name tc xacml:1.0 polici xmlns xsi= http //www.w3.org/2001/xmlschema-inst policyid= test policy-on rulecombiningalgid= urn oasi name tc xacml:1.0 rule-combining-algorithm ordered-permit-overrid descript policy-descript /descript target resourc resourc resourcematch matchid= urn oasi name tc xacml:1.0 function string-equ attributevalu datatype= http //www.w3.org/2001/xmlschema string test/12345-resource-67890 /attributevalu resourceattributedesign datatype= http //www.w3.org/2001/xmlschema string attributeid= urn oasi name tc xacml:1.0 resourc resource-id /resourcematch /resourc /resourc action anyaction/ /action /target rule ruleid= permitrul effect= permit target subject subject subjectmatch matchid= urn oasi name tc xacml:1.0 function string-equ attributevalu datatype= http //www.w3.org/2001/xmlschema string alic /attributevalu subjectattributedesign datatype= http //www.w3.org/2001/xmlschema string attributeid= urn oasi name tc xacml:1.0 subject subject-id /subjectmatch /subject /subject action action actionmatch matchid= urn oasi name tc xacml:1.0 function string-equ attributevalu datatype= http //www.w3.org/2001/xmlschema string read /attributevalu actionattributedesign datatype= http //www.w3.org/2001/xmlschema string attributeid= urn oasi name tc xacml:1.0 action action-id /actionmatch /action action actionmatch matchid= urn oasi name tc xacml:1.0 function string-equ attributevalu datatype= http //www.w3.org/2001/xmlschema string write /attributevalu actionattributedesign datatype= http //www.w3.org/2001/xmlschema string attributeid= urn oasi name tc xacml:1.0 action action-id /actionmatch /action action actionmatch matchid= urn oasi name tc xacml:1.0 function string-equ attributevalu datatype= http //www.w3.org/2001/xmlschema string delet /attributevalu actionattributedesign datatype= http //www.w3.org/2001/xmlschema string attributeid= urn oasi name tc xacml:1.0 action action-id /actionmatch /action /action /target /rule /polici
textfilt implement new project contrib afaik textfilt sent ján hala ad yet 's case think creat project contrib implement order avoid ad new depend core distribut
node.getlock lock non-lock node throw javax.jcr.unsupportedrepositoryoperationexcept consid node /test mixin type mix lockabl node /test/child without mixin type mix lockabl node root session.getrootnod node test root.getnod test node child test.getnod child creat lock /test test.lock succeed lock lock test.getlock set flag true boolean lock child.islock throw unsupportedrepositoryoperationexcept lock child.getlock accord spec getlock method must return applic lock node lock regardless whether node mixin type mix lockabl
faq document collect frequent discuss issu mail list wiki faq document
document jackrabbit featur beyond spec
renam node session.mov workspace.mov visibl concurr session cachinghierarchymanag issu reproduc node n1 session1.getrootnod .getnod foo string path n1.getpath return /foo node n2 session2.getrootnod .getnod foo path n2.getpath return /foo session1.mov /foo /bar session1.sav path n1.getpath return /bar path n2.getpath return /bar still return /foo
review test case cross check 1.0 specif jira task meant collect issu tck test case
reorgan jackrabbit core api common
textfilterservic use sun specif class textfilterservic use sun specif actual undocu class sun.misc.servic class lookup textfilt implement approach work jvm implement servic rather use javax.imageio.spi.serviceregistri part standard j2se api
jcr-rmi unmarshalexcept call getproperti ve tri get jcr-rmi adaptor go talk noddi test repositori seem success login travers node getnod etc.. whenev tri get someth nt resourc actual ve subclass nt resourc add properti get follow except org.apache.jackrabbit.rmi.client.remoterepositoryexcept error unmarshal return nest except java.io.writeabortedexcept write abort java.io.notserializableexcept org.apache.jackrabbit.value.binaryvalu error unmarshal return nest except java.io.writeabortedexcept write abort java.io.notserializableexcept org.apache.jackrabbit.value.binaryvalu org.apache.jackrabbit.rmi.client.clientproperty.getvalu clientproperty.java:139 org.apache.jackrabbit.rmi.client.clientproperty.getstr clientproperty.java:131 clienttest.main clienttest.java:20 caus java.rmi.unmarshalexcept error unmarshal return nest except java.io.writeabortedexcept write abort java.io.notserializableexcept org.apache.jackrabbit.value.binaryvalu sun.rmi.server.unicastref.invok unicastref.java:164 org.apache.jackrabbit.rmi.server.serverproperty_stub.getvalu unknown sourc org.apache.jackrabbit.rmi.client.clientproperty.getvalu clientproperty.java:137 2 svn up-to-d morn 2005/7/5 although maven build n't inspir much confid fall jelli except various point 's coupl dozen unit test fail n't know norm maven report jackrabbit main site report suggest call code in-process repositori work fine
queri index sync workspac time search index sync anymor data workspac return uuid correspond node workspac result nodeiter throw itemnotfoundexcept nextnod instruct reproduc error yet avail possibl area investig nodetyp registri map node type workspac use virtual item state version atom index
bad project.xml project.xml api modul actual contain error nest comment ca n't read maven
maven build failur textfilt contrib project ve tri build textfilt contrib get follow error attempt download jackrabbit-0.16.4.1-dev.jar warn fail download jackrabbit-0.16.4.1-dev.jar build continu follow unsatisfi depend jackrabbit-0.16.4.1-dev.jar tri chang project.xml look jackrabbit-1.0-dev.jar instead n't work sure maven expect easi fix somebodi know
shareditemstatemanag proper synchron time ago remov synchron modifi method store hasitemst getitemst care taken ensur cach integr think contract shareditemstatemanag sism broken javadoc clear document think relev method sism work itemst atom e.g call hasitemst return true itemst anoth thread current ad store similar getitemst return itemst curren ad modifi store oper current see two option chang method synchron actual serial call sism implement sophist synchronis e.g multipl store oper still allow long changelog intersect retriev itemst might still allow changelog store long itemst retriev part changelog comment suggest welcom
version node importxml fail import system-view xml previous export repositori node version histori reimport appear due version manag attempt creat new version histori node fail due previous histori exist uuid behavior occur importuuidbehavior.import_uuid_collision_replace_exist importuuidbehavior.import_uuid_collision_remove_exist follow stack trace javax.jcr.version.versionexcept histori alreadi exist node a892651d-1688-46cd-bb12-14f2f0b3d886 org.apache.jackrabbit.core.version.versionmanagerimpl.createversionhistori versionmanagerimpl.java:194 org.apache.jackrabbit.core.itemimpl.initversionhistori itemimpl.java:900 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1313 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:766 use 1.0-dev version revis 209290 obtain 05 jul 2005 9:18:02 est attach pleas find repositori configur test code thank
add maven-eclipse-plugin properti project.xml easier configur ide add maven.eclipse.resources.addtoclasspath=tru properti project.properti make eclips plugin creat sourc dir also resourc add eclipse.depend true /eclipse.depend properti jackrabbit intern depend pom depend jackrabbit groupid intern depend becom project depend eclips
observ event trigger intermedi node version storag new version histori creat observ event trigger intermedi node e.g versionhistori d94d4b41-f68e-4586-9e88-96e6790981d8 follow event trigger node filter appli properti event visibl node ad /jcr system/jcr versionstorage/d9/4d/4b/d94d4b41-f68e-4586-9e88-96e6790981d8 node ad /jcr system/jcr versionstorage/d9/4d/4b/d94d4b41-f68e-4586-9e88-96e6790981d8/jcr versionlabel node ad /jcr system/jcr versionstorage/d9/4d/4b/d94d4b41-f68e-4586-9e88-96e6790981d8/jcr rootvers node ad /jcr system/jcr versionstorage/d9/4d/4b/d94d4b41-f68e-4586-9e88-96e6790981d8/jcr rootversion/jcr frozennod observ also trigger node ad event /jcr system/jcr versionstorage/d9 /jcr system/jcr versionstorage/d9/4d /jcr system/jcr versionstorage/d9/4d/4b
virtualitemst node type definit access uuid virtualnodetypestateprovid map node type definit workspac /jcr system/jcr nodetyp implement method internalgetnodest nodeid id internalhasnodest nodeid id effect itemst reflect node type definit access direct uuid
querymanager.createqueri except handl queri q this.superuser.getworkspac .getquerymanag .createqueri select nt base query.xpath produc org.apache.jackrabbit.core.query.xpath.tokenmgrerror lexic error line 1 column 28 encount b 98 org.apache.jackrabbit.core.query.xpath.xpathtokenmanager.getnexttoken xpathtokenmanager.java:14546 org.apache.jackrabbit.core.query.xpath.xpath.jj_ntk xpath.java:9187 org.apache.jackrabbit.core.query.xpath.xpath.predicatelist xpath.java:5195 org.apache.jackrabbit.core.query.xpath.xpath.axisstep xpath.java:4707 org.apache.jackrabbit.core.query.xpath.xpath.stepexpr xpath.java:4597 org.apache.jackrabbit.core.query.xpath.xpath.relativepathexpr xpath.java:4511 org.apache.jackrabbit.core.query.xpath.xpath.pathexpr xpath.java:4482 org.apache.jackrabbit.core.query.xpath.xpath.valueexpr xpath.java:4125 org.apache.jackrabbit.core.query.xpath.xpath.unaryexpr xpath.java:4032 org.apache.jackrabbit.core.query.xpath.xpath.castexpr xpath.java:3935 org.apache.jackrabbit.core.query.xpath.xpath.castableexpr xpath.java:3898 org.apache.jackrabbit.core.query.xpath.xpath.treatexpr xpath.java:3861 org.apache.jackrabbit.core.query.xpath.xpath.instanceofexpr xpath.java:3824 org.apache.jackrabbit.core.query.xpath.xpath.intersectexceptexpr xpath.java:3748 org.apache.jackrabbit.core.query.xpath.xpath.unionexpr xpath.java:3672 org.apache.jackrabbit.core.query.xpath.xpath.multiplicativeexpr xpath.java:3622 org.apache.jackrabbit.core.query.xpath.xpath.additiveexpr xpath.java:3510 org.apache.jackrabbit.core.query.xpath.xpath.rangeexpr xpath.java:3451 org.apache.jackrabbit.core.query.xpath.xpath.comparisonexpr xpath.java:3353 org.apache.jackrabbit.core.query.xpath.xpath.andexpr xpath.java:3290 org.apache.jackrabbit.core.query.xpath.xpath.orexpr xpath.java:3227 org.apache.jackrabbit.core.query.xpath.xpath.exprsingl xpath.java:2214 org.apache.jackrabbit.core.query.xpath.xpath.forclaus xpath.java:2337 org.apache.jackrabbit.core.query.xpath.xpath.flworexpr xpath.java:2233 org.apache.jackrabbit.core.query.xpath.xpath.exprsingl xpath.java:2133 org.apache.jackrabbit.core.query.xpath.xpath.expr xpath.java:2094 org.apache.jackrabbit.core.query.xpath.xpath.querybodi xpath.java:2066 org.apache.jackrabbit.core.query.xpath.xpath.mainmodul xpath.java:512 org.apache.jackrabbit.core.query.xpath.xpath.modul xpath.java:387 org.apache.jackrabbit.core.query.xpath.xpath.querylist xpath.java:151 org.apache.jackrabbit.core.query.xpath.xpath.xpath2 xpath.java:118 org.apache.jackrabbit.core.query.xpath.xpathquerybuilder. init xpathquerybuilder.java:224 org.apache.jackrabbit.core.query.xpath.xpathquerybuilder.createqueri xpathquerybuilder.java:255 org.apache.jackrabbit.core.query.queryparser.pars queryparser.java:57 org.apache.jackrabbit.core.query.lucene.queryimpl. init queryimpl.java:119 org.apache.jackrabbit.core.query.lucene.searchindex.createexecutablequeri searchindex.java:158 org.apache.jackrabbit.core.query.queryimpl. init queryimpl.java:90 org.apache.jackrabbit.core.searchmanager.createqueri searchmanager.java:192 org.apache.jackrabbit.core.query.querymanagerimpl.createqueri querymanagerimpl.java:87 org.apache.jackrabbit.test.api.query.illegalxpathtest.testillegalstat illegalxpathtest.java:45 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:324 junit.framework.testcase.runtest testcase.java:154 junit.framework.testcase.runbar testcase.java:127 junit.framework.testresult 1.protect testresult.java:106 junit.framework.testresult.runprotect testresult.java:124 junit.framework.testresult.run testresult.java:109 junit.framework.testcase.run testcase.java:118 org.apache.jackrabbit.test.abstractjcrtest.run abstractjcrtest.java:401 junit.framework.testsuite.runtest testsuite.java:208 junit.framework.testsuite.run testsuite.java:203 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:474 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:342 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:194
improv readm build sequenc trunk jcr-server
junit test-cas success documentviewimporttest test depend xerx version use e.g xerx v. 2.4.0 use instead v. 2.6.2 specifi project.xml certain test documentviewimporttest fail e.g testcas testworkspaceimportxml org.apache.jackrabbit.test.api.documentviewimporttest fail xml text correct store expect junit.framework.comparisonfailur xml text correct store expect org.apache.jackrabbit.test.api.documentviewimporttest.checkxmltextnod documentviewimporttest.java:240 org.apache.jackrabbit.test.api.documentviewimporttest.checkimportsimplexmltre documentviewimporttest.java:174 org.apache.jackrabbit.test.api.documentviewimporttest.performtest documentviewimporttest.java:143 org.apache.jackrabbit.test.api.documentviewimporttest.dotestimportxml documentviewimporttest.java:115 org.apache.jackrabbit.test.api.documentviewimporttest.testworkspaceimportxml documentviewimporttest.java:73 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 org.apache.jackrabbit.test.abstractjcrtest.run abstractjcrtest.java:401
contrib jcr-server improv hand strong etag copi dev-mail could deleg calcul etag command let decid whether abl provid whether would strong weak one remov addit method noderesourc use
contrib jcr-server enabl proppatch simple-davresourc implement suggest jcr-properti expos webdav properti proppatch forward javax.jcr.property.setvalu item.remov
jcrtest.java first step exampl code paramet session.importxml code first step page rn.hasnod importxml system.out.println import xml node n=rn.addnod importxml nt unstructur session.importxml /importxml new fileinputstream repotest/test.xml session.sav importxml need third paramet compar http //www.day.com/maven/jsr170/javadocs/jcr-1.0/javax/jcr/session.html prevent code first step page compil
commit volatil index disc configur idl time queri handler keep recent part index memori volatil index index commit disc certain amount node config param minmergedoc ad time volatil index contain node caus redo.log need appli jackrabbit process kill addit size threshold minmergedoc volatil index idl time limit forc commit disc volatil index would written disc configur idl time result persist index dic time sync data still minim disc io heavi modif activ workspac
allow concurr index updat queri current queri handler either allow one modif multipl queri time write oper separ read oper synchron scheme multipl queri may run concurr absenc write oper one major drawback synchron singl long run queri abl block whole workspac commit chang queri handler coupl workspac via synchron event listen process block queri handler finish event process reflect chang index instead index modif non-block sens index modif wait queri complet
proppatch simpl webdav server fail 403 forbidden error ve configur import-collect chain call via mkcol add node node type dav collect defin nodetypenam dav collect supertyp nt folder ismixin fals hasorderablechildnod fals primaryitemnam null propertydef name requiredtyp undefin defaultvalu null autocr fals mandatori fals onparentvers copi protect fals multipl fals propertydef name requiredtyp undefin defaultvalu null autocr fals mandatori fals onparentvers copi protect fals multipl true idea abl set arbitrari webdav properti single- multi-valu webdav collect use cadav mkcol collect creat jcr node type dav collect tri propset arbitrari properti collect understand would set jcr properti name dav collect node get 403 forbidden error dav /home/ mkcol hi creat hi succeed dav /home/ propset hi hi hi set properti hi fail 403 forbidden 's clear 'm use cadav incorrect misunderstand proppatch implement
allow resourcetyp dav properti multipl valu attach patch allow resourcetyp dav properti multipl valu use dav protocol extens caldav perfect patch subclass resourcetyp know other resourc type decent start one way address issu might subclass regist extend resourc type correspond xml represent resourcetyp remov need overrid resourcetypetoxml isvalidresourcetyp
jcr-server honor webdav request 's content-typ content-languag header process put post davresourc access content-typ content-languag header present webdav request client explicit communic header valu take prioriti server calcul done setcontenttypecommand least input server calcul furthermor dav getcontentlanguag support least simpl webdav server
add calendar mime type jcr-server 's mime type registri attach patch add mime type .ic .ifb file jcr-server 's mime type registri
davmethods.post public privat davmethods.post declar privat constant public attach patch fix
filter jcr properti jcr-server attach patch implement jcr properti filter jcr-server way node resourc filter default filter configur effect filter jcr creat jcr mixintyp jcr primarytyp nt folder nt file node like expect default behavior webdav server want return normal dav properti live properti defin dead properti defin client jcr-intern properti intent purpos implementation-specif
possibl regist event listen listen mixin nodetyp would nice enhanc one could well defin mixin nodetyp listen om.addeventlisten event.property_ad event.property_chang event.property_remov true null new string mix custom fals
item state cach updatableitemstatemanag discard logout sessionitemstatemanag dispos transientitemstatemanag updatableitemstatemanag latter n't releas resourc cach item keep listen overlay state event referencemap magic accord test certain circumst slow jackrabbit much chart see time take jackrabbit save child node first test use singl session second creat new session ad node patch attach make test take time opinion 05-08-16-one session.gif login loop add node save logout 05-08-16-one session per save.gif loop login add node save logout
queryhandl use lucen input-/outputstream implement current queryhandl use jackrabbit specif implement lucen directori interfac make use jackrabbit filesystem abstract lucen oper file system howev requir quit often random access index file current filesystem interfac abstract random access possibl filesystemresourc therefor simul re-aquir inputstream seek desir posit effici respect perform use file base index storag make sens lucen henc current abstract use filesystem drop favour direct file access
cach queryhandl scale well cach class cachingindexread use much memori use around 500 byte per node use strategi limit cach improv cover two goal lower per-nod memori cost cach implement cach strategi use e.g lru algorithm
queri throw unsupportedoperationexcept execut absolut xpath statement first locat step jcr root queri may throw unsupportedoperationexcept queri /foo//el nt unstructur prop bar stacktrac java.lang.unsupportedoperationexcept org.apache.jackrabbit.core.query.lucene.cachingmultiread multitermdocs.skipto cachingmultireader.java:281 org.apache.lucene.search.termscorer.skipto termscorer.java:88 org.apache.lucene.search.conjunctionscorer.donext conjunctionscorer.java:53 org.apache.lucene.search.conjunctionscorer.next conjunctionscorer.java:48 org.apache.lucene.search.scorer.scor scorer.java:37 org.apache.jackrabbit.core.query.lucene.childaxisqueri childaxisscorer.calculatechildren childaxisquery.java:291 org.apache.jackrabbit.core.query.lucene.childaxisqueri childaxisscorer.next childaxisquery.java:251 org.apache.lucene.search.scorer.scor scorer.java:37 org.apache.jackrabbit.core.query.lucene.descendantselfaxisqueri descendantselfaxisscorer.calculatesubhit descendantselfaxisquery.java:302 org.apache.jackrabbit.core.query.lucene.descendantselfaxisqueri descendantselfaxisscorer.next descendantselfaxisquery.java:237 org.apache.lucene.search.scorer.scor scorer.java:37 org.apache.lucene.search.indexsearcher.search indexsearcher.java:92 org.apache.lucene.search.hits.getmoredoc hits.java:64 org.apache.lucene.search.hits. init hits.java:43 org.apache.lucene.search.searcher.search searcher.java:33 org.apache.lucene.search.searcher.search searcher.java:27 org.apache.jackrabbit.core.query.lucene.searchindex.executequeri searchindex.java:287 org.apache.jackrabbit.core.query.lucene.queryimpl.execut queryimpl.java:179 org.apache.jackrabbit.core.query.queryimpl.execut queryimpl.java:132
updat monitor releas timer thread multiindex commit volatil index idl time releas reset updateinprogress flag result queri hang anoth thread write workspac
multistatus respons proppatch copi jcr-175 rob owen comment jcr-175 doproppatch abstractwebdavservlet still need send back multistatus 207 respons even success case n't see way collect success/failur status properti instead creat multistatus respons ad propstat sc_ok properti setproperti removeproperti allow webdav client expect multistatus respons proppatch work correct jcr-server general case actual properti status code need use
dead lock lock unlock node jackrabbit still hang node.lock node.unlock function everyth fine s13 4 s13 5 s13 6 s13 7 unlock s14 start s14 1 session.getrootnod s15 start s15 1 s16 start find failur first run emtpi repositori home directori 2nd 3th run fine kill vm first run alreadi initi repositori directori time 1. rm -rf repository.hom 2. run hang 3. kill 4. run ok 5. run ok
arrayindexoutofbound thrown re-index repositori encount problem lucen nodeindex forc repositori re-index use default repository.xml file provid exampl contribut load number pdf file use sampl applic fsimport util encod properti set empti string file system appear index everyth proper stop repositori delet index file restart repositoyr re-index initi arrayindexoutofboundsexcept thrown org.apache.jackrabbit.core.query.lucene.nodeindexer.java code question jcr encod mandatori string encod null node.haspropertynam jcr_encod propertyst encodingprop propertyst stateprovider.getitemst new propertyid node.getuuid jcr_encod encodingprop.getvalu 0 .internalvalu .tostr expect encodingproperti set properti exist howev node properti xmlpersistencemanag creat entri properti array either problem xmlpersistencemanag zero length string issu nodeindex need alter verifi actual valu particular properti sinc jcr encod properti consid multi-valu properti requir check initi array probabl correct rout look code xmlpersistencemanag readstat domwalk walker propertyst state method line 294 indic content length properti zero properti valu ad howev encod properti configur empti string creat therefor suggest alter check properti string even zero length add properti valu arraylist valu new arraylist walker.enterel values_el walker.iterateel value_el read serial valu string content walker.getcont content.length 0 || propertytype.str type suggest updat type propertytype.binari special handl requir binari valu valu store path actual binari file blob store tri values.add internalvalue.cr new filesystemresourc blobstor content catch ioexcept ioe string msg error read serial binari valu log.debug msg throw new itemstateexcept msg ioe els values.add internalvalue.valueof content type walker.leaveel
jcr like scale well larg valu rang two major issu current wildcardqueri implement 1 wildcard express restrict match 1024 term otherwis toomanyclaus except thrown similar rangequeri issu jcr-111 2 enumer term match wildcard pattern slow
index merg run separ thread index merg use configur paramet mergefactor minmergedoc default valu 10 mergefactor 100 minmergedoc soon 10 index directori exist less equal 100 node merg singl one process repeat multipli minmergedoc mergefactor therefor second round merg 10 index directori less equal 1000 node process part regular workspac store oper index merg let 's say 10'000 node block store oper coupl second current synchron scheme thread block write accept index merg run separ thread background process need take care follow merg index delet index must get lost switch index merg new index must atom recoveri merg interrupt e.g jackrabbit shutdown
upload larg stream rmi tri upload file 35 meg get memori error caus whole file read memori instead buffer
move log4j initi repositorystartupservlet repositorystartupservlet initializes/configur log4j environ might desir sinc applic might alreadi done
contrib-bdb initi fail directori n't exist berkeleydbpersistencemanag initi fail directori configur n't exist n't happen pms easili fix persist manag make creat directori path actual creat last -db- directori trivial patch replac envdir.mkdir envdir.mkdir note final berkeleydbpersistencemanag line 73 envdir.exist envdir.mkdir envdir.exist envdir.mkdir submit svn diff sinc manual fix sound trivial 's easier chang manual
add configur option search manag right search manag activ everyth index even system branch workspac version take paramet condit account whether node index path node type properti type properti name see also http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/3343
set jcr encod import file simpl webdav server attach patch set jcr encod properti import file simpl webdav server also strip paramet content type set jcr mimetyp properti
version.merg corrupt repositori version.merg corrupt repositori somehow protect flag nt version nodetyp proper check happen due wrong test case call merg version instead normal node
move lock node remov lock state move lock node loos lock state
tck n't compil use enum keyword use enum keyword testfind patch attach
orm-persist packag n't compil cvs head correct qname import guess move patch mean besid make src/java compil updat depend project.xml
jcr-rmi maven site target fail target site jcr rmi fail org.apache.jackrabbit.rmi.remote.serialvalue.java empti
jcr ext n't compil jdk 1.4 illegalstateexcept string str except e n't support
decor enhanc ad decor enhanc discuss mail list appar noth yet gmane /marc archiv
avoid creation one jackrabbit instanc configur base mail list archiv seem new user often run one jackrabbit instanc configur propos lock repositori creat empti file call .lock repositori home startup remov shutdown lock file found jackrabbit startup follow messag log repositori home home.getabsolutepath appear use sure 's use pleas delet file lock.getabsolutepath probabl repositori shutdown proper
nullpointerexcept lucenequerybuild set follow queri //mycoreclass id= archnachl_class_003 //label get nullpointerexcept java.lang.nullpointerexcept org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.visit lucenequerybuilder.java:553 org.apache.jackrabbit.core.query.relationquerynode.accept relationquerynode.java:157 org.apache.jackrabbit.core.query.naryquerynode.acceptoperand naryquerynode.java:131 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.visit lucenequerybuilder.java:421 org.apache.jackrabbit.core.query.locationstepquerynode.accept locationstepquerynode.java:156 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.visit lucenequerybuilder.java:400 org.apache.jackrabbit.core.query.pathquerynode.accept pathquerynode.java:47 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.visit lucenequerybuilder.java:200 org.apache.jackrabbit.core.query.queryrootnode.accept queryrootnode.java:112 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.createlucenequeri lucenequerybuilder.java:190 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.createqueri lucenequerybuilder.java:172 org.apache.jackrabbit.core.query.lucene.queryimpl.execut queryimpl.java:152 org.apache.jackrabbit.core.query.queryimpl.execut queryimpl.java:132 n't realli know 's valid queri search everi label properti valu ever name properti may somewher specif mycoreclass node either way jackrabbit caus exit nullpointerexept 'm use current svn snapshot jackrabbit record line 550-557 lucenequerybuilder.java look like string field tri field node.getproperti .tojcrnam nsmap catch noprefixdeclaredexcept e never happen exceptions.add e
code depend log4j direct code written log4j api forc user jackarabbit pick log4j depend juggl jdk log log4j configur compon project use jdk 1.4 log code move depend apach commons-log issu resolv also minor fix
href dav respons url-escap url href element dav respons url-escap current least one webdav client os x 's webdavf choke unescap url /home/bcm/fil space name.txt
jcr-rmi clientitem.issam throw repositoryexcept current clientitem.issam item method wrap repositoryexcept thrown path comparison runtimeexcept omit except declar method contrast api specif allow repositoryexcpt thrown suggest modifi clientitem.issam item repositoryexcept declar thrown
make possibl configur lucen analyz searchindex jackrabbit support specif lucen analyz class org.apache.lucene.analysis.analyz use searchindex lucen base indic declar xml configur file custom analyz use index languag specif content
nosuchitemstateexcept node.checkin invok within transact run code take version outsid transact everyth goe ok run insid transact fail 's stacktrac 15:41:14,434 error transactionalitemstatemanager.java:114 java.lang.except commit transact caus org.apache.jackrabbit.core.state.transactionexcept unabl commit transact 31f78b39-6422-4ec8-b41e-2571b6807b05/ http //www.jcp.org/jcr/1.0 ischeckedout caus org.apache.jackrabbit.core.state.nosuchitemstateexcept 31f78b39-6422-4ec8-b41e-2571b6807b05/ http //www.jcp.org/jcr/1.0 ischeckedout dont checkin node transact commit well node left check
incompat newer version xml-api appar newer version xml-api play nice file object pass via streamresult get around modifi jackrabbit code repositoryconfig.java:311 read transformer.transform //new domsourc templat new streamresult xml comment new domsourc templat new streamresult directory+ \\ +workspace_xml similar issu found http //forum.java.sun.com/thread.jspa forumid=34 threadid=563077 somewhat similar issu found log bug sun http //bugs.sun.com/bugdatabase/view_bug.do bug_id=5077403
fix jackrabbit groupid actual groupid use maven project.xml simpli jackrabbit howev new name polici adopt maven requir groupid mirror main packag name chang org.apache.jackrabbit probabl could good moment fix recent merg modif artifact id note new polici groupid found http //maven.apache.org/reference/repository-upload.html
lockinfo.logginout sessionimpl javadoc correspond execut code inheritdoc p/ own session log perform oper depend lock type 1 lock session-scop unlock node 2 lock open-scop remov lock token session public void loggingout sessionimpl session live sessionscop lockmgr.unlock els session.equ lockhold lockhold null 2 true locktoken remov session least within method regard angela
lock.refresh throw lock aliv spec say lock.refresh lock 's time-to-l govern timer method reset timer lock timeout expir lock 's time-to-l govern timer method effect.a lockexcept thrown session hold correct lock token lock.a repositoryexcept thrown anoth error occur jackrabbit impl inheritdoc public void refresh throw lockexcept repositoryexcept isliv throw new lockexcept lock still aliv n't leftov old version spec one misunderstand refresh bring lock back live discuss mail david g. clemm tobi peeter 25.4.2005 far know everybodi agre make sens spec adjust accord usag refresh prevent lock timeout origin mean refresh suggest jcr lock lock still aliv timeout reset method simpli anyth miss someth regard angela
move core modul subdirectori actual jackrabbit svn hold code main modul top level dir http //svn.apache.org/repos/asf/incubator/jackrabbit/trunk/ subproject subdirectori http //svn.apache.org/repos/asf/incubator/jackrabbit/trunk/contrib/ given layout possibl checkout svn main modul get trunk get ca n't work differ modul use ide n't support nest project name eclips would like request move main modul mean move file directori trunk except contrib http //svn.apache.org/repos/asf/incubator/jackrabbit/trunk/ http //svn.apache.org/repos/asf/incubator/jackrabbit/trunk/jackrabbit follow usual organ maven-bas project solv problem
jcr-rmi workspace.copi n't work swap paramet org/apache/jackrabbit/rmi/client/clientworkspace/clientworkspac
decoupl packag core.queri packag o.a.j.c.queri cyclic depend sub packag lucen sql xpath decoupl packag allow better extend queri implement addit queri languag
persist lock persist even remov lock node read post mail list realiz n't clear decid upload code reproduc error repositoryconfig conf repositoryconfig.cr /temp/repository/repository.xml /temp/repository/repositori repositori repo repositoryimpl.cr conf session 1 creat lock node session s1 repo.login new simplecredenti user1 pwd1 .tochararray node root1 s1.getrootnod node test1 root1.addnod test test1.addmixin mix lockabl s1.save test1.lock fals fals s1.logout session 2 delet node creat new one path session s2 repo.login new simplecredenti user2 pwd2 .tochararray s2.getrootnod .getnod test .remov node test2 s2.getrootnod .addnod test s2.save next line return true system.out.println test2.islock next line throw except test2.addmixin mix lockabl javax.jcr.lock.lockexcept node lock org.apache.jackrabbit.core.lock.lockmanagerimpl.checklock lockmanagerimpl.java:449 org.apache.jackrabbit.core.lock.lockmanagerimpl.checklock lockmanagerimpl.java:435 org.apache.jackrabbit.core.nodeimpl.checklock nodeimpl.java:3847 org.apache.jackrabbit.core.nodeimpl.addmixin nodeimpl.java:964 org.apache.jackrabbit.core.nodeimpl.addmixin nodeimpl.java:2420 org.apache.jackrabbit.core.locktest.main locktest.java:55
jcr-rmi xpath queri n't work under queryresult n't return rows/nod size o.a.j.rmi.server.serverqueryresult assum under nodeiter alway return number element migth return -1 case 1 afaik depend jcr impl -1 return jcr-rmi fail return queryresult e.g fail follow xpath queri 1 http //www.day.com/maven/jsr170/javadocs/jcr-1.0/javax/jcr/rangeiterator.html getsiz
jcr basevers updat base version remov version histori session s1 repo.login new simplecredenti user1 pwd1 .tochararray node root1 s1.getrootnod node test1 root1.addnod test test1.addmixin mix version s1.save system.out.println test1.getproperti jcr basevers .getvalu .getstr test1.checkin system.out.println test1.getproperti jcr basevers .getvalu .getstr test1.getversionhistori .removevers 1.0 base version n't updat system.out.println test1.getproperti jcr basevers .getvalu .getstr next line throw itemnotfoundexcept test1.getbasevers javax.jcr.itemnotfoundexcept c33bf049-c7e1-4b34-968a-63ff1b1113b0 org.apache.jackrabbit.core.itemmanager.createiteminst itemmanager.java:498 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:349 org.apache.jackrabbit.core.propertyimpl.getnod propertyimpl.java:642 org.apache.jackrabbit.core.nodeimpl.getbasevers nodeimpl.java:2960 org.apache.jackrabbit.core.removeversiontest.main removeversiontest.java:56
repositori lock file remov without clean shutdown actual repositori load .lock file creat file remov clean shutdown jackrabbit instanc kill manual delet file order load repositori also live instanc jackrabbit use problem come fact simpl presenc .lock file use indic live instanc suggest replac behavior use method use exampl eclips open workspac instanc load creat .lock file open exclus access new instanc start tri delet eventu .lock file file ca n't delet use assum anoth jackrabbit instanc run
versiontest.testgetuuid fail versiontest.testgetuuid fail due inprop invlaid successor properti checkin
cach jcr name qname map current jcr name alway pars resolv qname instanc introduc cach would increas perform also save memori well known often use jcr name would alway return qname instanc cach test common read oper show perform improv 25 test involv follow method node interfac getproperti getproperti getnam getpath islock isnodetyp getprimarynodetyp hasnod getnod attach propos implement qnameresolv pleas comment
item.isnew work correct within transact javadoc item.isnew state return code true /code new item mean exist transient storag code session /code yet save within transact code isnew /code code item /code may return code fals /code item save even code item /code persist storag transact yet commit current item.isnew return true bee save transact
workspace.copi caus 2 node workspac version histori workspace.copi creat copi version node new uuid share version given workspac one version node per version histori 4.11 spec
redefinit xml-namespac map allow follow throw except work remap xml namespac work session.setnamespaceprefix foobar http //www.w3.org/xml/1998/namespac revert map throw except session.setnamespaceprefix xml http //www.w3.org/xml/1998/namespac
registr new namespac respect exist session map consid follow start default namespac registri remap nt namespac session.setnamespaceprefix foobar http //www.jcp.org/jcr/nt/1.0 creat new namespac namespaceregistry.registernamespac foobar http //www.foo.org/bar/1.0 session use remap nt namespac ambig namespac map foobar http //www.jcp.org/jcr/nt/1.0 http //www.jcp.org/jcr/nt/1.0 foobar http //www.foo.org/bar/1.0 foobar i.e new foobar namespac hidden session either registr work automat prefix defin local session map
expos shutdown method o.a.j.jndi.bindablerepositori see http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/3680
support contain queri wildcard prefix current implement allow wildcard middl end search term follow queri work right jcr contain foo* jcr contain fo o follow jcr contain *bar alreadi thread mail list topic http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/3304
automat repositori shutdown current jackrabbit reli two mechan safe shut repositori 1 client applic invok repositoryimpl.shutdown 2 shutdown hook instal repositoryimpl run mechan problem 1 shutdown method part jcr api thus make client applic depend jackrabbit-specif featur 2 case shutdown hook proper run see issu jcr-120 jcr-233 think jcr spec think repositori session interfac somewhat similar jdbc datasourc connect interfac repositori instanc real lifecycl method session instanc clear specifi login logout step datasource.getconnect repository.login session.logout connection.clos howev jackrabbit implement defin explicit lifecycl repositoryimpl instanc caus problem especi contain environ jndi spring hard even imposs specifi shutdown mechan resourc factori like repositori instanc current solut environ use shutdown hook report solut work perfect case bound repositoryimpl lifecycl lifecycl instanti session repositoryimpl instanc could initi lock repositori first session open automat shut last session log long session proper log final garbag collector would need explicit repositoryimpl.shutdown call current behaviour pre-initi repositori shut shutdown hook could enabl configur option environ like global jndi resourc shutdown hook work well
child axi support xpath predic seem jackrabbit current support attribut axi xpath predic support child axi would nice addit
creat configur inputstream repositoryconfig possibl creat base inputstream case url right 's possibl use string inputsourc pleas updat also jca connector
webdav review usag command chain 'd like review usag command chain import/export within simpl webdav server concept command chain offer lot flexibl show implement generat drawback new mechan take advantag experi made command chain point view follow issu taken consider provid mean extend modifi import/export logic minim effort consist import/export function collect non-collect export/import complet separ interfac encourag consist increas maintain reduc error distinct collect non-collect import/export behaviour put must result non-col mkcol collect allow defin set import/export-handl given order differ handler must reli import/export complet first handler indic success class involv order complet import/export avoid huge configur file possibl avoid program flow defin outsid java code avoid duplic configur e.g resource-filt duplic code duplic logic hard maintain additon logic defin within given import/export handler howev case webdav see limit valu use extra logic addmixin checkin cover webdav method lock version-control checkin regard angela
access virtualnodetypestatemanager.virtualprovid guard virtualprovid field virtualnodetypestatemanag class dynam creat getter method two method class access field direct though risk nullpointerexcept access guard field assign yet
nullpointerexcept virtualnodetypestatemanager.nodetyperegist work custom persist manag requir addit node type regist perform reason exist node type verifi persistencemanager.init unfortun seem work virtualnodetypestatemanag prepar handl situat point time systemsess field seem still null
new cachingnamespaceresolv introduc depend commons-jackrabbit commons-collect new cachingnamespaceresolv introduc depend commons-jackrabbit commons-collect undesri
org.apache.jackrabbit.server.sessionprovid need releasesess sessionprovid releasesess method thus davsessionproviderimpl call repsession.logout davsess releas rather handl given sessionprovid
repositori lock file remov shutdown repositori lock file remov jackrabbit run window platform *error* thread-4 repositoryimpl unabl releas repositori lock repositoryimpl.java line 283 assum problem occur unix base platform allow delet file anoth process still use
workspac oper copy/clon handl refer correct refer properti creat workspace.copi workspace.clon reflect node.getrefer consequ enforc
improv jcr decor jcr-ext jcr decor jcr-ext cover necessari interfac jcr api may happen client lose decor layer access properti ve ad decor sever jcr interfac ensur decor layer never left attach patch also remov class relat decor chain found hard understand purpos class decid remov default implement want keep class less intrus ve also notic class name clash specif packag org.apache.jackrabbit.nam contain class also present jackrabbit jackrabbit-common jar file propos move respect class jcr-ext differ packag remov favor jackrabbit-common class let know commit patch thank
use separ index jcr system tree current workspac index also includ index data repositori wide data e.g version node jcr system sever drawback approach index duplic scale use lot workspac workspac put sleep activ use repositori addit index system data includ version nodetyp represent content basic data /jcr system queri issu workspac use two index execut queri workspac index system index
jcr-server contrib remov jdom depend jdom replac throught jackrabbit project except jcr-server contrib
xpath queri negat number incorrect xpath queri contain negat number return correct result e.g queri number -10 return node number properti contain valu -10 return node number valu equal 10 similar queri return wrong result doubl valu
iter remov same-nam sibl node might certain circumst throw unexpect except code fragment reproduc issu setup test root.hasnod tmp root.getnod tmp .remov session.sav node tmp root.addnod tmp int 0 4 i++ node tmp.addnod system.out.println ad a.getpath session.sav iter remov name sibl child node nodeiter ni tmp.getnod ni.hasnext node n ni.nextnod system.out.println remov n.getpath n.remov tmp.save consol output ad /tmp/a ad /tmp/a 2 ad /tmp/a 3 ad /tmp/a 4 remov /tmp/a remov /tmp/a remov javax.jcr.repositoryexcept remov root node org.apache.jackrabbit.core.itemimpl.internalremov itemimpl.java:766 org.apache.jackrabbit.core.itemimpl.remov itemimpl.java:997 org.apache.jackrabbit.core.test.main test.java:141 note msg except mislead code never tri remov root node except caus bug cachinghierarchymanag fail updat cach correct btw comment first log stmt i.e //system.out.println ad a.getpath problem n't occur anymor
abstractimportxmltest bug getunuseduri caus uri length grow quick caus test fail use orm-pm test fail use orm-pm uri exceed column size databas current implement protect string getunuseduri throw repositoryexcept set uri new hashset arrays.aslist nsp.geturi string uri test_uri int 0 uris.contain uri uri += i++ return uri run test uri grow becom someth like i=50 www.apache.org/jackrabbit/test/namespaceimporttest01234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950 propos fix protect string getunuseduri throw repositoryexcept set uri new hashset arrays.aslist nsp.geturi string uri test_uri int 0 uris.contain uri uri test_uri i++ return uri i=50 www.apache.org/jackrabbit/test/namespaceimporttest50
textfilt get call three time within checkin method want add pdf document repositori use pdftextfilt follow step session.sav node.checkin method pdftextfilter.dofilt get call 4 time session 's save method call dofilt one time normal checkin method call dofilt three time normal see sens marcel reutegg marcel.reutegg gmx.net jackrabbit-dev option 11:43 13 minut ago hi martin unfortun improv reason happen follow search index implement alway index node whole improv queri perform mean even singl properti chang parent node properti re-index unfortun checkin method set properti three separ transact caus search re-index accord node three time usual issu index implement keep buffer pend index work chang properti sever time save setproperti call wo n't actual get re-index sever time text filter behav differ extract text even though text never use eventu improv without chang search index implement soon version particip proper transact one call index node checkin quick fix could improv text filter class pars binari return reader acut use
bug textfilt classload 'm problem text filter servic built contrib/textfilt packag includ result jackrabbit-textfilters-1.0-snapshot.jar applic classpath problem textfilterservic class unabl find filter even though services/org textfilterservic file wihin meta-inf jar 's directori think must eclips rcp classload mechan fact work find littl bit strang way load servic see seem problemat scenario marcel reutegg marcel.reutegg gmx.net jackrabbit-dev option 11:01 55 minut ago hi martin similar problem queri languag solv one tell registri use specif classload seem work 'm sure also work text filter jar file might anoth classload could pleas post jira bug ll chang discoveri mechan use good old xml config
deni primarytyp work xpath follow queri work //element type jcr contain foo jcr primarytyp nt frozennod jcr primarytyp predic respect not equal oper
temporari file creat junit test automat remov
invalid groupid tm-extractor textfilt project groupid tm-extractor org.textmin textmin depend correct groupid avail ibiblio
import drop jcr xmlcharact field larg jcr xmlcharact entri xml node follow lot lot data /a translat node +- node jcr xmltext +- properti jcr xmlcharact lot lot data instead follow thing happen node jcr xmltext node child node also lose jcr xmltext node node level node also lose jcr xmltext node node come higher level correct jcr xmltext node ve use 100+k data name base64 encod pictur
remov version throw javax.jcr.referentialintegrityexcept follow thread http //www.mail-archive.com/jackrabbit-dev 40incubator.apache.org/msg03483.html tri remov version node versionhistory.removevers method throw javax.jcr.referentialintegrityexcept unabl remov version least referenced. secton 8.2.2.10 remov version specif indic version graph automat repair upon remov versionhistory.removevers take care refer fact user alter refer jcr predecessor jcr successor sinc protect properti 's exampl *updat node root1 session.getrootnod node test1 root1.addnod test test1.addmixin mix version test1.setproperti test 1 session.sav test1.checkin test1.checkout test1.setproperti test 2 session.sav test1.checkin test1.checkout test1.setproperti test 3 session.sav test1.checkin string basevers test1.getbasevers .getnam system.out.println base version name basevers versionhistori vh test1.getversionhistori versioniter vi vh.getallvers vi.hasnext version currenvers vi.nextvers string versionnam currenversion.getnam versionname.equ jcr rootvers versionname.equ basevers string propertyvalu currenversion.getnod jcr frozennod .getproperti test .getstr system.out.println remov version versionnam valu propertyvalu vh.removevers versionnam regard nicola
regist cyclic depend nodetyp work regist followin 2 nodetyp foo mybar bar bar myfoo foo nodetyperegistry.registernodetyp collect throw org.apache.jackrabbit.core.nodetype.invalidnodetypedefexcept follow node type could regist unresolv depend foo bar
nodetyperegistry.registernodetyp collect regist partial set javadoc say note case except thrown node type might nevertheless success regist problem herebi determin easili nodetyp could regist couldnt would rather prefer all-or-noth behaviour
nodetyperegistry.unregisternodetyp collect miss nodetyp depend even cyclic depend must unregist correct sequenc suggest nodetyperegistry.unregisternodetyp collect case
simplewebdavservlet avoid 404 root collect order avoid strang 404 error access root collect simpl webdav servlet thus miss workspac name request either redirect handl creat fake root correspond jsr170 repositori
reorgan xdoc websit would like propos chang websit xdoc structur current structur seem like could use brush overview architectur doc .overview ..jsr-170 level .deploy model ..applic howto ..model 1 howto ..model 2 howto ..model 3 howto .core oper ..start-up initi ..querymanag implement first step jcr api document layout download faq would propos follow instead document .first step .jcr .api document .jackrabbit architectur ..start-up initi ..querymanag implement .deploy model ..applic howto ..model 1 howto ..model 2 howto ..model 3 howto .nodetyp model *new* layout download faq also would like introduc new homepag littl bit attract content like jackrabbit news mayb featur jackrabbit applic schedul event ideal would like re-organ file structur accord navig may break bookmark search index thought
dbfilesystem mysql ddl compat pre-5.0 version packag ddl mysql index size larg 4.x version mysql sum-tot index size may reach 500 creat uniqu index schemaobjectprefix fsentry_idx schemaobjectprefix fsentri fsentry_path 745 fsentry_nam work would suggest shorten fsentry_path index valu 245 fsentry_nam alreadi set 255. creat uniqu index schemaobjectprefix fsentry_idx schemaobjectprefix fsentri fsentry_path 245 fsentry_nam
illegalstateexcept thrown consum event assum session close bee close observ still tri deliv event java 2005-11-24 22:58:41,764 observationmanag warn org.apache.jackrabbit.core.observation.observationmanagerfactori eventconsum threw except java.lang.illegalstateexcept itial java 2005-11-24 22:58:41,764 observationmanag debug org.apache.jackrabbit.core.observation.observationmanagerfactori stacktrac java java.lang.illegalstateexcept initi java org.apache.jackrabbit.core.security.simpleaccessmanager.isgr simpleaccessmanager.java:119 java org.apache.jackrabbit.core.observation.eventconsumer.consumeev eventconsumer.java:231 java org.apache.jackrabbit.core.observation.observationmanagerfactory.run observationmanagerfactory.java:161 java java.lang.thread.run thread.java:595
jcr-server illegalargumentexcept retriev datehead issu report martin perez one except access repositori webdav use web browser http //localhost:8080/webapp/repository/default first time goe well refresh page get follow except grave servlet.servic para servlet webdav lanzó excepción java.lang.illegalargumentexcept mar 29 nov 2005 22:45:48 cet org.apache.catalina.connector.request.getdatehead request.java :1791 org.apache.catalina.connector.requestfacade.getdatehead requestfacade.java:630 org.apache.jackrabbit.webdav.webdavrequestimpl.getdatehead webdavrequestimpl.java:724 org.apache.jackrabbit.server.abstractwebdavservlet.spoolresourc abstractwebdavservlet.java:363 org.apache.jackrabbit.server.abstractwebdavservlet.doget abstractwebdavservlet.java:344 org.apache.jackrabbit.j2ee.simplewebdavservlet.execut simplewebdavservlet.java:191 org.apache.jackrabbit.server.abstractwebdavservlet.servic abstractwebdavservlet.java:170 javax.servlet.http.httpservlet.servic httpservlet.java:802 org.apache.catalina.core.applicationfilterchain.internaldofilt applicationfilterchain.java:252 org.apache.catalina.core.applicationfilterchain.dofilt applicationfilterchain.java:173 org.apache.catalina.core.standardwrappervalve.invok standardwrappervalve.java:213 org.apache.catalina.core.standardcontextvalve.invok standardcontextvalve.java:178 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.java:126 org.apache.catalina.valves.errorreportvalve.invok errorreportvalve.java:105 org.apache.catalina.core.standardenginevalve.invok standardenginevalve.java:107 org.apache.catalina.connector.coyoteadapter.servic coyoteadapter.java:148 org.apache.coyote.http11.http11processor.process http11processor.java :868 org.apache.coyote.http11.http11baseprotocol http11connectionhandler.processconnect http11baseprotocol.java:663 org.apache.tomcat.util.net.pooltcpendpoint.processsocket pooltcpendpoint.java:527 org.apache.tomcat.util.net.leaderfollowerworkerthread.runit leaderfollowerworkerthread.java:80 org.apache.tomcat.util.threads.threadpool controlrunnable.run threadpool.java:684 java.lang.thread.run thread.java:595
textfilt modul patch support text extract html xml rtf file patch add text extract support form xml rtf html file uniqu depend htmlparser librari handl html text extract
jcr-server respect maxim valu timeout rfc 2518 state timeout valu timetyp second must greater 2^32-1 adjust constant accord btw send infinit timeout case maxim valu caus problem microsoft builtin client never unlock resourc
namespaceregistry.registernamespac pre uri might accident remov namespac certain situat assum follow map exist global namespaceregistri pre1 uri1 pre2 uri2 follow stmt correclti throw namespaceexcept complain exist prefix remap nsreg.registernamespac pre2 uri1 sideeffect also remov map pre1 uri1
lock two same-nam sibl unlock first appar unlock second instead execut follow test unlock first two lock same-nam sibl public void testlock throw repositoryexcept session jcrsession s1sessionimpl session .getsess node rootnod jcrsession.getrootnod node n1 rootnode.addnod path n1.addmixin mix lockabl node n2 rootnode.addnod path n2.addmixin mix lockabl jcrsession.sav n1.lock true true n2.lock true true system.out.println n1.islock n1.islock system.out.println n2.islock n2.islock asserttru n1.islock asserttru n2.islock n1.save n1.unlock system.out.println n1.islock n1.islock system.out.println n2.islock n2.islock assertfals n1.islock asserttru n2.islock result n1.islock true n2.islock true n1.islock true n2.islock fals wrong
line-separ differ caus predefinednodetypetest fail differ oper system testpredefinednodetyp test read test file file system perform string comparison may fail due line-separ differ privat void testpredefinednodetyp string name throw notexecutableexcept tri stringbuff spec new stringbuff string resourc org/apache/jackrabbit/test/api/nodetype/spec/ name.replac '- .txt reader reader new inputstreamread getclass .getclassload .getresourceasstream resourc int ch reader.read ch -1 ch reader.read spec.append char ch nodetyp type manager.getnodetyp name assertequ predefin node type name spec.tostr getnodetypespec type work file read line-separ match oper system test run howev mismatch string comparison fail fix replac line-separ string compar helper method replac line separ standard line separ around \n public string replacelinesepar string stringvalu replac \r\n window format \n unix format stringvalu stringvalue.replaceal \r\n \n replac \r mac format \n unix format stringvalu stringvalue.replaceal \r \n return stringvalu updat test method privat void testpredefinednodetyp string name throw notexecutableexcept tri stringbuff spec new stringbuff string resourc org/apache/jackrabbit/test/api/nodetype/spec/ name.replac '- .txt reader reader new inputstreamread getclass .getclassload .getresourceasstream resourc int ch reader.read ch -1 ch reader.read spec.append char ch nodetyp type manager.getnodetyp name string nodetypespecvalu replacelinesepar getnodetypespec type string specvalu replacelinesepar spec.tostr assertequ predefin node type name specvalu nodetypespecvalu
jcr-server invalid valu http auth header present dav explor wo n't log jcr webdav servlet n't even ask usernam password neither microsoft winxp webdav novel 's netdriv fussi happi log use ether compar traffic valid slide webdav login compar jcr webdav login ve found fix problem local build ve got dav explor work jcr webdav 's descript bugfix jackrabbit/contrib/jcr-server/server/src/java/org/apache/jackrabbit/server/abstractwebdavservlet.java public static final string default_authenticate_head current set basic realm=jackrabbit webdav server valid string use context breach rfc2617 2 reason 1 realm realm 2 jackrabbit webdav server quot i.e jackrabbit webdav server\ accord http //www.ietf.org/rfc/rfc2617.txt valid challeng would www-authent basic realm= wallyworld note realm capitalis wallyworld enclos quot www-authent string held elsewher java code correct word abstractwebdavservlet.java line 82 current read public static final string default_authenticate_head basic realm=jackrabbit webdav server chang read public static final string default_authenticate_head basic realm=\ jackrabbit webdav server\
session.setnamespaceprefix creat ambigu map 1 assum follow initi global map namespaceregistri prefix lowercas uri uppercas b b c c 2 local remap namespac session use follow code session.setnamespaceprefix x b session.setnamespaceprefix b c session.setnamespaceprefix c b result follow session-loc map c b b c 3 follow stmt session.setnamespaceprefix b produc ambigu map b c b c c
inconsist session state item/session.sav throw referentialintegrityexcept issu report tomasz.dabrowski cognifide.com jackrabbit dev list code fragment reproduc issu setup test case node parent root.addnod nt unstructur node child1 parent.addnod b nt unstructur child1.addmixin mix referenc node child2 parent.addnod c nt unstructur child2.setproperti ref child1 root.sav perform test tri child1.remov parent.sav catch referentialintegrityexcept rie expect sinc child1 still referenc properti ref child2 parent.remov succeed throw itemnotfoundexcept
jcr-server make auth-head configur jcr-server web-inf/web.xml section commented-out default read init-param param-nam authenticate-head /param-nam param-valu basic realm= jackrabbit webdav server /param-valu descript defin valu www-authent header /descript /init-param paramet ignor load code default string alway use instead note problem jcr-286 fix
nodetyperegistry.registernodetyp nodetypedef verifi referenc namespac regist current 's possibl regist node type use defint contain refer unregist namespac use node type content would lead unpredict result
jcr-server-webapp rmi registr unstabl registr repositori rmi registri repositorystartupservlet.registerrmi use web applic paramet inconsist may alway succeed regist repositori today registerrmi use paramet registr rmi rmi-host name host registri run rmi-port port registri run rmi-uri rmi uri use registr repository-nam name bind repositori problem rmi-port use tri creat registri make sure registri run local host rmi-uri use regist repositori use static naming.bind method rmi-uri configur uri creat rmi-host rmi-port repository-nam may creat bunch problem rmi-port rmi-uri configur match registr fail rmi-host resolv ip address registri bound registr fail encount issu tri regist repositori rmi registri use default rmi-port configur rmi-host rmi-uri configur run web app jetti
property.setvalu inputstream close stream current property.setvalu inputstream actual method set properti valu inputstream method close stream complet read might nice-to-hav situat imho standard behaviour stream consum close stream done special use case unpack content zip file zipinputstream stream content first zip file entri properti zipinputstream close jackrabbit rest file read workaround instead give origin inputstream method creat fileinputstream wrapper overwrit close method noth
jcr-server usag cache-control header deltav-method except version-control report requir cache-control header present respons turn rfc 2518 requir cache-control header present request deal header current cache-control header alway present respons specif deltav method problem may aris ie coupl mimetyp zip-fil
detail beginn hi everyon 'm one beginn tri make way jackrabbit content repositori univers besid fact exist exampl jackrabbit use includ offici web site jackrabbit miss detail simpl though essenti beginn first point follow jackrabbit sourc check built time test use simpl exampl put exampl directori begin run maven java compil second point fact help forum jackrabbit web site third point take case exampl exampl would creat new workspac configur mani troubleshoot repeat basic essenti could avoid dozen wast hour discourag mention websit wish best jackrabbit hope regard celina
jcr-server avoid xml pars request bodi miss origin report brian
miss blob.remov berkeley db persist manag org/apache/jackrabbit/core/state/bdb/berkeleydbpersistencemanager.destroy propertyst state remov binari file blobstor filesystem impl
error text filter caus index fail without warn client ve open issu track discuss http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/5086 briefli except thrown text filter log swallow jackrabbit 's way text filter signal jcr client index fail solut propos includ throw uncheck except n't allow jackrabbit maintain transact integr give filter veto power observ repositori oper depend difficulti solut eventu determin correct may suffici 1.0 document issu perhap improv warning/error log
add jcr-rmi document jackrabbit web site use org.apache.jackrabbit.rmi client server packag javadoc base jcr-rmi document page jackrabbit web site
set releas goal maven creat singl maven goal build jackrabbit releas packag goal base standard maven dist goal includ also jackrabbit-common modul want includ releas
provid option automat dispos idl workspac
repositoryconfig use setter intern compon mail list archiv moment jukka 's repli refactor config class last year n't chang way config instanc use jackrabbit general think ioc approach use setter configur jackrabbit compon would better pass config object around let compon instanti subcompon base configur n't realli want make config constructor public otherwis 'd easili backward compat issu chang way configur handl
serious perform degrad node oper node larg number child node e.g 10k child node entri
node opv=ignor remov restor jcr1.0 specif mention 8.2.11.5 ignor child node checkin n state inform c store vn restor vn child node c current n remain remov properti checkin n state inform p store vn restor vn properti p current n remain remov current implement remov ignor child
extract public api interfac o.a.j.cor o.a.j.api better document track public jcr extens compon api provid jackrabbit allow room refactor within jackrabbit core shoud move creat support api interfac new org.apache.jackrabbit.api packag least follow interfac move along support implementation-independ class persistencemanag filesystem accessmanag queryhandl textfilt possibl depend implementation-specif class prefer abstract use extra interfac also workspac node type administr method publish jackrabbit-specif extens jcr api interfac
xercesimpl miss webdav contrib project /usr/local/maven/bin/maven __ __ \/ |__ _apache__ ___ |\/| v -_ intellig project |_| |_\__ _|\_/\___|_||_| v. 1.0.2 build start multiproject instal multiproject projects-init echo gather project list start reactor process order jcrwebdavserv webdav librari jcrwebdavserv server librari jcrwebdavserv client librari jcrwebdavserv webappl gather project list jcrwebdavserv webdav librari memori 3m/4m gather project list jcrwebdavserv server librari memori 3m/4m gather project list jcrwebdavserv client librari memori 3m/4m gather project list jcrwebdavserv webappl memori 3m/4m start reactor process order jcrwebdavserv webdav librari jcrwebdavserv server librari jcrwebdavserv client librari jcrwebdavserv webappl execut multiproject install-callback jcrwebdavserv webdav librari memori 3m/4m attempt download jackrabbit-commons-1.0-snapshot.jar respons content length known artifact /org.apache.jackrabbit/jars/jackrabbit-commons-1.0-snapshot.jar n't exist remot repositori exist local multiproject goal build start multiproject install-callback echo run jar instal jcrwebdavserv webdav librari java prepare-filesystem java compil echo compil /home/jeremi/src/jackrabbit/trunk/contrib/jcr-server/webdav/target/class javac compil 109 sourc file /home/jeremi/src/jackrabbit/trunk/contrib/jcr-server/webdav/target/class /home/jeremi/src/jackrabbit/trunk/contrib/jcr-server/webdav/src/java/org/apache/jackrabbit/webdav/webdavresponseimpl.java:26 packag org.apache.xml.seri exist import org.apache.xml.serialize.outputformat /home/jeremi/src/jackrabbit/trunk/contrib/jcr-server/webdav/src/java/org/apache/jackrabbit/webdav/webdavresponseimpl.java:27 packag org.apache.xml.seri exist import org.apache.xml.serialize.xmlseri /home/jeremi/src/jackrabbit/trunk/contrib/jcr-server/webdav/src/java/org/apache/jackrabbit/webdav/webdavresponseimpl.java:149 resolv symbol symbol class outputformat locat class org.apache.jackrabbit.webdav.webdavresponseimpl outputformat format new outputformat xml utf-8 true /home/jeremi/src/jackrabbit/trunk/contrib/jcr-server/webdav/src/java/org/apache/jackrabbit/webdav/webdavresponseimpl.java:149 resolv symbol symbol class outputformat locat class org.apache.jackrabbit.webdav.webdavresponseimpl outputformat format new outputformat xml utf-8 true /home/jeremi/src/jackrabbit/trunk/contrib/jcr-server/webdav/src/java/org/apache/jackrabbit/webdav/webdavresponseimpl.java:150 resolv symbol symbol class xmlserial locat class org.apache.jackrabbit.webdav.webdavresponseimpl xmlserial serial new xmlserial format /home/jeremi/src/jackrabbit/trunk/contrib/jcr-server/webdav/src/java/org/apache/jackrabbit/webdav/webdavresponseimpl.java:150 resolv symbol symbol class xmlserial locat class org.apache.jackrabbit.webdav.webdavresponseimpl xmlserial serial new xmlserial format note input file use overrid deprec api note recompil -deprec detail 6 error build fail file /home/jeremi/.maven/cache/maven-multiproject-plugin-1.3.1/plugin.jelli element maven reactor line 217 column -1 unabl obtain goal multiproject install-callback /home/jeremi/.maven/cache/maven-java-plugin-1.5/plugin.jelly:63 -1 ant javac compil fail see compil error output detail total time 8 second finish fri jan 27 07:14:37 cet 2006
unnecessari paramet nodetyperegistry.persistcustomnodetypedef nodetypedefstor store paramet store use within method suggest delet paramet make code readabl
compactnodetypedefread add nt base declar supertyp even alreadi extend report list michael singer wrote simpl program use nt-ns-util contribut regist custom node type written cnd languag defin follow simpl custom node type test http //foo.bar/test test firstnodetyp test secondnodetyp mandatori test http //foo.bar/test test secondnodetyp test firstnodetyp test thirdnodetyp test http //foo.bar/test test thirdnodetyp test secondnodetyp test catalog string uri urn doi isbn issn test entri string m result custom_nodetypes.xml custom node supertyp nt base n't explicit defin supertyp nt base test secondnodetyp test thirdnodetyp think behavior wrong sinc method getdeclaredsupertyp class nodetyp alway return nt base plus explicit declar supertyp e.g nt folder
allow configur db persist manag jdni current db persist manag hardcod url even use singl connect drawback regard concurr perform transact would fair better allow configur db persist manag jdni refer datasourc give respons applic server concurr perform transaction high boost approach could sampl configur persistencemanag class= org.apache.jackrabbit.core.state.db.simpledbpersistencemanag param name= datasourc value= jdbc/jackrabbitd think also way pass param data sourc simpl param name= schema value= mysql param name= schemaobjectprefix value= wsp.name param name= externalblob value= fals /persistencemanag
fine grain lock shareditemstatemanag shareditemstatemanag sism current use simpl read-writ lock ensur data consist store oper persistencemanag pm effect serial think sophist lock allow concurr write pm one possibl approach transact current store data pm second transact may check set chang intersect first transact case safe store data pm fine grain lock must also respect read sism read request item current store must block store finish
support openoffic text extract hi patch hi nicola thank offer contribut openoffic textfilt 's great appreci suggest post jira improv new featur issu attach code svn patch somebodi take care assum marcel i.e review contribut provid feedback/furth instruct cheer stefan 2/2/06 nicola jouanin nicolas.jouanin gmail.com wrote hi stefan work martin perez main developp jlibrari therefor develop class extract metadata text content openoffic file hardest job class alreadi use jlibrari martin suggest use class creat new textfilt subclass textfilt contrib project download textfilt project svn creat class project tree test test class like done extractor send code want review tell commit regard nicola
fix readme.txt textfilt project fix littl mistak chang org.apache.jackrabbit.core.query..rtftextfilt org.apache.jackrabbit.core.query.rtftextfilt ad openofficetextfilt sampl configur line
replac uuid string uuid class nodeid etc.. current uuid node store string itemid itemst caus alot overhead throughout jackrabbit replac fast implement uuid class
improv doc deploy model 1 2 tomcat 5.5.x provid exampl webapp new user would find small webapp associ document walk process set model 1 model 2 deploy scheme
initi caus login except repositori repositoryimpl.java8 revis 379871 +++ repositoryimpl.java work copi -1056,7 +1056,9 authctx.login catch javax.security.auth.login.loginexcept le throw new loginexcept le.getmessag loginexcept nle new loginexcept le.getmessag nle.initcaus le throw nle creat session
mixin supertyp appear queryabl creat custom nodetyp contain mixin supertyp node custom type appear queryabl use statement form //element mixin attach relat simpl junit test compact type definit seem illustr problem
transientrepositori localfilesystem eventu caus repositori data store path '/ 'm use transitoryrepositori unit test repositori 's file system specifi filesystem class= org.apache.jackrabbit.core.fs.local.localfilesystem param name= path value= rep.hom /repositori /filesystem notic today run unit test jackrabbit creat four directori root hard drive meta namespac nodetyp data track problem fact localfilesystem close set root null invalid state use transitoryrepositori invalid state never discov localfilesystem object releas re-initi simpli use creat basedfilesystem object repositoryimpl call basedfilesystem defer localfilesystem object null root insid localfilesystem call java 's io.fil constructor null parent paramet caus file fall back singl argument constructor see path /meta happili creat file root disk 'm sure best solut thought ve n't set root properti null close localfilesystem make repositoryconfig re-init filesystem variabl access n't cach repositoryconfig transitoryrepositori might also requir new constructor take class-path resourc repositori configur file
nodereferencesid.equ symetr nodereferencesid.equ symetr equal test nodeid code exampl uuid uuid uuid.randomuuid nodeid id new nodeid uuid nodereferencesid refid new nodereferencesid uuid id.equ refid return true refid.equ id return fals nodereferencesid decoul itemid hierarchi class noderefer alreadi extend nodest make perfect sens appli identifi noderefer attach patch nodereferencesid also requir minor chang persist manag
includ readm file generat jar file incub would prefer incub notic includ binari jar file releas simpl maven configur chang get readme.txt file includ binari jar
repositoryconfig instanc reus pass repositoryimpl constructor repositoryconfig *config class maintain state apart pars configur inform specif instanti filesystem implement base configur make config consum hard control lifecycl filesystem instanc need close file system repositori shutdown follow code illustr issu repositoryconfig repconf repositoryconfig.cr configfil rephomedir repositoryimpl rep repositoryimpl.cr repconf rep.shutdown rep repositoryimpl.cr repconf repconfig et al contain refer filesystem object close previous rep.shutdown call
upgrad maven 2 interest migrat maven2 ad option maven 2 build script full maven 2 pom.xml main jackrabbit jar xpath/javacc stuff previous done maven.xml pretti painful reproduc maven2 attach pom exact reproduc m1 build use maven2 javacc plugin coupl antrun execut test configur yet complet think lot better reproduc previous behaviour init test run first without custom mayb use singl junit test suit setup task also custom packag goal ad maven.xml esili done m2 use assembl plugin yet reproduc interest also provid pom contribut project easi complex pom main one
nodetypedef depend supertyp order current nodetypedef.setsupertyp method simpli set given qname array supertyp qname array defin node type thus preserv whatev order node type parser ultim node type definit file use caus problem exampl equal method use order-sensit arrays.equ method check equal supertyp qname array current implement therefor consid node type definit b c c b equal even though realli consid problem affect also child node properti definit proper fix issu would probabl use set store handl inform
loaduri compil error maven 1.0.2 report mail list ashley marten c \apache\jackrabbit-contrib\nt-ns-util maven __ __ \/ |__ _apache__ ___ |\/| v -_ intellig project |_| |_\__ _|\_/\___|_||_| v. 1.0.2 attempt download jackrabbit-1.0-snapshot.jar artifact /org.apache.jackrabbit/jars/jackrabbit-1.0-snapshot.jar n't exist remot repositori exist local attempt download jackrabbit-commons-1.0-snapshot.jar artifact /org.apache.jackrabbit/jars/jackrabbit-commons-1.0-snapshot.jar n't exist remot repositori exist local build start java prepare-filesystem java compil echo compil c \apache\jackrabbit-contrib\nt-ns-util/target/class javac compil 1 sourc file c \apache\jackrabbit-contrib\nt-ns-util\target\class c \apache\jackrabbit-contrib\nt-ns-util\src\main\java\org\apache\jackrabbit\util\nodetype\schemaconverter.java:71 resolv symbol symbol method loaduri java.lang.str locat class org.apache.xerces.impl.xs.xmlschemaload xsmodel xsmodel loader.loaduri uri 1 error build fail file c \document settings\ashleym\.maven\cache\maven-java-plugin-1.5\plugin.jelli element ant javac line 63 column 48 compil fail see compil error output detail total time 8 second finish mon jan 02 10:40:47 est 2006 peeter piegaz found problem abl build without problem use maven-1.1-beta-2 jdk 1.4.2 howev sound like case maven set on-build classpath see older xerces-2.4.0.jar new xerxesimpl.-2.6.2.jar maven seem download old xerces-2.4.0 repositori intern use code use newer xerxesimpl-2.6.2.jar old jar overlap class-wis new one new one implement addit loaduri method among other sure exact maven build process look wrong jar almost certain
deadlock caus version oper within transact deadlock occur run simpl test tri checkout/checkin node within transact concurr 2 thread find enclos thread dump log simpl java program 'm use usertransact implement jackrabbit test suit regard przemo pakulski www.cognifide.com full thread dump java hotspot tm client vm 1.4.2_08-b03 mix mode thread-5 prio=5 tid=0x03054c48 nid=0x180c object.wait 355f000..355fd8c java.lang.object.wait nativ method wait 0x1148ef20 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock java.lang.object.wait object.java:429 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock.acquir unknown sourc lock 0x1148ef20 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock org.apache.jackrabbit.core.state.shareditemstatemanager.acquirewritelock shareditemstatemanager.java:1137 org.apache.jackrabbit.core.state.shareditemstatemanager.access 200 shareditemstatemanager.java:110 org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:456 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:651 org.apache.jackrabbit.core.state.xaitemstatemanager.prepar xaitemstatemanager.java:150 org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:128 lock 0x11565ac8 org.apache.jackrabbit.core.transactioncontext org.apache.jackrabbit.core.xasessionimpl.prepar xasessionimpl.java:300 com.oyster.mom.contentserver.jcr.transaction.jackrabbitusertransaction.commit jackrabbitusertransaction.java:102 com.oyster.mom.contentserver.jcr.transaction.jrtestdeadlock.run jrtestdeadlock.java:97 thread-4 prio=5 tid=0x0303b348 nid=0x9d0 object.wait 351f000..351fd8c java.lang.object.wait nativ method wait 0x1148ef20 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock java.lang.object.wait object.java:429 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock.acquir unknown sourc lock 0x1148ef20 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock org.apache.jackrabbit.core.state.shareditemstatemanager.acquirewritelock shareditemstatemanager.java:1137 org.apache.jackrabbit.core.state.shareditemstatemanager.access 200 shareditemstatemanager.java:110 org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:456 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:651 org.apache.jackrabbit.core.state.xaitemstatemanager.prepar xaitemstatemanager.java:150 org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:128 lock 0x1156f558 org.apache.jackrabbit.core.transactioncontext org.apache.jackrabbit.core.xasessionimpl.prepar xasessionimpl.java:300 com.oyster.mom.contentserver.jcr.transaction.jackrabbitusertransaction.commit jackrabbitusertransaction.java:102 com.oyster.mom.contentserver.jcr.transaction.jrtestdeadlock.run jrtestdeadlock.java:97 indexmerg daemon prio=5 tid=0x030388b8 nid=0x1858 object.wait 34df000..34dfd8c java.lang.object.wait nativ method wait 0x114fd280 org.apache.commons.collections.buffer.blockingbuff java.lang.object.wait object.java:429 org.apache.commons.collections.buffer.blockingbuffer.remov blockingbuffer.java:107 lock 0x114fd280 org.apache.commons.collections.buffer.blockingbuff org.apache.jackrabbit.core.query.lucene.indexmerger.run indexmerger.java:235 thread-2 daemon prio=5 tid=0x0303a230 nid=0xe4c object.wait 349f000..349fd8c java.lang.object.wait nativ method wait 0x114fd2e0 java.util.taskqueu java.util.timerthread.mainloop timer.java:429 lock 0x114fd2e0 java.util.taskqueu java.util.timerthread.run timer.java:382 thread-1 daemon prio=5 tid=0x0301b7a0 nid=0x1a00 object.wait 345f000..345fd8c java.lang.object.wait nativ method wait 0x114f9058 java.util.taskqueu java.lang.object.wait object.java:429 java.util.timerthread.mainloop timer.java:403 lock 0x114f9058 java.util.taskqueu java.util.timerthread.run timer.java:382 observationmanag daemon prio=5 tid=0x02ef6c50 nid=0x10d8 object.wait 341f000..341fd8c java.lang.object.wait nativ method wait 0x114f38e0 org.apache.commons.collections.buffer.blockingbuff java.lang.object.wait object.java:429 org.apache.commons.collections.buffer.blockingbuffer.remov blockingbuffer.java:107 lock 0x114f38e0 org.apache.commons.collections.buffer.blockingbuff org.apache.jackrabbit.core.observation.observationmanagerfactory.run observationmanagerfactory.java:155 java.lang.thread.run thread.java:534 signal dispatch daemon prio=10 tid=0x00a05590 nid=0x1914 wait condit 0..0 final daemon prio=9 tid=0x00a027f8 nid=0x17a4 object.wait 2c9f000..2c9fd8c java.lang.object.wait nativ method wait 0x113db118 java.lang.ref.referencequeu lock java.lang.ref.referencequeue.remov referencequeue.java:111 lock 0x113db118 java.lang.ref.referencequeu lock java.lang.ref.referencequeue.remov referencequeue.java:127 java.lang.ref.fin finalizerthread.run finalizer.java:159 refer handler daemon prio=10 tid=0x00a01478 nid=0x16d4 object.wait 2c5f000..2c5fd8c java.lang.object.wait nativ method wait 0x113db180 java.lang.ref.refer lock java.lang.object.wait object.java:429 java.lang.ref.refer referencehandler.run reference.java:115 lock 0x113db180 java.lang.ref.refer lock main prio=5 tid=0x0003e6f0 nid=0x1470 object.wait 7f000..7fc38 java.lang.object.wait nativ method wait 0x11524f10 com.oyster.mom.contentserver.jcr.transaction.jrtestdeadlock java.lang.thread.join thread.java:1001 lock 0x11524f10 com.oyster.mom.contentserver.jcr.transaction.jrtestdeadlock java.lang.thread.join thread.java:1054 com.oyster.mom.contentserver.jcr.transaction.jrtestdeadlock.main jrtestdeadlock.java:33 vm thread prio=5 tid=0x00a42730 nid=0x17d0 runnabl vm period task thread prio=10 tid=0x00a45540 nid=0x1928 wait condit suspend checker thread prio=10 tid=0x00a04af8 nid=0x17ac runnabl import javax.jcr.nod import javax.jcr.repositoryexcept import javax.jcr.sess import javax.jcr.simplecredenti import org.apache.jackrabbit.core.repositoryimpl import org.apache.jackrabbit.core.config.repositoryconfig public class jrtestdeadlock extend thread privat static final org.apache.commons.logging.log log org.apache.commons.logging.logfactory.getlog jrtestdeadlock.class public static string repository_hom d /repo/jackrabbit/ public static string repository_config repository_hom repository.xml public static void main string arg throw except jrtestdeadlock test new jrtestdeadlock -1 test.startup jrtestdeadlock test new jrtestdeadlock 2 int 0 tests.length i++ jrtestdeadlock x new jrtestdeadlock x.start test x int 0 tests.length i++ test .join test.shutdown privat static repositoryimpl repositori privat int id public jrtestdeadlock int this.id public void startup throw except system.setproperti java.security.auth.login.config c /jaas.config repositoryconfig config repositoryconfig.cr repository_config repository_hom repositori repositoryimpl.cr config session session repository.login new simplecredenti admin admin .tochararray node rootnod session.getrootnod rootnode.hasnod folder node folder rootnode.addnod folder folder.addmixin mix version folder.addmixin mix lockabl rootnode.sav session.logout public void shutdown throw repositoryexcept repository.shutdown public node getfold session session throw repositoryexcept return session.getrootnod .getnod folder public void run tri session session repository.login new simplecredenti admin admin .tochararray int 0 100 i++ log.error start id id i= boolean success fals jackrabbitusertransact ut new jackrabbitusertransact session tri ut.begin node folder getfold session folder.checkout folder.checkin success true log.info success id id i= catch except e log.warn fail id i= e final tri success ut.commit els ut.rollback catch except e log.fat e session.logout catch repositoryexcept e e.printstacktrac 13:46 error jrtestdeadlock.run jrtestdeadlock.java:76 start id:0 i=0 13:46 error jrtestdeadlock.run jrtestdeadlock.java:76 start id:1 i=0 13:46 info jrtestdeadlock.run jrtestdeadlock.java:89 success id:0 i=0 13:46 info jrtestdeadlock.run jrtestdeadlock.java:89 success id:1 i=0 13:46 error org.apache.jackrabbit.core.state.xaitemstatemanager.prepar xaitemstatemanager.java:156 org.apache.jackrabbit.core.state.staleitemstateexcept 233e656f-79f8-414d-9e37-3fce865b492d/ http //www.jcp.org/jcr/1.0 ischeckedout modifi extern 13:46 fatal jrtestdeadlock.run jrtestdeadlock.java:104 javax.transaction.rollbackexcept transact roll back xa_err=104 13:46 error jrtestdeadlock.run jrtestdeadlock.java:76 start id:1 i=1 13:46 warn jrtestdeadlock.run jrtestdeadlock.java:92 fail:1 i=1 ax.jcr.invaliditemstateexcept f83a830b-abbf-4ab2-8625-b9e2c4802316 item exist anymor org.apache.jackrabbit.core.version.xaversion.sanitycheck xaversion.java:81 org.apache.jackrabbit.core.version.xaversion.getinternalvers xaversion.java:70 org.apache.jackrabbit.core.version.abstractversion.getuuid abstractversion.java:107 org.apache.jackrabbit.core.nodeimpl.checkout nodeimpl.java:2759 jrtestdeadlock.run jrtestdeadlock.java:85 13:46 error jrtestdeadlock.run jrtestdeadlock.java:76 start id:1 i=2 13:46 info jrtestdeadlock.run jrtestdeadlock.java:89 success id:1 i=2 13:51 warn org.apache.jackrabbit.core.transactioncontext.run transactioncontext.java:239 transact roll back timeout expir
concurr lock oper fail prepar simpl test tri lock/unlock singl node mani thread expect lockexcept thrown thread occur node alreadi lock thread get incorrect effect sporad look like thread manag acquir lock ca n't releas follow except thrown javax.jcr.invaliditemstateexcept 7c198c7b-76c8-47c8-96a8-d9dfefd4b387 modifi extern org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1193 org.apache.jackrabbit.core.nodeimpl.unlock nodeimpl.java:3790 jrtestconcurrentlocks.run jrtestconcurrentlocks.java:95 addit warn appear log org.apache.jackrabbit.core.lock.lockmanagerimpl lockinfo.loggingout lockmanagerimpl.java:892 unabl unlock session-scop lock node 7c198c7b-76c8-47c8-96a8-d9dfefd4b387-w unabl unlock node node pend chang /folder consequ node left lock state look like bug one thread lock node success none modifi thread releas lock without problem n't lock oper atom przemo packag com.oyster.mom.contentserver.jcr.transact import javax.jcr.nod import javax.jcr.repositoryexcept import javax.jcr.sess import javax.jcr.simplecredenti import javax.jcr.lock.lockexcept import org.apache.jackrabbit.core.repositoryimpl import org.apache.jackrabbit.core.config.repositoryconfig public class jrtestconcurrentlock extend thread privat static final org.apache.commons.logging.log log org.apache.commons.logging.logfactory.getlog jrtestconcurrentlocks.class public static string repository_hom d /repo/jackrabbit/ public static string repository_config repository_hom repository.xml public static void main string arg throw except jrtestconcurrentlock test new jrtestconcurrentlock -1 test.startup jrtestconcurrentlock test new jrtestconcurrentlock 3 int 0 tests.length i++ jrtestconcurrentlock x new jrtestconcurrentlock x.setsess repository.login new simplecredenti admin admin .tochararray x.start test x int 0 tests.length i++ test .join test .getsess .logout test.shutdown privat static repositoryimpl repositori privat int id privat session session public void setsess session session this.sess session public session getsess return this.sess public jrtestconcurrentlock int this.id public void startup throw except system.setproperti java.security.auth.login.config c /jaas.config repositoryconfig config repositoryconfig.cr repository_config repository_hom repositori repositoryimpl.cr config session session repository.login new simplecredenti admin admin .tochararray node rootnod session.getrootnod rootnode.hasnod folder node folder rootnode.addnod folder folder.addmixin mix version folder.addmixin mix lockabl rootnode.sav session.logout public void shutdown throw repositoryexcept repository.shutdown public node getfold session session throw repositoryexcept return session.getrootnod .getnod folder public void run int 0 10 i++ log.info start id id i= tri session.refresh fals node folder getfold session folder.lock fals true folder.unlock log.info success id id i= catch lockexcept e log.info fail id i= catch except e log.warn error id i= e 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=0 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=0 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=0 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:0 i=0 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=1 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:0 i=1 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:1 i=0 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=1 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:1 i=1 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=2 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:1 i=2 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=3 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:1 i=3 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=4 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=2 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:0 i=2 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=3 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:0 i=3 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=4 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:0 i=4 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=5 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:97 success id:1 i=4 15:46:17 warn jrtestconcurrentlocks.run jrtestconcurrentlocks.java:103 error:0 i=5 javax.jcr.itemnotfoundexcept 7c198c7b-76c8-47c8-96a8-d9dfefd4b387/ http //www.jcp.org/jcr/1.0 lockown org.apache.jackrabbit.core.itemmanager.createiteminst itemmanager.java:463 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:319 org.apache.jackrabbit.core.nodeimpl.getproperti nodeimpl.java:1436 org.apache.jackrabbit.core.nodeimpl.getorcreateproperti nodeimpl.java:428 org.apache.jackrabbit.core.nodeimpl.internalsetproperti nodeimpl.java:1267 org.apache.jackrabbit.core.nodeimpl.lock nodeimpl.java:3740 jrtestconcurrentlocks.run jrtestconcurrentlocks.java:94 15:46:17 warn jrtestconcurrentlocks.run jrtestconcurrentlocks.java:103 error:2 i=0 javax.jcr.invaliditemstateexcept 7c198c7b-76c8-47c8-96a8-d9dfefd4b387 modifi extern org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1193 org.apache.jackrabbit.core.nodeimpl.unlock nodeimpl.java:3790 jrtestconcurrentlocks.run jrtestconcurrentlocks.java:95 15:46:17 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=5 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=6 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=1 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:1 i=5 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:0 i=6 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:2 i=1 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=6 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=7 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=2 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:1 i=6 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:0 i=7 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:2 i=2 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=7 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=8 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=3 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:1 i=7 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:0 i=8 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:2 i=3 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=8 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:0 i=9 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=4 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:1 i=8 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:0 i=9 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:2 i=4 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:1 i=9 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=5 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:2 i=5 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=6 15:46:18 warn jrtestconcurrentlocks.run jrtestconcurrentlocks.java:103 error:1 i=9 javax.jcr.invaliditemstateexcept /folder node save modifi extern org.apache.jackrabbit.core.nodeimpl.makepersist nodeimpl.java:908 org.apache.jackrabbit.core.itemimpl.persisttransientitem itemimpl.java:682 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1173 org.apache.jackrabbit.core.nodeimpl.lock nodeimpl.java:3744 jrtestconcurrentlocks.run jrtestconcurrentlocks.java:94 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:2 i=6 15:46:18 warn org.apache.jackrabbit.core.lock.lockmanagerimpl lockinfo.loggingout lockmanagerimpl.java:892 unabl unlock session-scop lock node 7c198c7b-76c8-47c8-96a8-d9dfefd4b387-w unabl unlock node node pend chang /folder 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=7 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:2 i=7 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=8 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:2 i=8 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:88 start id:2 i=9 15:46:18 info jrtestconcurrentlocks.run jrtestconcurrentlocks.java:100 fail:2 i=9
jcr-server remov jcr deped dav-librari
queri builder jcr deref problem ca n't add predic jcr deref add predic like properti valu jcr deref function queri builder throw invalidqueryexcept unsupport locat jcr deref exampl queri //element nt categori member /jcr deref member '* property='valu invalid valid
jcr-server valuesproperti miss properti type inform jcr specif dav-properti valuesproperti reveal propertytyp valu therefor lost de serial solut pass type jcr-valu attribut xml-element contain valu
jcr-server registr reporttyp fail registr reporttyp use reporttype.regist string localnam namespac namespac class reportclass reporttyp fail due wrong evalu interfac implement given class object
jcr-server davresourc getdavsess miss instead davresourc getdavsess method defin individu deriv interfac
jcr-server report init limit report interfac deltav compliant resourc although report featur defin rfc 3253 requir deltav compliant resourc limit deltav see rfc 3744 webdav access control protocol addit usag report function order keep report interfac open later usag resourc provid support rfc 3744 init method signatur could modifi follow report init davresourc reportinfo instead report init deltavresourc reportinfo
jcr-server deltavresourc list mkworkspac method constant rfc 3253 requir report support deltav compliant resourc method constant therefor list report
jcr-server davexcept n't allow specifi except caus davexcept extend except allow specifi except caus constructor ad separ constructor take status code plus throwabl would provid possibl specifi origin caus
jcr-server itemdefinitionimpl.toxml throw npe root node itemdefinitionimpl.toxml throw npe root node due miss assert regard declar nodetyp
jcr-server pars nodetypeproperti compliant definit creat new nodetypeproperti exist davproperti fail sinc assumpt made compliant definit nodetyp name alway enclos nodetypenam element b nodetyp properti may empti thus contain nodetyp element
add automat default configur provid simpl way start jackrabbit repositori default configur current first hop document expos much configur detail realli friend first-tim user 'd like provid default transientrepositori constructor look repository.xml configur file repositori repositori home directori either exist automat creat use default set way repositori setup would boil repositori repositori new transientrepositori ad featur 'm plan support system properti org.apache.jackrabbit.repository.conf org.apache.jackrabbit.repository.hom overrid default improv would make easier write set hello world -type applic thus help interest peopl tri jackrabbit featur also make easier provid standard templat test class exhibit error condit like import javax.jcr import org.apache.jackrabbit.core.transientrepositori public exampl public static void main string arg tri repositori repositori new transientrepositori session session repository.login tri code final session.clos catch except e e.printstacktrac 'm target inclus 1.0 affect none exist code probabl help expect number new user go see 1.0
new node type namespac automat regist user current need explicit regist new namespac use new node type regist node type see exampl problem mail list http //mail-archives.apache.org/mod_mbox/incubator-jackrabbit-dev/200603.mbox/ 3c1142091097.13136.0.camel localhost.localdomain 3e node type registr chang new namespac automat regist
default anonym access credenti given even though jcr-348 made easier start jackrabbit repositori default configur user still need take care jaa configur would user-friend log warn default superus access rather throw loginexcept jaa configur behaviour limit default credenti login session.login null credenti possibl disabl configur option could even behaviour disabl default enabl configur file use jcr-348 automat configur case secur default design principl think case benefit easier setup outweight secur drawback especi coupl restrict clear document note insecur default updat mention stefan jaa configur issu problem handl null credenti proper altern superus access would default anonym access credenti given
upgrad lucen 2.0 would like upgrad lucen 1.9.1 jar conflict integr project liferay portal use v 1.9.1
transientrepositori shutdown first login fail transientrepository.login method initi under repositori first call initi repositori previous shut bug n't shut initi repositori login fail applic decid exit otherwis start anoth session repositori remain initi state activ session issu fix proper handl login failur transientrepository.login method
use pre-gener version xpath.jjt workaround describ jcr-46 still caus extra step java 5 user 'd like solv issu includ pre-gener version xpath.jjt file normal sourc file avoid need xsl transform normal build thus remov need extra step ll creat patch unless anyon object 'm plan includ 1.0 branch well svn trunk
extract jdbc connect init intermedi step allow pm easili configur jndi would extract connect init allow system integr subclass/wrap dynam configur custom simpl pm org.apache.jackrabbit.core.state.db.simpledbpersistencemanag replac line 296-298 initconnect add initi jdbc connect protect void initconnect throw except class.fornam driver con drivermanager.getconnect url user password con.setautocommit fals
replac licens header new polici text need replac licens header new templat replac copyright licens line -begin propos sourc file header licens apach softwar foundat asf one contributor licens agreement asf licens file apach licens version 2.0 licens may use file except complianc licens may obtain copi licens http //www.apache.org/licenses/license-2.0 unless requir applic law agre write softwar distribut licens distribut basi without warranti condit kind either express impli see licens specif languag govern permiss limit licens -end propos sourc file header copyright line remov file due legal advic asf attorney replac statement copyright owner licens asf
move jackrabbit.apache.org jackrabbit move http //jackrabbit.apache.org/ number infrastructur task need done roy also need chang document site point new url mail list address done anyon exist mail list move jackrabbit-dev incub dev jackrabbit.apache.org jackrabbit-commit incub commit jackrabbit.apache.org add user jackrabbit.apache.org
add new top-level project build document current building.xml file mention jackrabbit contrib top level jackrabbit project push toward 1.0 sever addit project level jackrabbit contrib building.xml page updat mention link also provid link subvers repositori label someth like current jackrabbit project list even though link locat link repositori label help reader know 's look up-to-d list jackrabbit project
jca project test assum window path org.apache.jackrabbit.jca packag top-level jca directori unit test assum window environ fix work environ best solut may use test repositori configur file current directori follow start test case failur got run maco x. testsuit org.apache.jackrabbit.jca.test.connectionfactorytest test run 3 failur 0 error 3 time elaps 0.778 sec testcas testalloc org.apache.jackrabbit.jca.test.connectionfactorytest caus error org.apache.jackrabbit.core.config.configurationexcept configur file could read /users/mark/documents/school/whisper/jackrabbit/jackrabbit-trunk/jca/c \dev\jcr\repository.xml n o file directori /users/mark/documents/school/whisper/jackrabbit/jackrabbit-trunk/jca/c \dev\jcr\repository.xml file directori org.apache.jackrabbit.core.config.configurationexcept configur file could read /users/mark/documents/school/whisper/jackrabbit/jackrabbit-trunk/jca/c \dev\jcr\repository.xml n o file directori /users/mark/documents/school/whisper/jackrabbit/jackrabbit-trunk/jca/c \dev\jcr\repository.xml file directori org.apache.jackrabbit.jca.jcamanagedconnectionfactory.createrepositori jcamanagedconnectionfactory.java:278 org.apache.jackrabbit.jca.jcamanagedconnectionfactory.createconnectionfactori jcamanagedconnectionfactory.java:116 org.apache.jackrabbit.jca.jcamanagedconnectionfactory.createconnectionfactori jcamanagedconnectionfactory.java:108 org.apache.jackrabbit.jca.test.connectionfactorytest.testalloc connectionfactorytest.java:43 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method
restor sometim throw error miss tmp file caus javax.jcr.repositoryexcept file back binari valu found /server/apache-tomcat-5.5.15/temp/bin4435.tmp file directori /server/apache-tomcat-5.5.15/temp/bin4435.tmp file directori org.apache.jackrabbit.core.value.blobfilevalue.getstream blobfilevalue.java:454 org.apache.jackrabbit.core.state.util.serializer.seri serializer.java:197
node.setproperti string implement accord specif illustr issu assum follow properti definit name sometext type string non-mandatori non-autocr follow call would throw constraintviolationexcept properti n't exist yet node.setproperti sometext 12345 rule use find applic definit case strict
web client/webdav fail unescap workspac name seem tri access workspac web client/webdav workspac special character like space name like workspac web cliente/webdav abl load probablli thing unscap workspac name
allow o.a.j.jca.jcarepositorymanag load repositori configur classpath current implement o.a.j.jca.jcarepositorymanag abl load configur file file system would use allow configur load classpath also
remov depend xerc classload certain j2ee server play well xerc requir
add support simpl test case discuss mail list 'd like add simpl org.apache.jackrabbit.core.testrepositori helper class could use simpl unit test templat
illegalnameexcept import document view two mixin report manuel simoni dev mail list node two mixin type s1nt comment s1nt author export document view session.exportdocumentview session.getrootnod .getpath outputstream fals fals tri import document session.getworkspac .importxml session.getrootnod .getpath inputstream importuuidbehavior.import_uuid_collision_throw get except java.lang.except javax.jcr.invalidserializeddataexcept fail pars xml stream illeg jcr mixintyp valu s1nt comment s1nt author illeg jcr mixintyp valu s1nt comment s1nt author at.systemone.wiki.webservice.importcontrollerimpl.importdocumentview importcontrollerimpl.java:30 at.systemone.wiki.webservice.importcontrollertest.testimport importcontrollertest.java:12 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 junit.framework.testcase.runtest testcase.java:154 junit.framework.testcase.runbar testcase.java:127 junit.framework.testresult 1.protect testresult.java:106 junit.framework.testresult.runprotect testresult.java:124 junit.framework.testresult.run testresult.java:109 junit.framework.testcase.run testcase.java:118 junit.framework.testsuite.runtest testsuite.java:208 junit.framework.testsuite.run testsuite.java:203 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:478 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:344 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196 caus javax.jcr.invalidserializeddataexcept fail pars xml stream illeg jcr mixintyp valu s1nt comment s1nt author illeg jcr mixintyp valu s1nt comment s1nt author org.apache.jackrabbit.core.workspaceimpl.importxml workspaceimpl.java:718 at.systemone.wiki.webservice.importcontrollerimpl.importdocumentview importcontrollerimpl.java:27 16 caus org.apache.jackrabbit.name.illegalnameexcept s1nt comment s1nt author valid name org.apache.jackrabbit.core.xml.docviewimporthandler.startel docviewimporthandler.java:217 org.apache.jackrabbit.core.xml.importhandler.startel importhandler.java:234 org.apache.xerces.parsers.abstractsaxparser.startel unknown sourc org.apache.xerces.impl.xmlnsdocumentscannerimpl.scanstartel unknown sourc org.apache.xerces.impl.xmldocumentfragmentscannerimpl fragmentcontentdispatcher.dispatch unknown sourc org.apache.xerces.impl.xmldocumentfragmentscannerimpl.scandocu unknown sourc org.apache.xerces.parsers.xml11configuration.pars unknown sourc org.apache.xerces.parsers.xml11configuration.pars unknown sourc org.apache.xerces.parsers.xmlparser.pars unknown sourc org.apache.xerces.parsers.abstractsaxparser.pars unknown sourc org.apache.jackrabbit.core.workspaceimpl.importxml workspaceimpl.java:709 17 think import choke node first node two mixin type xml file s1 comment jcr primarytype= s1nt page jcr mixintypes= s1nt comment s1nt author jcr uuid= 3ff1022b-3e21-4e44-9a2e-ae3b67e833e5 jcr ischeckedout= true jcr versionhistory= 17186f20-dab2-42d8-8f66-0895472debea jcr frozenmixintypes= s1nt comment s1nt author jcr frozenuuid= 3ff1022b-3e21-4e44-9a2e-ae3b67e833e5 s1 author= 8db75ec7-eee8-44d8-aeb2-fbd116ea7e01 s1 title= jcr predecessors= fb9eefb2-e2f8-414c-be94-185111a89be9 s1 creationdate= 2005-09-07t17:59:12.589z s1 editor= 7b778c51-d8d8-474b-a621-f5759fc24cd0 s1 orphanedpage= fals s1 modificationdate= 2006-03-18t17:55:49.838z s1 lowercasetitle= jcr baseversion= fb9eefb2-e2f8-414c-be94-185111a89be9 s1 currenteditor= 8db75ec7-eee8-44d8-aeb2-fbd116ea7e01 jcr frozenprimarytype= s1nt page issu relat jcr-325 lot easier fix special case
searchindex class contain garbl string somehow switch sl4j also string liter searchindex class got garbl see http //svn.apache.org/viewcvs.cgi/incubator/jackrabbit/trunk/jackrabbit/src/main/java/org/apache/jackrabbit/core/query/lucene/searchindex.java rev=385280 r1=378221 r2=385280 sinc low risk chang would like get includ 1.0 branch
itemstateexcept concurr commit transact version oper see test jcr-335 org.apache.jackrabbit.core.state.itemstateexcept unabl resolv path item 69d80165-7ef5-4b6b-8aa9-be9c9be1f994 org.apache.jackrabbit.core.observation.eventstatecollection.getpath eventstatecollection.java:525 org.apache.jackrabbit.core.observation.eventstatecollection.createeventst eventstatecollection.java:377 org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:547 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:668 org.apache.jackrabbit.core.state.xaitemstatemanager.prepar xaitemstatemanager.java:151 org.apache.jackrabbit.core.version.xaversionmanager.prepar xaversionmanager.java:431 org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:129 org.apache.jackrabbit.core.xasessionimpl.prepar xasessionimpl.java:309 test.jcrusertransaction.commit jcrusertransaction.java:74 org.apache.jackrabbit.jrtestdeadlock.run jrtestdeadlock.java:110 caus javax.jcr.itemnotfoundexcept fail build path 69d80165-7ef5-4b6b-8aa9-be9c9be1f994 a0ecd4b0-a442-4b1e-a2f6-51441f40d452 child entri 69d80165-7ef5-4b6b-8aa9-be9c9be1f994 org.apache.jackrabbit.core.hierarchymanagerimpl.buildpath hierarchymanagerimpl.java:308 org.apache.jackrabbit.core.hierarchymanagerimpl.getpath hierarchymanagerimpl.java:357 org.apache.jackrabbit.core.observation.eventstatecollection.getpath eventstatecollection.java:520 9
consist refer apach jackrabbit doc site need consist refer project product apach jackrabbit site doc except context obvious
refer incub need replac new locat follow file 1.0 branch refer incub one way anoth may benign ./contrib/bdb-persistence/project.properti ./contrib/bdb-persistence/project.xml ./contrib/bdb-persistence/readme.txt ./contrib/classloader/project.properti ./contrib/classloader/project.xml ./contrib/examples/project.xml ./contrib/extension-framework/project.properti ./contrib/extension-framework/project.xml ./contrib/jcr-commands/jmeter-chain/project.properti ./contrib/jcr-commands/project.properti ./contrib/jcr-commands/xdocs/navigation.xml ./contrib/jcr-ext/project.xml ./contrib/jcrtaglib/project.properti ./contrib/orm-persistence/project.properti ./contrib/orm-persistence/project.xml ./jackrabbit/applications/test/cnd-reader-test-input.cnd ./jackrabbit/project.properti ./jackrabbit/project.xml ./jackrabbit/readme.txt ./jackrabbit/src/site/fml/faq.fml ./jackrabbit/src/site/xdoc/doc/arch/overview/jcrlevels.xml ./jackrabbit/src/site/xdoc/doc/building.xml ./jackrabbit/src/site/xdoc/doc/config.xml ./jackrabbit/src/site/xdoc/downloads.xml ./jackrabbit/src/site/xdoc/index.xml ./jackrabbit/src/site/xdoc/tasks.xml ./jackrabbit/src/test/java/org/apache/jackrabbit/core/nodetype/compact/compactnodetypedeftest.java ./jca/project.properti ./jca/project.xml ./textfilters/project.properti ./textfilters/project.xml 'd edit need sleep mayb tomorrow nobodi beat
miss node remov event remov version version remov one node remov event trigger version node even though frozen node version also get remov event frozen node see fail test case org.apache.jackrabbit.core.observation.versioneventstest testremovevers org.apache.jackrabbit.core.observation.versioneventstest testxaremovevers
jcr encod respect nodeindex valu jcr encod properti pass textfilt instanc
jcr-rmi depend commons-log commons-log depend jcr-rmi remov
chang project name start jackrabbit releas project artifactid 's start jackrabbit
jackrabbit-server.war miss slf4j-log4j12 librari report martin perez found bug .war file miss slf4j-log4j12-1.0.jar 's someway tricki detect includ classnotfoundexcept thrown poit jcr class log statement anyway includ .jar file web-inf/lib directori except goe except 's hell
remov unneed cqfs depend 's still unneed depend cqfs librari jcr-server/webapp jca
run tck jackrabbit 1.0-rc3 run tck jackrabbit 1.0-rc3
repositori start text filter depend miss search index configur text filter class requri anoth jar file jar file miss repositori start log follow mislead error caus javax.jcr.repositoryexcept org.apache.jackrabbit.core.searchmanager.initializequeryhandl searchmanager.java:536 org.apache.jackrabbit.core.searchmanager. init searchmanager.java:278 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.getsearchmanag repositoryimpl.java:1430 org.apache.jackrabbit.core.repositoryimpl.initworkspac repositoryimpl.java:538 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:245 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:482 org.jbpm.jcr.impl.jackrabbitjcrservice.start jackrabbitjcrservice.java:119 63 caus java.lang.illegalargumentexcept org.apache.commons.collections.beanmap.put beanmap.java:374 org.apache.jackrabbit.core.config.beanconfig.newinst beanconfig.java:97 org.apache.jackrabbit.core.searchmanager.initializequeryhandl searchmanager.java:530 69
set webdav properti without valu caus npe davresourceimpl webdav proppatch properti without valu prf someproperty/ caus npe davresourceimpl valu retriev tostr method call patch work around problem index c /jprojects/eclipse/jackrabbit/jcr-server/server/src/java/org/apache/jackrabbit/webdav/simple/davresourceimpl.java c /jprojects/eclipse/jackrabbit/jcr-server/server/src/java/org/apache/jackrabbit/webdav/simple/davresourceimpl.java revis 388517 +++ c /jprojects/eclipse/jackrabbit/jcr-server/server/src/java/org/apache/jackrabbit/webdav/simple/davresourceimpl.java work copi -930,7 +930,10 privat void setjcrproperti davproperti properti throw repositoryexcept retriev valu string valu property.getvalu .tostr string valu property.getvalu null valu property.getvalu .tostr set valu sinc multivalued-properti list set avail properti extra validation-check omit node.setproperti getjcrnam property.getnam valu
default namespac jackrabbitnodetypemanager.registernodetyp would nice n't necessari alway specifi namespac node type definit file pass jackrabbitnodetypemanager.registernodetyp node type parser default use persist namespac map allow custom mappign specifi pars node type definit file
chang jcr-313 introduc db-transact problem fix jcr-313 chang autocommit true fals result databasefilesystem write back correct anymor
classcastexept execut union queri xpathquerybuild throw classcastexcept line 322 releas 0.9 execut syntact valid union queri exampl queri would //element nt file //element mix lockabl appear invoc visit method simplenod id indic type jjtrootdescend certain point data actual orquerynod henc cast pathquerynod fail
queri dump fail deep queri tree big queri 400 operand queri dump fail queri dump made queryimpl.execut line 136 fail constant pad querytreedump.visit line 85 constant pad 255 charact array program would need bigger think put 65535 would problem would take littl bit memori top stacktract info java.lang.arrayindexoutofboundsexcept java.lang.system.arraycopi nativ method java.lang.stringbuffer.append stringbuffer.java:499 org.apache.jackrabbit.core.query.querytreedump.visit querytreedump.java:85 org.apache.jackrabbit.core.query.orquerynode.accept orquerynode.java:50 org.apache.jackrabbit.core.query.querytreedump.travers querytreedump.java:263 critic avoid dump unactiv debug log
npe class ojb-pm npe occur access id parent root node null patch follow
add support rfc 3253 simpl server http //www.ietf.org/rfc/rfc3253.txt
webdav server treat non-wellform xml request bodi error webdav server treat non-wellform xml request bodi error instead treat request request bodi miss caus litmus test suit failur test case propfind_invalid
move text extract background thread even though text extract done right save extract work later done client thread mechan place commit defer work background thread background thread trigger timer constant write back pend index chang regular index chang done purpos chang howev text extract work move complet background thread often take fair amount time index larg document outlin possibl solut text filter task put work queue work queue process background thread basic index nt resourc without text filter take place background thread updat index text filter complet nt resourc configur paramet allow execut text filter without background thread way possibl get exist behaviour jackrabbit fulltext index alway up-to-d use background process longer case
webdav method invoc tri creat new resourc fail 409 conflict parent resourc exist litmus test case copy_nodestcol attempt made copi exist resourc new locat parent collect resource-to-be-cr exist rfc2518 ask status code 409 conflict instead 403 forbidden case
webdav librari versioncontrolledresourc constant list wrong method versioncontrolledresourc .methods_checkedin constant list uncheckout obvious wrong rfc3253 list uncheckout method mandatori method checked-out vc-resourc checkout-in-plac featur
use transact lead memori leak global static map xasessionimpl class store xid transactioncontext global transact privat static final map txglobal new hashmap look like map never clear even end transact lead memori leak transactioncontext nest object includ xasessionimpl still referenc could n't freed propos solut posssibl add singl line remov transactioncontext static map end transact flag tmsuccess || flag tmfail associ null txglobal.remov xid els flag tmsuspend associ null els throw new xaexcept xaexception.xaer_inv accept unrefer transactioncontext anoth way
rmi publish repositori use jcr-rmi librari get lost time jcr-server/webapp project contain servlet repositorystartupservlet may use web app start repositori option regist repositori jndi rmi regist repositori jndi jcr-rmi librari use creat remot repositori instanc regist rmi registri insid rmi implement mechan base stub class creat rmi compil creat make remot repositori avail remot includ creat object tabl map remot refer local object tabl store refer local object weak refer support distribut garbag collect time may remot repositori instanc actual collect object tabl access anymor thus prevent repositori access remot prevent happen repositorystartupservlet must keep strong refer remot repositori drop refer servlet destroy repositori unregist *note issu long run applic publish repositori instanc rmi use jcr-rmi librari
maven2 repositori could somebodi care upload jackrabbit maven2 repo 's ibiblio ideal librari javadoc sourc pom 's least lib 's
proppatch error marshal resourc ca n't modifi general litmus test case notowner_modifi see http //mail-archives.apache.org/mod_mbox/jackrabbit-dev/200604.mbox/ 3c4432a7cf.30008 gmx.de 3e complain 423 lock status code sent back insid 207 multistatus 9. notowner_modifi warn proppatch fail 0 423 pass 1 warn think warn correct error condit n't need marshal insid multistatus 1 affect resourc request uri 2 oper fail complet let also note none server test return 207 ms ii apache/moddav xytho sap netweav km rfc2518bis hope clarifi error marshal proppatch sourc code current server behaviour fulli intent specif catch davexcept use multistatus remov code seem fix issu
contrib/bdb-persist updat berkeleydb version berkeleydb depend updat 2.0.83 alreadi avail ibiblio moment project.xml list 1.7.1 old code chang requir pm work correct berkeleydb 2.0.83 depend groupid berkeleydb /groupid artifactid je /artifactid version 2.0.83 /version type jar /type /depend
add shutdown logoutal method transientrepositori would useful abl explicit ask transientrepositori shut instead reli session close session.logout
proppatch n't respect document order proppatch current implement term davresource.alterproperti take set properti set set properti remov suffici model webdav 's method semant order set/remov instruct appear suppos relev submit patch litmus mail list check see http //mailman.webdav.org/pipermail/litmus/2006-april/000196.html jcr-server alterproperti probabl chang take order list set/remov instruct instead simplest approach would probabl use list contain either davproperti set davpropertynam remov object
read iohandl config.xml would like abl chang order iohandl add
rowiter view result queri return jcr path column rowiter view queri result return jcr path column spec state queri equival select nt base furthermor queri select properti must return non-residu properti declar node type multi-valu pseudo properti jcr path jcr score must alway avail nt base jcr primarytyp jcr path jcr score
safe namespac registr namespac registr method provid jcr namespaceregistri api cumbersom use vulner race condit event conflict prefix map problem discuss late mail list see http //article.gmane.org/gmane.comp.apache.jackrabbit.devel/6805 one symptom problem new code nodetypemanagerimpl see jcr-349 regist namespac tri nsreg.getprefix uri catch namespaceexcept e1 string origin prefix int 2 true i++ tri nsreg.registernamespac prefix uri return catch namespaceexcept e2 prefix origin add intern conveni method like namespaceregistryimpl.saferegisternamespac string prefixhint string uri instead throw except would automat generat use uniqu prefix base given hint prefix conflict detect
jcr-server code depend log4j direct code written log4j api forc user jackarabbit pick log4j depend juggl jdk log log4j configur compon project use jdk 1.4 log code move depend apach commons-log issu resolv also minor fix
bind repositori nameserv registryhelp caus failur lookup bind repositori nameserv use registryhelp caus next subsequ lookup fail observerd 1 registryhelper.registerrepositori creat new bindablerepositori initi turn initi real repositori i.e delagte bind refer nameserv 2 next lookup bindablerepositoryfactory.getobjectinst invok thie method check 's cach repositori sinc one exist yet creat new bindablerepositori tri initi fail sinc call registryhelper.registerrepositori alreadi initi repositori error messag basic say repositori alreadi use anoth process .lock file present fix modifi registryhelper.registerrepositori initi repositori simpli bind refer
jca concurr modif except jcamanagedconnection.cleanup call jcamanagedconnection.closehandl method caus concurrentmodificationexcept handl list empti caus modif handl list removehandl closehandl iter list sunon appserv 7 caus simpli close session handl transact commit probabl even necessari send connectionclos event cleanup accord api connectionclos event indic applic compon close connect handl cleanup contain initi action connectionclos event applic java.util.concurrentmodificationexcept java.util.linkedlist listitr.checkforcomodif linkedlist.java:552 java.util.linkedlist listitr.next linkedlist.java:488 org.apache.jackrabbit.jca.jcamanagedconnection.closehandl jcamanagedconnection.java:382 org.apache.jackrabbit.jca.jcamanagedconnection.cleanup jcamanagedconnection.java:145 com.sun.enterprise.resource.iaspoolobjectimp.cleanup iaspoolobjectimp.java:243 com.sun.enterprise.resource.iasgenericpoolobjects.transactioncomplet iasgenericpoolobjects.java:794 com.sun.enterprise.resource.resourcepoolmanagerimpl.transactioncomplet resourcepoolmanagerimpl.java:347 com.sun.enterprise.resource.resourcepoolmanagerimpl synchronizationlistener.aftercomplet resourcepoolmanagerimpl.java:644 com.sun.jts.jta.synchronizationimpl.after_complet synchronizationimpl.java:70
jca compil j2ee1.3 class jcamanagedconnectionfactori constructor invok throw resourceexcept exist j2ee1.3 jca1.1 class throw new resourceexcept e line 136 line 277 instead code need someth like resourceexcept except new resourceexcept fail creat session exception.setlinkedexcept e throw except allow compile/run j2ee1.3
jcr successor properti persist correct within transact transact creat new version read version histori jcr successor properti updat note jcr predecessor updat proper also version histori sometim propert read transact might appear empti behavior consist one execut anoth restart repositori version histori jcr successor properti read proper test case follow short thank nicola
enhanc index binari content index binari content enhanc order allow either configur field index provid better support custom nodeindex implement current design coupl flaw address time reader instanc request text filter even though reader might never use jcr data properti nt resourc node fulltext index text filter implement decid lucen field name text represent respons move nodeindex text filter provid reader instanc chang custom nodeindex decid binari properti one represent index
webdav simpl deleg proppatch extend iohandl complet descript http //article.gmane.org/gmane.comp.apache.jackrabbit.devel/6582 propos solut situat describ lead follow conclus iohandl read/writ resourc data properti get put propfind also take care setting/remov properti upon proppatch sinc previous suggest would still limit properti jcr encod jcr mimetyp jcr lastmodifi may think chang default nodetyp jcr content node nt unstructur guess would meet requir expect webdav server first step limit regard proppatch second would allow handl properti modif specif individu resourc type instead tri set properti uppermost node
.net build script jackrabbit hugo burm creat build script make possibl run jackrabbit .net add script excampl client code contrib project integr maven build system
request rmi bind option repositorystartupservlet current deploy option repositorystartupservlet bind local repositori jndi and/or regist remot serverrepositori via rmi use rmiserversocketfactori locateregistri locateregistri mechan appear work default weblog environ would like request option bind serverrepositori registerrmi jndi use servlet current context instead attempt locateregistry.createregistri locateregistry.getregistri jndi bind option could use differ name interfer jndi bind attempt registerjndi exampl request web.xml config registerrmi could bind follow use 's refer serverrepositori context ctx new initialcontext ctx.bind repositorynam remot remot allow easi remot access use weblog 's nativ t3 protocol use follow client context ctx new initialcontext say -djava.naming.provider.url -djava.naming.factory.initi set object ref ctx.lookup repositorynam remot localadapterfactori laf new clientadapterfactori repositori remot laf.getrepositori remoterepositori ref initi test done appear work well insid weblog contain paul
nullpointerexcept delet properti type refer method org.apache.jackrabbit.rmi.value.serialvaluefactori createvalu npe thrown paramet valu null solut chang public final valu createvalu node valu throw repositoryexcept return createvalu value.getuuid propertytype.refer public final valu createvalu node valu throw repositoryexcept valu null return null return createvalu value.getuuid propertytype.refer
proppatch send multistatus revis 397835 chang use alterproperti proppatch revis 397835 return status code 200 n't return multistatus bodi patch index c /jprojects/eclipse/jackrabbit/jcr-server/server/src/java/org/apache/jackrabbit/server/abstractwebdavservlet.java c /jprojects/eclipse/jackrabbit/jcr-server/server/src/java/org/apache/jackrabbit/server/abstractwebdavservlet.java revis 398580 +++ c /jprojects/eclipse/jackrabbit/jcr-server/server/src/java/org/apache/jackrabbit/server/abstractwebdavservlet.java work copi -448,6 +448,7 multistatus ms new multistatus multistatusrespons msr resource.alterproperti changelist ms.addrespons msr response.sendmultistatus ms
charset content-typ header n't quot charset valu content-typ header return ioutil.buildcontenttyp enclos quot valu token includ doubl quot index c /jprojects/eclipse/jackrabbit/jcr-server/server/src/java/org/apache/jackrabbit/server/io/ioutil.java c /jprojects/eclipse/jackrabbit/jcr-server/server/src/java/org/apache/jackrabbit/server/io/ioutil.java revis 397215 +++ c /jprojects/eclipse/jackrabbit/jcr-server/server/src/java/org/apache/jackrabbit/server/io/ioutil.java work copi -112,7 +112,7 public static string buildcontenttyp string mimetyp string encod string contenttyp mimetyp contenttyp null encod null contenttyp += charset=\ encod contenttyp += charset= encod return contenttyp
node.restor fail exist non-vers opv=vers child node node whose definit properti child node definit nodetyp node child includ mix version properti definit onparentversion=copi child node onparentversion=vers creat node child node checkin restor node get .versionexcept restor root node allow occur restor child node accord spec child node checkin n node vn get subnod type nt versionedchild name c. singl properti node jcr childversionhistori refer version histori c c actual version c also requir c version otherwis would version histori restor vn workspac current alreadi exist node correspond c version histori removeexist flag restor set true instanc c becom child restor n. workspac current alreadi exist node correspond c version histori removeexist flag restor set fals itemexistsexcept thrown 'm restor node use node.restor version true expect behavior
propertyst binari type desirials return half content creat propertyst binari properti e.g jcr data set valu larger blobfilevalu max_buffer_s e.g 300kbyte serials deserialis result propertyst 's internalvalu 's size half origianl e.g 150kbyte probabl due state inputstream implement mark byte twice read follow fix solv issu call read byte int stream method may fail well index jackrabbit/java/org/apache/jackrabbit/core/state/propertystate.java jackrabbit/java/org/apache/jackrabbit/core/state/propertystate.java revis 399293 +++ jackrabbit/java/org/apache/jackrabbit/core/state/propertystate.java work copi -305,7 +305,6 len int length consum int read super.read b len consum += read return read
workspaceinfo.dispos deregist ob dispatch jcr-305 introduc automat dispos idl workspac lead memori leak observ factori deregist deleg one
blobfilevalu might discard earli situat intern valu properti type binari creat constructor blobfilevalu inputstream content store temp-fil call method setproperti inputstream node b refresh fals node properti node properti lead intern valu properti eras byte solut spoolfil creat field temp set true inputstream store byte field temp set fals patch index blobfilevalue.java retriev revis 1.1 diff -u -r1.1 blobfilevalue.java blobfilevalue.java 8 may 2006 13:57:49 -0000 1.1 +++ blobfilevalue.java 8 may 2006 15:19:54 -0000 -142,6 +142,7 len += read in.clos final null out.clos -151,8 +152,15 init var file spoolfil fsresourc null instanc back temporarili alloc resource/buff temp true file null instanc back temporarili alloc resourc temp true els temp true
session scope lock alway remov session.logout consid follow use case session repo.login node root s.getrootnod root.lock true true session-scop deep lock modifiy item root.ismodifi still true s.logout understand session scope lock remov unlock unsav drop logout session unfortun current case lock implement get notifi sessionimpl logout situat call node.unlock lock 's node session scope lock method fail unsav chang henc logout lock session still gone repositori stop
nodetyperegistri could auto-subtyp nt base tie regist primari nodetyp extend nt base follow error thrown primari node type except nt base must direct indirect deriv nt base sinc registri abl detect error would easi auto-subtyp nodetyp nt base imo 's pointless explzit add nt base everi supperclass set analog n't need extend java.lang.object explicit compil automat
arrayindexoutofboundsexcept nodetypedefdiff appear code build diff child node definit loop incorrect open possibl arrayindexoutofbound except offend portion buildchildnodedefdiff method nodedef cnda2 newdef.getchildnodedef hashmap defs2 new hashmap int 0 cnda1.length i++ defs2.put cnda2 .getid cnda2 seem like simpli chang length check cnda2 buildpropdefsdiff would suffic
invalidqueryexcept thrown sql queri use contain someword follow sql queri select es document contain softwar throw invalidqueryexcept except javax.jcr.query.invalidqueryexcept encount line 1 column 42 expect one like null order select regular_identifi delimited_identifi syntax seem correct accord latest jcr spec 1.0.1 use asterisk instead dot first paramet contain work fine
restor node opv=vers children fail version node opv=vers childnod version restor node fail tri read versionhistori childnod
improv handl miss text filter depend use lazyread textfilt implement alway throw noclassdeffounderror depend jar file miss text filter implement therefor includ static block forc initi depend class
workspace.clon fail second time clone referenc follow testcod fail 2nd clone pleas note folder node made referenc test pass copi adapt test workspaceclonetest public void testclonenodestwic throw repositoryexcept clone referenc node non-referenc node string dstabspath node2w2.getpath node1.getnam node folder node1.addnod folder folder.addmixin mix referenc node1.sav workspacew2.clon workspace.getnam node1.getpath dstabspath true workspacew2.clon workspace.getnam node1.getpath dstabspath true pend chang clone assertfals superuserw2.haspendingchang
session logout n't releas lock acquir use addlocktoken session.addlocktoken n't regist lock session logout call releas lock acquir way maintain refer session logout new session attempt acquir lock fail
implement backup tool issu track progress googl summer code project assign nicola toper origin project requir implement tool back restor content apach jackrabbit content repositori addit basic content hierarchi tool abl effici manag binari content node version histori custom node type namespac map increment select backup would nice addit strict necessari
deadlock concurr commit read version state rear occat one thread commit transact anoth thread read versio relat inform deadlock occurr exampl thread1 ut.begin session.getworkspac .clone default /content /content true ut.commit thread2 versionhistori vh folder.getversionhistori versioniter iter vh.getallvers iter.hasnext version v iter.nextvers fix issu must ensur method shareditemstatemgr call higher instanc like itemmgr
error restor opv=vers childnod restor root version allow restor version node name opv=vers childnod follow error thrown version exist child node versionhistori error restor node javax.jcr.version.versionexcept restor root version allow
repositori lock workspacejanitor anoth workspac reindex searchindex corrupt miss rebuilt lazili initi workspac usual first login workspac time workspaceinfo lock unfortun workspac janitor lock repositori check workspac info dispos case access repositori perform searchindex initi take time t1 ws1.login ws initi janitor lock repo scan tri lock ws1 t2 ws2.login must wait t1
prevent login repositori shutdown relat last comment jcr-445 prevent new session creat repositori shutdown odd chanc run problem like seem like issu could easili solv make getworkspaceinfo synchron ad sanitycheck call createsess method
deadlock concurr commit/lock happen iterlock dispatch part share item state manag lockmanag
move node index merg lead inconsist index indexmerg keep track node delet index appli chang also merg index node ad index merg process index becom inconsist
memori leak uuiddocid hierarchi cach search index use docid 's refer parent node one implement docid uuiddocid may hold refer indexread use calcul id uuiddocid 's invalid lazi basi referenc indexread may still present even though indexread instanc long close uuiddocid hold weak refer indexread
propertytyperegistri also yield properti multi-valu current propertytyp avail certain properti name case also requir know properti single- multi-valu
workspace.clon throw itemnotfoundexcept referenc node children itemnotfoundexcept thrown referenc node children clone happen first time node clone exampl node root session.getrootnod node parent root.addnod parent parent.addmixin mix referenc session.sav clone parent ws2.clone default /parent /parent true node child parent.addnod child add child child.addmixin mix referenc session.sav clone parent child ws2.clone default /parent /parent true clone parent itemnotfoundexcept ca n't clone parent node ws2.clone default /parent /parent true stacktrac javax.jcr.itemnotfoundexcept fail build path 229083e5-5f24-4102-b007-785f43be983a cafebabe-cafe-babe-cafe-babecafebab child entri 229083e5-5f24-4102-b007-785f43be983a org.apache.jackrabbit.core.hierarchymanagerimpl.buildpath hierarchymanagerimpl.java:308 org.apache.jackrabbit.core.cachinghierarchymanager.buildpath cachinghierarchymanager.java:159 org.apache.jackrabbit.core.hierarchymanagerimpl.getpath hierarchymanagerimpl.java:357 org.apache.jackrabbit.core.cachinghierarchymanager.getpath cachinghierarchymanager.java:221 org.apache.jackrabbit.core.batcheditemoperations.checkremovenod batcheditemoperations.java:700 org.apache.jackrabbit.core.batcheditemoperations.recursiveremovenodest batcheditemoperations.java:1514 org.apache.jackrabbit.core.batcheditemoperations.removenodest batcheditemoperations.java:1216 org.apache.jackrabbit.core.batcheditemoperations.copynodest batcheditemoperations.java:1642 org.apache.jackrabbit.core.batcheditemoperations.copi batcheditemoperations.java:311 org.apache.jackrabbit.core.workspaceimpl.internalcopi workspaceimpl.java:294 org.apache.jackrabbit.core.workspaceimpl.clon workspaceimpl.java:401 test.clonetest.main clonetest.java:64
add/remov dispatch delegatingobservationdispatch synchron dispatch hashset delegatingobservationdispatch synchron lead error workspac goe offlin creat event dispatch
queri document order fail result set size cach hierarchi manag size queri return lot node queri result document order enabl default queri fail error messag log *error* main docordernodeiteratorimpl intern error unabl determin document order node docordernodeiteratorimpl.java line 241 *error* main docordernodeiteratorimpl node1 /stuff/nod 2 /node 13 /node9 docordernodeiteratorimpl.java line 242 *error* main docordernodeiteratorimpl node2 /stuff/nod 2 /node 13 /node5 docordernodeiteratorimpl.java line 243 critic size seem equival cach size cach hierarchi manag attach two test case first one simpli creat test node second one execut queri node use cach size 10'000 cachinghierarchymanag default_upper_limit everyth work fine valu set 1000 need re-compil class cachinghierarchymanag test fail mention error
internalxaresource.rollback call twice without prepar prepar phase transact context resourc prepar one fail prepar rest rolledback later rolledback caus resourc never prepar roll back ok sinc may need cleanup stuff resourc 's rollback may call twice n't know 's ok howev resourc buggi ca n't handl neither case correct
maven 2 pom contain variabl depend version never resolv break transit depend resolut problem depend declar jackrabbit-server-1.0 pom use variabl depend version variabl never resolv break transit resolut depend
path return filesystemblobstore.createid absolut hi develop filesystem call filesystempathutil.checkformat path everi oper file system file system call store blob valu path get alway relat result absolut path filesystemexcept problem trace back org.apache.jackrabbit.core.state.util.filesystemblobstore.creatid think sb.append filesystem.separator_char loop thank
session.mov throw itemexistsexcept despit name sibl code reproduc session session r.login new simplecredenti johndo .tochararray wspname node root session.getrootnod setup test case root.hasnod foo root.addnod foo root.sav root.hasnod bar root.addnod bar root.sav session.mov /foo /bar itemexistsexcept
add jmx support regist jcr rmi server jboss ad two class one descriptor file jcr-rmi project file provid support make generat jar deploy jboss server deploy descriptor contain two paramet address local repositori instanc target address rmi server regist e.g server mbean code= org.apache.jackrabbit.rmi.server.jmx.jcrserv name= jackrabbit.servic rmiserv jcr rmi server attribut name= local java jcr/local /attribut attribut name= target jnp //localhost:1099/jcrserv /attribut depend jboss.jca service=managedconnectionfactori name=jcr/loc /depend /mbean /server configur regist rmi server /jcrserver wrap local repositori java jcr/local br edgar
add rar meta-inf/ra.xml descriptor use jca1.5 ad ra.xml let jackrabbit jca use jca1.5 like jboss
managedconnect cleanup n't refresh session managedconnect clean correct think under jcr session refresh call session refresh fals jcamanagedconnect cleanup current implement new session see chang store transient level close session
improv lifecycl manag jca connector shutdown mechan n't work correct shutdown repositori ra resourc adapt garbag collect caus redeploy fail sometim new ra redeploy old one garbag collect implement jca 1.5 interfac manag lifecycl would use
uncommit chang connect leak contain manag transact appar connector n't support cmt contain manag transact jcr session close insid cmt applic server throw except commit jcr session leav open commit tx success caus connect leak leav session open
compactnodetyperead fail explain valid jcr name caus error exampl use underscor node type definit example_breaks2 fact a-z a-z 0-9 allow unless quot name error messag see make mistak n't give hint miss delimit end node type name nodetypes.cnd line 8 document websit javadoc compactnodetypedefread say unquoted_str := string help made mistak end need look sourc figur ve done wrong suggest solut chang document say unquot string a-za-z0-9 +' chang error messag mention token caus problem eg currenttokenequ lexer.end_node_type_nam lexer.fail miss lexer.end_node_type_nam delimit end node type name found currenttoken add st.wordchar lexer probabl go common caus doesnt conflict rule
item.issam may return true 2 node differ workspac code itemimpl.issam compar item id sourc workspac
problem child order restor parent follow sequenc lead swap child node mention trunk version work 1.0.1 specif add node parent childa childb remov childa parent childb restor initi version parent childb childa parent node type nt unstructur carri orderablechildnodes=tru would assum upon restor order would preserv cheer tanju testcas use derbi inmempm boil beyond sens add parent childa childb node parent session.getrootnod .addnod parent nt unstructur parent.addmixin mix version node c1 parent.addnod childa nt unstructur c1.addmixin mix version node c2 parent.addnod childb nt unstructur c2.addmixin mix version session.sav c1.checkin c2.checkin version v1 parent.checkin ok parent.getnod childa childb remov childa parent session.getrootnod .getnod parent parent.checkout c1 parent.getnod .nextnod c1.checkout c1.remov session.sav version v2 parent.checkin ok parent.getnod childa childb remov childa parent session.getrootnod .getnod parent parent.restor v1 true ok parent.getnod childb childa
xmlindexfilt index attribut text/xml index extract element text attribut valu
creat resourc sensit cach item state current lru-cach strategi itemst share ism hardcod limit 1000 entri problem size state respect cach strategi pose problem state larg i.e larg valu properti state larg number childnod entri
wrap illegalargumentexcept uuid bad id pass session.getnodebyuuid hi 6/30/06 david kennedi davek us.ibm.com wrote invok session.getnodebyuuid pass invalid id illegalargumentexcept thrown wrap itemnotfoundexcept repositoryexcept sessionimpl good point itemnotfoundexcept would probabl best could pleas file jira issu br jukka zit
enhanc jackrabbit common would like suggest coupl enhanc common modul patch creat rev 417443 test reveal problem summari suggest modif qname reduc qname core function put convers jcr name separ class nameformat order break exist code method deal convers qname mark deprec add constant name root node path reduc path core function put convers jcr path separ class pathformat order break exist code method deal convers path mark deprec introduc new constant undefined_index 0 default_index 1 current hardcod throughout jackrabbit project new method path.getel int pathel make pathel constant public use pathformat path.pathbuild addit constructor pathbuild path path.pathel add pathelement.getnormalizedindex alway assert 1-base index chang subclass privat usag within jackrabbit except insid path pathmap move o.a.j.core.pathmap o.a.j.util.pathmap order make avail common modul namespaceresolv add method resolut path getqpath string jcrpath path getjcrpath path qpath string namespacelisten add method namespaceremov string valuehelp current jcr valu object manual creat valuehelp despit fact jsr170 defin valuefactori interfac consequ valuehelp present common modul use implement use valu implement add new helper method take valuefactori argument order break exist code origin method mark deprec may remov later time consequ modifi signatur internalvalue.cr includ valu convers take valuefactori param adjust usag insid core packag valuefactoryimpl createvalu string int use call convers valuehelp chang suggest valuehelp code must chang order creat instanc valu implement within factori togeth modif valuehelp stefan suggest replac public constructor static getinst method usag within jackrabbit.cor modifi accord text add getnam string boolean boolean flag indic whether trail slash ignor add getrelativepar string int boolean boolean flag indic whether trail slash ignor
introduc securityconfig better extens current repositori configur parser pars secur confgur inlud appnam accessmanagerconfig loginmoduleconfig intern pass 3 valu repositori config suggest add new securityconfig object encapsul 3 valu pars seper method order allow better extens also reduc size alredi bloat repositori config constructor
remov recent ad getjcrpath /getqpath namespaceresolv issu jcr-473 ad 2 new method namespaceresolv public path getqpath string jcrpath throw malformedpathexcept public string getjcrpath path qpath throw noprefixdeclaredexcept belong sinc namespaceresolv noth path suggest remov name qname relat method bit vagu suggest renam qname parsenam string jcrname string formatnam qname qname although belong either help leverag evt cach namespac resolv
deploy webdav servlet jboss problem log test two differ instal jboss verifi problem relat specif version problem jackrabbit-server.war deploy jboss detail deploy 13:20:48,654 info tomcatdeploy deploy ctxpath=/jackrabbit-serv warurl= /deploy/jackrabbit-server.war/ 13:20:48,857 info stdout log4j error org.jboss.logging.util.onlyonceerrorhandl object assign o rg.apache.log4j.spi.errorhandl variabl 13:20:48,857 info stdout log4j error class org.apache.log4j.spi.errorhandl load 13:20:48,857 info stdout log4j error webappclassload deleg fals repositori /web-inf/classes/ parent classload java.net.factoryurlclassload 19d277e wherea object type 13:20:48,857 info stdout log4j error org.jboss.logging.util.onlyonceerrorhandl load org.jboss.system.s rver.noannotationurlclassload ab95e6 13:20:48,904 info stdout log4j error could creat append report error follow 13:20:48,904 info stdout java.lang.classcastexcept org.jboss.logging.appender.dailyrollingfileappend 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.parseappend domconfigurator.java:165 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.findappenderbynam domconfigurator.java:140 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.findappenderbyrefer domconfigurator.java:153 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.parsechildrenofloggerel domconfigurator.jav a:415 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.parseroot domconfigurator.java:384 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.pars domconfigurator.java:783 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.doconfigur domconfigurator.java:666 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.doconfigur domconfigurator.java:616 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.doconfigur domconfigurator.java:602 13:20:48,904 info stdout org.apache.log4j.helpers.optionconverter.selectandconfigur optionconverter.java:460 13:20:48,904 info stdout org.apache.log4j.logmanager. clinit logmanager.java:113 13:20:48,904 info stdout org.apache.log4j.xml.domconfigurator.configur domconfigurator.java:543 13:20:48,904 info stdout org.apache.jackrabbit.j2ee.loggingservlet.configurexml loggingservlet.java:148 13:20:48,904 info stdout org.apache.jackrabbit.j2ee.loggingservlet.configur loggingservlet.java:115 13:20:48,904 info stdout org.apache.jackrabbit.j2ee.loggingservlet.init loggingservlet.java:86 unlik log problem impact runtim tri dasl search return 500 error server unabl log correct
incorrect definit built-in node type nt hierarchynod properti jcr creat nt hierarchynod non-mandatori accord specif jcr 1.0 jcr 1.0.1 definit built-in node type relat test case fix accord
check option featur test case wrong report david sander tck jsr-170 final releas http //jcp.org/aboutjava/communityprocess/final/jsr170/index.html check level 2 option featur compar repository.getdescriptor null accord spec javadoc getdescriptor must return either true fals capabl key exampl absractjcrest.java setup custom namespac helper.getrepositori .getdescriptor repository.level_2_support null namespaceregistri nsreg superuser.getworkspac .getnamespaceregistri think statement helper.getrepositori .getdescriptor repository.level_2_support .equal true
docviewsaxeventgener may generat non-ns-wellform xml xml serial code reli fact requir prefix-to-uri map known beforehand actual serial root node 's assumpt perman namespac registri never chang serial may incorrect anoth client add namespac registr xml export progress fix addnamespaceprefix ensur namespac declar written prefix use current node node name properti potenti go back namespac resolv need consensus chang 'm happi give tri
lock token reain session unlock followin step node.lock session.getlocktoken show lock token generat previous lock node.unlock session.getlocktoken still show generat token ¿ ¿ unlock node token n delet session
tck clean 2nd workspac abstractjcrtest.setup xatest.testxaversionsthorough fail run 2 time sinc 2nd workspac clean startup provid provisonairi fix
remov version invalid version remov 's intern represen evict cach leed unexpect behaviour xatest.removevers test also happen non-transact environ
jcr frozenuuid properti type refer instead string spec say jcr frozenuuid string jackrabbit 1.0.1 use refer
tck incorrect check namespac map system view xml export org.apache.jackrabbit.test.api.sysviewcontenthandl enddocu two issu 1. line 351 tri go tabl prefix use fix index insid loop 2 map xml prefix skip must regist session must regist export sinc built-in xml map
tck exportdocviewtest.exportvalu fail empti multivalu properti exportdocviewtest.exportvalu line 988 fail properti export empti array size 0 allow spec sinc space remov code skip number valu zero
tck predefinednodetypetest allow addit predefin node type hierarchi explain section 6.7.22.2 page 147 jsr 170 specif implement allow custom predefin noe type definit addit supertyp test predefinednodetypetest account expect exact match predefin node type
tck propertyreadmethodstest testgetvalu fail find singl valu string properti jcr repositori test contain singl valu properti type string propertyreadmethodstest testgetvalu fail follow except java.lang.nullpointerexcept org.apache.jackrabbit.test.api.propertyreadmethodstest.testgetvalu propertyreadmethodstest.java:273 org.apache.jackrabbit.test.abstractjcrtest.run abstractjcrtest.java:401 test either tri find singl valu properti type guarant least find jcr primarytyp throw notexecutableexcept find properti need
typo messag log upon startup repositori alreadi use per subject
tck sessionreadmethodstest testisl call logout sessionreadmethodstest testisl call logout session test teardown jsr-170 n't prohibit implement throw uncheck except illegalstateexcept logout call propos chang teardown test isliv call logout sessionreadmethodstest.java revis 422074 +++ sessionreadmethodstest.java work copi -57,7 +57,7 releas session aquir link setup protect void teardown throw except session null session null session.isl session.logout super.teardown
tck propertydeftest nodedeftest respect valu testroot configur properti propertydeftest nodedeftest test setup n't respect valu testroot configur properti propos use testroot configur properti patch propertydeftest nodetype/propertydeftest.java revis 422074 +++ nodetype/propertydeftest.java work copi -94,7 +94,7 session helper.getreadonlysess manag session.getworkspac .getnodetypemanag rootnod session.getrootnod rootnod testrootnod patch nodedeftest nodetype/nodedeftest.java revis 422074 +++ nodetype/nodedeftest.java work copi -68,7 +68,7 session helper.getreadonlysess manag session.getworkspac .getnodetypemanag rootnod session.getrootnod rootnod testrootnod
tck impersonatetest testimperson allow loginexcept jsr-170 allow session.imperson throw loginexcept session lack permiss imperson anoth user repositori may allow session imperson anoth user case test would fail propos catch consum loginexcept impersonatetest.java revis 422074 +++ impersonatetest.java work copi -17,11 +17,13 packag org.apache.jackrabbit.test.api import org.apache.jackrabbit.test.abstractjcrtest +import org.apache.jackrabbit.test.notexecutableexcept import javax.jcr.sess import javax.jcr.credenti import javax.jcr.nodeiter import javax.jcr.nod +import javax.jcr.loginexcept import java.security.accesscontrolexcept -40,7 +42,14 public void testimperson throw except imperson read-on user session session superuser.imperson helper.getreadonlycredenti session session null tri session superuser.imperson helper.getreadonlycredenti catch loginexcept e throw new notexecutableexcept imperson threw loginexcept get path test permiss string thepath
tck namespaceregistrytest testregisternamespac n't remov node new namespac test creat node new namespac n't remov prevent teardown unregist namespac propos test remov new node return namespaceregistrytest.java revis 422074 +++ namespaceregistrytest.java work copi -138,6 +138,10 testrootnode.addnod namespaceprefix root testrootnode.sav need remov otherwis teardown ca n't unregist ns testrootnode.getnod namespaceprefix root .remov testrootnode.sav
tck namespaceregistrytest testunregisternamespaceexcept n't fail expect except n't thrown two place test n't fail expect except n't thrown propos test fail expect except n't thrown namespaceregistrytest.java revis 422074 +++ namespaceregistrytest.java work copi -150,6 +154,7 int 0 system_prefixes.length t++ tri nsp.unregisternamespac system_prefix fail tri unregist system_prefix must fail catch namespaceexcept e expect behaviour -159,6 +164,7 must throw namespaceexcept tri nsp.unregisternamespac thisnamespaceisnotcurrentlyregist fail tri unregist unus prefix must fail catch namespaceexcept e expect behaviour
tck setpropertyvaluetest testcompactvaluearraywithnul respect nodename1 nodetyp configur properti test n't respect valu nodename1 nodetyp configur properti propos creat properti testnod instead testrootnod setpropertyvaluetest.java revis 422074 +++ setpropertyvaluetest.java work copi -374,11 +374,11 valu array remov null valu public void testcompactvaluearraywithnul throw except testrootnode.setproperti propertyname2 varraywithnul testnode.setproperti propertyname2 varraywithnul superuser.sav assertequ node.setproperti string valuearraywithnul compact valu array remov null valu 2 testrootnode.getproperti propertyname2 .getvalu .length testnode.getproperti propertyname2 .getvalu .length
tck setpropertycalendartest compar calendar object setpropertycalendartest testnewcalendarpropertysess setpropertycalendartest testmodifycalendarpropertysess setpropertycalendartest testnewcalendarpropertypar setpropertycalendartest testmodifycalendarpropertypar test compar calendar object calendar.equ object stronger test jsr-170 specifi value.equ object lead fals failur purpos test even value.equ object strong equal test sinc repositori may normal date/tim valu across save/read roundtrip exampl convert z +00:00 adding/remov trail zero fraction second propos compar gettimeinmilli valu setpropertycalendartest.java revis 422074 +++ setpropertycalendartest.java work copi -52,8 +52,8 testnode.setproperti propertyname1 c1 superuser.sav assertequ set properti node.setproperti string calendar session.sav work c1 testnode.getproperti propertyname1 .getdat c1.gettimeinmilli testnode.getproperti propertyname1 .getdat .gettimeinmilli -66,8 +66,8 testnode.setproperti propertyname1 c2 superuser.sav assertequ modifi properti node.setproperti string calendar session.sav work c2 testnode.getproperti propertyname1 .getdat c2.gettimeinmilli testnode.getproperti propertyname1 .getdat .gettimeinmilli -78,8 +78,8 testnode.setproperti propertyname1 c1 testrootnode.sav assertequ set properti node.setproperti string calendar parentnode.sav work c1 testnode.getproperti propertyname1 .getdat c1.gettimeinmilli testnode.getproperti propertyname1 .getdat .gettimeinmilli -92,8 +92,8 testnode.setproperti propertyname1 c2 testrootnode.sav assertequ modifi properti node.setproperti string calendar parentnode.sav work c2 testnode.getproperti propertyname1 .getdat c2.gettimeinmilli testnode.getproperti propertyname1 .getdat .gettimeinmilli
tck setvaluedatetest compar calendar object setvaluedatetest testdatesess setvaluedatetest testdatepar test compar calendar object calendar.equ object stronger test jsr-170 specifi value.equ object lead fals failur purpos test even value.equ object strong equal test sinc repositori may normal date/tim valu across save/read roundtrip exampl convert z +00:00 adding/remov trail zero fraction second propos compar gettimeinmilli valu setvaluedatetest.java revis 422074 +++ setvaluedatetest.java work copi -79,7 +80,8 public void testdatesess throw repositoryexcept property1.setvalu valu superuser.sav assertequ date node properti save value.getd property1.getvalu .getdat assertequ date node properti save value.getd .gettimeinmilli property1.getd .gettimeinmilli -89,7 +91,8 public void testdatepar throw repositoryexcept property1.setvalu value.getd node.sav assertequ date node properti save value.getd property1.getvalu .getdat assertequ date node properti save value.getd .gettimeinmilli property1.getd .gettimeinmilli
tck documentviewimporttest call refresh direct-to-workspac import perform direct-to-workspac import test call refresh ensur transient layer n't contain stale data propos call refresh fals perform direct-to-workspac import documentviewimporttest.java revis 422074 +++ documentviewimporttest.java work copi -106,6 +106,12 saxexcept notexecutableexcept importxml target createsimpledocu uuidbehaviour withworkspac withworkspac session.refresh fals performtest -127,6 +133,12 saxexcept ioexcept notexecutableexcept importwithhandl target createsimpledocu uuidbehaviour withworkspac withworkspac session.refresh fals performtest
tck abstractjcrtest fail setup/teardown remov children test node test node exist setup teardown method remov child node repositori child node may mandatori protect caus test setup/teardown fail propos toler except thrown remov child node test setup/teardown ../abstractjcrtest.java revis 422074 +++ ../abstractjcrtest.java work copi -344,7 +344,11 clean test root testrootnod root.getnod testpath nodeiter children testrootnode.getnod children.hasnext children.nextnod .remov tri children.nextnod .remov catch repositoryexcept e consum els creat node testpath -375,7 +379,11 clean test root testrootnod root.getnod testpath nodeiter children testrootnode.getnod children.hasnext children.nextnod .remov tri children.nextnod .remov catch repositoryexcept e consum root.sav
tck nodetest testmixintypesprotect incorrect fail test call addmixin add mix referenc node step requir test jcr mixintyp protect yet may fail node alreadi mix referenc mix referenc propos remov call addmixin test attempt set jcr mixintyp scalar valu report failur implement throw valueformatexcept instead constraintviolationexcept propos set jcr mixintyp array length 1 nodetest.java revis 422074 +++ nodetest.java work copi -1130,10 +1142,9 node defaultrootnod node superuser.getitem testrootnode.getpath node testnod defaultrootnode.addnod nodename1 testnodetyp testnode.addmixin mixreferenc tri testnode.setproperti jcrmixintyp mixlock testnode.setproperti jcrmixintyp new string mixlock fail manual set jcr mixintyp throw constraintviolationexcept catch constraintviolationexcept success
tck nodetest testaddnodeitemexistsexcept fail valid defer save test expect addnod fail same-nam sibl alreadi exist jsr-170 allow valid defer save propos call save tri block nodetest.java revis 422074 +++ nodetest.java work copi -380,6 +391,7 tri tri add node name defaulttestnode.addnod nodename3 testnodetyp defaultrootnode.sav fail ad node locat name sibl allow node name alreadi exist throw itemexistsexcept catch itemexistsexcept e
tck addnodetest requir implement support one-paramet addnod method test node test requir repositori support addnod string one argument test node howev jsr-170 requir implement least one child node definit default primari type repositori test fail regardless configur propos introduc configur properti set caus call addnod string replac addnod string string
tck node type select setvaluevalueformatexceptiontest may lead incorrect test failur setup test select two node type one boolean properti one date properti creat node type children target node tck select node type creat two problem first jsr-170 requir implement provid determinist stabl order node type return nodetypemanag consequ node type select test setup may vari run run make test configur difficult imposs second repositori impos implementation-specif type constraint discover jsr-170 tck may select node type inappropri child test node propos introduc configur properti set overrid properti definit node type select nodetypeutil
tck abstractimportxmltest incorrect assum mix referenc ad creat node ismixrefrespect assum nodetypemanag contain mix referenc addmixin call add mix referenc creat node assumpt incorrect least two reason first creat node might alreadi mix referenc either primari node type subtyp mix referenc implement ad mix referenc mixin type creat node second repositori may restrict node mix referenc ad extrem case repositori may allow mix referenc ad node use addmixin case referenc node would mix referenc virtu primari type implement 's ad mix referenc mixin type node creation propos test canaddmixin call addmixin
tck setpropertyassumetypetest n't allow valueformatexcept upon type convers failur setpropertyassumetypetest testvaluesconstraintvioloationexceptionbecauseofinvalidtypeparamet test allow implement throw valueformatexcept section 7.1.5 javadoc setproperti string valu int state properti type suppli valu object differ specifi best-effort convers attempt convers fail valueformatexcept thrown propos catch consum valueformatexcept setpropertyassumetypetest.java revis 422074 +++ setpropertyassumetypetest.java work copi -28,6 +28,7 import javax.jcr.propertytyp import javax.jcr.repositoryexcept import javax.jcr.properti +import javax.jcr.valueformatexcept import java.util.calendar import java.util.d -525,6 +526,9 catch constraintviolationexcept e success catch valueformatexcept e success
tck nodeorderablechildnodestest test node order even node type n't support child node order nodeorderablechildnodestest testorderbeforeunsupportedrepositoryoperationexcept test call preparetest requir getnod return child node order ad even node type n't support child node order jsr-170 section 4.4.2 impos requir propos check child node order test case
enhanc test data run test case current result number test case run most enough test data repositori execut test find affect test case set log level org.apache.jackrabbit.test debug grep execut jcr.log file return follow list testgetdeclaringnodetyp org.apache.jackrabbit.test.api.nodetype.propertydeftest execut testismandatori org.apache.jackrabbit.test.api.nodetype.nodedeftest execut testvalueconstraintnotsatisfi org.apache.jackrabbit.test.api.nodetype.cansetpropertybinarytest execut testvalueconstraintnotsatisfi org.apache.jackrabbit.test.api.nodetype.cansetpropertybooleantest execut testvalueconstraintnotsatisfi org.apache.jackrabbit.test.api.nodetype.cansetpropertydoubletest execut testgets org.apache.jackrabbit.test.api.observation.eventiteratortest execut testgetattribut org.apache.jackrabbit.test.api.sessionreadmethodstest execut testreferenceablerootnod org.apache.jackrabbit.test.api.referenceablerootnodestest execut testbinaryproperti org.apache.jackrabbit.test.api.setvalueconstraintviolationexceptiontest execut testbooleanproperti org.apache.jackrabbit.test.api.setvalueconstraintviolationexceptiontest execut testdoubleproperti org.apache.jackrabbit.test.api.setvalueconstraintviolationexceptiontest execut testreferenceproperti org.apache.jackrabbit.test.api.setvalueconstraintviolationexceptiontest execut testmultiplereferenceproperti org.apache.jackrabbit.test.api.setvalueconstraintviolationexceptiontest execut testbinaryproperti org.apache.jackrabbit.test.api.setpropertyconstraintviolationexceptiontest execut testbooleanproperti org.apache.jackrabbit.test.api.setpropertyconstraintviolationexceptiontest execut testdoubleproperti org.apache.jackrabbit.test.api.setpropertyconstraintviolationexceptiontest execut testreferenceproperti org.apache.jackrabbit.test.api.setpropertyconstraintviolationexceptiontest execut test data jackrabbit enhanc order run test case success
remov depend xpathquerybuild core jackrabbit code xpath queri parser current singl depend searchmanag sole purpos import two namespac uri xml schema xpath 2.0 function make harder use stand-alon propos copi two namespac uri xpathquerybuild get rid depend
tck xpath order test use non-standard column specifi mechan org.apache.jackrabbit.test.api.queryxpathorderbytest generat queri follow form /jcr root/* pronam propnam order propnam syntax column specifi mandat jcr specif fail implement support instead test use follow queri /jcr root/* pronam order propnam read result use queryresults.getnod queryresults.getrow
miss support general relat querytreedump xpath.queryformat two class lack support general relat xpath
contribut classload project still use commons-log log jcr-215 jackrabbit core code migrat log4j slf4j classload contribut alway use commons-log time also migrat project proper slf4j
add method public boolean hasnodetyp string name nodetypemanagerimpl seen ml plan add method updat class interfac jackrabbitnodetypemanag
querymanagerimpl hardwir support queri languag querymanagerimpl hardwir support queri languag seem sub-optim given fact jackrabbit pluggabl architectur addit queri languag
tck predicatestest respect testroot configur properti test respect testroot configur properti propos use testroot configur properti construct test queri predicatestest.java revis 422074 +++ predicatestest.java work copi -78,7 +78,7 throw repositoryexcept public void testequ throw repositoryexcept string stmt jcrroot jcrprimarytyp nodetypenam string stmt jcrroot testpath jcrprimarytyp nodetypenam tri qm.createqueri stmt query.xpath -93,7 +93,7 throw repositoryexcept public void testcombinedor throw repositoryexcept string stmt jcrroot jcrprimarytyp nodetypenam jcrprimarytyp ntbase string stmt jcrroot testpath jcrprimarytyp nodetypenam jcrprimarytyp ntbase tri qm.createqueri stmt query.xpath -108,7 +108,7 throw repositoryexcept public void testor throw repositoryexcept string stmt jcrroot jcrprimarytyp jcrmixintyp string stmt jcrroot testpath jcrprimarytyp jcrmixintyp tri qm.createqueri stmt query.xpath -123,7 +123,7 throw repositoryexcept public void testand throw repositoryexcept string stmt jcrroot jcrprimarytyp jcrmixintyp string stmt jcrroot testpath jcrprimarytyp jcrmixintyp tri qm.createqueri stmt query.xpath -138,7 +138,7 throw repositoryexcept public void testcombinedand throw repositoryexcept string stmt jcrroot jcrprimarytyp nodetypenam jcrprimarytyp ntbase string stmt jcrroot testpath jcrprimarytyp nodetypenam jcrprimarytyp ntbase tri qm.createqueri stmt query.xpath
tck textnodetest jcr xmltext/jcr xmlcharact test creat jcr xmltext node without jcr xmlcharact properti repositori may requir jcr xmltext node jcr xmlcharact properti caus test fail propos add jcr xmlcharact properti jcr xmltext node textnodetest.java revis 422074 +++ textnodetest.java work copi -62,6 +62,7 public void testtextnodetest throw repositoryexcept node text1 testrootnode.addnod jcrxmltext text1.setproperti jcrxmlcharact foo testrootnode.sav string xpath jcrroot testroot /text executexpathqueri superus xpath new node text1 -73,7 +74,9 public void testtextnodetestmultinod throw repositoryexcept node text1 testrootnode.addnod jcrxmltext text1.setproperti jcrxmlcharact foo node text2 testrootnode.addnod nodename1 testnodetyp .addnod jcrxmltext text2.setproperti jcrxmlcharact foo testrootnode.sav string xpath jcrroot testroot //text executexpathqueri superus xpath new node text1 text2 -105,11 +108,13 throw new notexecutableexcept repositori support posit index node text1 testrootnode.addnod jcrxmltext text1.setproperti jcrxmlcharact foo text1.getdefinit .allowssamenames throw new notexecutableexcept node path testroot allow name sibl name jcrxmltext testrootnode.addnod nodename1 testnodetyp node text2 testrootnode.addnod jcrxmltext text1.setproperti jcrxmlcharact foo testrootnode.sav string xpath jcrroot testroot /text 2 executexpathqueri superus xpath new node text2
tck xpathquerylevel2test use option column specifi syntax test assum implement use termin attribut step column specifi allow requir jcr propos remov column specifi process result use getnod instead getrow xpathquerylevel2test.java revis 422074 +++ xpathquerylevel2test.java work copi -85,7 +85,7 checkresult result 1 evalu result checkvalu result.getrow propertyname1 b checkvalu result.getnod propertyname1 b -101,7 +101,7 checkresult result 1 evalu result checkvalu result.getrow propertyname1 exist checkvalu result.getnod propertyname1 exist -147,7 +147,6 tmp.append jcrroot .append testroot tmp.append .append propertyname2 .append two tmp.append .append propertyname1 .append exist tmp.append .append propertyname1 return new statement tmp.tostr query.xpath -161,7 +160,7 tmp.append propertyname1 tmp.append b tmp.append propertyname1 tmp.append .append propertyname1 tmp.append return new statement tmp.tostr query.xpath abstractquerylevel2test.java revis 422074 +++ abstractquerylevel2test.java work copi -19,6 +19,7 import org.apache.jackrabbit.test.notexecutableexcept import javax.jcr.nodetype.nodetyp +import javax.jcr.nodeiter import javax.jcr.query.rowiter import javax.jcr.query.row import javax.jcr.valu -115,4 +116,16 expectedvalu value.getstr protect void checkvalu nodeiter itr string propertynam string expectedvalu throw repositoryexcept itr.hasnext node node itr.nextnod check fulltext valu valu node.getproperti propertynam .getvalu assertequ valu queri result row match expect valu expectedvalu value.getstr
tck derefquerylevel1test requir support option jcr deref function test fail jcr deref support per jsr-170 jcr deref option propos introduc new configur properti indic whether jcr deref support throw notexecutableexcept
tck getpersistentquerypathtest savetest requir nt queri getpersistentquerypathtest savetest requir implement support nt queri node type option node type propos throw notexecutableexcept nt queri node type registri
new version ad restor bad version name add sever version node 1.0 1.1 1.2 1.3 1.4 perform restor version 1.2 add version versionhistori like 1.0 1.1 1.2 1.3 1.4 1.3.1 1.3.2 1.3.3 1.3.4 1.3.5 new version 1.2.x 1.3.x n't
add file generat eclips maven svn ignor make life easier eclips maven user pleas add follow file svn ingor jackrabbit-jcr-rmi .set .classpath .project jackrabbit-jcr-rmi-pom-snapshot-vers project.xml.md5 jackrabbit-cor .set .classpath .project jackrabbit-core-pom-snapshot-vers project.xml.md5 mayb file miss list could help develop use idea
tck orderbymultitypetest n't respect nodetyp configur properti orderbymultitypetest creat test data call addnod string fail default primari type propos call addnod string string orderbymultitypetest.java revis 428760 +++ orderbymultitypetest.java work copi -43,9 +43,9 test order queri string properti long properti public void testmultipleord throw except node n1 testrootnode.addnod nodename1 node n2 testrootnode.addnod nodename2 node n3 testrootnode.addnod nodename3 node n1 testrootnode.addnod nodename1 testnodetyp node n2 testrootnode.addnod nodename2 testnodetyp node n3 testrootnode.addnod nodename3 testnodetyp n1.setproperti propertyname1 aaa n1.setproperti propertyname2 3
incorrect iter posit jcr-rmi skip larg number entri positionofbuff variabl clientiter get sync serveradapter.bufferlength item
fail node.lock might leav inconsist transient state tri node.lock true fals node lock fail due lak user privilegi lock stay user transient session perform node.refresh fals node still lock transient session
session leak api test case setup abstractpropertytest check whether execut test potenti throw notexecutableexcept case helper session lost without log parent 's teardown code n't execut problem may present test class check
concurr repository.login throw illegalstateexcept see test case org.apache.jackrabbit.test.core.concurrentlogintest java.lang.illegalstateexcept workspac default initi org.apache.jackrabbit.core.repositoryimpl workspaceinfo.getitemstateprovid repositoryimpl.java:1448 org.apache.jackrabbit.core.repositoryimpl.getworkspacestatemanag repositoryimpl.java:712 org.apache.jackrabbit.core.sessionimpl. init sessionimpl.java:247 org.apache.jackrabbit.core.sessionimpl. init sessionimpl.java:214 org.apache.jackrabbit.core.xasessionimpl. init xasessionimpl.java:98 org.apache.jackrabbit.core.repositoryimpl.createsessioninst repositoryimpl.java:1233 org.apache.jackrabbit.core.repositoryimpl.createsess repositoryimpl.java:800 org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1119 org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1146 org.apache.jackrabbit.core.jndi.bindablerepository.login bindablerepository.java:181 org.apache.jackrabbit.core.concurrentlogintest 1.run concurrentlogintest.java:56 java.lang.thread.run thread.java:534
abstractjcrtest fail level 1 repositori test case indic 's read-on org.apache.jackrabbit.test.abstractjcrtest tri cleanup test root setup method caus test case fail level 1 repositori throw unsupportedoperationexcept propos tri cleanup check l2 function throw notexecutableexcept otherwis issupport repository.level_2_support cleanup string msg test case requir level 2 function throw new notexecutableexcept msg
npe predefinednodetypetest.getpropertydefspec occur propertydefinition.getvalueconstraint return null allow spec
docviewsaxeventgener produc invalid sax stream iso9075.encod call twice docviewsaxeventgenerator.leav produc invalid endel event faulti block code note encod method call twice encod node name make sure 's valid xml name name iso9075.encod name element name string elemnam node.getdepth 0 root node need name elemnam jcrroot els encod node name make sure 's valid xml name elemnam iso9075.encod name
jcr-server workspace.restor map correct issu report david kennedi workspace.restor version boolean wo n't work sinc version retriev correct version histori access request resourc use retriev version need workspace.restor call possibl short term fix version-href present request bodi updat request version resourc must built correspond version item retriev altern find proper map workspace.restor version boolean updat resourc repres javax.jcr.nod map workspace.restor odd
new method nodetypemanagerimpl reregist nodetyp add method nodetypemanagerimpl allow reregist exist nodetyp method take inputstream either xml cnd format regist new nodetyp reregist exist nodetyp
deadlock checkin load 3 thread perform checkin restor oper 's possibl becom deadlock abstractversionmanager.checkin method attempt upgrad read lock write lock follow code aquirereadlock tri aquirewritelock releasereadlock 2 thread acquir read lock neither acquir write lock result deadlock thread call method block wait write lock releas read lock need done acquir write lock document concurr librari javadoc anoth area attempt upgrad read lock write lock repositoryimpl.workspaceinfo.disposeifidl acquir read lock call dispos acquir write lock mayb ok assum 1 thread attempt dispos idl workspac
simpleselectiontest assum rowiterator.gets return -1 test case testsingleproperti assum rowiterator.gets return -1 incorrect assumpt accord javadoc rangeiter suggest chang long size result.getrow .getsiz size -1 assertequ 1 result 1 size
node type document tool ntdoc first time post contrib jira hope right way week ago postet messag forum node type document tool made final clean code fix bug use major guarante bug-fre best fix bug report readm file includ distribut must build use maven 2 done maven 1 compliant
transientfilefactori may throw concurrentmodificationexcept shutdown jackrabbit stop shutdown hook transientfilefactori iter track temp file delet time reaper thread may still remov file refer list track temp file may lead concurrentmodificationexcept shutdown hook java.util.concurrentmodificationexcept java.util.abstractlist itr.checkforcomodif unknown sourc java.util.abstractlist itr.next unknown sourc org.apache.jackrabbit.util.transientfilefactori 1.run transientfilefactory.java:86
outofmemoryerror re-index repositori error 20060825 17:06:40 org.apache.jackrabbit.core.observation.observationmanagerfactori synchron eventconsum threw except java.lang.outofmemoryerror tri re-index repositori repositori quit big 4 gb disk usag sometim store 40mb size document attach put last log regist full stack trace relat whe also error lucen debug 20060803 08:24:01 org.apache.jackrabbit.core.query.lazyread dump java.io.ioexcept invalid header signatur read 8656037701166316554 expect -2226271756974174256 org.apache.jackrabbit.core.query.mswordtextfilt one debug 20060803 08:37:17 org.apache.jackrabbit.core.itemmanag remov item 8637bf5f-4689-4e75-888f-b7b89bef40c8 cach warn 20060803 08:40:13 org.apache.jackrabbit.core.repositoryimpl exist lock file c \wave\repository\.lock detetec repositori shut proper error 20060803 09:33:14 org.apache.jackrabbit.core.observation.observationmanagerfactori synchron eventconsum threw except java.lang.nullpointerexcept null valu allow repository.xml configur index searchindex class= org.apache.jackrabbit.core.query.lucene.searchindex param name= path value= wsp.home /index param name= textfilterclass value= org.apache.jackrabbit.core.query.lucene.textplaintextfilt org.apache.jackrabbit.core.query.msexceltextfilt org.apache.jackrabbit.core.query.mspowerpointtextfilt org.apache.jackrabbit.core.query.mswordtextfilt org.apache.jackrabbit.core.query.pdftextfilt org.apache.jackrabbit.core.query.htmltextfilt org.apache.jackrabbit.core.query.xmltextfilt org.apache.jackrabbit.core.query.rtftextfilt org.apache.jackrabbit.core.query.openofficetextfilt param name= usecompoundfil value= true param name= minmergedoc value= 100 param name= volatileidletim value= 3 param name= maxmergedoc value= 100000 param name= mergefactor value= 10 param name= buffers value= 10 param name= caches value= 1000 param name= forceconsistencycheck value= fals param name= autorepair value= true param name= respectdocumentord value= fals param name= analyz value= org.apache.lucene.analysis.standard.standardanalyz /searchindex
move listen item state item state manag client interest item state modif direct subscrib item state flexibl approach side increas memori consumpt item state everi item state hold collect listen increas complex item state listen potenti shorter life might garbag collect listen therefor move associ item state manag time enabl item state manag complet remov item state cach resurrect later time without lose listen interest notif
problem jcr-server/project.properti depend seem mismatch version number depend defin jcr-server/project.properti refer version 1.0 yet compon alreadi 1.1 attach patch solv problem n't claim fulli understand work
index creat mani folder re-index repositori re-index search index creat lot directori final clean repositori contain lot content number directori creat quit high thousand directori re-index process clean unus index folder right away wait chang commit
consistencycheck use much memori consist check load lucen document memori larg repositori may lead outofmemoryerror consist check rather read lucen document demand discard afterward
add support provid custom classload class instanti configur configur framework base around baseconfig class provid function instanti class whose name configur repositori configur file exampl class filesystem persistencemanag element current implement beanconfig.newinst method use default classload load configur class class loader beanconfig class actual use general class loader load repositori certain environ class may provid outsid core repositori class loader exampl fo environ osgi setup bundl get class laoder separ class loader except declar configur propos enhanc beanconfig class follow public class beanconfig current default class loader default beanconfig 's class loader privat static classload defaultclassload beanconfig.class.getclassload current instanc class loader privat classload classload set default class loader new beanconfig instanc public static void setdefaultclassload classload loader return default class loader new beanconfig instanc public static classload getclassload set class loader beanconfig instanc public void setclassload classload loader return class loader beanconfig instanc public classload getclassload beanconfig.newinst method would use follow use class public object newinst throw configurationexcept class clazz class.fornam getclassnam true getclassload also discuss dev list http //mail-archives.apache.org/mod_mbox/jackrabbit-dev/200607.mbox/ 3cae03024e0607272341l52aff9b2h3957131411790bc9 mail.gmail.com 3e
or xpath queri bad interpret execut queri a=1 b=2 c=3 lead creat wrong queri tree build tree look like queri a=1 b=2 c=3 see attach use bracket resolv problem without bracket output queri differ input queri switch first palc a=1 b=2 c=3 everyth ok
encode/decod mention email execut code iso9075.decod stringwith insid /code lead except java.lang.stringindexoutofboundsexcept string index rang 1 java.lang.string.charat string.java:444 java.util.regex.matcher.appendreplac matcher.java:559 com.day.crx.domino.util.nameencoderdecoder.decod nameencoderdecoder.java:117 integration.query.querytest.testqueri querytest.java:49 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:324 junit.framework.testcase.runtest testcase.java:154 junit.framework.testcase.runbar testcase.java:127 junit.framework.testresult 1.protect testresult.java:106 junit.framework.testresult.runprotect testresult.java:124 junit.framework.testresult.run testresult.java:109 junit.framework.testcase.run testcase.java:118 junit.framework.testsuite.runtest testsuite.java:208 junit.framework.testsuite.run testsuite.java:203 org.eclipse.jdt.internal.junit.runner.junit3.junit3testreference.run junit3testreference.java:128 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:460 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:673 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:386 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196 problem matcher.appendreplac method n't correct interpret '\ sign escap '\ sign
remov geronimo jta runtim depend geronimo jta mark depend runtim compil time depend possibl remedi use war build n't get geronimo jar stow away
refactor observationmanagerfactori current o.a.j.core.observation.observationmanagerfactori class two main respons 1 creat new observationmanagerimpl instanc observ manag factori 2 manag event consum dispatch event within workspac two respons quit unrel factori respons essenti boil follow method ever invok within workspaceimpl.getobservationmanag public observationmanagerimpl createobservationmanag sessionimpl session itemmanag itemmgr return new observationmanagerimpl session itemmgr simplifi design 'd inlin method renam observationmanagerfactori observationdispatch better reflect one remain respons
incorrect jcr uuid frozen subnod follow program import javax.jcr.repositori import javax.jcr.sess import javax.jcr.simplecredenti import javax.jcr.nod import org.apache.jackrabbit.core.transientrepositori public class debug2 public static void main string arg throw except repositori repositori new transientrepositori session session repository.login new simplecredenti usernam password .tochararray tri node root session.getrootnod node foo root.addnod foo foo.addmixin mix version node bar foo.addnod bar bar.addmixin mix referenc system.out.println bar bar.getuuid session.sav foo.checkin node frozenbar foo.getbasevers .getnod jcr frozennod .getnod bar system.out.println frozenbar uuid frozenbar.getuuid system.out.println jcr uuid frozenbar.getproperti jcr uuid .getvalu .getstr system.out.println jcr frozenuuid frozenbar.getproperti jcr frozenuuid .getvalu .getstr final session.logout give sampl output bar fcf0affb-7476-4a64-a480-3039e8c53d53 frozenbar uuid ed9fece9-9837-4ecc-9b7e-55bdfb8284e2 jcr uuid fcf0affb-7476-4a64-a480-3039e8c53d53 jcr frozenuuid fcf0affb-7476-4a64-a480-3039e8c53d53 jcr uuid frozen bar incorrect althoug getuuid return correct valu
fix pom.xml jackrabbit core small fix big return chang follow depend pom.xml match realli avail maven repo depend groupid jsr170 /groupid artifactid jcr /artifactid version 1.0 /version /depend depend groupid javax.jcr /groupid artifactid jcr /artifactid version 1.0 /version /depend
jackrabbit jca pom.xml see way add attach inlin note need move src/rar/meta-inf/ra.xml src/main/rar/meta-inf/ra.xml default locat maven rar packag xml version= 1.0 encoding= utf-8 licens apach softwar foundat asf one contributor licens agreement see notic file distribut work addit inform regard copyright ownership asf licens file apach licens version 2.0 licens may use file except complianc licens may obtain copi licens http //www.apache.org/licenses/license-2.0 unless requir applic law agre write softwar distribut licens distribut basi without warranti condit kind either express impli see licens specif languag govern permiss limit licens project xmlns= http //maven.apache.org/pom/4.0.0 xmlns xsi= http //www.w3.org/2001/xmlschema-inst xsi schemalocation= http //maven.apache.org/pom/4.0.0 http //maven.apache.org/maven-v4_0_0.xsd modelvers 4.0.0 /modelvers p r o j e c d e c r p o n groupid org.apache.jackrabbit /groupid artifactid jackrabbit-jca /artifactid packag rar /packag name jackrabbit jca /name version 1.1-snapshot /version keep descript singl line otherwis maven might generat corrupt manifest.mf see http //jira.codehaus.org/browse/mjar-4 descript resourc adapt jackrabbit specifi jca 1.0 /descript url http //jackrabbit.apache.org/ /url prerequisit maven 2.0 /maven /prerequisit issuemanag system jira /system url http //issues.apache.org/jira/browse/jcr /url /issuemanag inceptionyear 2005 /inceptionyear m l n g l mailinglist mailinglist name jackrabbit announc list /name subscrib announce-subscrib jackrabbit.apache.org /subscrib unsubscrib announce-unsubscrib jackrabbit.apache.org /unsubscrib archiv http //mail-archives.apache.org/mod_mbox/jackrabbit-announce/ /archiv /mailinglist mailinglist name jackrabbit user list /name subscrib users-subscrib jackrabbit.apache.org /subscrib unsubscrib users-unsubscrib jackrabbit.apache.org /unsubscrib post user jackrabbit.apache.org /post archiv http //mail-archives.apache.org/mod_mbox/jackrabbit-users/ /archiv otherarch otherarch http //dir.gmane.org/gmane.comp.apache.jackrabbit.us /otherarch otherarch http //www.mail-archive.com/us jackrabbit.apache.org/ /otherarch /otherarch /mailinglist mailinglist name jackrabbit develop list /name subscrib dev-subscrib jackrabbit.apache.org /subscrib unsubscrib dev-unsubscrib jackrabbit.apache.org /unsubscrib post dev jackrabbit.apache.org /post archiv http //mail-archives.apache.org/mod_mbox/jackrabbit-dev/ /archiv otherarch otherarch http //dir.gmane.org/gmane.comp.apache.jackrabbit.devel /otherarch otherarch http //www.mail-archive.com/dev jackrabbit.apache.org/ /otherarch otherarch http //www.mail-archive.com/jackrabbit-dev incubator.apache.org/ /otherarch /otherarch /mailinglist mailinglist name jackrabbit sourc control list /name subscrib commits-subscrib jackrabbit.apache.org /subscrib unsubscrib commits-unsubscrib jackrabbit.apache.org /unsubscrib archiv http //mail-archives.apache.org/mod_mbox/jackrabbit-commits/ /archiv /mailinglist /mailinglist licens licens name apach softwar licens version 2.0 /name url http //www.apache.org/licenses/license-2.0 /url distribut repo /distribut /licens /licens scm connect scm svn http //svn.apache.org/repos/asf/jackrabbit/trunk/jca /connect developerconnect scm svn https //svn.apache.org/repos/asf/jackrabbit/trunk/jca /developerconnect url http //svn.apache.org/viewvc/jackrabbit/trunk/jca /url /scm organ name apach softwar foundat /name url http //www.apache.org/ /url /organ build resourc resourc directori src/java /directori /resourc /resourc testresourc testresourc directori applications/test /directori includ includ *.properti /includ includ *.xml /includ /includ /testresourc testresourc directori src/test/java /directori includ includ **/*.xml /includ includ **/*.txt /includ /includ /testresourc /testresourc plugin plugin artifactid maven-compiler-plugin /artifactid configur target 1.4 /target sourc 1.4 /sourc /configur /plugin plugin artifactid maven-surefire-plugin /artifactid configur exclud exclud **/init/* /exclud /exclud includ includ **/*testall.java /includ /includ forkmod /forkmod arglin -xmx128m -enableassert /arglin systemproperti properti name derby.system.dur /name valu test /valu /properti properti name known.issu /name valu org.apache.jackrabbit.core.xml.documentviewtest testmultivalu org.apache.jackrabbit.value.binaryvaluetest testbinaryvalueequ /valu /properti /systemproperti /configur /plugin /plugin /build depend depend groupid org.apache.jackrabbit /groupid artifactid jackrabbit-cor /artifactid version 1.1-snapshot /version /depend depend groupid concurr /groupid artifactid concurr /artifactid version 1.3.4 /version /depend depend groupid commons-collect /groupid artifactid commons-collect /artifactid version 3.1 /version /depend depend groupid org.apache.geronimo.spec /groupid artifactid geronimo-jta_1.0.1b_spec /artifactid version 1.0.1 /version /depend depend groupid javax.jcr /groupid artifactid jcr /artifactid version 1.0 /version /depend depend groupid log4j /groupid artifactid log4j /artifactid version 1.2.8 /version /depend depend groupid org.slf4j /groupid artifactid slf4j-log4j12 /artifactid version 1.0 /version /depend depend groupid lucen /groupid artifactid lucen /artifactid version 1.4.3 /version /depend depend groupid org.apache.derbi /groupid artifactid derbi /artifactid version 10.1.1.0 /version option true /option /depend depend groupid junit /groupid artifactid junit /artifactid version 3.8.1 /version scope test /scope /depend /depend distributionmanag repositori id apache.releas /id name apach repositori pmc approv releas /name url scp //people.apache.org/www/www.apache.org/dist/maven-repository/ /url /repositori snapshotrepositori id apache.snapshot /id name apach develop repositori /name url scp //people.apache.org/www/cvs.apache.org/maven-snapshot-repositori /url /snapshotrepositori site id websit /id url scp //people.apache.org/www/jackrabbit.apache.org/ /url /site /distributionmanag /project
referenc derbi librari behav buggi freebsd derbi librari referenc depend page http //jackrabbit.apache.org/dependencies.html behav buggi freebsd issu like one magnolia cms http //jira.magnolia.info/browse/magnolia-818 version derby-10.1.3.1 work fine
add miss licens header sourc file number file miss incorrect licens header within jackrabbit sourc tree see discusss http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/8698 detail miss licens header need ad also w3c licens file need mention notic file
msexceltextfilt throw except repositori startabl tri add excel file see attach get except caus java.lang.numberformatexcept get string valu numer cell org.apache.poi.hssf.usermodel.hssfcell.getstringcellvalu hssfcell.java:800 org.apache.jackrabbit.core.query.msexceltextfilt 1.initializeread msexceltextfilter.java:97 org.apache.jackrabbit.core.query.lazyreader.read lazyreader.java:79 bad news add file repositori startabel anymor file redo.log get blocker stack restart numberformatexcept 19.09.2006 08:47:23 *error* repositoryimpl unabl start repositori forc shutdown 19.09.2006 08:47:23 *info repositoryimpl shut repositori 19.09.2006 08:47:23 *info repositoryimpl shut workspac default 19.09.2006 08:47:23 *info observationmanagerfactori notif eventlisten stop 19.09.2006 08:47:23 *info repositoryimpl workspac default shutdown think import block whole repositori index throw except thank claus
unicod escap file generat jjtree maven build fail window machin sourc locat directori start u file creat jjtree javacc put filenam path comment generat file like bgen jjtree generat jjtree edit line d \usr\projects\workspace\jackrabbit\target\generated-src\main\org\apache\jackrabbit\core\query\sql\jcrsql.jj \u interpret escap charact get build fail invalid escap charact
support oracl schema jackrabbit assum tabl name f.e prefix fs_entri uniqu across schema use one oracl instanc two jackrabbit instanc use two schema oracl instanc wo n't work
tck nodereadmethodstest.testgetnam fail npe testroot child node testgetnam assert childnod field popul setup whatev reason test data n't provid singl childnod test root test fail nullpoint except would like suggest use assert testgetpath throw notexecutableexcept case miss child node patch attach
improv handl concurr node modif consid follow scenario session1 modifi node /a ad child node b session2 modifi node /a ad child node c session2 save chang session1 tri save chang result invaliditemstateexcept behavior accord spec spec howev n't prevent lenient handl scenario concurr modif non-conflict trivial chang could silent merg session1 's transient state node /a exampl trivial non-conflict chang s1 add child node s2 remov child node b s1 add child node s2 add child node b s1 add child node s2 add mixin type exampl non-trivi and/or conflict chang s1 remov child node s2 remov child node s1 add child node s2 add child node s1 add sns child node 3 s2 add sns child node 3 s1 add sns child node 3 s2 remov sns child node 1 s1 remov sns child node 2 s2 reorder child node affect sns node
creat jackrabbit-api .jar respect jackrabbit-rmi extens current manag function cover jcr like notetyp manag workspac creation expos via specif api therfor access via rmi creat jackrabbit api respect rmi extens
remov mixin add same-name-s child node throw itemnotfoundexcept apolog advanc previous note jira list could n't find anyth remov mixin defin same-name-s child itemnotfoundexcept thrown due child node indici maintain similar method nodeimpl onremov recongn amend remov tail removemixin also issu simpl test reproduct type mix foo mixin bar nt bar multipl nt bar nt unstructur mix referenc code public class removemixintest extend abstractservertest privat static final string mixin mix foo privat static final string child bar privat static final string ptype nt bar public void testremovemixin throw repositoryexcept session session getsess node root session.getrootnod .addnod root root.addmixin mixin root.addnod child ptype root.addnod child ptype root.addnod child ptype session.sav nodeiter root.getnod it.hasnext node node it.nextnod system.out.println node.getpath node.getuuid tri root.removemixin mixin root.sav catch repositoryexcept ex ex.printstacktrac output /root/bar 0b09e0b4-0727-4194-978a-4eadfbf93fa8 /root/bar 2 84d5e556-6f12-43fb-98e3-614bcf1f7bb7 /root/bar 3 8db95029-df3b-4e26-affb-438de0206cf5 javax.jcr.itemnotfoundexcept 8db95029-df3b-4e26-affb-438de0206cf5 org.apache.jackrabbit.core.itemmanager.createiteminst itemmanager.java:463 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:319 org.apache.jackrabbit.core.nodeimpl.removemixin nodeimpl.java:1212 org.apache.jackrabbit.core.nodeimpl.removemixin nodeimpl.java:2624 com.ms.appmw.rcf.server.removemixintest.testremovemixin removemixintest.java:48 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 junit.framework.testcase.runtest testcase.java:154 msjava.base.testutils.junit3.mstestcase.runtest mstestcase.java:203 msjava.base.testutils.junit3.testcaseteardownevenifsetupfails.runbar testcaseteardownevenifsetupfails.java:92 msjava.base.testutils.junit3.mstestcase.runbar mstestcase.java:170 junit.framework.testresult 1.protect testresult.java:106 miss uuid last node one found upon remov second index 2 still valid thank
xmltextfilt extract text element xmltextfilt return text attribut content text element
use standard maven repositori depend jcr api jar avail standard maven repositori see http //jira.codehaus.org/browse/mavenupload-1050 could thus remov depend day repositori request http //jira.codehaus.org/browse/mev-453
's possibl regist event listen filter mixin supertyp current implement block eventfilt check given eventst mixin deriv one given node type
refactor persist manag current persist manag resid org.apache.jackrabbit.core.st org.apache.jackrabbit.core.state.db org.apache.jackrabbit.core.state.mem org.apache.jackrabbit.core.state.obj org.apache.jackrabbit.core.state.xml org.apache.jackrabbit.core.state.util also lot class deal state eg shareditemstatemanag state packag relat pms would like move persistencemanag pm relat stuff org.apache.jackrabbit.core.persist 'd keep current class deprec subclass within jackrabbit-core.jar jackrabbit 2.0 may peopl extend exist class 'd avoid break binari compat even though ve never promis actual honor compatibl within o.a.j.cor
keep jackrabbit jar/pom 's updat ibiblio pleas keep jackrabbit updat ibiblio maven repositori jackrabbit-1.1 need ad
datevalue.equ reli calendar.equ jsr170 state regard date valu text format date must follow follow iso 8601:2000-compliant format datevalue.valueof string datevalue.getstr reli function provid org.apache.jackrabbit.util.iso8601 datevalue.equ compar equal intern calendar object datevalu line 89 may return fals even iso-format valu equal word creat new datevalu use valuefactori string represent exist datevalu return object equal origin datevalu reason string contain infom use calendar.equ regard angela
repositori releas resourc shutdown jackrabbit shutdown java.util.tim thread still run background even though task schedul prevent gc collect class jackrabbit redeploy within web applic
importxml still depend xerc przemo pakulski comment jcr-367 jackrabbit-cor still depend xerc direct runtim sessionimpl.importworkspac workspacempl.importworkspac method contain folliwng line xmlreader parser xmlreaderfactory.createxmlread org.apache.xerces.parsers.saxpars work maven1 probabl maven1 need xerc run test goal suggest reopen issu creat new issu sinc jcr-367 alreadi close 1.1 releas
oraclefilesystem ca n't handl empti file follow except thrown tri access 0-length file oraclefilesystem java.sql.sqlexcept ora-22275 invalid lob locat specifi issu report user list see http //www.nabble.com/problems-with-oracle-tf2483987.html a6926522
error regist node type virgin repositori node type regist repositori never start error written log 26.10.2006 10:36:02 *error* main virtualnodetypestatemanag unabl index new nodetyp javax.jcr.itemnotfoundexcept virtualnodetypestatemanager.java line 159 step reproduc maven test clean cp applications/test/repository/namespaces/ns_re.properties.instal applications/test/repository/namespaces/ns_re.properti cp applications/test/repository/nodetypes/custom_nodetypes.xml.instal applications/test/repository/nodetypes/custom_nodetypes.xml run test case o.a.j.init.nodetypedata seem workspac initi creat node state jcr system child node jcr nodetyp latter howev overlay virtual node state provid virtualnodetypestateprovid case initi startup jcr nodetyp node cach creation overlay virtual twin virtualnodetypestateprovid imo jcr nodetyp node state n't creat first place overlay anyway workspac initi routin creat child node entri jcr system node state actual child node state entri opinion
rmi-datevalu support full iso8601 format mention javadoc convert code calendar /code instanc string class use code simpledateformat /code instanc pattern code yyyy-mm-dd't'hh mm ss z /code issu pattern era specif defin jcr specif +/- prefix well full time zone name support
upgrad derbi 10.2 apach derbi 10.2 releas recent releas contain number improv includ perform requir special upgrad procedur suggest upgrad derbi 10.2 along lucen 2.0 jcr-352 maven 2 jcr-332
setup night build jackrabbit jackrabbit zone creat see infra-1008 setup night jackrabbit build discuss http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/9190/
restructur jackrabbit sourc tree reintroduc chang jcr-157 general restructur simplifi jackrabbit project structur see http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/9170/ rational discuss main part restructur would 1 creat jackrabbit super-project artifactid jackrabbit trunk/ 2 use super-project pom parent jackrabbit compon pom 3 move content trunk/jackrabbit/src/sit direct trunk/src/sit use super-project generat web site 4 creat independ subproject jackrabbit-api jackrabbit-common compon move correspond part sourc tree 5 move jcr-server subproject level 6 renam subproject directori match artifactid note restructur depend jcr-611 jcr-332 sinc best way implement util snapshot repositori compon depend
implement memori file system need memori file system test case patch simpl implement work well environ attach
weird lock behaviour cachinghierarchymanag itegr test repositori sometim locks-up stacktrac like thread-38 daemon prio=5 tid=0x08cb3908 nid=0xdd8 runnabl 9fef000..9fefd90 org.apache.jackrabbit.core.cachinghierarchymanager.removelru cachinghierarchymanager.java:540 wait lock 0x16a9b0e0 java.lang.object org.apache.jackrabbit.core.cachinghierarchymanager.cach cachinghierarchymanager.java:510 lock 0x16a9b0e0 java.lang.object org.apache.jackrabbit.core.cachinghierarchymanager.buildpath cachinghierarchymanager.java:163 org.apache.jackrabbit.hierarchymanagerimpl.buildpath hierarchymanagerimpl.java:296 although think sacktrac valid thread hold monitor wait lock scenario show lot stress-test assum 's jit messesup synchorn fix remov doubl monitor entri case
jcr2spi npe parentid return nodeinfo.getparentid show parent 's child node list custom spi implement version histori node appear children jcr versionstorag jcr versionstorag return children would impract perform reason expect similar approach use other getparentid nodeinfo versionhistori return nodeid jcr versionstorag case get npe java.lang.nullpointerexcept org.apache.jackrabbit.jcr2spi.state.workspaceitemstatefactory.createnodest workspaceitemstatefactory.java:99 org.apache.jackrabbit.jcr2spi.state.cachingitemstatemanager.resolv cachingitemstatemanager.java:168 org.apache.jackrabbit.jcr2spi.state.cachingitemstatemanager.getitemst cachingitemstatemanager.java:94 org.apache.jackrabbit.jcr2spi.workspacemanager.getitemst workspacemanager.java:328 org.apache.jackrabbit.jcr2spi.state.transientisfactory.createnodest transientisfactory.java:120 org.apache.jackrabbit.jcr2spi.state.cachingitemstatemanager.resolv cachingitemstatemanager.java:168 org.apache.jackrabbit.jcr2spi.state.cachingitemstatemanager.getitemst cachingitemstatemanager.java:94 org.apache.jackrabbit.jcr2spi.state.transientitemstatemanager.getitemst transientitemstatemanager.java:209 org.apache.jackrabbit.jcr2spi.state.sessionitemstatemanager.getitemst sessionitemstatemanager.java:155 org.apache.jackrabbit.jcr2spi.sessionimpl.getnodebyid sessionimpl.java:271 org.apache.jackrabbit.jcr2spi.sessionimpl.getnodebyuuid sessionimpl.java:239 return null special case fix problem seem creat new problem elsewher need clarifi spi potenti fix jcr2cpi
completeness/fresh namespaceregistri nodetyperegistri need defin requir complet fresh repositoryservice.getregisterednamespac right optimist assumpt seem spi provid abl report namespac occur repositori beforehand even know potenti target spi simpli ca n't seem quit wast time namespac prefix n't actual use later furthermor spi namespac prefix n't realli relev except enabl transient layer return meaning prefix instead automat generat one therefor propoal would 1 clarifi map return getregisterednamespac n't requir complet 2 enhanc jcr2spi auto-gener prefix encount namespac registri expect also affect repositoryservice. un registernamespac let 's discuss under issu first
cachinghieraarchymanag may serv move item problem weak referenc item state event notif localitemstatemanag consid follow session travers node fills-up cach chachinghierarchymanag also fill weak-ref cach session localitemstatemanag session b oper point gc decid remov weak refferenc itemst session localitemstatemanag session b move node save chang shareditemstatemanag notifi listen node modifi localitemstatemanag session receiv event bubbl item anymor cach cachinghierarchymanag session never receiv modif event still server item old locat solut reconnect miss state localitemstatemanag event receiv drawback lot state would generat need solut b add new event nodemodifi sent localitemstatemanag statemodifi receiv item aymor drawback alot event generat implement solut b
cachemanag memori manag jackrabbit jackrabbit run memori combin size various cach manag biggest problem combin size o.a.j.core.state.mlruitemstatecach cach session seem creat cach one limit 4 mb default implement dynam cache- memori manag servic distribut fix amount memori dynam cach patch
workspace.getimporthandl n't handl namespac declar document view report attribut xmidocumentviewimporttest copi documentviewimporttest except createsimpledocu overridden new simpl document typic xmi serial eclips model framework emf four eight test fail due bad uri trace javax.jcr.namespaceexcept www.apache.org/jackrabbit/test/namespaceimporttest7 regist namespac uri org.apache.jackrabbit.core.namespaceregistryimpl.getprefix namespaceregistryimpl.java:378 org.apache.jackrabbit.core.localnamespacemappings.getprefix localnamespacemappings.java:193 org.apache.jackrabbit.core.sessionimpl.getnamespaceprefix sessionimpl.java:1307 org.apache.jackrabbit.test.api.xmidocumentviewimporttest.checkimportsimplexmltre xmidocumentviewimporttest.java:176 org.apache.jackrabbit.test.api.xmidocumentviewimporttest.performtest xmidocumentviewimporttest.java:154 org.apache.jackrabbit.test.api.xmidocumentviewimporttest.dotestimportxml xmidocumentviewimporttest.java:119 org.apache.jackrabbit.test.api.xmidocumentviewimporttest.testworkspaceimportxml xmidocumentviewimporttest.java:70 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 junit.framework.testcase.runtest testcase.java:154 junit.framework.testcase.runbar testcase.java:127 junit.framework.testresult 1.protect testresult.java:106 junit.framework.testresult.runprotect testresult.java:124 junit.framework.testresult.run testresult.java:109 junit.framework.testcase.run testcase.java:118 org.apache.jackrabbit.test.abstractjcrtest.run abstractjcrtest.java:393 junit.framework.testsuite.runtest testsuite.java:208 junit.framework.testsuite.run testsuite.java:203 org.eclipse.jdt.internal.junit.runner.junit3.junit3testreference.run junit3testreference.java:128 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:460 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:673 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:386 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196
creat jcr-browser contrib project noon opos ll start contrib project call jcr-browser live demo initi code avail http //edgarpoce.dyndns.org:8080/jcr-browser/
auto reconnect rmi repositori bind repositoryaccessservlet rmi repositori reboot repositori get nullpointerexcept stack java.lang.nullpointerexcept org.apache.jackrabbit.webdav.jcr.jcrdavexception. init jcrdavexception.java:111 org.apache.jackrabbit.webdav.simple.davsessionproviderimpl.attachsess davsessionproviderimpl.java:99 org.apache.jackrabbit.server.abstractwebdavservlet.servic abstractwebdavservlet.java:181 deploy jackrabbit model 3 environ situat happen often thank claus
cluster implement basic cluster i.e make two repositori avail time allow stay sync chang appli one
outofmemoryerror repeat login logout mani time repeat login logout mani time encount outofmemoryerror javax.jcr.repositoryexcept instanti persist manag org.apache.jackrabbit.core.state.db.derbypersistencemanag java except java heap space java.lang.outofmemoryerror java except java heap space java.lang.outofmemoryerror org.apache.jackrabbit.core.repositoryimpl.createpersistencemanag repositoryimpl.java:1095 org.apache.jackrabbit.core.repositoryimpl.createversionmanag repositoryimpl.java:300 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:245 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:498 org.apache.jackrabbit.core.transientrepositori 2.getrepositori transientrepository.java:245 org.apache.jackrabbit.core.transientrepository.startrepositori transientrepository.java:265 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:333 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:388 test.tryloginandlogout test.java:19 test.test1 test.java:13 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 junit.framework.testcase.runtest testcase.java:164 junit.framework.testcase.runbar testcase.java:130 junit.framework.testresult 1.protect testresult.java:106 junit.framework.testresult.runprotect testresult.java:124 junit.framework.testresult.run testresult.java:109 junit.framework.testcase.run testcase.java:120 junit.framework.testsuite.runtest testsuite.java:230 junit.framework.testsuite.run testsuite.java:225 org.eclipse.jdt.internal.junit.runner.junit3.junit3testreference.run junit3testreference.java:128 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:460 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:673 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:386 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196 caus sql except java except java heap space java.lang.outofmemoryerror org.apache.derby.impl.jdbc.util.newembedsqlexcept unknown sourc org.apache.derby.impl.jdbc.util.newembedsqlexcept unknown sourc org.apache.derby.impl.jdbc.util.javaexcept unknown sourc org.apache.derby.impl.jdbc.transactionresourceimpl.wrapinsqlexcept unknown sourc org.apache.derby.impl.jdbc.transactionresourceimpl.handleexcept unknown sourc org.apache.derby.impl.jdbc.embedconnection.handleexcept unknown sourc org.apache.derby.impl.jdbc.connectionchild.handleexcept unknown sourc org.apache.derby.impl.jdbc.embedpreparedstatement. init unknown sourc org.apache.derby.impl.jdbc.embedpreparedstatement20. init unknown sourc org.apache.derby.impl.jdbc.embedpreparedstatement30. init unknown sourc org.apache.derby.jdbc.driver30.newembedpreparedstat unknown sourc org.apache.derby.impl.jdbc.embedconnection.preparestat unknown sourc org.apache.derby.impl.jdbc.embedconnection.preparestat unknown sourc org.apache.jackrabbit.core.state.db.databasepersistencemanager.init databasepersistencemanager.java:224 org.apache.jackrabbit.core.repositoryimpl.createpersistencemanag repositoryimpl.java:1091 27 java.lang.outofmemoryerror java heap space
memori freed jackrabbit-serv war redeploy tomcat bug introduc new cachemanag featur see jcr-619 cachemanag start new background thread optim memori distribut everi second accross various cach jackrabbit repositori shutdown background thread still run prevent gc collect classload jackrabbit deploy web applic step reproduc 1 build jackrabbit jcr-server trunk deploy tomcat 2 touch web.xml file jcr-server web app forc redeploy step 2 two thing may happen either memori consumpt increas cachemanag thread shutdown cachemanag thread die unexpect nullpointerexcept except thread org.apache.jackrabbit.core.state.cachemanag java.lang.nullpointerexcept org.apache.jackrabbit.core.state.cachemanager.run cachemanager.java:90 java.lang.thread.run unknown sourc
move document type definit repository.xml hello cognifid przemo got bit confus tri solv jcr-202 need modifi repository.xml configur file 's dtd found differ repository.xml file within trunk differ definit think good idea extract definit one separ file mayb .xsd instead .dtd link file would also nice put file somewher web refer via url wait comment regard jan
deprec serial proper deleg method call deprec org.apache.jackrabbit.core.state.util.seri class actual forward method call replac instead call repeat lead infinit recurs attach test demonstr yield follow trace java.lang.stackoverflowerror org.apache.jackrabbit.core.state.util.serializer.seri serializer.java:39
outofmemori problem handlemonitor releas close input stream class o.a.j.core.fs.local.handlemonitor releas close monitoredinputstream close method never call input stream kept hash set map handlemonitor eventu lead outofmemori except open close mani file
compactnodetypedefwrit escap name proper compactnodetypedefwrit escap name proper name includ '- '+ name must surround singl quot
versionmanag lock releas circumst circumst possibl lock releas versionmanager.checkin method follow block code checkin nethod aquirereadlock tri catch illegalstateexcept e releasereadlock throw new repositoryexcept unabl start edit oper lock releas final block make sure lock releas unexpect except thrown environ get npe mention block code result persisten lock version oper possibl applic server run ot thread thread lock
derbypersistencemanag usabl embed databas derbypersistencemanag alway shut databas exit make unus standalon databas
log trace wrapper jcr api implement log trace mechan jcr api short summari wrapper repositori object creat direct indirect session node wrap well wrapper log jcr method call file call under method return valu call method line number log well option log file main java sourc code compil run includ player re-play log file exampl log file big compil
local authcontext authent loginmodul ignor loginmodul indic n't handl thecurr login-attemp return fals login commit invok thus ignor logincontext calcul overal login success case local context login fail loginmodul ignor current success
multipl namespac definit cnd prevent definit node type without child node bnf http //jackrabbit.apache.org/api-1/org/apache/jackrabbit/core/nodetype/compact/compactnodetypedefreader.html defin cnd := ns_map node_type_def multipl namespac definit affect node type definit howev follow cnd definit fail namespace= http //www.mynamespace.co.uk/namespac nt http //www.jcp.org/jcr/nt/1.0 namespac document nt file namespac name string mandatori namespace= http //www.mynamespace.co.uk/namespac nt http //www.jcp.org/jcr/nt/1.0 namespac document2 nt file namespac name string mandatori remov second set namespac definit 's well namespace= http //www.mynamespace.co.uk/namespac nt http //www.jcp.org/jcr/nt/1.0 namespac document nt file namespac name string mandatori namespac document2 nt file namespac name string mandatori
support lower-/upper-cas function queri languag support lower- upper-cas function match properti valu string liter exampl 1 find node string properti foo lower-cas valu equal bar xpath 's fn lower-cas foo bar sql select nt base lower foo bar exampl 2 find node string properti foo upper-cas valu match jcr xpath jcr like fn upper-cas foo jcr sql select nt base uppper foo like jcr
renam jcr-browser contrib project 's project call jcr-browser sourceforg 's desktop browser mantain sandro boehm ll renam contrib project jcr-navig unless someon propos better name
ca n't add lock token session 3 login/logout login lock file logout perfom new login add previous lock token current session want unlock file work fine new logout/login ca n't unlock file file lock best understand look test case
databasepersistencemanag databasefilesystem tri grace recov connect loss
mislead except messag jcr deref type second argument jcr deref function string invalidqueryexcept thrown mislead messag wrong second argument type jcr like rather someth like second argument jcr deref must string
nullpointerexcept sessionitemstatemanag got follow except reproduc occur larg batch write oper unfortun got idea happen may someon idea 2006-11-27 21:43:53,065 warn support.remoteinvocationtraceinterceptor:80 process rmiserviceexport remot call result fatal except com.subshell.sophora.content.server.icontentmanager.importdocu org.springframework.transaction.transactionsystemexcept could commit jcr transact nest except java.lang.nullpointerexcept caus java.lang.nullpointerexcept org.apache.jackrabbit.core.state.sessionitemstatemanager.nodemodifi sessionitemstatemanager.java:878 org.apache.jackrabbit.core.state.statechangedispatcher.notifynodemodifi statechangedispatcher.java:143 org.apache.jackrabbit.core.state.localitemstatemanager.statemodifi localitemstatemanager.java:426 org.apache.jackrabbit.core.state.statechangedispatcher.notifystatemodifi statechangedispatcher.java:85 org.apache.jackrabbit.core.state.shareditemstatemanager.statemodifi shareditemstatemanager.java:388 org.apache.jackrabbit.core.state.statechangedispatcher.notifystatemodifi statechangedispatcher.java:85 org.apache.jackrabbit.core.state.shareditemstatemanager.statemodifi shareditemstatemanager.java:388 org.apache.jackrabbit.core.state.itemstate.notifystateupd itemstate.java:241 org.apache.jackrabbit.core.state.changelog.persist changelog.java:271 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:691 org.apache.jackrabbit.core.state.xaitemstatemanager.commit xaitemstatemanager.java:169 org.apache.jackrabbit.core.version.xaversionmanager.commit xaversionmanager.java:478 org.apache.jackrabbit.core.transactioncontext.commit transactioncontext.java:172 org.apache.jackrabbit.core.xasessionimpl.commit xasessionimpl.java:315 org.springmodules.jcr.jackrabbit.support.jackrabbitusertransaction.commit jackrabbitusertransaction.java:104 org.springmodules.jcr.jackrabbit.localtransactionmanager.docommit localtransactionmanager.java:192 org.springframework.transaction.support.abstractplatformtransactionmanager.processcommit abstractplatformtransactionmanager.java:540 org.springframework.transaction.support.abstractplatformtransactionmanager.commit abstractplatformtransactionmanager.java:510 org.springframework.transaction.interceptor.transactionaspectsupport.committransactionafterreturn transactionaspectsupport.java:310 org.springframework.transaction.interceptor.transactioninterceptor.invok transactioninterceptor.java:117 org.springframework.aop.framework.reflectivemethodinvocation.proce reflectivemethodinvocation.java:185 org.springframework.aop.interceptor.exposeinvocationinterceptor.invok exposeinvocationinterceptor.java:89 org.springframework.aop.framework.reflectivemethodinvocation.proce reflectivemethodinvocation.java:185 org.springframework.aop.framework.jdkdynamicaopproxy.invok jdkdynamicaopproxy.java:209 proxy14.importdocu unknown sourc sun.reflect.generatedmethodaccessor18.invok unknown sourc sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 org.springframework.aop.support.aoputils.invokejoinpointusingreflect aoputils.java:318 org.springframework.aop.framework.reflectivemethodinvocation.invokejoinpoint reflectivemethodinvocation.java:203 org.springframework.aop.framework.reflectivemethodinvocation.proce reflectivemethodinvocation.java:162 org.springframework.remoting.support.remoteinvocationtraceinterceptor.invok remoteinvocationtraceinterceptor.java:70 org.springframework.aop.framework.reflectivemethodinvocation.proce reflectivemethodinvocation.java:185 org.springframework.aop.framework.jdkdynamicaopproxy.invok jdkdynamicaopproxy.java:209 proxy15.importdocu unknown sourc sun.reflect.generatedmethodaccessor21.invok unknown sourc sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 org.springframework.remoting.support.remoteinvocation.invok remoteinvocation.java:181 org.springframework.remoting.support.defaultremoteinvocationexecutor.invok defaultremoteinvocationexecutor.java:38 org.springframework.remoting.support.remoteinvocationbasedexporter.invok remoteinvocationbasedexporter.java:76 org.springframework.remoting.rmi.rmibasedexporter.invok rmibasedexporter.java:72 org.springframework.remoting.rmi.rmiinvocationwrapper.invok rmiinvocationwrapper.java:62 sun.reflect.generatedmethodaccessor10.invok unknown sourc sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 sun.rmi.server.unicastserverref.dispatch unicastserverref.java:294 sun.rmi.transport.transport 1.run transport.java:153 java.security.accesscontroller.doprivileg nativ method sun.rmi.transport.transport.servicecal transport.java:149 sun.rmi.transport.tcp.tcptransport.handlemessag tcptransport.java:460 sun.rmi.transport.tcp.tcptransport connectionhandler.run tcptransport.java:701 java.lang.thread.run thread.java:595
like express match line termin string string properti contain line termin like pattern match line termin implement use java.util.regexp.pattern class without dotal option
simplejbossaccessmanag http //wiki.apache.org/jackrabbit/simplejbossaccessmanag code contribut
improv perform queri larg result set current implement queryresult requir access right check nodeid pass ot queryresult handl improv lazi approach result node check configur batch usual client interest top score result
nodecanaddmixintest.testcheckedin wrong option check nodecanaddmixintest.testcheckedin check lock option instead version option
workspac test requir second workspac workspac test requir second workspac even though use test case
implement requir save mixin assign test case call save mixin ad
propertyreadmethodstest also work name properti test case propertyreadmethodstest requir string properti even though name properti like jcr primarytyp would suffici
jcr-server allow header miss colong rootcollect workspaceresourceimpl list support dav method miss colon
canaddchildnodecallwithnodetypetest.testdefinedandlegaltyp may fail protect child node definit pick util nodetypeutil.locatechildnodedef pick protect child node definit test case fail allow add protect child node
import multivalu properti singl valu result incorrect properti creation import file export system view valu multivalu properti store singlevalu properti bug seem reason even propdef.ismultipl true given properti valueformatexcept thrown set properti singl valu workaround work chang propinfo.appli line 136 va.length 1 def.ismultipl
sql parser fail sql 92 timestamp format sql queri parser fail except sql 92 timestamp format use e.g date timestamp 1976-01-01 00:00:00.000+01:00 work follow succeed use iso8601 date timestamp 1976-01-01t00:00:00.000+01:00
rmic work subproject compil parent use maven2 bug child build use ant plugin inherit plugin depend first time plugin declar workaround put antrun plugin toplevel add java jar plugin depend refer http //mail-archives.apache.org/mod_mbox/maven-users/200602.mbox/ 3cc2cdefbecfc9a14892bccfb4c95f4868044f8230 ex-201.mail.navisite.com 3e
rmi property.getvalu fail eofexcept mani read read binari properti via rmi happen fail throw eofexcept caus server side mani open file bacaus binaryvalue.writeobject close under valu inputstream
variant spell trasact transact codebas incorrect spell trasact codebas correct spell transact appear far greater number time isol packag org.apache.jackrabbit.jca incorrect spell trasact found 3x jcamanagedconnection.java 7x jcamanagedconnectionfactory.java correct spell transact found 20x jcamanagedconnection.java 2x jcamanagedconnectionfactory.java 1x jcaresourceadapter.java 12x transactionboundxaresource.java
allow pseudo properti queri relat xpath queri parser allow use function name part relat queri
move namespacemappings/index lucen namespac registri namespacemap class index use generat small prefix namespac uri store index mechan stabl prefix could use place well exampl persist manag suggest introduc general method namespac registri int geturiindex string uri string geturi int index
localnamespacemap make use namecach namespaceregistryimpl basic mean namecach namespaceregistryimpl never use localnamespacemap also implement namecach forward call namespaceregistryimpl name namespac uri local remap see propos patch
deadlock concurr save/checkin oper possibl save checkin oper tri acquir 2 lock differ order lead deadlock save 1.shareditemstatemanager.acquirewritelock 2.abstractversionmanager.acquirewritelock lock checkin 1.abstractversionmanager.acquirewritelock 2.shareditemstatemanager.acquirereadlock lock thread-4 prio=6 tid=0x0312d840 nid=0x824 object.wait 0x03cef000..0x03cefa68 java.lang.object.wait nativ method wait 0x23210968 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock java.lang.object.wait unknown sourc edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock.acquir unknown sourc lock 0x23210968 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock org.apache.jackrabbit.core.version.abstractversionmanager.acquirewritelock abstractversionmanager.java:124 org.apache.jackrabbit.core.version.versionmanagerimpl.setnoderefer versionmanagerimpl.java:413 org.apache.jackrabbit.core.version.versionitemstateprovider.setnoderefer versionitemstateprovider.java:125 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:699 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:810 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:326 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:313 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:302 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:295 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1204 lock 0x2332eaa0 org.apache.jackrabbit.core.xasessionimpl jrtestdeadlock.run jrtestdeadlock.java:87 thread-3 prio=6 tid=0x0312db18 nid=0xa04 object.wait 0x03caf000..0x03cafae8 java.lang.object.wait nativ method wait 0x232d1360 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock readerlock java.lang.object.wait unknown sourc edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock readerlock.acquir unknown sourc lock 0x232d1360 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock readerlock org.apache.jackrabbit.core.state.shareditemstatemanager.acquirereadlock shareditemstatemanager.java:1361 org.apache.jackrabbit.core.state.shareditemstatemanager.hasitemst shareditemstatemanager.java:270 org.apache.jackrabbit.core.state.localitemstatemanager.hasitemst localitemstatemanager.java:180 org.apache.jackrabbit.core.state.xaitemstatemanager.hasitemst xaitemstatemanager.java:252 org.apache.jackrabbit.core.state.sessionitemstatemanager.hasitemst sessionitemstatemanager.java:188 org.apache.jackrabbit.core.itemmanager.itemexist itemmanager.java:256 org.apache.jackrabbit.core.nodeimpl.hasproperti nodeimpl.java:1509 org.apache.jackrabbit.core.version.internalfrozennodeimpl.checkin internalfrozennodeimpl.java:276 org.apache.jackrabbit.core.version.internalfrozennodeimpl.checkin internalfrozennodeimpl.java:248 org.apache.jackrabbit.core.version.internalversionhistoryimpl.checkin internalversionhistoryimpl.java:440 org.apache.jackrabbit.core.version.abstractversionmanager.checkin abstractversionmanager.java:397 org.apache.jackrabbit.core.version.versionmanagerimpl 2.run versionmanagerimpl.java:289 org.apache.jackrabbit.core.version.versionmanagerimpl dynamicescfactory.dosourc versionmanagerimpl.java:611 lock 0x2320c5d8 org.apache.jackrabbit.core.version.versionmanagerimpl dynamicescfactori org.apache.jackrabbit.core.version.versionmanagerimpl.checkin versionmanagerimpl.java:285 org.apache.jackrabbit.core.version.xaversionmanager.checkin xaversionmanager.java:161 org.apache.jackrabbit.core.nodeimpl.checkin nodeimpl.java:2944 jrtestdeadlock.run jrtestdeadlock.java:103
string properti invalid xml charact export invalid xml note current jcr 1.0.1 mainten draft section 6.4.1 6.4.2.6 xml export string properti contain invalid xml charact n't well-defin current sinc charact permiss xml propos fix use base64 encod valu system view charact x20 exampl current escap numer output amp 0 escap sequenc ca n't pars xml import method current behavior particular problemat user n't know output corrupt later tri import get invalidserializeddataexcept reason base64 option delay might make sens interim solut fail export somehow patch import relax pars allow escap code
particip workspac cluster configur current cluster enabl everi workspac particip automat configur workspac introduc attribut clustered= true|fals
fulltext index jcr uuid properti uuid valu referenc node current add index four time system field uuid properti valu jcr uuid part node scope fulltext index part jcr uuid properti scope fulltext index repositori lot referenc node bloat index add much valu search node uuid prefer done use equal oper use jcr contain function suggest remov fulltext index jcr uuid properti exist index would still work chang new updat node would simpli properti jcr uuid fulltext index anymor
nullpointerexcept serverrow nullpointerexcept occur serverrow.getvalu under valu array contain null refer see http //www.nabble.com/exception-after-calling-webdav-search-command-tf2826750.html detail java.lang.nullpointerexcept org.apache.jackrabbit.rmi.value.statefulvalueadapter.gettyp statefulvalueadapter.java:98 org.apache.jackrabbit.rmi.value.serialvalue. init serialvalue.java:65 org.apache.jackrabbit.rmi.value.serialvaluefactory.makeserialvalu serialvaluefactory.java:100 org.apache.jackrabbit.rmi.value.serialvaluefactory.makeserialvaluearray serialvaluefactory.java:77 org.apache.jackrabbit.rmi.server.serverrow.getvalu serverrow.java:58 best solut would explicit handl null serialvaluefactory.makeserialvalu
accessmanag cachinghierarchymanag problem problem implement cachinghierarchymanag simpleaccessmanag hold refer let 's consid follow exampl add 3 subnod b c node reorder b c c b process reorder use function orderbefor javax.jcr.nod accessmanag call sever time check permiss node accessmanag use function cachinghierarchymanag f.ex path itempath hiermgr.getpath id return itempath.denotesroot path itempath hiermgr.getpath itemid path parentpath itempath.getancestor 1 return hiermgr.resolvepath parentpath problem call method cachinghierarchymanag node ask cach idcach wrong state i. e. actual reorder element want f.ex delet node b reorder node look idcach cach index node b still 2 actual 3 wrong node delet
bad transit depend commons-httpcli report httpclient-605 commons-httpcli 3.0 depend introduc junit transit compil scope depend librari also use commons-log sidestep jackrabbit 's use slf4j log avoid issu local overrid junit depend commons-httpcli replac commons-log depend jcl104-over-slf4j
servlet-api depend scope provid jackrabbit-jcr-serv use default compil scope servlet-api jackrabbit-jcr-serv caus warn scope provid build jackrabbit-webapp
remov synchron cachingnamespaceresolv method getqnam getjcrnam unnecessarili synchron caus monitor content concurr call method namecach interfac also synchron propos follow chang index cachingnamespaceresolver.java cachingnamespaceresolver.java revis 488245 +++ cachingnamespaceresolver.java work copi -84,7 +84,7 deprec use link nameformat pars string namespaceresolv public synchron qname getqnam string name public qname getqnam string name throw illegalnameexcept unknownprefixexcept return nameformat.pars name -92,7 +92,7 deprec use link nameformat format qname namespaceresolv public synchron string getjcrnam qname name public string getjcrnam qname name throw noprefixdeclaredexcept return nameformat.format name
chang access-level modifi allow better subclass method core part jackrabbit packag protect allow easi subclass suggest make method protect
uuid compareto hashcod current uuid.compareto implement correct usual equal use big problem need creat order list uuid need compareto current implement base subtract n't alway work exampl //long 10 b 20 c 0 long long.max_valu b long.min_valu c 0 system.out.println b 0 b b system.out.println c 0 c c system.out.println b c 0 b c b c hashcod implement ok multipl requir
improv name resolut discuss jcr-685 current cachingnamespaceresolv class contain excess synchron caus monitor content reduc perform jcr-685 's propos patch replac synchron read-writ lock would allow concurr read access name cach
minim call persistencemanag situat persistencemanag call even though necessari e.g new item creat method nodeimpl.getorcreateproperti alway check alreadi exist properti state node new call alway go full item state stack ask persistencemanag know properti id unnessessari never exist properti persist manag new node save yet propos add check method see node new yet properti given name case properti creat without check patch appli time transient creat 1000 node 4 properti drop 1485 ms 422 ms
let nameexcept extend repositoryexcept sinc nameexcept illegalnameexcept unknownprefixexcept etc typic thrown pars format jcr name jcr api level would make sens nameexcept class extend repositoryexcept instead intern baseexcept idea support fact major case nameexcept encount simpli rethrow except wrap insid repositoryexcept instanc make nameexcept extend repositoryexcept would reduc amount try-catch block wrap except
xmlpersistencemanag fail creat mani directori linux use xmlpersistencemanag creat bunch directori jackrabbit/home/version/data eventu reach 32000 directori data directori subsequ write fail believ caus xmlpersistencemanager.buildnodefolderpath method cnt 4 || cnt 8 sb.append '/ caus subdirectori 4 charact 0-f i.e 16^4 65536 'm see correct linux ext3 's limit 32000 entri xmlpersist manag use 2 3 charact fix problem configur would also solv think ls jackrabbit/home/version/data wc -l return 32001 stack trace happen follow caus javax.jcr.repositoryexcept fail write node state da2cd5d1-9776-4dbe-a42b-842b0134dbfb fail write node state da2cd5d1-9776-4dbe-a42b-842b0134dbfb org.apache.jackrabbit.core.version.abstractversionmanager.createversionhistori abstractversionmanager.java:181 org.apache.jackrabbit.core.version.versionmanagerimpl 1.run versionmanagerimpl.java:194 org.apache.jackrabbit.core.version.versionmanagerimpl dynamicescfactory.dosourc versionmanagerimpl.java:526 org.apache.jackrabbit.core.version.versionmanagerimpl.createversionhistori versionmanagerimpl.java:191 org.apache.jackrabbit.core.version.xaversionmanager.createversionhistori xaversionmanager.java:140 org.apache.jackrabbit.core.itemimpl.initversionhistori itemimpl.java:754 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1166 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:805 166 caus org.apache.jackrabbit.core.state.itemstateexcept fail write node state da2cd5d1-9776-4dbe-a42b-842b0134dbfb org.apache.jackrabbit.core.state.xml.xmlpersistencemanager.stor xmlpersistencemanager.java:579 org.apache.jackrabbit.core.state.abstractpersistencemanager.stor abstractpersistencemanager.java:66 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:574 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:697 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:315 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:291 org.apache.jackrabbit.core.version.abstractversionmanager.createversionhistori abstractversionmanager.java:174 173 caus org.apache.jackrabbit.core.fs.filesystemexcept fail creat folder /home/cms/pepsiaccess/jackrabbit/home/version/data/da2c/d5d1/97764dbea42b842b0134dbfb org.apache.jackrabbit.core.fs.local.localfilesystem.createfold localfilesystem.java:208 org.apache.jackrabbit.core.fs.basedfilesystem.createfold basedfilesystem.java:99 org.apache.jackrabbit.core.fs.filesystemresource.makeparentdir filesystemresource.java:100 org.apache.jackrabbit.core.state.xml.xmlpersistencemanager.stor xmlpersistencemanager.java:517 179
jackrabbit-jca rar archiv miss requir class sinc maven 2 upgrad jackrabbit-jca rar archiv n't contain rar-specif class jackrabbit-jca jar file previous also includ archiv
remov queri handler idletim chang includ jcr-415 reveal synchron issu queri handler idl timer task see thread dev-list http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/10199 could either fix synchron issu searchmanag class remov function togeth repositori also support idl time paramet whole workspac maxidletim workspac element queri handler idl time remov
repositori requir access extern resourc chang jcr-626 jackrabbit requir access resourc url http //jackrabbit.apache.org/dtd/repository-1.2.dtd connect internet avail jackrabbit refus start least 's case run test case mention environ 'm xml expert n't doctyp declar use public identifi otherwis configurationentityresolv class n't make much sens attach patch solv issu pleas comment ve also target issu 1.2 seem rather serious ca n't start jackrabbit n't internet connect one issu
.war distribut configur prompt setup jndi repositori home config locat embed deploy model document http //jackrabbit.apache.org/doc/deploy/howto-model1.html jackrabbit page describ packag .war file use jndi resourc set chang locat repositori home repositori configur xml file unfortun .war file provid part jackrabbit distribut n't behav like instead inbuilt repository.xml file set web.xml act default default use forc user act like develop modifi file within .war file current situat .war 's go use anyon without modif repository.xml file contain within .war make repositori home tomcat/bin/repositori directori use default 's better default setup clear error messag jndi need setup would even better web applic could recognis jndi n't configur could prompt user instruct webpag describ setup requir jndi set tomcat jboss etc .war distribut jackrabbit ignor jndi set describ document use tomcat config.xml snippet configur tomcat 5.5 xml version= 1.0 encoding='utf-8 context displayname= ark docbase= c \dev\ark\jackrabbit-server-1.1.1.war path= /ark usenaming= fals workdir= work\catalina\localhost\ark unpackwar= fals resourc name= jcr/repositori auth= contain type= javax.jcr.repositori factory= org.apache.jackrabbit.core.jndi.bindablerepositoryfactori configfilepath= c /dev/ark/src/main/resources/repository.xml rephomedir= c /jackrabbitrepo /context jackrabbit load fine howev log show 02.01.2007 10:33:00 *info repositorystartupservlet repositorystartupservlet initi repositorystartupservlet.java line 190 02.01.2007 10:33:00 *info repositorystartupservlet repository-hom c \program files\apach softwar foundation\tomcat 5.5\bin\jackrabbit\repositori repositorystartupservlet.java line 242 02.01.2007 10:33:00 *info localfilesystem localfilesystem initi path c \program files\apach softwar foundation\tomcat 5.5\bin\jackrabbit\repository\repositori localfilesystem.java line 166 use case want use jackrabbit host maven 2 repositori within compani ideal want download jackrabbit .war file mount tomcat server context /maven2 configur tomcat use ldap authent point compani 's ldap server standard j2ee featur cours creat repository.xml file point accessmanag implement goe compani 's singlesignon servic author accessmanag implement place tomcat share classpath set repositori home directori work file place locat repository.xml file ideal would done jndi put togeth jackrabbit .war file consid develop hat realli want jackrabbit user hat
cluster re-registr nodetyp synchron re-registr nodetyp yet synchron clusternod although re-registr alreadi partial implement nodetyperegistri
test fail noclassdeffounderror org/w3c/dom/ranges/documentrang nekohtml depend jackrabbit-text-extractor bring transit xerc 2.4.0 depend without extra xml api class requir xerc caus test failur jackrabbit-cor jackrabbit-jca xerc depend includ test classpath overrid default xml parser test case tri pars xml document miss xml api depend caus noclassdeffounderror
upgrad xerc 2.8.1 besid number bug fix new featur xerc upgrad newer version would also give us better depend metadata thus avoid need separ xmlparserapi depend addit main xercesimpl depend
allow databas backend cluster current cluster see jcr-623 use share file system folder order store modif synchron node cluster altern databas backend avail
add signatur major/minor version journal file use cluster journal file use cluster contain signatur major/minor version help identifi
enabl maven-source-plugin current maven-source-plugin enabl default jackrabbit-jcr-rmi would good enabl global jackrabbit compon
pdftextextractor close temp file case error pdf pars fail pdfparser.pars temp file close result open file handl
rtftextextractor also support mime type text/rtf exist two mime type rtf document application/rtf text/rtf current rtftextextractor current recogn first
rang queri fail larg repositori discuss user mail list queri larg repositori date constraint like field constant treat constraint alway true return result return
searchmanag might throw handl cluster event handl event generat anoth node cluster searchmanag might tri index index longer exist result error messag even npe scenario look follow b node repositori cluster 1 add node n 2 save chang 3 remov node n 4 save chang upon receiv event newli creat node b start index node n. process n't conclud step 3 throw
nullpointerexcept databasepersistencemanag databasefilesystem fail reconnect attempt report dev mailing-list happen reconnection/retri mechan databasepersistencemanager/databasefilesystem seem behav fine connect time kill reason db server fact still run howev problem connect re-establish direct exampl transient network outag last longer reconnect attempt insid databasepersistencemanager.reestablishconnect initconnect fail preparedstat map stay empti turn trigger nasti nullpointerexcept never caught next time executestmt call map still empti check follow propos fix stefan guggisberg test work appli 1.2-rc2 simplest fix would remov line 783 databasepersistencemanager.java line 1010 databasefilesystem.java i.e follow stmt preparedstatements.clear
select return declar properti node type claus queri return default column jcr primarytyp jcr score jcr path
npe except thrown filejourn commit oper follow except stack trace appear repeat perform test jcr cluster custom site error unexpect error prepar log entri java.lang.nullpointerexcept org.apache.jackrabbit.core.cluster.filerevision.unlock filerevision.java:117 org.apache.jackrabbit.core.cluster.filerevision.get filerevision.java:146 org.apache.jackrabbit.core.cluster.filejournal.sync filejournal.java:296 org.apache.jackrabbit.core.cluster.filejournal.begin filejournal.java:435 org.apache.jackrabbit.core.cluster.clusternode.updateprepar clusternode.java:399 org.apache.jackrabbit.core.cluster.clusternode.access 000 clusternode.java:40 org.apache.jackrabbit.core.cluster.clusternod workspaceupdatechannel.updateprepar clusternode.java:559 org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:647 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:778 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:808 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:326 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:313 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:302 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:295 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1204 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:821 error unexpect error commit log entri java.lang.nullpointerexcept org.apache.jackrabbit.core.cluster.filejournal.commit filejournal.java:660 org.apache.jackrabbit.core.cluster.clusternode.updatecommit clusternode.java:425 org.apache.jackrabbit.core.cluster.clusternod workspaceupdatechannel.updatecommit clusternode.java:566 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:712 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:808 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:326 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:313 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:302 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:295 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1204 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:821
concurrentmodificationexcept registr nodetyp registr set nodetyp except may encount java.util.concurrentmodificationexcept org.apache.commons.collections.map.abstractreferencemap referenceentrysetiterator.checkmod abstractreferencemap.java:761 org.apache.commons.collections.map.abstractreferencemap referenceentrysetiterator.hasnext abstractreferencemap.java:735 org.apache.jackrabbit.core.nodetype.nodetyperegistry.notifyregist nodetyperegistry.java:1750 org.apache.jackrabbit.core.nodetype.nodetyperegistry.registernodetyp nodetyperegistry.java:223 seem copi listen trigger except privat void notifyregist qname ntname copi listen array avoid concurrentmodificationexcept nodetyperegistrylisten la new nodetyperegistrylisten listeners.s iter iter listeners.valu .iter int cnt 0 1750 iter.hasnext la cnt++ nodetyperegistrylisten iter.next int 0 la.length i++ la null la .nodetyperegist ntname method notifyreregist notifyunregist probabl suffer problem reproduct except may tricki occur applic probabl race condit anoth thread might access listen copi may help use debugg set breakpoint middl copi give thread opportun access listen think possibl solut follow notifi listen node type code ntname /code regist privat void notifyregist qname ntname copi listen array avoid concurrentmodificationexcept nodetyperegistrylisten la synchron listen la nodetyperegistrylisten listeners.valu .toarray new nodetyperegistrylisten listeners.s int 0 la.length i++ la null la .nodetyperegist ntname
tck test root path escap use xpath queri repositori implement might use test root path contain name need _xxxxx_ escap use xpath queri current tck use test path as-i construct queri even though affect repositori ve heard one legaci connector run problem would good add proper escap
miss jackrabbit-rmi-service.xml jackrabbit-jcr-rmi-1.2.1.jar file jackrabbit-rmi-service.xml miss jackrabbit-jcr-rmi-1.2.1.jar caus issu appear directori structur jackrabbit-jcr-rmi sub-project n't match maven 2 standard fix src/resourc move src/main/resourc
upgrad slf4j 1.3 version 1.1 slf4j log facad recent releas contain function improv 'd need split separ slf4j-api librari set backend-spec log adapt would allow us avoid expos log4j transit depend project depend jackrabbit
nosuchitemstateexcept remov node version 'm use jackrabbit 1.2.1 version simpl simpleaccessmanag tri comput path pass itemid verifi permiss path remov node nt file nt folder call session.sav obtain except report realli bug wrong thank follow code 'm use build path code start public string getstringpath itemid id throw itemnotfoundexcept repositoryexcept noprefixdeclaredexcept string p namespaceresolv nsresolv hierarchymanagerimpl hiermgr .getnamespaceresolv path path hiermgr.getpath id pathel pe path.getel int 0 pe.length i++ pe .denotesnam p += pe .tojcrnam nsresolv return p code end start javax.jcr.itemnotfoundexcept fail build path d688e92f-26ae-4f7c-aba7-aaff1df62c2c d688e92f-26ae-4f7c-aba7-aaff1df62c2c d688e92f-26ae-4f7c-aba7-aaff1df62c2c org.apache.jackrabbit.core.hierarchymanagerimpl.getpath hierarchymanagerimpl.java:362 org.apache.jackrabbit.core.cachinghierarchymanager.getpath cachinghierarchymanager.java:224 it.unict.faq.jackrabbit.simpleaccessmanager.getstringpath simpleaccessmanager.java:238 it.unict.faq.jackrabbit.simpleaccessmanager.controllo simpleaccessmanager.java:215 it.unict.faq.jackrabbit.simpleaccessmanager.isgr simpleaccessmanager.java:183 org.apache.jackrabbit.core.itemimpl.validatetransientitem itemimpl.java:645 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1162 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:821 it.unict.faq.driver.manager.impl.dao.jcrdao.cancellanodo jcrdao.java:638 it.unict.faq.driver.manager.impl.documentservermanager.ds_del documentservermanager.java:58 elearn.portal.action.ds_del_portal.execut ds_del_portal.java:28 org.apache.struts.action.requestprocessor.processactionperform requestprocessor.java:421 org.apache.struts.action.requestprocessor.process requestprocessor.java:226 org.apache.struts.action.actionservlet.process actionservlet.java:1158 org.apache.struts.action.actionservlet.dopost actionservlet.java:415 javax.servlet.http.httpservlet.servic httpservlet.java:709 javax.servlet.http.httpservlet.servic httpservlet.java:802 org.apache.catalina.core.applicationfilterchain.internaldofilt applicationfilterchain.java:252 org.apache.catalina.core.applicationfilterchain.dofilt applicationfilterchain.java:173 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:264 org.acegisecurity.intercept.web.filtersecurityinterceptor.invok filtersecurityinterceptor.java:107 org.acegisecurity.intercept.web.filtersecurityinterceptor.dofilt filtersecurityinterceptor.java:72 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.ui.exceptiontranslationfilter.dofilt exceptiontranslationfilter.java:110 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.providers.anonymous.anonymousprocessingfilter.dofilt anonymousprocessingfilter.java:125 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.ui.rememberme.remembermeprocessingfilter.dofilt remembermeprocessingfilter.java:142 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.wrapper.securitycontextholderawarerequestfilter.dofilt securitycontextholderawarerequestfilter.java:81 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.ui.abstractprocessingfilter.dofilt abstractprocessingfilter.java:217 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.ui.logout.logoutfilter.dofilt logoutfilter.java:108 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.context.httpsessioncontextintegrationfilter.dofilt httpsessioncontextintegrationfilter.java:193 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.util.filterchainproxy.dofilt filterchainproxy.java:148 org.acegisecurity.util.filtertobeanproxy.dofilt filtertobeanproxy.java:98 org.apache.catalina.core.applicationfilterchain.internaldofilt applicationfilterchain.java:202 org.apache.catalina.core.applicationfilterchain.dofilt applicationfilterchain.java:173 org.apache.catalina.core.standardwrappervalve.invok standardwrappervalve.java:213 org.apache.catalina.core.standardcontextvalve.invok standardcontextvalve.java:178 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.java:126 org.apache.catalina.valves.errorreportvalve.invok errorreportvalve.java:105 org.apache.catalina.core.standardenginevalve.invok standardenginevalve.java:107 org.apache.catalina.connector.coyoteadapter.servic coyoteadapter.java:148 org.apache.coyote.http11.http11processor.process http11processor.java:869 org.apache.coyote.http11.http11baseprotocol http11connectionhandler.processconnect http11baseprotocol.java:664 org.apache.tomcat.util.net.pooltcpendpoint.processsocket pooltcpendpoint.java:527 org.apache.tomcat.util.net.leaderfollowerworkerthread.runit leaderfollowerworkerthread.java:80 org.apache.tomcat.util.threads.threadpool controlrunnable.run threadpool.java:684 java.lang.thread.run thread.java:595 caus org.apache.jackrabbit.core.state.nosuchitemstateexcept d688e92f-26ae-4f7c-aba7-aaff1df62c2c org.apache.jackrabbit.core.state.sessionitemstatemanager.gettransientitemst sessionitemstatemanager.java:323 org.apache.jackrabbit.core.state.sessionitemstatemanager.getitemst sessionitemstatemanager.java:154 org.apache.jackrabbit.core.hierarchymanagerimpl.getitemst hierarchymanagerimpl.java:120 org.apache.jackrabbit.core.hierarchymanagerimpl.getpath hierarchymanagerimpl.java:357 52 org.apache.jackrabbit.core.state.nosuchitemstateexcept d688e92f-26ae-4f7c-aba7-aaff1df62c2c org.apache.jackrabbit.core.state.sessionitemstatemanager.gettransientitemst sessionitemstatemanager.java:323 org.apache.jackrabbit.core.state.sessionitemstatemanager.getitemst sessionitemstatemanager.java:154 org.apache.jackrabbit.core.hierarchymanagerimpl.getitemst hierarchymanagerimpl.java:120 org.apache.jackrabbit.core.hierarchymanagerimpl.getpath hierarchymanagerimpl.java:357 org.apache.jackrabbit.core.cachinghierarchymanager.getpath cachinghierarchymanager.java:224 it.unict.faq.jackrabbit.simpleaccessmanager.getstringpath simpleaccessmanager.java:238 it.unict.faq.jackrabbit.simpleaccessmanager.controllo simpleaccessmanager.java:215 it.unict.faq.jackrabbit.simpleaccessmanager.isgr simpleaccessmanager.java:183 org.apache.jackrabbit.core.itemimpl.validatetransientitem itemimpl.java:645 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1162 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:821 it.unict.faq.driver.manager.impl.dao.jcrdao.cancellanodo jcrdao.java:638 it.unict.faq.driver.manager.impl.documentservermanager.ds_del documentservermanager.java:58 elearn.portal.action.ds_del_portal.execut ds_del_portal.java:28 org.apache.struts.action.requestprocessor.processactionperform requestprocessor.java:421 org.apache.struts.action.requestprocessor.process requestprocessor.java:226 org.apache.struts.action.actionservlet.process actionservlet.java:1158 org.apache.struts.action.actionservlet.dopost actionservlet.java:415 javax.servlet.http.httpservlet.servic httpservlet.java:709 javax.servlet.http.httpservlet.servic httpservlet.java:802 org.apache.catalina.core.applicationfilterchain.internaldofilt applicationfilterchain.java:252 org.apache.catalina.core.applicationfilterchain.dofilt applicationfilterchain.java:173 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:264 org.acegisecurity.intercept.web.filtersecurityinterceptor.invok filtersecurityinterceptor.java:107 org.acegisecurity.intercept.web.filtersecurityinterceptor.dofilt filtersecurityinterceptor.java:72 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.ui.exceptiontranslationfilter.dofilt exceptiontranslationfilter.java:110 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.providers.anonymous.anonymousprocessingfilter.dofilt anonymousprocessingfilter.java:125 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.ui.rememberme.remembermeprocessingfilter.dofilt remembermeprocessingfilter.java:142 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.wrapper.securitycontextholderawarerequestfilter.dofilt securitycontextholderawarerequestfilter.java:81 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.ui.abstractprocessingfilter.dofilt abstractprocessingfilter.java:217 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.ui.logout.logoutfilter.dofilt logoutfilter.java:108 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.context.httpsessioncontextintegrationfilter.dofilt httpsessioncontextintegrationfilter.java:193 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:274 org.acegisecurity.util.filterchainproxy.dofilt filterchainproxy.java:148 org.acegisecurity.util.filtertobeanproxy.dofilt filtertobeanproxy.java:98 org.apache.catalina.core.applicationfilterchain.internaldofilt applicationfilterchain.java:202 org.apache.catalina.core.applicationfilterchain.dofilt applicationfilterchain.java:173 org.apache.catalina.core.standardwrappervalve.invok standardwrappervalve.java:213 org.apache.catalina.core.standardcontextvalve.invok standardcontextvalve.java:178 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.java:126 org.apache.catalina.valves.errorreportvalve.invok errorreportvalve.java:105 org.apache.catalina.core.standardenginevalve.invok standardenginevalve.java:107 org.apache.catalina.connector.coyoteadapter.servic coyoteadapter.java:148 org.apache.coyote.http11.http11processor.process http11processor.java:869 org.apache.coyote.http11.http11baseprotocol http11connectionhandler.processconnect http11baseprotocol.java:664 org.apache.tomcat.util.net.pooltcpendpoint.processsocket pooltcpendpoint.java:527 org.apache.tomcat.util.net.leaderfollowerworkerthread.runit leaderfollowerworkerthread.java:80 org.apache.tomcat.util.threads.threadpool controlrunnable.run threadpool.java:684 java.lang.thread.run thread.java:595 end
xpath parser ignor parent axi queri handler jackrabbit support parent axi throw invalid queri except case exampl queri //foo/..
tck nodereadmethodstest testgetprimaryitemitemnotfoundexcept select wrong test data method locatenodewithoutprimaryitem use locat recurs node defin primari item method call intern locatenodewithprimaryitem instead locatenodewithoutprimaryitem
duplic key databasepersistencemanag hi ran except past 2 thread save mayb race condit regard martijn hendrik gx creativ onlin develop b.v. 024 3888 261 f 024 3888 621 e martijnh gx.nl wijchenseweg 111 6538 sw nijmegen http //www.gx.nl/ jan 26 2007 2:23:36 pm org.apache.jackrabbit.core.persistence.db.databasepersistencemanag store sever fail write properti state e3847bad-f1ee-4adb-a109-e134900935b7/ http //gx.nl edit_languag error 23505 statement abort would caus duplic key valu uniqu primari key constraint uniqu dex identifi default_prop_idx defin default_prop org.apache.derby.iapi.error.standardexception.newexcept unknown sourc org.apache.derby.impl.sql.execute.indexchanger.insertandcheckdup unknown sourc org.apache.derby.impl.sql.execute.indexchanger.doinsert unknown sourc org.apache.derby.impl.sql.execute.indexchanger.insert unknown sourc org.apache.derby.impl.sql.execute.indexsetchanger.insert unknown sourc org.apache.derby.impl.sql.execute.rowchangerimpl.insertrow unknown sourc org.apache.derby.impl.sql.execute.insertresultset.normalinsertcor unknown sourc org.apache.derby.impl.sql.execute.insertresultset.open unknown sourc org.apache.derby.impl.sql.genericpreparedstatement.execut unknown sourc org.apache.derby.impl.jdbc.embedstatement.executestat unknown sourc org.apache.derby.impl.jdbc.embedpreparedstatement.executestat unknown sourc org.apache.derby.impl.jdbc.embedpreparedstatement.execut unknown sourc org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.executestmt databasepersistencemanager.java:835 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.stor databasepersistencemanager.java:466 org.apache.jackrabbit.core.persistence.abstractpersistencemanager.stor abstractpersistencemanager.java:75 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.stor databasepersistencemanager.java:274 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:675 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:808 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:326 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:313 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:302 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:295 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1210
typo mimetypes.properti file powerpoint mime-typ ppt wrong mimetypes.properti file written equal caract place dot
opendocu file miss mimetypes.properti mime-typ oasi opendocu miss mimetypes.properti file
propertyreadmethodstest.testissam leak session test case obtain second session n't logout
configur cachemanag memori size alreadi post comment jcr-619 maximum size cach cachemanag hardcod 16 megabyt 's way chang would nice well cachemanag paramet configur 's wast run jackrabbit server gigabyt memori use 16 megabyt cach creat realli simpl straightforward patch jackrabbit-cachemanager-config.patch enabl reach cachemanag instanc repositoryimpl object set three memori paramet memori paramet longer static constant instanc field get initi valu constant default behavior class remain would even nicer paramet configur via configur file probabl implement someon close project
improv nodetyperegistry.effectivenodetyp current geteffectivenodetyp implement minor bug prevent proper cach certain nodetyp combin perform enhanc made effect node type cach
namespaceregistrytest use invalid uri namespac uri test case use www.apache.org/ namespac uri uri suggest fix use proper uri prefix http relat question expect jcr implement allow reject someth n't pars uri accord rfc3986
updat namespac uri prefix fn searchmanag class still use outdat namespac uri fn prefix http //www.w3.org/2004/10/xpath-funct prefix re-map offic namespac http //www.w3.org/2005/xpath-funct see http //www.w3.org/tr/xquery-operators/ namespace-prefix keep minimum backward compat exist namespac uri still exist namespac registri refer anoth prefix e.g fn_old
wrong exept return repository.login credenti string accord specif call repository.login credenti string non-exist wokspacenam return nosuchworkspaceexcept fact return repositoryexcept
unexpect session use xatest.testaddnodecommit org.apache.jackrabbit.core.xatest.java:137 assert node exist session tri othersuperuser.getnodebyuuid n.getuuid catch itemnotfoundexcept e fail commit node visibl session assert node also exist session tri othersuperuser.getnodebyuuid n.getuuid catch itemnotfoundexcept e fail commit node visibl session session instanc othersuperus use two time first case think othersuperus superus
string liter must interpret entiti refer ampersand charact string liter interpret start charact entiti refer jackrabbit use xqueri parser string liter slight constraint xpath exampl //element nt base jcr contain max moritz throw pars except instead parser simpli recogn ampersand regular charact
handl multipl residu prop def effectivenodetypeimpl org.apache.jackrabbit.jcr2spi.nodetype.effectivenodetypeimpl current reject multipl residu properti definit differ getmultipl fact accept combin differ valu getonparentversionact aspect accept well see jsr 170 6.7.8 purpos notion two definit name appli two residu definit two residu properti child node definit differ subattribut must permit co-exist effect node type interpret disjunct ore option
abstract jcr base class implement use set abstract abstractsess abstractitem etc class implement much respect jcr interfac use noth els call jcr method would like abstractmap etc class java.util see relat discuss http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/10583
xa transact recoveri add node repositori get xaexcept run timeout see warn messag transact roll back timeout expir default timeout set 5 sec dont know set higher valu problem restart server webspher recoverymanag tri recov transact get nullpointerexcept jcamanagedconnectionfactori createmanagedconnect beacus given connectionrequestinfo null dont know recoverymanag tri recov transact solut delet tran-log file wich keep webspher recvoer xa trasnact
tck test assum addmixin immedi take effect jsr170 allow implement node.addmixin take affect upon save-cal test alreadi got adjust attach patch addit test make usag addmixin
tck check wrong repositori descriptor version instead lock least accord comment
tck observ test restrict basic sequenc observ test 1 add listen 2 modifi workspac 3 remov listen 4 wait event listen sequenc forc implement maintain logic order listen registr content chang light asynchron natur observ event seem restrict certain implement sequenc chang 1 add listen 2 modifi workspac 3 wait event listen 4 remov listen also intuit user perspect
add myqsql ddl cluster databasejourn default ddl cluster does't work mysql would nice includ mysql specif ddl also cluster
patch ad histori tab complet status info command mask password input jcr-command creat patch improv usabl interact jcr command line client use jline http //jline.sourceforge.net input give histori tab complet mask password input tab complet complet avail command jcr children current node command argument login command ask password none given use advanc password mask featur jline avoid echo password type possibl use standard java system.in also chang maven 2 pom version 1.3-snapshot compil current jackrabbit trunk includ manifest file correct starter class
updat jackrabbit api javadoc http //jackrabbit.apache.org updat javadoc http //jackrabbit.apache.org latest releas version jackrabbit
creation javadoc fail jackrabbit-jcr-serv creation javadoc fail project jackrabbit-jcr-serv command mvn javadoc javadoc call latest checkout jackrabbit see attach log
add bundl persist manag day softwar offer set bundl persist manag jackrabbit project pms combin node properti state singl bundl store togeth improv perform reduc storage-memori overhead exact number avail bundl pms also bundle-cach memori sensit cach bundl negat cach non-exist bundl small binari properti inlin bundl rather store blobstor
concurr add/remov child node oper cluster may corrupt repositori concurr add/remov child node oper cluster may store inconsist list child node entri i.e entri list may appear associ node eventu result itemnotfoundexcept next time one bogus entri access
allow multipl produc feed/consum journal cluster applic base jackrabbit might want append custom record central journal order synchron node therefor journal provid support multipl consumers/produc
queryresult 's rowiterator.gets return wrong size result implement accessmanag background implement accessmanag execut queri get back rowiter result call rowiterator.gets return size node match queri without honor access control iter result find lot duplic result filter duplic final result quit origin number rowiteartor.gets btw also disabl doc order sort
default blob size mysql ddl small default datatyp node.node_data prop.prop_data refs.refs_data mysql ddl blob pretti small default size dbs play larg jackrabbit repo use mysql persist easili got data truncat error node.node_data prop.prop_data column issu report past user although anyon could easili creat custom ddl larger field nice increas blob size mysql ddl embed jackrabbit order avoid kind problem new user usual learn hard way number node repositori start grow jackrabbit start throw error chang blob mediumblob make default size mysql similar one dbs without critic increas use space
jca build failur j2ee 1.3 fix jcr-736 introduc similar problem previous report jcr-413 fix jcr-413 appli also case
system view xml use hardcod sv prefix jackrabbit enforc xml docment import repositori use contenthandl attributt name specif prefix sv instead specif namespac com.cisco.topos.jcr.sv exampl wrong behavior call marshaller.marsh entri session.getimportcontenthandl session.getnodebyuuid channelid .getpath importuuidbehavior.import_uuid_create_new entri object repres xml structur namespac com.cisco.topos.jcr.sv assign prefix sv default namespac caus except java.lang.runtimeexcept javax.xml.bind.marshalexcept javax.jcr.invalidserializeddataexcept miss mandatori sv name attribut element sv node org.apache.jackrabbit.core.xml.sysviewimporthandler.startel sysviewimporthandler.java:122 org.apache.jackrabbit.core.xml.importhandler.startel importhandler.java:192 com.sun.xml.bind.v2.runtime.output.saxoutput.endstarttag saxoutput.java:80 com.sun.xml.bind.v2.runtime.xmlserializer.endattribut xmlserializer.java:273 com.sun.xml.bind.v2.runtime.xmlserializer.childassolecont xmlserializer.java:531 com.sun.xml.bind.v2.runtime.classbeaninfoimpl.serializeroot classbeaninfoimpl.java:283 com.sun.xml.bind.v2.runtime.xmlserializer.childasroot xmlserializer.java:461 com.sun.xml.bind.v2.runtime.marshallerimpl.writ marshallerimpl.java:292 24
pdftextfilt may leav pars document open case error case error pars pdf document jackrabbit may fail proper close pars document pdfbox write stack trace system final warn again result log warn org.apache.jackrabbit.core.query.lazyread lazyreader.java read:82 20.02.2007 15:42:50 except initi reader org.apache.jackrabbit.core.query.pdftextfilt 1 java.io.ioexcept error expect hex number actual= 2' java.lang.throw warn close pdf document org.pdfbox.cos.cosdocument.fin cosdocument.java:384 java.lang.ref.finalizer.invokefinalizemethod nativ method java.lang.ref.finalizer.runfin finalizer.java:83 java.lang.ref.finalizer.access 100 finalizer.java:14 java.lang.ref.fin finalizerthread.run finalizer.java:160 may happen pars method parser new pdfparser new bufferedinputstream parser.pars immedi creat document throw except process file pdftextfilt check parser still hold document close appropri
databasepersistencemanag n't log except statement connect need reestablish cosmet fix reestablishconnect call databasepersistencemanag statement close error occur two except log statement sinc reestablishconnect alreadi call except caught purpos cleanup exist connect reopen new one pretti common connect alreadi valid statement close throw except exampl connect broken due network problem databasepersistencemanag log *40* except 2 statement tri establish connect 's pretti annoy expeci use mail append log4j
remov maven 1 file work maven 2 build environ jcr-332 remov old maven 1 project file avoid confus misunderstand old maven 1 build environ n't even work anymor unless anyon object ll proceed remov project.xml maven.xml project.properti file day
use maven depend manag mani jackrabbit compon depend extern librari whose version ideal jackrabbit compon guarante use deped version simplifi overal deped manag start use maven depedencymanag featur jackrabbit parent pom
node.getpath corrupt session call node.getpath anytim mather save delet node intern refer point wrong node attach test alway fail javax.jcr.repositoryexcept remov root node seen configur node sudden behav anoth node refer throw refer except yet configur node though delet still exist anoth node disappear know caus bug good bet perhap cachinghierarchymanag present jackrabbit 1.0.1 introduc 1.1 also test latest releas 1.2.2 bug still present
unabl login two differ credenti workspac one transact 'm use jackrabbit 1.2.1 jca adapt tri access sessionbean-method contain transact workspac 2 differ credenti method take 400ms finish commit transactioncontextr occur debug prepar call 2 time contain hang postinvok method 5 second get javax.transaction.xa.xaexcept warn messag transact roll back timeout expir code context ctx new initialcontext repositori repositori repositori ctx.lookup java comp/env/jackrabbit credenti credenti new simplecredenti user1 password1 .tochararray credenti credentials2 new simplecredenti user2 password2 .tochararray session session1 repository.login credenti default session session2 repository.login credentials2 default session1 add node workspac session2 noth except login make second login method work fine
path implement serializ qname alreadi implement serializ eas use path also support serializ
merg workspac fail setup 2 workspac jackrabbit preview product workspac workspac keep tree menu node content associ menus node type nt unstructur mixin type version lockabl referenc system allow edit node preview workspac go edit node check allow edit check creat new version node merg node product workspac node product workspac alway check lock go merg run problem tri merg node children let say node children b c. node type state make chang properti node preview workspac want merg product workspac exist alreadi code run node destnod destsession.getnodebyuuid getuuid nodeiter ni destnode.merg preview true fail itemimpl.internalremov method versionexcept remov child checked-in node trace error org.apache.jackrabbit.core.itemimpl.internalremov itemimpl.java:848 org.apache.jackrabbit.core.nodeimpl.internalmerg nodeimpl.java:3693 org.apache.jackrabbit.core.nodeimpl.internalmerg nodeimpl.java:3587 org.apache.jackrabbit.core.nodeimpl.merg nodeimpl.java:3003 understand correct merg node tri merg need older sourc node destin node check nodeimpl.domergetest figur step merg nodeimpl get node src node retriev children destin workspac tri remov destin children ca n't remov children b/c parent node node product workspac check accord mergetest ca n't check merg wo n't even begin
heavi load databas journal may contain empti updat record cluster scenario databas journal empti record may produc passiv node throw follow except synchron 28.02.2007 08:34:11 *error* clusternod unexpect error sync journal null clusternode.java line 260 java.lang.nullpointerexcept java.io.filterinputstream.clos unknown sourc org.apache.jackrabbit.core.journal.readrecord.clos readrecord.java:197 org.apache.jackrabbit.core.journal.databaserecorditerator.clos databaserecorditerator.java:148 org.apache.jackrabbit.core.journal.databaserecorditerator.clos databaserecorditerator.java:114 org.apache.jackrabbit.core.journal.abstractjournal.dosync abstractjournal.java:196 org.apache.jackrabbit.core.journal.abstractjournal.sync abstractjournal.java:165 org.apache.jackrabbit.core.journal.clusternode.sync clusternode.java:283 org.apache.jackrabbit.core.journal.clusternode.run clusternode.java:254 java.lang.thread.run unknown sourc
tck test expect modif made session1 automat visibl session2 chang made session1 automat visibl session2 ri requir specif therefor would suggest modifi follow test case nodeuuidtest.testsavemovedrefnod sessionuuidtest.testsavemovedrefnod patch sorri nodetest.testremoveinvaliditemstateexcept see patch
jcr level link http //jackrabbit.apache.org/doc/index.html broken jcr level link jackrabbit home page broken
verbos messag refer constraint violat
error queri initi intermitt 1 ten time get error shown stack trace happen run test start app way resolv test seem blow away repositori alway happen point queri manag access trigger queri subsystem start caus except thrown back caller notic log basic queri return data show test failur cours case startup system/test repositori exist use test clean delet root node user content start otherwis noth excit pleas let know info need error 05-03 15:54:39,386 lazyqueryresultimpl.java getresults:266 -except execut queri java.io.ioexcept file directori java.io.unixfilesystem.createfileexclus nativ method java.io.file.createnewfil file.java:850 org.apache.jackrabbit.core.query.lucene.fsdirectori 1.obtain fsdirectory.java:119 org.apache.lucene.store.lock.obtain lock.java:51 org.apache.lucene.store.lock with.run lock.java:98 org.apache.lucene.index.indexreader.open indexreader.java:141 org.apache.lucene.index.indexreader.open indexreader.java:136 org.apache.jackrabbit.core.query.lucene.abstractindex.getreadonlyindexread abstractindex.java:191 org.apache.jackrabbit.core.query.lucene.multiindex.getindexread multiindex.java:616 org.apache.jackrabbit.core.query.lucene.searchindex.executequeri searchindex.java:384 org.apache.jackrabbit.core.query.lucene.lazyqueryresultimpl.executequeri lazyqueryresultimpl.java :204 org.apache.jackrabbit.core.query.lucene.lazyqueryresultimpl.getresult lazyqueryresultimpl.java:244 org.apache.jackrabbit.core.query.lucene.lazyqueryresultimpl. init lazyqueryresultimpl.java :161 org.apache.jackrabbit.core.query.lucene.queryimpl.execut queryimpl.java:164 org.apache.jackrabbit.core.query.queryimpl.execut queryimpl.java:142
timeout session and/or lock think need mechan set timeout particular jcr session provis set timeout lock node hope implement soon thank
simultan updat multipl session might appear journal cluster environ simultan updat multipl session cluster node might appear journal record time handl cluster 's workspace-specif callback method situt aris follow warn found log *warn clusternod record creat *warn clusternod record prepar
tck locktest.testgetlock compar node equal think comparison issam would better line 545 asserttru lock hold node must parent lock.getnod .equal n1 asserttru lock hold node must parent lock.getnod .issam n1
tck serializationtest.helptestsaxexcept cast contenthandl defaulthandl jsr170 defin import contenthandl see session.getimportcontenthandl workspace.getimportcontenthandl mention helper method within tck cast contenthandl return method defaulthandl without test contenthandl defaulthandl line 273
updat multipl workspac e.g transact lock cluster journal run transact updat multipl workspac e.g version oper lock tri acquir non-reentr lock cluster 's journal short-term fix make lock re-entr long run transact context sensit lock may appropri reproduc enabl cluster test environ let test o.a.j.core.xatest.testsetversionlabel run result deadlock commit oper initi report rafał kwiecień problem use springmodul cluster turn general problem transact cluster thank report
oraclebundlepersistencemanag need special blob handl jdbc driver prior oracl 10 new oracl bundl persist manag see jcr-755 need special blob handl oracl jdbc driver prior version 10. sinc pm work newer version suggest add separ pm eg oracle9persistencemanag contain special blob handl
miss equal hashcod prevent re-us sharedfieldsortcompar briefli mention dev email list improp implement i.e. miss use default object implement equal hashcod searchindex.java prevent reus sharedfieldsortcompar differ queri noth chang repositori test appear fair signific negat perform impact pleas see follow correct code http //svn.apache.org/viewvc view=rev revision=506908
upgrad lucen 2.2 lucen 2.1 contain number use enhanc could benef jackrabbit less lock index updat less io call introduc fieldselector allow jackrabbit load requir field
pathelement.equ n't handl index_undefin pathel therefor path comparison fail index_undefin use 's treat differ index_default
improv perform matchallscor bitset creat matchallscor cach per indexread enhanc also take care suppli indexread may fact combinedindexread cachingmultiread multipl contain indexread achiev good cach effici bitset must cach per contain indexread combin later see also thread dev list http //thread.gmane.org/gmane.comp.apache.jackrabbit.devel/10976
enabl access manag ca n't createnod setproperti without node.sav middl ad access manag ca n't get follow code work node n createnewnod parentnod n.setproperti parentnode.sav seem setproperti invok access control check sinc new node repositori yet access manag implement wo n't abl grant permiss also tri use hierachymanag get path new node also return null
session log case except test case logout session except occur
abstractquerytest handl unknown result size proper node/rowiterator.gets return -1 method abstractquerytest.checkresult count node iter manual
typo deploy/jboss/4.x/jcr-ds.xml file datasourc descriptor jboss 4.x exampl xml file type line config-properti name= bindsessiontotrasact type= java.lang.boolean true /config-properti bindsessiontotrasact ought bindsessiontotransact n miss transact found tag releas subvers repo
concurrentmodificationexcept logout regular get follow except java.util.concurrentmodificationexcept org.apache.commons.collections.map.abstractreferencemap referenceentrysetiterator.checkmod abstractreferencemap.java:761 org.apache.commons.collections.map.abstractreferencemap referenceentrysetiterator.hasnext abstractreferencemap.java:735 java.util.collect unmodifiablecollect 1.hasnext collections.java:1009 java.util.collect unmodifiablecollect 1.hasnext collections.java:1009 org.apache.jackrabbit.core.state.localitemstatemanager.dispos localitemstatemanager.java:341 org.apache.jackrabbit.core.workspaceimpl.dispos workspaceimpl.java:170 org.apache.jackrabbit.core.sessionimpl.logout sessionimpl.java:1225 org.apache.jackrabbit.core.xasessionimpl.logout xasessionimpl.java:379 two caus except identifi taken email dev-list marcel reutegg session read item session b transient remov item session log start iter localitemstatemanag lism session b save chang remov item evict 's lism session get concurr modif except anoth scenario follow session get iter valu primari cach itemstatereferencecach localitemstatemanager.dispos session b someth trigger cachemanag cachemanag call resizeal evict item secondari cach itemstatereferencecach localitemstatemanag valu iter garbag collector run evict remov item also primari cach effect modifi set iter regard martijn hendrik
abstractjourn n't creat deep path revis file abstractjourn throw tri creat revis file directori revis file n't alreadi exist initi repositori startup creat fail use revis param like param name= revis value= rep.hom /repository/revis repositori directori n't creat yet attach repository.xml demonstr use oracl fs pms
child axi support order claus hi sinc child axi support xpath predic would nice support order claus well queri type //element type foo/ bar order foo/ bar asc becom use br savva
support single-workspac repositori way configur test case way nodetest.java pass although repositori implement support multipl workspac cleanest approach probabl would allow javax.jcr.tck.workspacenam stay undefin skip test case altern would special name indic lack support workspac addit config variabl
creat jackrabbit-sit subproject jackrabbit web site sourc move new jackrabbit-sit subproject top-level jackrabbit pom would use multimodul build setup generic project metadata way web site could built easili without invok subproject eclips would also happier sinc site project would n't contain jackrabbit modul
improv perform descendantselfaxisqueri instead calcul full result sub queri descendantselfaxisqueri make use skipto method sub scorer
avoid use multitermdoc similar matchallqueri also rangequeri wildcardqueri result use multitermdoc queri also use multiscor see also issu jcr-791
introduc temprari cach intermedi queri result sometim queri execut sub queri multipl time e.g //element nt resourc jcr mimetyp text/plain jcr mimetyp text/html result two intern matchallqueri jcr mimetyp queri re-us previous calcul result possibl
scorer.skipto initi hit custom scorer implement jackrabbit initi intern hit bitset skipto call next
uuiddocid check indexread use equal method uuiddocid.getdocumentnumb indexread test pass index reader use object ident left one index per workspac system index system index introduc queri execut creat new combinedindexread cover workspac index system index method use equal method test pass indexread
better error messag non-trivi nodetyp chang current jackrabbit throw repositoryexcept messag yet implement say almost noth newcom time consum debug even know mean would better use inform alreadi availbl nodetypedefdiff provid descript error messag
mislead method name setvaluebinarytest method name setvaluebinarytest say boolean say binari copi past error setvaluebooleantest
typo method name test class setpropertyassumetypetest misspel constraintvioloationexcept
setpropertyassumetypetest check non-protect string array properti setpropertyassumetypetest.testvaluesconstraintviolationexceptionbecauseofinvalidtypeparamet tri find properti definit writabl multivalu string properti consult nodetypeutil.locatepropertydef purpos setup properti definit return jcr valueconstraint defin nt propertydefinit node type turn creat test node thus test fail alreadi tri creat node seem test suit tri smart chang node type properti name configur paramet
tck restoretest.testrestorelabel accord tobi jackrabbit implement node.restorebylabel interpret specif regard restor behaviour version child node interpetr might legal unless specif violat would argu tck test interpret therefor suggest modifi org.apache.jackrabbit.test.api.version.restoretest.testrestorelabel skip line 334 345 order limit test case behaviour defin specif regard angela ps mention test also execut within scope workspacerestoretest latter extend restoretest 's mislead
tck testsavemovedrefnod nodeuuidtest.testsavemovedrefnod sessionuuidtest.testsavemovedrefnod make assumpt move referenc node session visibl move oper within session b well
oracl bundl pm fail check schema 2 user use databas use oraclebundlepersistencemanag issu two user use databas persist case checkschema method bundledbpersistencemanag work like precis call metadata.gett null null tablenam null also includ tabl name schemas/us effect first user databas abl creat schema probabl issu jcr-582
sqlexcept oraclebundl pm name index oracl bundl pm show error like java.lang.illegalstateexcept unabl insert index java.sql.sqlexcept ora-01400 insert null martijnh wm9_versioning_pm_nam id due fact oracl treat empti string null valu schema allow
mssql mysql bunld pm schema miss definit name index mssql mysql ddl file respect bundl persist manag miss definit name index
tck vs avail properti type tck test allow configur node type properti name test specif properti type take account given repositori may support specif properti type similar issu jcr-801 multipl workspac support jsr-170 bit fuzzi requir type requir everi type actual exist settabl node type practic repositori may support refer properti builtin nodetyp version storag nowher els thus way configur test specif properti type test left possibl 1 reserv special properti name case test skip property_type_not_support 2 add new config flag latter arguabl cleaner approach former avoid introduc new configur paramet thus 'm lean 2 feedback appreci
test granular calendar date properti repositori support properti type date calendar main differ calendar also captur time zone also repositori may abl store timestamp millisecond resolut although restrict make repositori non-compli would use test test aspect separ issu thus propos simplifi exist test compar timestamp factor time zone requir resolut finer 1s two aspect test separ test case think current may test sub-second resolut case propos leav thing respect
add support queri result highlight highlight match queri result list regular need applic queri languag support pseudo properti function allow one retriev text fragment highlight match content match node support featur follow enhanc requir defin pseudo properti function return text excerpt use select claus index need *store* origin text use node index also includ extract text binari properti text fragment must creat base origin text queri index inform
document view import iso 9075-encod element/attribut name may lead illeg node/properti name report sridhar raman users-list import follow xml document lead node name abc 1 illeg xml version= 1.0 abc_x0020__x005b_1_x005d_ foo= bar
tck transfer lock token test use open-scop lock despit fact jsr170 limit usag session.removelocktoken string session.addlocktoken string token obtain open-scop lock n't see much benefit therefor due fact issu address within scope jsr283 would like suggest modifi test-cas deal transfer lock token creat open-scop lock
namespaceregistrytest make assumpt legal name org.apache.jackrabbit.test.api.namespaceregistrytest.testregisternamespac make assumpt namespac regist use node name practic mani repositori restrict node name particular may support namespac prefix node name propos chang test case 's independ repositori 's abil creat new node namespac
problem file copi use webdav make copi file one workspac ctrl-c ctrl-v file isnt copi origin file delet
webdav locatorfactoryimplex n't proper evalu resourc path item path happen start workspac name
nodetest.testaddnodeconstraintviolationexceptionundefinednodetyp reli addnod name nt base nodetest.testaddnodeconstraintviolationexceptionundefinednodetyp reli abil creat new node type nt base n't someth repositori requir support propos make node type name test case configur
setvalueformatexceptiontest.testnod reli addmixin allow specif node type setvalueformatexceptiontest.testnod two flaw n't cope case creat node alreadi mix referenc n't allow specif node typer creat
checkpermissiontest-testcheckpermiss n't allow config node type creat checkpermissiontest-testcheckpermiss n't allow configur node type creat propos re-us testnodetyp config properti
setvaluebinarytest repositori constraint binari properti set repositori support binari properti form jcr content/jcr data current configur suffici avoid config param 'd suggest check propertyname1 jcr data node.hasnod jcr content case automat navig jcr content child node
npe except thrown abstractjourn commit oper seem relat jcr-712 appar fix 1.2.2 see follow error now-and-then jr 1.2.2 'm use db base journal implement oracl 10g java.lang.nullpointerexcept org.apache.jackrabbit.core.cluster.abstractjournal.commit abstractjournal.java:525 org.apache.jackrabbit.core.cluster.clusternode.updatecommit clusternode.java:424 org.apache.jackrabbit.core.cluster.clusternod workspaceupdatechannel.updatecommit clusternode.java:565 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:712 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:808 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:326 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:313 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:302 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:308 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1204 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:823
bundledbpersistencemanag free blobstor resourc remov binari properti node remov node contain binari properti resourc occupi binari properti freed orphan record remain associ schemaobjectprefix binval tabl
java 1.4 compil error eclips report ate douma jcr-804 revis 520841 introduc code caus eclips compil fail java 1.4 complianc mode howev code compil sun jdk 1.4 problem enclos class refer anonym innner class instanti constructor name inner class contain appar understand eclips 1.4 complier instanc refer yet avail evalu super argument constructor
matchallqueri implement extractterm requir rep excerpt function
bad assumptions/error handl setvalueversionexceptiontest setvalueversionexceptiontest make sever assumpt may true repositori node creat without specifi node type node referenc default thus addmixin fail also repositori allow creat refer properti associ test abort notexecutableexcept
bundledbpersistencemanag work mysql seem bundl persist manag base work mysql sqlexcept thrown line con.commit bundledbpersistencemanager.checkschema autocommit set true init method reason ignor oracl mssql driver anyway comment line fix issu think
support store binari properti mandatori nt resourc setvaluebinarytest tri remov binari properti set null howev store support binari properti case jcr content/jcr data case properti remov direct suggest check mandatory/protect throw notexecutableexcept case
arraystoreexcept reregist exist node type class nodetypemanagerimpl method public nodetyp registernodetyp inputstream string contenttyp boolean reregisterexist return nodetyp nodetypes.toarray new nodetypedef nodetypes.s suppos return nodetyp nodetypes.toarray new nodetyp nodetypes.s
link point javadoc incorrect return 404 various link configur jackrabbit page http //jackrabbit.apache.org/doc/config.html invalid exampl want read persistencemanag javadoc link return 404 decreas confid project hinder adopt
support db2 bundledbpersistencemanag bundledbpersistencemanag n't work db2 db2.ddl file missing.i ve creat databas scheme db2
provid method getcredentialsprovid simplewebdavservlet use provid easi way chang default credentialsprovid basiccredentialsprovid sessionprovid creat make sens let sessionprovid return credentialsprovid basicauthent wil prompt thank claus
javacc-maven-plugin version jackrabbit-cor pom file hi notic pom.xml file jackrabbit-cor project need specifi version 2.1 javacc-maven-plugin take 2.2-snapshot wo n't compil put 2.1 version work fine plugin groupid org.codehaus.mojo /groupid artifactid javacc-maven-plugin /artifactid version 2.1 /version execut im work revis 529712 april 17 2007 15:05 est
bundl persist name index case-sensit mysql ms sql report martijn hendrik dev mail list see http //www.nabble.com/bundle-persistence-manag -db-collation-tf3571522.html name column name tabl bundl persist manag need case-sensit
promot classload compon contrib dummi issu chang alreadi made revis 529068 529137 promot classload compon contrib 'm includ issu tracker complet releas note jackrabbit 1.3
handl binari properti stream qvalu interfac current spi requir qvalu return new stream upon call getstream far tell essenti requir qvalu implement preserv whole content stream memori disk particular unless 'm miss someth import larg content repositori caus whole data stream written twice realli tri avoid
chang log-level defaultiolisten pleas chang loglevel method onend iohandl handler iocontext iocontext boolean success debug
nodeaddmixintest assumpt addmixin behaviour nodeaddmixintest.testaddmixinreferenc assum mix referenc ad test node type practic node type may alreadi inherit mix referenc may activ node save thus constraintviolationexcept upon addmixin catch mixin check save
basic support fn name add basic support fn name xpath queri jackrabbit least support fn name function within equal express
notqueri implement extractterm function use queri togeth rep excerpt function unsupportedoperationexcept thrown
rep excerpt may return malform xml rep excerpt function encod prefin xml entiti write excerpt xml may produc malform xml
add relat path paramet rep excerpt allow one creat excerpt node associ result node also node relat result node
unsynchron access itemcach map itemmanag access itemcach map itemmanag most synchron via itemstatelisten method public void statecr itemst creat itemimpl item retrieveitem created.getid item null item.statecr creat privat itemimpl retrieveitem itemid id return itemimpl itemcache.get id result corrupt map eg subsequ access may result endless loop
use filelock lock instead empti file fsdirectori use file.createnewfil effect lock directori makelock yet java spec say explcit use purpos instead use filelock nio attach patch show is/could done chang intern makelock method function equival test appli
bug utildatetypeconverterimpl convert follow line use return this.getvaluefactori .createvalu java.util.d propvalu .gettim propvalu must convert java.util.calendar long valuefactori convert longvalu datevalu expect follow code work ok final long timeinmili java.util.d propvalu .gettim final calendar calendar calendar.getinst calendar.settimeinmilli timeinmili return this.getvaluefactori .createvalu calendar dont know better date- calendar convers
jcr map upgrad maven 2 upgrad jcr map compon maven 2 releas
residualproperti convert use wrong atomictyp convert updat write back data residualpropertiescollectionconverterimpl.internalsetproperti method look type java object find atom type convert instead get convert accord collect descriptor may lead nullpointerexcept case concret type extens implement declar type current work patch attach bug
jackrabbit jcr nodemanag api implement need jackrabbit implement org.apache.portals.graffito.jcr.nodemanagement.nodetypemanag interfac
provid readm 's subproject jcr-map jcr-nodemanag need readm file subproject jcr-map jcr-nodemanag provid inform scope subproject build hint get start
move copi object add new method persist manag move copi object
manageablecollectionutil throw unsupport jcrmap except mani time object model 'd code alter ocm avoid unsupport except almost case use deleg wrapper class encapsul collect wrapper class implement maangeablecollect sinc deleg perform hit make test last resort *object* convers method public static manageablecollect getmanageablecollect object object propos catchal test program action object instanceof collect return new manageablecollectionimpl collect object
use jackrabbit 1.2.1 use jackarabit 1.2.1
add unit collect field collect field base list support yet test correct check kind collect well test
databasejourn assign revis id differ revis run transact updat multipl workspac e.g version oper fail databasejourn everi individu updat ultim assign revis id indic failur e.g use oracl backend journal look follow java.sql.sqlexcept ora-00001 uniqu constraint journal_idx violat oracle.jdbc.dbaccess.dberror.throwsqlexcept dberror.java:134 oracle.jdbc.ttc7.ttioer.processerror ttioer.java:289 oracle.jdbc.ttc7.oall7.rec oall7.java:590 oracle.jdbc.ttc7.ttc7protocol.dooall7 ttc7protocol.java:1973 oracle.jdbc.ttc7.ttc7protocol.executefetch ttc7protocol.java:977 oracle.jdbc.driver.oraclestatement.executenonqueri oraclestatement.java:2205 oracle.jdbc.driver.oraclestatement.doexecuteoth oraclestatement.java:2064 oracle.jdbc.driver.oraclestatement.doexecutewithtimeout oraclestatement.java:2989 oracle.jdbc.driver.oraclepreparedstatement.executeupd oraclepreparedstatement.java:658 oracle.jdbc.driver.oraclepreparedstatement.execut oraclepreparedstatement.java:736 org.apache.jackrabbit.core.journal.databasejournal.append databasejournal.java:293 24 bug report rafał kwiecień
bundlepersistencemanager.externalblob configur tri configur properti externalblob workspace.xml work bundlepersistencemanag method setexternalblob boolean externalblob configur bean conform see databasepersistencemanag method
index recoveri may fail illegalargumentexcept repeat kill start jackrabbit may throw illegalargumentexcept index recoveri caus java.lang.illegalargumentexcept alreadi contain _c org.apache.jackrabbit.core.query.lucene.indexinfos.addnam indexinfos.java:170 org.apache.jackrabbit.core.query.lucene.multiindex.deleteindex multiindex.java:716 org.apache.jackrabbit.core.query.lucene.multiindex deleteindex.execut multiindex.java:1553 org.apache.jackrabbit.core.query.lucene.multiindex.executeandlog multiindex.java:809 org.apache.jackrabbit.core.query.lucene.multiindex.flush multiindex.java:740 org.apache.jackrabbit.core.query.lucene.recovery.run recovery.java:160
datefield class public class org.apache.jackrabbit.core.query.lucene.datefield made public sever public method use current access class access outsid packag field class packag public access longfield doublefield etc
javax.jcr.namespaceexcept regist namespac uri use first hop version 1.2.3 1.3 repositori creat success first time run subsequ attempt login result javax.jcr.namespaceexcept debug initi transient repositori info start repositori info localfilesystem initi path repository\repositori except thread main javax.jcr.namespaceexcept regist namespac uri org.apache.jackrabbit.core.namespaceregistryimpl.getprefix namespaceregistryimpl.java:538 org.apache.jackrabbit.core.nodetype.nodetyperegistry.checknamespac nodetyperegistry.java:1292 org.apache.jackrabbit.core.nodetype.nodetyperegistry.validatenodetypedef nodetyperegistry.java:1415 org.apache.jackrabbit.core.nodetype.nodetyperegistry.internalregist nodetyperegistry.java:1221 org.apache.jackrabbit.core.nodetype.nodetyperegistry. init nodetyperegistry.java:671 org.apache.jackrabbit.core.nodetype.nodetyperegistry.cr nodetyperegistry.java:118 org.apache.jackrabbit.core.repositoryimpl.createnodetyperegistri repositoryimpl.java:571 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:262 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:584 org.apache.jackrabbit.core.transientrepositori 2.getrepositori transientrepository.java:245 org.apache.jackrabbit.core.transientrepository.startrepositori transientrepository.java:265 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:333 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:388 testing.firsthops.main firsthops.java:24
add bundl support postgresql class dbnameindex work rdbms sinc return_generated_key jdbc featur implement current postgresql driver
concurr read-on access session even though jcr specif make statement session share across number thread think would great mani applic could state share read-on session support jackrabbit mani occas mail list state issu share read-on session howev think never thorough test even specifi design goal come agreement desir think would great start includ testcas valid behaviour updat document respect
add import-export tool gx creativ onlin develop would like contribut command-lin import-export tool apach jackrabbit project tool capabl export import kind repositori content includ custom nodetyp namespac map persistence-lay independ way
xml export stream n't initi transformerhandl proper instanc sessionimpl.java public void exportsystemview string abspath outputstream boolean skipbinari boolean norecurs throw ioexcept pathnotfoundexcept repositoryexcept saxtransformerfactori stf saxtransformerfactori saxtransformerfactory.newinst tri transformerhandl th stf.newtransformerhandl th.setresult new streamresult th.gettransform .setparamet outputkeys.method xml th.gettransform .setparamet outputkeys.encod utf-8 th.gettransform .setparamet outputkeys.ind exportsystemview abspath th skipbinari norecurs catch transformerexcept te throw new repositoryexcept te catch saxexcept se throw new repositoryexcept se 1 setoutputproperti setparamet 2 test show set paramet effect done call setresult said effect minor default set transformerhandl seem correct anway
queri class miss extractterm queri class derefqueri rangequeri wildcardqueri overwrit method extractterm
rep excerpt work attribut search exampl //element nt unstructur jcr contain textprop foobar rep excerpt produc empti excerpt
regist node type name space fail cluster environ regist node type name contain least one space cluster environ caus journalexcept cluster node tri read chang back journal stack trace observ journalexcept pars error read node type definit abstractrecord.readnodetypedef abstractrecord.java:245 caus parseexcept miss delimit begin node type name intern line 47 lexer.fail lexer.java:148 packag name intermedi frame omit breviti
unnecessari pars name valu name valu creat call like property.getvalu intern qname format pars format
itemst constructor throw illegalargumentexcept run concurrentreadwritetest may happen read session get illegalargumentexcept except thread thread-7 java.lang.illegalargumentexcept illeg status 0 org.apache.jackrabbit.core.state.itemstate. init itemstate.java:138 org.apache.jackrabbit.core.state.propertystate. init propertystate.java:79 org.apache.jackrabbit.core.state.localitemstatemanager.getpropertyst localitemstatemanager.java:121 org.apache.jackrabbit.core.state.localitemstatemanager.getitemst localitemstatemanager.java:152 org.apache.jackrabbit.core.state.xaitemstatemanager.getitemst xaitemstatemanager.java:226 org.apache.jackrabbit.core.state.sessionitemstatemanager.getitemst sessionitemstatemanager.java:175 org.apache.jackrabbit.core.itemmanager.createiteminst itemmanager.java:495 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:326 org.apache.jackrabbit.core.lazyitemiterator.prefetchnext lazyitemiterator.java:90 org.apache.jackrabbit.core.lazyitemiterator. init lazyitemiterator.java:75 org.apache.jackrabbit.core.itemmanager.getchildproperti itemmanager.java:485 org.apache.jackrabbit.core.nodeimpl.getproperti nodeimpl.java:2481 org.apache.jackrabbit.core.concurrentreadwritetest 1 1.execut concurrentreadwritetest.java:61 org.apache.jackrabbit.core.abstractconcurrencytest executor.run abstractconcurrencytest.java:107 java.lang.thread.run thread.java:595 status 0 status_undefin think follow happen read session retriev itemst shareditemstatemanag still valid short time later write session remov item chang status status_undefin read session tri creat overlay itemst localitemstatemanag use chang status ad status_undefin list valid status itemst constructor seem solv issu 'm sure 's right way opinion
improv excerpt fragment improv excerpt fragment fragment start begin text first word cut fragment start begin sentenc prepend match term fragment within rang 75 charact fragment extend far may produc larger fragment request
renam packag name renam packag name *graffito* *jackrabbit*
lucen queri proper rewritten jackrabbit intern lucen queri proper rewritten may lead unsupportedoperationexcept term extract lucen queri
support synonym search jackrabbit support synonym search jcr contain function like googl exampl //element nt resourc jcr contain ~food find nt resourc node contain word food synonym food
put javadoc resourc src/main/javadoc maven javadoc plugin suggest javadoc resourc like package.html file doc-fil subdirectori place src/main/javadoc folder see http //maven.apache.org/plugins/maven-javadoc-plugin/faq.html ll move javadoc file unless anyon argu otherwis
put resourc file java/ main test /resourc maven standard directori layout see http //maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html suggest resourc file place src/main/resourc src/test/resourc instead put insid java subdirectori follow guidelin would simplifi pom file would n't need explicit configur resourc directori ll move resourc file unless anyon argu otherwis
non mantatori revis properti journal configur except thrown properti revis set think would great save revis file repositori home dir properti set
cluster race condit may caus duplic entri search index seem race condit may caus duplic search index entri reproduc follow jackrabbit 1.3 1 start clusternod 1 add singl node node type cluster test 2 shutdown clusternod 1 3 start clusternod 2 empti search index 4 execut queri //element cluster test 4 print result queri uuid node result set run clusternod 2 one node resultset expect howev debug clusternod 2 breakpoint i.e. paus second line 306 repositoryimpl.java clusternod start resultset contain two result uuid
introduc similar function queri handler support similar function allow one find node similar given exist one exampl rep similar /foo/bar find node similar node /foo/bar
creat html excerpt provid jackrabbit built html excerpt web applic usual prefer html rather xml
checkifnodelock jcr map layer behav proper open scope lock use plan use open-scop lock need persist locktoken along node use anoth session unlocking.test jackrabbit rmi client work fine use jcr-map layer achiev project.her want soon node check get lock session lock store locktoken properti node document need updat document node lock *public void checkout string path throw cmsexcept pm getpersistencemanag tri pm.checkout path string locktoken pm.lock path true fals document doc this.getdocu path doc.setlocktoken locktoken //for persist locktoken doc.upd catch lockedexcept le system.out.println le.getlockednodepath lock le.getlockown catch except e throw new cmsexcept e.getmessag e.getcaus doc.upd fail lock except problem persistencemanagerimpl method checkifnodelock path return lockexcept node lock method check everi update/insert abl updat lock node need persist locktoken node reason check lock save ideal throw error node lock session hold locktoken session lock node tri save node without unlock allow p.s abl achiev simpl jackrabbit rmi client code clientrepositoryfactori factori new clientrepositoryfactori repositori repositori factory.getrepositori rmi //localhost:1101/jackrabbit session session repository.login new simplecredenti superus superus .tochararray portal string user session.getuserid string name repository.getdescriptor repository.rep_name_desc system.out.println log user name repositori test lock function node n session.getrootnod .getnod cms/childfolder1/check.txt lock lck n.lock true fals deeplock open-scop n.setproperti ps locktoken lck.getlocktoken n.setproperti ps languag sanskrit system.out.println lock islive= lck.isliv system.out.println node islocked= session.getrootnod .getnod cms/childfolder1/check.txt .islock session.sav session.logout code
jcr map layer expos node move node copi via persistencemanager.java persistencemanagerimpl.java jcr-ap layer implement move copi method node
remov sanitycheck itemimpl.getsess follow code caus invaliditemstateexcept thrown good reason properti properti property.setvalu valu null property.getsess case 'm look one right 's good abl access session item even alreadi invalid simpl fix remov sanitycheck call itemimpl.getsess ll unless someon good reason saniti check kept
overlappingfilelockexcept jre 1.6 per email discuss mon 2007-02-26 10:26 +0100 marcel reutegg wrote 2c n't realli investig issu detail accord javadoc filechannel.trylock overlappingfilelockexcept thrown jvm alreadi hold lock channel contrast current check repositori startup method primarili focus situat *two* jvms start repositori home directori 'd say overlappingfilelockexcept thrown two repositori instanc startup within *same* jvm use repositori home directori suggest add catch claus also cover overlappingfilelockexcept addit ioexcept regard marcel stefan guggisberg wrote btw afaik overlappingfilelockexcept thrown linux filechannel getlock window e.g return null situat might want test differ platform isol issu could also place breakpoint top repositoryimpl acquirerepositorylock method step code verifi content fs etc origin email 2/19/07 patrick haggood codezilla wrote 'm use linux sun java 6 jackrabbit 1.3 derbi persist putnod object function 's give error unit test alway fail second updat even swap test i.e save user doc save user prior test delet repositori directori need set explicit lock before/aft session.sav unit test dbconn dbc public sessionutiltest string testnam super testnam dbc new dbconn note putus putdocu use putnod determin rootnod use test putunityus method class unityjsr170.jr.sessionutil public void testputunityus system.out.println putunityus unityus usr usr1 sessionutil instanc dbc.getsutil string result instance.putunityus usr1 assertnotnul result usr unityus instance.getunityuserbyid result assertequ usr1.getnam usr.getnam test putunitydocu method class unityjsr170.jr.sessionutil public void testputunitydocu system.out.println putunitydocu unitydocu udoc adr1 sessionutil instanc dbc.getsutil string result instance.putunitydocu udoc file lock error assertnotnul result udoc unitydocu instance.getunitydocumentbyid result assertequ adr1.getnam udoc.getnam 's setup repositori connect public dbconn sutil null tri rp new transientrepositori sutil= new sessionutil rp catch ioexcept ex ex.printstacktrac public void shutdown sutil.closeal public sessionutil getsutil return sutil sessionutil public sessionutil repositori rp tri session rp.login new simplecredenti usernam password .tochararray catch loginexcept ex ex.printstacktrac catch repositoryexcept ex ex.printstacktrac public void closeal tri session.logout catch except ex ex.printstacktrac system.out.println error close repositori put node tree root node return uuid new updat node privat string putnod string nodetyp unitybaseobject ubo string resultuuid =null string unam ubo.getnam string utyp ubo.gettyp string objectuid ubo.getid node pnode node add updat session ses null tri ses getsess updat node alreadi node id objectuid==nul node rn ses.getrootnod pnode rn.addnod utyp pnode.addmixin mix referenc els grab exist node uuid pnode ses.getnodebyuuid objectuid get updat node pnode =null ubo.setid pnode.getuuid string unityxml utrans.getxmlstringfromunitybaseobject ubo updat properti pnode.setproperti name ubo.getnam pnode.setproperti type ubo.gettyp pnode.setproperti xmldata unityxml ses.sav resultuuid ubo.getid catch except e e.printstacktrac return resultuuid privat session getsess return session repository.xml workspac name= wsp.name filesystem class= org.apache.jackrabbit.core.fs.local.localfilesystem param name= path value= wsp.home /filesystem persistencemanag class= org.apache.jackrabbit.core.state.db.derbypersistencemanag param name= url value= jdbc derbi wsp.home /db create=tru param name= schemaobjectprefix value= wsp.name /persistencemanag searchindex class= org.apache.jackrabbit.core.query.lucene.searchindex param name= path value= wsp.home /index param name= usecompoundfil value= true param name= minmergedoc value= 100 param name= volatileidletim value= 3 param name= maxmergedoc value= 100000 param name= mergefactor value= 10 param name= buffers value= 10 param name= caches value= 1000 param name= forceconsistencycheck value= fals param name= autorepair value= true param name= analyz value= org.apache.lucene.analysis.standard.standardanalyz /searchindex /workspac
databasejournal.checkschema generat call commit autocommit=tru except tri activ cluster ad follow xml repository.xml cluster id= node_1 syncdelay= 5 journal class= org.apache.jackrabbit.core.journal.databasejourn param name= revis value= rep.hom /revis param name= driver value= com.mysql.jdbc.driv param name= url value= jdbc mysql //localhost/jcr param name= user value= userx param name= password value= passwordc param name= schema value= mysql param name= schemaobjectprefix value= j_c_ /journal /cluster databs journal threw follow except caus javax.jcr.repositoryexcept unabl initi connect unabl initi connect org.apache.jackrabbit.core.repositoryimpl.createclusternod repositoryimpl.java:677 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:276 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:584 org.apache.jackrabbit.core.transientrepositori 2.getrepositori transientrepository.java:245 org.apache.jackrabbit.core.transientrepository.startrepositori transientrepository.java:265 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:333 com.liferay.portal.jcr.jackrabbit.jcrfactoryimpl.createsess jcrfactoryimpl.java:71 com.liferay.portal.jcr.jcrfactoryutil.createsess jcrfactoryutil.java:53 com.liferay.portal.jcr.jcrfactoryutil.createsess jcrfactoryutil.java:57 com.liferay.documentlibrary.util.indexerimpl.reindex indexerimpl.java:258 17 caus org.apache.jackrabbit.core.cluster.clusterexcept unabl initi connect org.apache.jackrabbit.core.cluster.clusternode.init clusternode.java:218 org.apache.jackrabbit.core.cluster.clusternode.init clusternode.java:189 org.apache.jackrabbit.core.repositoryimpl.createclusternod repositoryimpl.java:674 26 caus java.sql.sqlexcept ca n't call commit autocommit=tru com.mysql.jdbc.connection.commit connection.java:2161 org.apache.jackrabbit.core.journal.databasejournal.checkschema databasejournal.java:437 org.apache.jackrabbit.core.journal.databasejournal.init databasejournal.java:168 org.apache.jackrabbit.core.cluster.clusternode.init clusternode.java:213 28 examin sourc code releas jackrabbit 1.3 saw init method databasejourn class class.fornam driver con drivermanager.getconnect url user password con.setautocommit true checkschema preparestat checkschema method 's final block commit chang con.commit seem normal see mention except comment commit express continu develop miss someth
invalid journal record appear read sync oper error error process revis 3161 unknown entri type 2007-05-13 19:57:02,258 main_org.apache.jackrabbit.core.cluster.clusternod error unabl start cluster node forc shutdown 2007-05-13 19:57:02,259 main_org.apache.jackrabbit.core.repositoryimpl org.apache.jackrabbit.core.cluster.clusterexcept unabl read record revis 3161 org.apache.jackrabbit.core.cluster.clusternode.sync clusternode.java:285 org.apache.jackrabbit.core.cluster.clusternode.start clusternode.java:229 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:308 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:584 org.sakaiproject.jcr.jackrabbit.repositorybuilder.init repositorybuilder.java:213 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 2 node cluster persist manag db journal share filesystem start first node cluster complet clean empti repo let add note type creat sinc workspac call sakai connect via webdav use osx finder creat journal record due finder put .xxxx file dont add file start second node cluster run first 15 journal entri hit one entri unknown stack trace analysi follow
review pck name other ocm subproject review packag structur graffito refer ocm subproject jcr-nodemanag spring
migrat maven 2 ocm subproject migrat maven 2 ocm subproject jcr-nodemanag spring
avoid infinit recurs object model cycl default objectconverterimpl restrict acycl graph object model mani java object model acycl instanc friend list yoar friend list java encourag structur almost larg object model java hidden cycl save object model contain cycl use graffito caus infinit recurs clear import maintain 1-to-1 correspond node object prevent absenc multipl parent node necessari use refer undefin item place 2nd greater node repres given object prefer si default objectconverterimpl support reference. fail use undefin also solv problem would accept default whether refer use insert retriev must provid reason result custom ojbect convert avail switch undefin refer vice versa also probabl best keep target well-defin node close root node impli default objectconverterimpl implement breadth-first rather depth-first travers object model insert retriev default depth-first custom object convert avail implement breadth-first admit support 2 represent x 2 travers impli drastic refactor and/or rewrit objectconverterimpl class
rep excerpt also work properti current rep excerpt function use creat excerpt highlight inform node function also support highlight string properti
add unit test beanconvert beanconvert yet stabl add unit test seem null valu bean attribut well support test beanconvert good scenario test model class contain attribut b base class b creat instanc b null insert save get instanc set attribut b updat /save
jcr map layer ocm expos lock owner jcr map layer 's persistencemanager.java expos api return lockown ideal follow method public string lock final string abspath final boolean isdeep final boolean issessionscop return hashmap/str array contain locktoken well lockown tri lockown field java object map jcr lockown use getlockown problem properti get introduc node node lock tri insert node even lock insert fail sinc properti like jcr lockown till feel need api ok expos via separ call order maintain backward compat
use jackrabbit rmi extens default jackrabbit-webapp use jackrabbit rmi extens default jackrabbit-webapp ref http //www.nabble.com/custom-node-types-with-rmi-tf3728625.html
incorrect transit snapshot depend use version depend declar caus troubl sinc snapshot depend version variabl appar get replac exact timestamp deploy snapshot instead x.y-snapshot string typic timestamp differ artifact caus broken depend
global data store binari three main problem way jackrabbit current handl larg binari valu 1 persist larg binari valu block access persist layer extend amount time see jcr-314 2 least two copi binari stream made save jcr api one transient space one persist valu 3 versioin copi oper node subtre contain larg binari valu quick end consum excess amount storag space solv issu get nice benefit propos implement global data store concept repositori data store append-on set binari valu use short identifi identifi access store binari valu data store would trivial fit requir transient space transact handl due append-on natur explicit mark-and-sweep garbag collect process could ad avoid concern store garbag valu see recent ngp valu record discuss especi 1 background idea 1 http //mail-archives.apache.org/mod_mbox/jackrabbit-dev/200705.mbox/ 3c510143ac0705120919k37d48dc1jc7474b23c9f02cbd mail.gmail.com 3e
databasejourn need connect reestablish logic db base file system persist manag implement logic connect reestablish case db server bounc repositori run db base journal implement n't
nodetypemanagerimpl.hasnodetyp allow unknown prefix current implement nodetypeimpl.hasnodetyp string throw except given name use unknown prefix better altern would return fals definit node type unknown namespac exist
heavi load cluster http thread block stall request heavi load creat mount node cluster osx finder upload larg numeb file node time 1000 eventu one node stop respond finder mount timesout disconnect happen node becom unus mount attempt prompt password indic http still run timeout connect authent access web browser prompt password conenct provid list collect workspac tri refresh collect http request hang forev
ocm renam o.a.j.ocm.persistence.persistencemanag avoid confus core compon persistencemanag well known establish interfac jackrabbit 's architectur same-nam class jcr-map contrib project imo renam order avoid confus mail list thread jira issu
cluster synchron npe 4 machin setup encount follow npe one node restart tomcat problem seem go away would nice find java.lang.nullpointerexcept org.apache.jackrabbit.core.query.lucene.nodeindexer.createdoc nodeind exer.java:146 org.apache.jackrabbit.core.query.lucene.searchindex.createdocu se archindex.java:566 org.apache.jackrabbit.core.query.lucene.searchindex 2.next searchind x.java:368 org.apache.jackrabbit.core.query.lucene.multiindex.upd multiindex java:354 org.apache.jackrabbit.core.query.lucene.searchindex.updatenod searc hindex.java:356 org.apache.jackrabbit.core.searchmanager.onev searchmanager.java:4 23 org.apache.jackrabbit.core.observation.eventconsumer.consumeev ev entconsumer.java:231 org.apache.jackrabbit.core.observation.observationdispatcher.dispatch event observationdispatcher.java:201 org.apache.jackrabbit.core.observation.eventstatecollection.dispatch eventstatecollection.java:424 org.apache.jackrabbit.core.state.shareditemstatemanager.externalupdat e shareditemstatemanager.java:882 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.externalupdat e repositoryimpl.java:1957 org.apache.jackrabbit.core.cluster.clusternode.end clusternode.java:8 34 org.apache.jackrabbit.core.cluster.clusternode.consum clusternode.ja va:929 org.apache.jackrabbit.core.journal.abstractjournal.dosync abstractjou rnal.java:191 org.apache.jackrabbit.core.journal.abstractjournal.sync abstractjourn al.java:166 org.apache.jackrabbit.core.cluster.clusternode.sync clusternode.java 283 org.apache.jackrabbit.core.cluster.clusternode.start clusternode.java :229 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java 308 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java 584 org.apache.jackrabbit.core.jndi.bindablerepository.createrepositori b indablerepository.java:174
repositoryimpl.acquirerepositorylock fail detect file lock alreadi held current process java 1.4 1.5 *nix-bas platform possibl concurr instanti one repositori instanc jvm base same/ident configur critic issu sinc might lead data corrupt issu exist java version prior 1.6 *nix-bas platform verifi mac os-x 10.4 note issu exist file lock held anoth jvm code snippet reproduc issu repositori rep1 new transientrepositori session s1 rep1.login new simplecredenti johndo .tochararray repositori rep2 new transientrepositori session s2 rep2.login new simplecredenti johndo .tochararray root problem incorrect behavior java.nio.channels.filechannel trylock demonstr follow code snippet tri filelock fl1 new fileoutputstream foo .getchannel .trylock system.out.println 1st lock fl1 filelock fl2 new fileoutputstream foo .getchannel .trylock system.out.println 2nd lock fl2 catch throwabl t.printstacktrac
add db connect autoconnect bundledbpersistencemanag sinc bundl db pm n't inherit databas pm ca n't reconnect databas bounc would nice add featur
sql server support cluster modul realiz cluster modul n't specif support sql server yet 's mssql.ddl still tri run repositori sql server cluster enabl hope default schema default.ddl would suffic appar n't unless 'm someth wrong sinc kept get follow error whenev write oper attempt 2007-05-25 14:48:06,757 warn org.apache.jackrabbit.core.journal.databasejourn error roll back connect rollback autocommit set 2007-05-25 14:48:06,757 error org.apache.jackrabbit.core.cluster.clusternod unabl commit log entri org.apache.jackrabbit.core.journal.journalexcept unabl append revis 1090. org.apache.jackrabbit.core.journal.databasejournal.append org.apache.jackrabbit.core.journal.appendrecord.upd appendrecord.java:242 org.apache.jackrabbit.core.cluster.clusternod workspaceupdatechannel.updatecommit clusternode.java:530 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:725 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:855 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:326 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:313 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:302 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:306 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1214 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:849 caus java.sql.datatrunc data truncat net.sourceforge.jtds.jdbc.sqldiagnostic.adddiagnost sqldiagnostic.java:379 net.sourceforge.jtds.jdbc.tdscore.tdserrortoken tdscore.java:2781 net.sourceforge.jtds.jdbc.tdscore.nexttoken tdscore.java:2224 net.sourceforge.jtds.jdbc.tdscore.getmoreresult tdscore.java:628 net.sourceforge.jtds.jdbc.jtdsstatement.processresult jtdsstatement.java:525 net.sourceforge.jtds.jdbc.jtdsstatement.executesql jtdsstatement.java:487 net.sourceforge.jtds.jdbc.jtdspreparedstatement.execut jtdspreparedstatement.java:475 org.jboss.resource.adapter.jdbc.wrappedpreparedstatement.execut wrappedpreparedstatement.java:183 org.apache.jackrabbit.core.journal.databasejournal.append 58 howev think got thing work use modifi version default.ddl chang type revision_data field varbinari imag
use correct version number repositori descriptor repositori descriptor jcr.repository.vers alway show 1.0-dev valu reflect current jackrabbit version
creat sampl search page web applic search page show use queri featur jackrabbit
xmlreader log fatal error system test case check appropri except thrown invalid xml suppli case build xmlreader java 1.5 log fatal error system seem caus miss error handler xmlreader
support jndi configur bundledbpersistencemanag would nice option configur bundledbpersistencemanag databas specifi jndi name datasourc
postgresql support cluster modul ddl file postgresql cluster modul 'm attach one use project hope help
move method n't remov sourc node small unit test demonstr method move n't remov sourc node
oraclefilesystem use getclass .getresourceasstream load schema file org.apache.jackrabbit.core.fs.db.oraclefilesystem load schema via getclass .getresourceasstream make imposs extend class without either copi schema ddl file overwrit checkschema schema file access solut use oraclefilesystem.class.getresourceasstream see jcr-595 fix alreadi org.apache.jackrabbit.core.persistence.db.databasepersistencemanag
support lower upper case function order claus queri languag support lower- upper-cas function within order claus would provid case-insensit order queri result exampl find nt base node order foo properti ignor case xpath //element nt base order fn lower-cas foo sql select nt base order lower foo
support transact use jcr rmi time session obtain o.a.j.rmi.client.localadapterfactori implement method xasess therefor rmi access layer support transact session
allow disabl referenti integr check workspac oper like clone remov oper huge subtre node requir lot memori copi clone remov subtre node load transient space allow oper transact side requir lot heap size memori size direct depend size subtre number node result case imposs make oper one step environ sometim 1 gb java heap enough succes clone subtre one workspac anoth alway clone copi remov tree chunk refer subtre approach fail possibilti temporari disabl referenti integr check experienc jcr user could useful anoth use case allow clone select subtre whole structur worskpac applic need clone select subtre one workspac anoth exist refer need clone whol estructur first remov unwant node realli time expens memori consum
patch jackrabbit-webapp pom.xml patch creat addit jar artifact modifi jackrabbit-webapp pom.xml creat jar artifact addit exist war artifact allow jackrabbit-webapp util servlet reus modul right way would creat separ jar modul servlet move jackrabbit-jcr-common reus jar depend jackrabbit-webapp 'm sure patch deserv appli trunk use workaround cleaner solut implement see also http //mail-archives.apache.org/mod_mbox/jackrabbit-dev/200705.mbox/ 3c510143ac0705151453t7a0eb4cam859a40fb106e81f5 mail.gmail.com 3e discuss possibl improv jackrabbit-webapp util servlet
reusabl repositori access bind servlet discuss http //mail-archives.apache.org/mod_mbox/jackrabbit-dev/200705.mbox/ 3c510143ac0705151453t7a0eb4cam859a40fb106e81f5 mail.gmail.com 3e jcr-955 would use reusabl set servlet compon access expos repositori various configur way plan refactor current repositoryaccessservlet jackrabbit-webapp place result servlet compon jackrabbit-jcr-common servlet-api new option provid depend
set jcr servlet-api depend scope provid jcr servlet api librari typic provid deploy environ includ compile/runtim depend jackrabbit artifact scope depend thus set provid dependencymanagement/ section jackrabbit parent pom
use jackrabbit-jcr-common jackrabbit-jcr-rmi jackrabbit-jcr-rmi compon leverag general-purpos class jackrabbit-jcr-common even expens introduc extra depend
remov author tag jackrabbit-jcr-rmi recommend within apach use author tag mean identifi sourc code individu develop author tag jackrabbit-jcr-rmi therefor remov
add workspac popul tool add simpl tool jackrabbit-webapp popul workspac content
deadlock concurrentversioningwithtransactionstest patch follow concurrentversioningwithtransactionstest base exist concurrentversioningtest use transact around version oper macbook run test concurr 100 num_oper 100 caus deadlock second thread dump follow note ignor staleitemstateexcept probabl justifi due lock stuff iiuc let thread run long enough show problem run test time show lock pattern sever time thread lock line 87 session.sav transact other line 93 transaction.commit testconcurrentcheckinintransact 80 public void testconcurrentcheckinintransact throw repositoryexcept 81 runtask new task 82 public void execut session session node test throw repositoryexcept 83 int 0 84 tri 85 node n test.addnod test 86 n.addmixin mixversion 87 session.sav 88 0 num_oper concurr i++ 89 final usertransact utx new usertransactionimpl test.getsess 90 utx.begin 91 n.checkout 92 n.checkin 93 utx.commit 94 95 n.checkout 96 catch except e 97 final string threadnam thread.currentthread .getnam 98 final throwabl deepcaus getlevel2caus e 99 deepcaus =null deepcaus instanceof staleitemstateexcept 100 ignor 101 els 102 throw new repositoryexcept threadnam i= e.getclass .getnam e 103 104 105 106 concurr 107
ocm add unit test bundledbpersistencemanag yet check ocm framework bundledbpersistencemanag
search index jcr system tree need right everi time queri execut index current workspac well index jcr system tree search lot queri search jcr system tree therefor check queri contain path includ jcr system two relev node queri tree find 's first locat step includ jcr system tree think 's easi one queri contain jcr deref node intermedi result queri may derefer jcr system tree notabl speed queri execut work extens version
add support tablespac oracl relat class user account oracl databas temporari default tablespac appropri databas schema creat issu least follow packag o.a.j.core.persistence.bundl o.a.j.core.persistence.db o.a.j.core.fs.db
better error unknown date format small patch improv except messag get date format unknown
documentviewexportvisitor class incorrect handl xml escap element name method privat static string escapenam string name follow test 0 xmlchar.isncnamestart ch xmlchar.isncnam ch chang 0 xmlchar.isncnamestart ch xmlchar.isncnam ch order proper escap text two method xmlchar return true charact valid way around
bundl consist check work consistencycheck featur databas bundl persist manag work correct tabl prefix use load bundl
xml import use maco x webdav client work tri import xml file via webdav mount work main client first tri creat 0-siz file fail xml import file creat lock put xml bodi second problem might dot-underscor file mac tri creat
manag lucen fieldcach per index segment jackrabbit use indexsearch search singl indexread like instanc cachingmultiread everi search sort rang queri fieldcach popul associ instanc cachingmultiread success queri oper cachingmultiread get tremend speedup queri reus associ fieldcach instanc problem jackrabbit creat new cachingmultiread _everytime_ one under index modifi mean chang _one_ item repositori need rebuild fieldcach exist fieldcach associ old instanc cachingmultiread lead slow search respons time queri contain rang queri sort field also lead massiv memori consumpt depend size index might multipl instanc cachingmultiread use scenario lot queri item modif execut concurr goal keep fieldcach long possibl
nodeimpl.checkin call save three time version relat properti version node check save individu need save individu node must pend chang save call safe node
mislead except messag re-index fail e.g log may say 19.06.2007 11:25:42 *error* repositoryimpl fail initi workspac default repositoryimpl.java line 382 javax.jcr.repositoryexcept error index root node 10022d38-c449-4751-b8f0-9d07ac45ead5 mention uuid root node root caus miss
jcr deref parent axi xpath predic current jcr deref function allow xpath queri predic exampl book hold refer properti author author name want book specif author /jcr root/el booktyp jcr deref author authortyp name king fail invalidqueryexcept current support error rais xpathquerybuild class function privat querynod createfunct simplenod node querynod querynod block els nameformat.format jcr_deref resolv .equal fname problem queri evalu jcr deref function method point querynode.gettyp 0 test rais except querynode.gettyp neither querynode.type_loc querynode.type_path think use place put deref function queri n't know could test referenc node properti anoth way freder esnault
remov circular depend versionmanagerimpl versionitemstateprovid architectur perspect versionmanagerimpl vmgr higher level versionitemstateprovid visp vmgr deal item visp deal itemst object nonetheless visp refer vmgr also call method setnoderefer violat rule strict layer system e.g one negat effect deadlock describ jcr-672 also make hard solv jcr-962 attach patch includ follow chang move method versionmanagerimpl.setnoderefer versionitemstatemanag method oper itemst need versionmanagerimpl seen current method direct call peristencemanag indic locat lower layer promot class versionitemstatemanag top level class chang method versionmanagerimpl.createsharedstatemanag return versionitemstatemanag remov versionmanagerimpl instanc variabl versionitemstateprovid versionitemstateprovider.setnoderefer call versionitemstatemanager.setnoderefer instead use persistencemanag versionmanagerimpl.getitemrefer use itemstatemanag also seem lock necessari method
extend apach parent pom apach wide configur apach wide config publish apach parent pom pleas use
singl quot contain function pars correct singl quot contain statement parser throw except exampl //element nt resourc jcr contain it fun lucenequerybuild replac singl quot doubl quot henc lucen fulltext queri parser fail miss close doubl quot sure done code mayb left earli jsr 170 draft
xpath relat path support miss null null believ chang issu jcr-247 incomplet instanc x foo/ x pars queri tree
transactioncontext creat new thread rollback thread stop transact commit timeout occur effect lot thread creat sleep mani transact commit short time frame rollback thread signal transact commit even better timer use singl thread transact context
patch refactor access saxpars log parser class use parser collect code duplic sessionimpl workspaceimpl class initi saxpars also actual saxpars class use log make easier debug problem like jcr-984
deploy jca jar file maven repositori pleas deploy jca jar file maven repositori ibiblio whenev deploy rar artifact jar need non manag usag jackrabbit jca eg embed resourc adapt applic spring jca order use xa jackrabbit would nice could done start current 1.3 version futur version thank
configur maven build ide project generat idea eclips add plugin configur maven-idea-plugin maven-eclipse-plugin jdk version set idea configur sourc download depend simplifi project regener work idea eclips ll add patch thank
modifi lazyqueryresultimpl allow resultfetchs set programmat applic search show part queri result alway know part result need shown mean know advanc mani result need fetch would like abl programmat set resultfetchs minim number load lucen doc therefor improv perform know alreadi possibl set resultfetchs via index configur number fix n't work well environ use page result set number low queri execut multipl time set high mani lucen doc load
improv perform descendantselfaxisqueri descendantselfaxisquery.descendantselfaxisscorer.isvalid int contexthit popul doc found way axi current algorithm unfortun n't add new doc add doc alreadi present contexthit lead call hierarchyresolver.getpar int necessari
corrupt path move node found bug corrupt result node.getpath seem relat older jackrabbit bug e.g jcr-768 still happen jackrabbit 1.3 jackrabbit-1.4-snapshot basic node 3 subnod b c move index 1 work fine unless call getpath third node move expect path move would /page 37 /page/el 3 b /page 37 /page/el 2 c /page 37 /page/el get path /page 37 /page/el 3 b /page 37 /page/el c /page 37 /page/el
releas ocm compon contrib/jackrabbit-jcr-mapping/jcr-map promot contrib jackrabbit-jcr-ocm compon
name path interfac spi spi interfac current depend qname path class jackrabbit-jcr-common architectur would better name path interfac spi packag implement class common
valuefactori extens jackrabbit valuefactori implement generic base class jackrabbit-jcr-common base class could reus spi
annot base implement jackrabbit ocm creat annot base implement jackrabbit-ocm use instead digest one
spi provid batch read function extend repositoryservic interfac allow batchread modifi jcr2spi accord
jcr2spi remov duplic item state origin approach duplic item state object connect requir simplifi
spi prefer iter instead special subclass f2f agre spi rather use iter instead special subclass rangeiter
use inherit rather deleg spi valuefactoryimpl valuefactoryimpl protect constructor spi variant valu factori use
spi add repositoryservice.getqnodetypedefinit find f2f 2/3 juli similar recent modif retriev name space node type manag chang order retriev complet set node type demand otherwis singl node type definit retriev requir achiev agre add repositoryservice.getqnodetypedefinit
fine grain permiss flag would fine one permiss flag node add moment 3 flag need know node updat creat possibl current implement node add permiss flag accessmanager.writ use problem webdav scenario microsoft-word open node tri save need write permiss parent node ok user trys save file name permissionflag use mayb solut problem br claus
stackoverflowerror mani version node creat org.apache.jackrabbit.core.version.versioniteratorimpl addvers call recurs caus stackoverflowerror mani version
move common implement spi interfac spi-common modul spi modul use near duplic code move spi-common modul
serializationtest leak session class treecompar extend abstractjcrtest open session constructor call setup method teardown method never call
jcr2spi add jndi support ad jndi support jcr2spi one improv came f2f julian volunt take look
test failur spi2jcr addeventlistenertest two test fail addeventlistenertest.testuuid addeventlistenertest.testnodetyp
jcr2spi add configur cach item instanc itemmanag current itemmanag implement use simpl map weak key itemst weak valu item cach marcel recent suggest replac sophist cach mechan configur
connection.setautocommit fail connect manag jndidatabasepersistencemanag invok setautocommit db connect fail connect manag propos workaround check auto commit must set previous set trivial patch provid happen eg use jndi eg jndidatabasepersistencemanag fetch connect jboss persist manag tri reconnect see stack trace 05 jul 09:54:24 error sepersistencemanager| fail re-establish connect java.sql.sqlexcept set autocommit manag transact org.jboss.resource.adapter.jdbc.basewrappermanagedconnection.setjdbcautocommit basewrappermanagedconnection.java:482 org.jboss.resource.adapter.jdbc.wrappedconnection.setautocommit wrappedconnection.java:322 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.initconnect databasepersistencemanager.java:731 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.reestablishconnect databasepersistencemanager.java:806 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.executestmt databasepersistencemanager.java:852 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.exist databasepersistencemanager.java:647 org.apache.jackrabbit.core.state.shareditemstatemanager.hasnonvirtualitemst shareditemstatemanager.java:1102 org.apache.jackrabbit.core.state.shareditemstatemanager.hasitemst shareditemstatemanager.java:289 org.apache.jackrabbit.core.state.localitemstatemanager.hasitemst localitemstatemanager.java:180 org.apache.jackrabbit.core.state.xaitemstatemanager.hasitemst xaitemstatemanager.java:252 org.apache.jackrabbit.core.state.sessionitemstatemanager.getitemst sessionitemstatemanager.java:174
convert batch implement spi-rmi remot object local one current implement batch interfac spi-rmi simpl use remot server side batch chang local object client transmit chang singl call server save
patch allow repositoryaccessservlet get repositori servletcontext attribut attach patch add repository.context.attribute.nam init paramet repositoryaccessservlet init-param param-nam repository.context.attribute.nam /param-nam param-valu javax.jcr.repositori /param-valu descript set repositoryaccessservlet expect repositori servletcontext attribut name allow servlet modul use repositori intial jackrabbit-jcr-servlet modul util /descript /init-param
favour qvalue.getpath getstr appropri avoid extra convers round trip qvalue.getpath use instead qvalue.getstr appropri
introduc qvalue.getcalendar introduc qvalue.getcalendar order avoid unnecessari convers from/to string format
use repositori servic wide namespac cach jcr2spi layer request namespac new session creat rather cach make avail session
move repositori home directori target directori current spi test client use repositori home directori jackrabbit-cor modul instead use repositori home prefer target directori reset use maven clean goal
reduc call repositoryservice.getrepositorydescriptor descriptor chang request session
load item definit requir item definit load item state construct whenev possibl delay time definit actual use
load root node definit requir root node definit current load whenev session log
node type manag subproject default namespac emtpi creat node type match class descriptor default namespac empti instead ocm
spi chang param order repositoryservice.createbatch method repositoryservic requir sessioninfo list info first paramet except repositoryservice.createbatch itemid sessioninfo unless someon object would refact method signatur consist reason new repositoryservice.createbatch sessioninfo itemid
remov warn log miss text extractor jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/lucene/jackrabbittextextractor.java method extracttext log warn level index avail move debug applic need full text index text node messag fill log
clone -handl multipl residu prop def effectivenodetypeimpl org.apache.jackrabbit.jcr2spi.nodetype.effectivenodetypeimpl current reject multipl residu properti definit differ getmultipl fact accept combin differ valu getonparentversionact aspect accept well see jsr 170 6.7.8 purpos notion two definit name appli two residu definit two residu properti child node definit differ subattribut must permit co-exist effect node type interpret disjunct ore option
introduc qnodetypedefinit cach per userid read server qnodetypedefinit cach share across sessionimpl userid
rowiteratorimpl make use queryresultrow.getvalu valu current retriev regular node use queryresultrow.getvalu use less call server
clean cach node type registri session logout run jcr test memori consumpt increas steadili end test run consum 300 mb machin 's realli memori leak jcr2spi junit test keep refer session node instanc end test run would nice instanc bit lightweight
webapp n't compil use enum keyword abstractconfig.java jndiconfig.java local variabl name enum n't allow use jdk5 later compil
unabl save session save renam node transientrepositori repo new transientrepositori applications/test/repository.xml applications/test session repo.login new simplecredenti test .tochararray s.getrootnod .hasnod parent s.getrootnod .getnod parent .remov s.save creat parent node node parent s.getrootnod .addnod parent creat node renam parent.addnod newnod s.save renam node s.move /parent/newnod /parent/renamednewnod save renam node s.getrootnod .getnod parent/renamednewnod .save tri save session fail s.save s.logout
jcr2spi setproperti name date-str fail properti ad properti type propertytype.d exampl code node l_parent node session.getitem this.m_path node l_test l_parent.addnod createcontenttest nt file node l_content l_test.addnod jcr content nt resourc l_content.setproperti jcr encod utf-8 l_content.setproperti jcr mimetyp text/plain l_content.setproperti jcr data new bytearrayinputstream foobar .getbyt l_content.setproperti jcr lastmodifi 2007-07-25t17:04:00.000z todo work well bug jcr2spi session.sav fail properti defin date happen valu comparison attempt note work properti alreadi exist overwritten except javax.jcr.nodetype.constraintviolationexcept match properti definit found http //www.jcp.org/jcr/1.0 lastmodifi org.apache.jackrabbit.jcr2spi.nodetype.itemdefinitionproviderimpl.getqpropertydefinit itemdefinitionproviderimpl.java:269 org.apache.jackrabbit.jcr2spi.nodetype.itemdefinitionproviderimpl.getqpropertydefinit itemdefinitionproviderimpl.java:159 org.apache.jackrabbit.jcr2spi.nodeimpl.getapplicablepropertydefinit nodeimpl.java:1672 org.apache.jackrabbit.jcr2spi.nodeimpl.createproperti nodeimpl.java:1369 org.apache.jackrabbit.jcr2spi.nodeimpl.setproperti nodeimpl.java:264 org.apache.jackrabbit.jcr2spi.nodeimpl.setproperti nodeimpl.java:345 org.apache.jackrabbit.jcr2spi.nodeimpl.setproperti nodeimpl.java:336
java.lang.arrayindexoutofboundsexcept importxml java 6 use jackrabbit 1.3 java java version 1.6.0_02 java tm se runtim environ build 1.6.0_02-b05 java hotspot tm client vm build 1.6.0_02-b05 mix mode share import attach xml get except caus java.lang.arrayindexoutofboundsexcept java.lang.system.arraycopi nativ method org.apache.jackrabbit.core.xml.bufferedstringvalue.append bufferedstringvalue.java:201 org.apache.jackrabbit.core.xml.sysviewimporthandler.charact sysviewimporthandler.java:187 org.apache.jackrabbit.core.xml.importhandler.charact importhandler.java:200 com.sun.org.apache.xerces.internal.parsers.abstractsaxparser.charact abstractsaxparser.java:538 com.sun.org.apache.xerces.internal.impl.xmldocumentfragmentscannerimpl.scandocu xmldocumentfragmentscannerimpl.java:461 com.sun.org.apache.xerces.internal.parsers.xml11configuration.pars xml11configuration.java:807 com.sun.org.apache.xerces.internal.parsers.xml11configuration.pars xml11configuration.java:737 com.sun.org.apache.xerces.internal.parsers.xmlparser.pars xmlparser.java:107 com.sun.org.apache.xerces.internal.parsers.abstractsaxparser.pars abstractsaxparser.java:1205 com.sun.org.apache.xerces.internal.jaxp.saxparserimpl jaxpsaxparser.pars saxparserimpl.java:522 javax.xml.parsers.saxparser.pars saxparser.java:395 org.apache.jackrabbit.core.sessionimpl.importxml sessionimpl.java:1116 use java 1.5 work java version 1.5.0_12 java tm 2 runtim environ standard edit build 1.5.0_12-b04 java hotspot tm client vm build 1.5.0_12-b04 mix mode share
bundl persist manag error fail read bundl first time code nodeiter entit null node root null contnod null entsnod null tri root session.getrootnod contnod root.getnod sr cont entsnod contnode.getnod sr ent entit entsnode.getnod catch except e logger.error get ent node e output 12359 http-8080-processor24 error org.apache.jackrabbit.core.persistence.bundle.bundledbpersistencemanag fail read bundl c3a09c19-cc6b-45bd-a42e-c4c925b67d02 java.io.ioexcept error 40xd0 contain close 12375 http-8080-processor24 error com.taxila.editor.sm.repooper get ent node javax.jcr.pathnotfoundexcept sr ent org.apache.jackrabbit.core.nodeimpl.getnod nodeimpl.java:2435 com.taxila.editor.sm.repooperations.getentitynod repooperations.java:4583 com.taxila.editor.sm.repooperations.displayent repooperations.java:4159 com.taxila.editor.sm.repooperations.displayent repooperations.java:4114 com.taxila.editor.em.um.mainentityform.reset mainentityform.java:215 org.apache.struts.taglib.html.formtag.dostarttag formtag.java:640 org.apache.jsp.pages.jsp.entity.mainentity_jsp._jspservic mainentity_jsp.java:414 org.apache.jasper.runtime.httpjspbase.servic httpjspbase.java:97 javax.servlet.http.httpservlet.servic httpservlet.java:802 org.apache.jasper.servlet.jspservletwrapper.servic jspservletwrapper.java:332 org.apache.jasper.servlet.jspservlet.servicejspfil jspservlet.java:314 org.apache.jasper.servlet.jspservlet.servic jspservlet.java:264 javax.servlet.http.httpservlet.servic httpservlet.java:802 org.apache.catalina.core.applicationfilterchain.internaldofilt applicationfilterchain.java:252 org.apache.catalina.core.applicationfilterchain.dofilt applicationfilterchain.java:173 org.apache.catalina.core.applicationdispatcher.invok applicationdispatcher.java :672 org.apache.catalina.core.applicationdispatcher.processrequest applicationdispatcher.java:463 org.apache.catalina.core.applicationdispatcher.doforward applicationdispatcher.java:398 org.apache.catalina.core.applicationdispatcher.forward applicationdispatcher.java:301 org.apache.struts.action.requestprocessor.doforward requestprocessor.java:1014 org.apache.struts.action.requestprocessor.processforwardconfig requestprocessor.java:417 org.apache.struts.action.requestprocessor.processactionforward requestprocessor.java:390 org.apache.struts.action.requestprocessor.process requestprocessor.java:271 org.apache.struts.action.actionservlet.process actionservlet.java:1292 org.apache.struts.action.actionservlet.dopost actionservlet.java:510 javax.servlet.http.httpservlet.servic httpservlet.java:709 javax.servlet.http.httpservlet.servic httpservlet.java:802 org.apache.catalina.core.applicationfilterchain.internaldofilt applicationfilterchain.java:252 org.apache.catalina.core.applicationfilterchain.dofilt applicationfilterchain.java :173 org.apache.catalina.core.standardwrappervalve.invok standardwrappervalve.java:213 org.apache.catalina.core.standardcontextvalve.invok standardcontextvalve.java:178 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.java:126 org.apache.catalina.valves.errorreportvalve.invok errorreportvalve.java:105 org.apache.catalina.core.standardenginevalve.invok standardenginevalve.java:107 org.apache.catalina.connector.coyoteadapter.servic coyoteadapter.java:148 org.apache.coyote.http11.http11processor.process http11processor.java:869 org.apache.coyote.http11.http11baseprotocol http11connectionhandler.processconnect http11baseprotocol.java :664 org.apache.tomcat.util.net.pooltcpendpoint.processsocket pooltcpendpoint.java:527 org.apache.tomcat.util.net.leaderfollowerworkerthread.runit leaderfollowerworkerthread.java:80 org.apache.tomcat.util.threads.threadpool controlrunnable.run threadpool.java:684 java.lang.thread.run unknown sourc hand code tri root session.getrootnod contnod root.getnod sr cont entsnod contnode.getnod sr ent entit entsnode.getnod catch except e logger.error get ent node e tri entsnod contnode.getnod sr ent entit entsnode.getnod catch except e1 e1.printstacktrac output first error previous case come second execut entsnod contnode.getnod sr ent statement return right node henc iter
jcr2spi remov node oper miss submit spi batch jcr2spi follow sequenc oper seem lead incorrect spi batch submit 1 remov /a 2 add /a 3 add /a/b 4 session.sav seem creat spi batch first remov oper miss note problem seem occur step 3 part sequenc full java sourc test tri session.getrepositori .getdescriptor repository.level_2_support .equal true node testnod string name delete-test node root session.getrootnod make sure 's root.hasnod name root.addnod name nt folder session.sav test remove/add one batch root.hasnod name testnod root.getnod name testnode.remov session.sav un-com make test pass testnod root.addnod name nt folder add one child testnode.addnod name nt folder comment make test pass session.sav final session.logout
avoid use bitset childaxisqueri minim memori usag childaxisqueri larg index intern bitset instanc hit may consum lot memori bitset alway larg indexreader.maxdoc case queri consist 7 childaxisqueri combin total 14mb sinc multipl user execut queri simultan caus memori error
disabl norm untoken field reduc memori consumpt repositori mani index field norm caus memori problem index queri see lucene-448 sinc field question never boost could well index without norm
packag name spring project match updat ocm packag spring packag test refer old graffitto packag name scheme
ntcollectionconverterimpl throw null pointer except updat call updat node child node store child node code generat null pointer except case one goe remov jcr node present current object collect child object code call getcollectionnod .iter howev sinc check case getcollectionnod return null child node present null pointer except generat
non-version children version node updat merg fail jcr specif jsr-170 includ merg algorithm inconsist function describ elsewher jcr specif specif jsr-170 section 8.2.10 merg either case regardless whether besteffort true fals non-version node includ referenc non-referenc merg result nearest version ancestor updat version ancestor updat reflect state correspond node otherwis left unchang algorithm present 8.2.10.1 specif goe statement take consider merg result nearest version ancestor one solut would doleav n call dofail n v call alter perform merg version children rather children merg children version non-version done nearest parent fail merg state regardless whether failur occur current merg oper previous merg oper attach patch file make think requir chang
updat link javadoc 1.0 1.3 page http //jackrabbit.apache.org/doc/arch/overview/jcrlevels.html see link brows current jackrabbit api http //jackrabbit.apache.org/api-1/index.html point latest javadoc version
databasefilesystem mysql.ddl work mysql5 mysql 4.1.20 perhap new column primari key could get ad tabl call uid actual md5checksum fsentry_path fsentry_nam
matchallscor calculatedocfilt bug matchallscorer.calculatedocfilt two node differ properti like myprop myprop2 xpath string xpath myprop get node back precis ll get everi node properti startswith myprop reproduc chang simplequerytest.testisnotnul littl chang bar.setproperti text quick brown fox jump lazi dog bar.setproperti mytextwhichstartswithmytext quick brown fox jump lazi dog test xpath jcr primarytype='nt unstructur mytext fail 2 result test trunk tag 1.3.1 problem attach matchallscorer.java.patch mail creat jira issu furthermor would like discuss differ implement matchallscor imho current calculatedocfilt becom slow pretti fast see bottom email code part refer 100.000 doc mytext properti queri mytext loop execut least 100.000 time think might scope user-list user-list place discuss someth like termenum term reader.term new term fieldnames.properti field tri termdoc doc reader.termdoc tri terms.term null terms.term .field fieldnames.properti terms.term .text .startswith field docs.seek term docs.next docfilter.set docs.doc terms.next final docs.clos final terms.clos
call size method manageablearraylist caus nullpointerexcept use ntcollectionconverterimpl proxy= true call size method manageablearraylist caus nullpointerexcept under list lazycollectionload doload return null children manageablearraylist creat isnul method ntcollectionconverterimpl class alway return fals accord comment line done getcollectionnod alway return list fix jcr-882 correct anymor attach fix correct question remain differ empti list null-valu field contain list
duplic attribut beandescriptor collectiondescriptor 2 differ attribut use beandescriptor collectiondescriptor store jcr type jcrtype jcrnodetyp jcrnodetyp remov impli modif dtd pm implement differ map xml file use unit test furthermor nice use name jcrtype descriptor lot confus across differ descriptor sometim jcrtype use sometim jcrnodetyp use propos use jcrtype follow purpos classdescriptor use store primari node type class fielddescriptor use store properti type beandescriptor use defin child node type collectiondescriptor use defin child node type
incorrect node posit import found behavior seem consist spec replac node importxml use import_uuid_collision_replace_exist new node posit replac node talk posit among sibl originin node remov new node creat last child parent node spec-compli posit replac node use assum session node n string text hold xml data s.importxml n.getpath new bytearrayinputstream text.getbyt utf-8 importuuidbehavior.import_uuid_collision_replace_exist s.save quot spec section 7.3.6 importuuidbehavior.import_uuid_collision_replace_exist incom referenc node uuid node alreadi exist workspac alreadi exist node replac incom node posit exist node note posit
jcr2spi improv itemdefinitionproviderimpl.getmatchingpropdef better handl multipl residu new properti set unknown type miss propertytyp paramet itemdefinitionproviderimpl.getmatchingpropdef use find applic properti definit may case multipl residu properti def may match instanc repositori allow certain set properti type node type case set allow type includ string propdef return client specifi type string like best match
log debug level rather info cachemanag pleas chang org.apache.jackrabbit.core.state.cachemanag resizeal log debug level rather info 15:50:01,058 info cachemanag resizeal size=8 jackrabbit-core/src/main/java/org/apache/jackrabbit/core/state/cachemanager.java revis 565102 +++ jackrabbit-core/src/main/java/org/apache/jackrabbit/core/state/cachemanager.java work copi -122,7 +122,7 re-calcualt maximum memori cach set new limit privat void resizeal log.info resizeal size= caches.s log.debug resizeal size= caches.s get strong refer entri weak hash map may disappear time ca n't use size keyset direct
allow extend repositoryimpl.workspaceinfo workspac info packag privat protect method order abl extend workspac info need method protect
disabl consist check per default way disabl consist check entir current consist check perform startup whenev redo log appli larg workspac may take long time perform request
optim queri check exist properti mytext transform org.apache.jackrabbit.core.query.lucene.matchallqueri matchallweight use matchallscor calculatedocfilt matchallscor scale becom slow grow number node solut lucen document get new field public static final string properties_set properties_set .intern hold avail properti document note lucen indic build without perform improv still work fall back origin implement
workspac copy|mov versionabletest assumpt version test case assum ancestor version node made version may true jcr compliant store way skip test execut one obvious approach would throw notexecutableexcept attempt enabl version parent fail howev drawback mask configur error thought
exclud system index queri restrict result set nodetyp availbl jcr system subtre alreadi code abl decid whether system index need includ search see jcr-967 execut queri like app//el doc search workspac index unfortun slower //element doc sinc first queri optim second case queri return result set use applic specif node type even though second queri includ system index still faster first one could even faster n't need search system index node applic specif node type ca n't ad jcr system -tree therefor ad never system index right
namespaceregistrytest.testregisternamespac test assumpt namespaceregistrytest.testregisternamespac make assumpt possibl creat arbitrarili node insid root folder requir case propos get name test node config use properti rather child node test far tell mani repositori allow node name namespac empti one
serializationtest abstractimportxmltest leak temporari file test class leak temporari file setup fail
promot spi contrib suggest jukka dev-list 1 would like start promot apart promot discuss regard distribut common class 2 relat issu jcr-996 somehow depend promot consid latter one import follow far nobodi object promot still true start work 1 http //www.mail-archive.com/dev jackrabbit.apache.org/msg06433.html 2 http //www.mail-archive.com/dev jackrabbit.apache.org/msg06698.html
proppatch collect get 403 forbidden defaulthandler.canimport propertyimportcontext boolean prevent set properti proppatch collect webdav return 403 forbidden check see whether contextitem collect jcr content node test fail collect probabl allow collect node jcr content subnod patch chang index jackrabbit-jcr-server/src/main/java/org/apache/jackrabbit/server/io/defaulthandler.java jackrabbit-jcr-server/src/main/java/org/apache/jackrabbit/server/io/defaulthandler.java revis 567695 +++ jackrabbit-jcr-server/src/main/java/org/apache/jackrabbit/server/io/defaulthandler.java work copi -570,7 +570,7 item contextitem context.getimportroot tri return contextitem null contextitem.isnod iscollect || node contextitem .hasnod jcrconstants.jcr_cont return contextitem null contextitem.isnod iscollect || node contextitem .hasnod jcrconstants.jcr_cont catch repositoryexcept e log.error unexpect error e.getmessag return fals
spi-common qvaluetest.testdatevalueequality2 fail due chang made jcr-1018 introduct qvalue.getcalendar intern valu date-properti calendar string howev equal method adjust
add gettotals queryresult discuss http //www.nabble.com/total-size-of-a-query-result-and-setlimit 28 29-tf4280909.html a12185543 gettotals method ad queryresult
predefinednodetypetest..getnodetypespec handl unknown super type method tri filter custom super type produc broken spec *all* super type custom case emit n't
test tri add new node without specifi node type test tri add new node without specifi node type may support repositori particular nodeaddmixintest.testaddnonexist nodecanaddmixintest.testnonexist valuefactorytest.testvaluetyp valuefactorytest.testvalueformatexcept propos updat test case obtain node type test config
changelog serial caus cach inconsist order action taken account changelog built session manipul see instanc changelog.delet itemst state serial clusternode.writ record record changelog changelog eventstatecollect esc howev implicit order might chang consequ deseri clusternode.consum record record might produc differ changelog effect local cach get out-of-sync persist state repositori issu reproduc follow setup cluster environ two jackrabbit instanc say b instanc add properti p valu x node save session instanc b read properti p valu x instanc delet properti p add valu y save session instanc b read properti p still valu x cluster sync
extend indexingconfigur allow configur reuseabl analyz indexing_configuration.xml xml block analyz configur index-rul properti analyz assign mean properti analyz specif analyz first place enabl multilingu index document need ad explain differ search node scope jcr contain foo properti jcr contain myprop foo node scope alway search index default analyz configur workspace.xml searchindex element possibl indexing_configuration.xml snippet shown also node possibl enhanc sure wether implement requir lot filter factori probabl scope ad custom filter need factori might easier analyz analyz name= fr class= org.apache.lucene.analysis.fr.frenchanalyz analyz name= de class= org.apache.lucene.analysis.de.germananalyz analyz name= compound class= org.apache.lucene.analysis.simpleanalyz filter class= jr.stopfilterfactori words= stopwords.txt filter class= jr.edgengramtokenizerfactori side= front mingram= 1 maxgram= 2 /analyz /analyz index-rul nodetype= nt unstructur properti analyzer= fr bode_fr /properti properti analyzer= de bode_d /properti /index-rul
bad test assumpt org.apache.jackrabbit.test.api.lock test make lot assumpt may true compliant repositori abil add node without specifiy node type assumpt order name sibl support assumpt addmixin lockabl requir newli ad node furthermor repositori may support shallow lock leaf node 's compliant failur abort test test someth els
cach get sync transientstor caus pathnotfoundexcept done debug think problem synchron cach transientstor retriev childnod made parent node transient remov prop someth ad cach remov node nodeid remov cach sinc stateid n't save cach add node node name tri retriev node get path found except see retriev nodeit resolv cach use path sinc remov node remov cach return nodeid alreadi remov node node present id transientstor therefor throw pathnotfoundexcept provid fail junit test repository.xml
sql parser choke prefix contain charact sql parser choke prefix contain charact select a-b c nt resourc
maintan stabl order properti xml export export xml system view test document view order properti consist issu jcr specif sinc order properti undefin keep whatev order xml export could use moment tri run import- export- import- export roundtrip notic export xml often chang exampl differ see sv properti sv name= jcr uuid sv type= string sv valu 59357999-b4fb-45cd-8111-59277caf14b7 /sv valu /sv properti sv properti sv name= titl sv type= string sv valu test /sv valu /sv properti sv properti sv name= visibl sv type= string sv valu true /sv valu /sv properti sv properti sv name= titl sv type= string sv valu test /sv valu /sv properti may need diff two export file could pretti annoy clear way understand someth realli chang would propos keep order consist export easi way could sort properti alphabet export behavior test recent jackrabbit build trunk 1.4-snapshot
remov unus lucenequerybuilder.createqueri method follow method use anymor jackrabbit remov public static queri createqueri queryrootnod root sessionimpl session itemstatemanag shareditemmgr namespacemap nsmap analyz analyz propertytyperegistri propreg throw repositoryexcept
jcr2spi workspace.getimporthandl creat handler n't work proper jdk 1.4 jcr2spi return import handler deleg work saxtransformerhandl jdk one known issu process namespac prefix map proper attach separ test case propos drop jdk 1.4 support tune jcr2spi handler creat namespac attribut need use entir differ serial person prefer would drop jdk 1.4 support may accept everyon
maintain cluster revis tabl revis tabl cluster node write chang potenti becom larg cluster node date certain revis number seem unnecessari keep revis lower number
workspacerestoretest extend restoretest workspacerestoretest extend restoretest order re-us variabl setup/teardown code hand caus test restoretest n't overriden workspacerestoretest run twice propos decoupl class copi interest part restoretest workspacerestoretest
xpath queri parser accept /a /b treat /a/b xpath queri parser accept queri /a /b pars queri tree correspong xpath queri /a/b reject instead
superflu andquerynod queri tree built sql parser test queri test http //people.apache.org/~mreutegg/jcr-query-translator/translator.html select nt folder x 1 generat follow queri tree root node select properti pathquerynod locationstepquerynod nodetest=* descendants=tru index=non andquerynod relationquerynod op prop= x type=long value=1 nodetypequerynod prop= http //www.jcp.org/jcr/1.0 primarytyp value= http //www.jcp.org/jcr/nt/1.0 folder seem andquerynod superflu
lenient behavior node addmixin mixin alreadi present chang implement addmixin n't fail mixin alreadi present see also jackrabbit core chang http //svn.apache.org/viewvc view=rev revision=570149 jsr-283 issu https //jsr-283.dev.java.net/issues/show_bug.cgi id=353 affect tck jcr2spi n't specifi compon
bundl persist manag node id key store/load symertr mysql caus nosuchitemst except look like binari valu read back mysql uuid contain 0 's generat uuid getrawbyt call result store node uuid 0 's never found read back therefor caus corrupt random place certain uuid generat test case ve attach 2 file one caus node corrupt import differ remov 0 valu problem uuid file caus corrupt stefan point manipul test case use standard nt type fact provid follow info sorri stefan e.g test folder type referenc henc jcr uuid alloc acm folder nt folder mix referenc import causes_corruption.xml attempt ls aclobjectident loadbundl return null uuid a55f3f6b-a909-4e8d-b65a-93002ced0920 byte -91 95 63 107 -87 9 78 -115 -74 90 -109 0 44 -19 9 32 import works.xml ls work fine node ve manual chang uuid replac 0s 1s last section a55f3f6b-a909-4e8d-b65a-93112ced1921 -91 95 63 107 -87 9 78 -115 -74 90 -109 17 44 -19 25 33 test show issu highlight problem bundl persist manag mysql method handl binari column solut look replac binari 16 varbinari 16 quot http //dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html valu retriev must valu specifi storag pad might prefer use varbinari one blob data type instead review log show corrupt ve seen relat node uuid includ 0 's shall log jira ticket anyon see issu fix follow exampl see 'm show bundl test1 workspac mysql select hex node_id test1_bundl hex node_id 28126c3e36a0471d9cdc5ac423bac9c5 a55f3f6ba9094e8db65a93002ced0920 cafebabecafebabecafebabecafebab d638eaccdeb641fd8868804c8ecefffd deadbeefcafebabecafebabecafebab 5 row set 0.00 sec select use uuid hex valu return row mysql select node_id test1_bundl mysql unhex a55f3f6ba9094e8db65a93002ced0920 node_id empti set 0.00 sec ve creat new test3 workspac modifi use varbinari instead binari alter tabl test3_bundl modifi node_id varbinari 16 alter tabl test3_ref modifi node_id varbinari 16 import test case longer fail follow queri prove queri oper store return row expect mysql select node_id test3_bundl mysql unhex a55f3f6ba9094e8db65a93002ced0920 node_id node_id ¶z í 1 row set 0.00 sec mysql desc test3_bundl error 2006 hy000 mysql server gone away connect tri reconnect connect id 7116 current databas mmptest -+ -+ -+ -+ -+ field type null key default extra -+ -+ -+ -+ -+ node_id varbinari 16 yes uni null bundle_data longblob -+ -+ -+ -+ -+ 2 row set 0.00 sec mysql alter tabl test3_bundl modifi node_id varbinari 16 queri ok 2 row affect 0.00 sec record 2 duplic 0 warn 0
separ initi index creation multiindex construct index present multiindex constructor creat initi index travers workspac item state make difficult outsid class detect situat index present
referencespropertytest ca n't deal multivalu refer properti setup method use prop.getnod thus assum refer properti multivalu
problem custom node journal applic use custom node type problem cluster configur issu 1 follow definit nodetyp incorrect read journal nt hierarchynod version store journal _x002a_ sinc qname get escap read code core.nodetype.compact.compactnodetypedefreader.dochildnodedefinit follow test currenttokenequ '* ndi.setnam itemdef.any_nam els ndi.setnam toqnam currenttoken sinc currenttoken _x002a_ toqnam currenttoken call fail chang test currenttokenequ '* || currenttokenequ _x002a_ fix problem issu 2 store nodetyp journal superclass nt base store read get error say node subclass nt base code core.nodetype.compact.compactnodetypedefwriter.writesupertyp skip nt base write node read nodetyp definit journal follow except thrown unabl deliv node type oper http //namespace/app/repository/1.0 resourc primari node type except nt base must direct indirect deriv nt base probabl nt base re-ad nodetyp definit
move xasess interfac jackrabbit-api discuss jcr-953 would probabl make sens move org.apache.jackrabbit.core.xasess jackrabbit-cor jackrabbit-api org.apache.jackrabbit.api.xasess
jcr2spi nodeentryimpl.getpath blow stack due getindex call jcr2spi nodeentryimpl class contain logic caus getindex call call code session sess repo.login cred node inboxnod sess.getrootnod .getnod inbox inboxnode.getpath blow stack trace reveal 1 nodeentryimpl.getpath ultim call getindex 2. getindex call nodestate.getdefinit 3. call itemdefinitionproviderimpl.getqnodedefinit 4. catch repositoryexcept call nodeentryimpl.getworkspaceid 5. call nodeentryimpl.getworkspaceindex 6. call getindex back step 2 ad infinitum configur 1 configur load specifi in-memori persist manag 2 config wrap transientrepositori 3. 's wrap spi2jcr 's repositoryservic use default batchreadconfig 4. jcr2spi provid instanti direct coupl spi2jcr 5 node question creat follow session sess repo.login cred sess.getrootnod .addnod inbox nt folder sess.sav guess 's david
observ test throw notexecutableexcept repositori support observ observ test throw notexecutableexcept repositori support observ
jcr2spi versionmanagerimpl.getversionablenodeentri use tostr rather getstr obtain properti valu versionmanagerimpl.getversionablenodeentri use tostr rather getstr obtain properti valu
jsr 283 support
add simpl queri method objectcontentmanag discuss 1 suggest new method obejctcontentmanager.getobjectiter string queri string languag easili queri repositori object use predefin queri chose getobjectiter instead getobject intend method return iter collect 1 http //www.mail-archive.com/dev 40jackrabbit.apache.org/msg07475.html
objectiter may return null readili expect iter objectiter class implement iter object map under nodeiter objectiter may return null next map node iter exist rather return null iter probabl ignor unmapp node return object next node under iter mappabl
jcr2spi error level log clean session lock lockmanagerimpl.loggingout tri unlock node session lock repositoryexcept thrown get lock error level tck test teardown code remov test node use separ session thus see repositoryexcept simpl reason node alreadi remov somebodi els propos handl itemnotfoundexc pathnotfoundexc separ log
resourc associ compliant jta spec accord jta specifc section 3.4.4 transact associ resourc 's associ may end state t0 spec 's tabl suspend state t2 i.e without resum t1 code xasessionimpl.end howev assum resourc must associ order end associ caus except jboss 4.0.5.ga 09:37:15,525 warn transactionimpl xaexcept tx=transactionimpl xidimpl formatid=257 globalid=kneipix.dev.day.com/14 branchqual= localid=14 errorcode=xaer_proto javax.transaction.xa.xaexcept org.apache.jackrabbit.core.xasessionimpl.end xasessionimpl.java:279 org.apache.jackrabbit.jca.transactionboundxaresource.end transactionboundxaresource.java:46 org.jboss.tm.transactionimpl resource.endresourc transactionimpl.java:2143 org.jboss.tm.transactionimpl resource.endresourc transactionimpl.java:2118 org.jboss.tm.transactionimpl.endresourc transactionimpl.java:1462 org.jboss.tm.transactionimpl.beforeprepar transactionimpl.java:1116 org.jboss.tm.transactionimpl.commit transactionimpl.java:324 org.jboss.tm.txmanager.commit txmanager.java:240 org.jboss.aspects.tx.txpolicy.endtransact txpolicy.java:175
getreferencesnodetest test assumpt bad test assumpt getreferencesnodetest 1 setup primari node type includ mixin version propos fix creat node tri add mixin version check node type save 2 repositori support non-protect refer properti propos fix check abstractjcrtest 's ensurecansetproperti method let notexecutableexcept thrown
access version histori result read version version node internalversionhistoryimpl load version initi version oper incl checkin label restor signific slower node mani version
cachemanag interv recalcul cach size configur current interv recalucl cahc size hard code 1000 ms. resizing/recalcul cach size quit expens method especi getmemoryus mlruitemstatecach time consum depend configur realiz load 10-15 percent cpu time profil metric could spend recalcul seem need resiz cach everi second best interv configur extern config file cach set like memori size
refactor mapper descriptotread class would like refactor mapper descriptor reader order creat abstract mapper impl mapper class lot code common annotedobjectmapp digestermapperimpl reader differ mapper make exact process mapper class respons creat jcr node type done outsid mapper option oper certain use case node type creation necessari right annot object mapper creat jcr node type
remov queryresultimpl renam lazyqueryresultimpl queryresultimpl queryresultimpl n't use jackrabbit anymor instead lazyqueryresultimpl use see discuss jcr-1073
remov depend jackrabbit-cor remov depend jackrabit core ocm subproject jcr-map annot use jackrabbit core unit test also split jcr-nodemanag sever subproject one per jcr repo impl one subproject jackrabbit contribut jcr repo impl welcom specif jcr-nodemanag jar produc jcr repo impl jcr support node creation refactor jcr-nodemanag
databas persist manag log databas driver name version databas relat problem solv easili know databas driver version use sometim multipl databas driver instal app server environ user may even know current driver class name log suggest log driver databas name version well
bundl cach roll back storag changelog fail bundl cach bundl persist manag restor old state abstractbundlepersistencemanager.stor changelog changelog method throw except instanc storag refer fail abstractbundlepersistencemanager.putbundl nodepropbundl bundl method alreadi call modifi bundl connect rollback bundl cach out-of-sync persist state result shareditemstatemanag incorrect view persist state furthermor blockonconnectionloss properti set true bundledbpersistencemanag caught infinit loop invalid sql insert incorrect bundl cach see attach stacktrac
upgrad contrib/bdb-persist work w/jackrabbit 1.3 bdb-persist pm contrib upgrad work w/jackrabbit 1.3.1
simplefieldshelp emit lot warn simplefieldshelper.retrievesimplefield method use load jcr properti simpl java object field accord map descriptor node name properti warn messag emit miss properti defin option node type definit quit normal may miss therefor emit warn messag seem appropri would better follow order miss properti declar requir descriptor throw except els descriptor default valu miss properti use valu els properti defin default valu node type definit use valu els emit debug messag leav field undefin sure whether make absolut sens defin properti mandatori descriptor node type definit opinion
removeversiontest.testreferentialintegrityexcept assum avail ref properti name sibil test case assum avail refer properti throw notexecut avail take advantag name sibl child node identifi nodename2 config variabl alreadi creat test setup code
full text search test use incorrect charact escap phrase queri test case use singl quot escap phrase grammar 6.6.5.2 howev requir doubl quot
text extractor class obsolet web text extractor class obsolet http //jackrabbit.apache.org/doc/components/index-filters.html org.apache.jackrabbit.core.queri actual org.apache.jackrabbit.extractor plain text extractor continu org.apache.jackrabbit.core.query.lucene.textplaintextfilt
xml import alway throw itemexistsexcept tri overwrit exist node accord jcr-api possibl govern import xml serial referenc node case uuid collis unfortun uuid conflict handl late import itemexistsexcept alway thrown beforehand due allow same-name-s simpli tri import previous export referenc node twice provid either importuuidbehavior.import_uuid_collision_remove_exist importuuidbehavior.import_uuid_collision_replace_exist fail result itemexistsexcept
jcr2spi nodeentryimpl throw npe reordernod two folder node creat root root node 2nd folder order first node request batch correct upon save nodeentryimpl throw nullpointerexcept first line completetransientchang method revertinfo.oldpar null test code final string folder1 folder1 folder2 folder2 creat folder 1 server root session serversess login repositori cred node serverrootnod serversession.getrootnod node serverfolder1 serverrootnode.addnod folder1 nt folder creat folder 2 server root node serverfolder2 serverrootnode.addnod folder2 nt folder serversession.sav valid order todo perform reorder via client session clientsess login clientrepositori cred node clientrootnod clientsession.getrootnod clientrootnode.orderbefor folder2 folder1 clientsession.sav throw npe call stack junit java.lang.nullpointerexcept junit org.apache.jackrabbit.jcr2spi.hierarchy.nodeentryimpl.completetransientchang nodeentryimpl.java:1354 junit org.apache.jackrabbit.jcr2spi.hierarchy.nodeentryimpl.access 1100 nodeentryimpl.java:60 junit org.apache.jackrabbit.jcr2spi.hierarchy.nodeentryimpl revertinfo.statuschang nodeentryimpl.java:1465 junit org.apache.jackrabbit.jcr2spi.state.itemstate.setstatus itemstate.java:257 junit org.apache.jackrabbit.jcr2spi.state.nodestate.adjustnodest nodestate.java:554 junit org.apache.jackrabbit.jcr2spi.state.nodestate.persist nodestate.java:276 junit org.apache.jackrabbit.jcr2spi.state.changelog.persist changelog.java:135 junit org.apache.jackrabbit.jcr2spi.workspacemanager.execut workspacemanager.java:479 junit org.apache.jackrabbit.jcr2spi.state.sessionitemstatemanager.sav sessionitemstatemanager.java:149 junit org.apache.jackrabbit.jcr2spi.itemimpl.sav itemimpl.java:239 junit org.apache.jackrabbit.jcr2spi.sessionimpl.sav sessionimpl.java:317 junit testwsnodereorder.testreordernod testwsnodereorder.java:72 'm use spi implement conjunct jcr2spi spi2jcr bridg coupl back-end jackrabbit in-memori filesystem 's alway possibl node properti spi call inject error caus downstream problem
xslt pretty-print jcr document view export file attach xslt pretty-print jackrabbit xml document view export file 'm upload other use improv 'm use standalon document content structur later might creat servlet appli live repositori content
jcr2spi versionhistoryimpl.getqlabel need skip jcr mixintyp well getqlabel iter properti version label node comput set label current ignor jcr primarytyp need skip jcr mixintyp well
bad assumpt versionhistorytest.testinitallygetallversionscontainstherootvers two incorrect assumpt testinitallygetallversionscontainstherootvers getallvers return version particular order test assum root version come first node.equ suitabl node comparison final 's typo test case name
test case reli node.equ sever test case reli node.equ compar node instead issam use org.apache.jackrabbit.test.api.nodetest.testnodeident nodetest.java:751 org.apache.jackrabbit.test.api.nodetest.testnodeident nodetest.java:753 org.apache.jackrabbit.test.api.version.versionhistorytest.testinitallygetallversionscontainstherootvers versionhistorytest.java:126 org.apache.jackrabbit.test.api.version.versionhistorytest.testgetvers versionhistorytest.java:180 org.apache.jackrabbit.test.api.version.checkintest.testmultiplecheckinhasnoeffect checkintest.java:93 org.apache.jackrabbit.test.api.version.versiongraphtest.testinitialbaseversionpointstorootvers versiongraphtest.java:47 org.apache.jackrabbit.test.api.version.removeversiontest.testremoveversionadjustpredecessorset removeversiontest.java:120 org.apache.jackrabbit.test.api.version.removeversiontest.testremoveversionadjustsucessorset removeversiontest.java:144
data store garbag collect current data store garbag collect need run manual simpler use mayb tool base automat
lockoper cluster environ lock creat one server sent server cluster oper lock lockoper alway islock variabl set fals oper repres lock set islock variabl true flag indic whether lock privat boolean islock
ocm fail npe classdescriptor n't found objectconverterimpl getobject session session class clazz string path valid whether 's suitabl map order throw descript except objectconverterimpl getobject session session string path
nullpointerexcept classdescriptor index /users/cziegeler/developer/workspaces/default/jackrabbit/contrib/jackrabbit-jcr-mapping/jcr-mapping/src/main/java/org/apache/jackrabbit/ocm/mapper/model/classdescriptor.java /users/cziegeler/developer/workspaces/default/jackrabbit/contrib/jackrabbit-jcr-mapping/jcr-mapping/src/main/java/org/apache/jackrabbit/ocm/mapper/model/classdescriptor.java revis 579109 class descriptor whatev reason jcr type npe thrown classdescriptor follow patch solv issu +++ contrib/jackrabbit-jcr-mapping/jcr-mapping/src/main/java/org/apache/jackrabbit/ocm/mapper/model/classdescriptor.java work copi -468,7 +468,7 iterator.hasnext classdescriptor descendantclassdescriptor classdescriptor iterator.next descendantclassdescriptor.getjcrtyp .equal nodetyp nodetype.equ descendantclassdescriptor.getjcrtyp return descendantclassdescriptor
investig way compil refactor jcr-map java 1.4 last refactor jcr-map project includ annot base map descript main code base thus requir compil java 5 higher still use case requir java 1.4 goal investig whether would possibl defin build profil pom compil 1.4 ignor annot class
objectconverterimpl.getobject session class string may resolv map correct incomplet describ map node map call objectconverter.getobject session class string method discrimin properti configur objectconverterimpl class tri find best map effect node done walk class descriptor hierarchi start descriptor select class map node type found case class descriptor hierarchi incomplet improp defin class descriptor would actual perfect map node declar extend implement parent classes/interfac hierarchi walk find map thus end origin request class instanti class abstract interfac cours fail exact class descriptor node type would look direct map might found immedi class descriptor verifi actual assign compat request class would fail could still walk hierarchi see whether find anoth classdescriptor clarifi issu consid follow exampl abstract base class concret extens class node type abstractbaseclass map abstract abstractbasetyp baseclass extend abstractbaseclass map basetyp supertyp abstractbasetyp note baseclass map declar extend abstractbaseclass call objectconverterimpl.getobject session abstractbaseclass.class abasetypenod descriptor fore abstractbaseclass inspect again node decid check class descriptor hierarchi node map found walk hierarchi henc abstractbaseclass instanti cours fail baseclass map would declar extend abstractbaseclass map everyth would fine
spi2jcr repositoryserviceimpl.getrootid return bad nodeid think org.apache.jackrabbit.spi2jcr.repositoryserviceimpl.getrootid return getidfactori .createnodeid string null path.root rather round trip wrap repositori return uuid base nodeid root node wrap repositori mix referenc javadoc read root node identifi uniqu id return nodeid simpli uniqueid part path part null root node identifi uniqu id uniqueid part null path part set
nullpointerexcept itemst follow happen quit regular multipl thread ad retriev remov node simultan look code pull method seem due under-synchron somewher overlayedst test line 153 null java.lang.nullpointerexcept org.apache.jackrabbit.core.state.itemstate.pul itemstate.java:156 org.apache.jackrabbit.core.state.localitemstatemanager.statemodifi localitemstatemanager.java:421 org.apache.jackrabbit.core.state.statechangedispatcher.notifystatemodifi statechangedispatcher.java:85 org.apache.jackrabbit.core.state.shareditemstatemanager.statemodifi shareditemstatemanager.java:434 org.apache.jackrabbit.core.state.itemstate.notifystateupd itemstate.java:241 org.apache.jackrabbit.core.state.changelog.persist changelog.java:271 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:741 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:937 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:327 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:313 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:303 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:307 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1374
jcr2spi sever broken equal comparison detect findbug h c ec call equal compar unrel class interfac org.apache.jackrabbit.jcr2spi.nodetype.nodetypemanagerimpl.nodetypereregist qname xythos-jcr/src/main/java/org/apache/jackrabbit/jcr2spi/nodetyp nodetypemanagerimpl.java line 218 1190978573312 1664752 h c ec call equal compar unrel class interfac org.apache.jackrabbit.jcr2spi.nodetype.nodetypemanagerimpl.nodetypereregist qname xythos-jcr/src/main/java/org/apache/jackrabbit/jcr2spi/nodetyp nodetypemanagerimpl.java line 227 1190978573312 1664753 h c ec call equal compar unrel class interfac org.apache.jackrabbit.jcr2spi.nodetype.nodetypemanagerimpl.nodetypeunregist qname xythos-jcr/src/main/java/org/apache/jackrabbit/jcr2spi/nodetyp nodetypemanagerimpl.java line 255 1190978573312 1664754 h c ec call equal compar unrel class interfac org.apache.jackrabbit.jcr2spi.nodetype.nodetypemanagerimpl.nodetypeunregist qname xythos-jcr/src/main/java/org/apache/jackrabbit/jcr2spi/nodetyp nodetypemanagerimpl.java line 264 1190978573312 1664755 h c ec org.apache.jackrabbit.jcr2spi.workspacemanager.canaccess string use equal compar array nonarray
jcr2spi sever perform improv point findbug findbug report m p bx method org.apache.jackrabbit.jcr2spi.nodetype.bitsetentcacheimpl.getbitnumb qname invok ineffici integ int constructor use integer.valueof int instead src/main/java/org/apache/jackrabbit/jcr2spi/nodetyp bitsetentcacheimpl.java line 177 1190981544656 1666284 m p bx method org.apache.jackrabbit.jcr2spi.query.rowiteratorimpl rowimpl.getvalu string invok ineffici integ int constructor use integer.valueof int instead src/main/java/org/apache/jackrabbit/jcr2spi/queri rowiteratorimpl.java line 247 1190981544671 1666292 m p bx method org.apache.jackrabbit.jcr2spi.workspacemanager.oneventreceiv eventbundl internaleventlisten invok ineffici integ int constructor use integer.valueof int instead src/main/java/org/apache/jackrabbit/jcr2spi workspacemanager.java line 616 1190981544640 1666279 m p wmi method org.apache.jackrabbit.jcr2spi.name.namespacecache.syncnamespac map make ineffici use keyset iter instead entryset iter src/main/java/org/apache/jackrabbit/jcr2spi/nam namespacecache.java line 193 1190981544656 1666283 m p wmi method org.apache.jackrabbit.jcr2spi.nodetype.nodetyperegistryimpl.internalregist map make ineffici use keyset iter instead entryset iter src/main/java/org/apache/jackrabbit/jcr2spi/nodetyp nodetyperegistryimpl.java line 524 1190981544656 1666285 m p wmi method org.apache.jackrabbit.jcr2spi.observation.observationmanagerimpl.onev eventbundl make ineffici use keyset iter instead entryset iter src/main/java/org/apache/jackrabbit/jcr2spi/observ observationmanagerimpl.java line 189 1190981544656 1666286 m p wmi method org.apache.jackrabbit.jcr2spi.state.nodestate.persist changelog make ineffici use keyset iter instead entryset iter src/main/java/org/apache/jackrabbit/jcr2spi/st nodestate.java line 275 1190981544671 1666297
avoid convert properti valu string qvalu current expos properti type long doubl pars format thus setting/retriev properti type requir roundtrip string avoid propos 1 add long getlong doubl getdoubl qvalu 2 add match creat method qvaluefactori 3 take advantag new method jcr2spi instanc allow 's valu implement intern hold qvalu
spi implement current need provid implement valuefactori qvaluefactori simplifi implement qvaluefactori suffici
remov support event bundl id event bundl id current use re-add later case need
databas data store want databas back data store implement implement use file alreadi avail part jcr-926
wrong link javadoc qnodetypedefinit javadoc qnodetypedefinit link javax.jcr.nodetype.nodedefinit instead javax.jcr.nodetype.nodetyp
databasejourn refactor subclass capabl 1.3 upgrad jackrabbit databasepersistencemanag class refactor allow easi subclass project subclass requir dbas specif name convent databas column default jackrabbit column n't fit within name convent point re cut cluster setup prepar product design would like use databas journal dbas want chang column name name convent exist databasejourn class set type subclass persistencemanag even filesystem hierarchi 'd like databasejourn class updat accord specif chang 'm look extract protect instanc variabl selectrevisionsstmtsql updateglobalstmtsql selectglobalstmtsql insertrevisionstmtsql extract method protect void buildsqlstat set sqls allow subclass overrid updat exist preparestat method use instanc variabl updat init method call buildsqlstat method call preparestat
expos namespac registri via workspac instead via session spi2jcr spi2jcr/sessioninfoimpl.getnamespaceresolv return namespac registri current session wrap repositori sinc session scope namespac remap visibl spi think method return namespac registri current workspac
jcr2spi spi2dav getproperti return cach properti 'm use jcr webdav contrib jcr2spi spi2dav librari server default jcr server jackrabbit-webapp-1.3.1 tomcat client 2007/09/28 svn snapshot ve notic node.getproperti return cach properti sampl test case found http //kplab.tuke.sk/svn/kplab/ctm/trunk/test/org/kplab/tsf/ctmtest.java note sometim properti get print may straightforward reproduc bug simpl exampl nt file node kplab/jojo repositori session session repository.login node root session.getrootnod node node root.getnod kplab/jojo node.getproperti jcr content/jcr data forc load properti server dump node simpl dump method http //jackrabbit.apache.org/doc/firststeps.html dump print /kplab/jojo /kplab/jojo/jcr content uncom getproperti line print /kplab/jojo /kplab/jojo/jcr content /kplab/jojo/jcr content/jcr lastmodifi 2007-09-27t15:52:27.312+02:00 /kplab/jojo/jcr content/jcr uuid 4421ed5a-6200-4918-864e-c58643bc8d4 /kplab/jojo/jcr content/jcr mimetyp text/plain /kplab/jojo/jcr content/jcr data hura hura /kplab/jojo/jcr content/jcr primarytyp nt resourc jozef wagner
spi improv descript lock method repositoryservic detail 1 getlockinfo intend behavior lock present intend behavior lock support 2 lock current invaliditemstateexcept list n't think make much sens 3 refreshlock intend behavior lock support 4 unlock current invaliditemstateexcept list n't think make much sens
jcr2spi test regress workspacemovereferenceabletest.testmovenodesreferenceablenodesnewuuid latest chang 581637 seem broken tck test test set org.apache.jackrabbit.test.testal test run 1037 failur 6 error 2 skip 0 time elaps 102.644 sec failur testmovenodesreferenceablenodesnewuuid org.apache.jackrabbit.test.api.workspacemovereferenceabletest time elaps 0.03 sec error javax.jcr.invaliditemstateexcept item org.apache.jackrabbit.jcr2spi.nodeimpl 13ef9df n't exist anymor org.apache.jackrabbit.jcr2spi.itemimpl.checkstatus itemimpl.java:428 org.apache.jackrabbit.jcr2spi.nodeimpl.getnam nodeimpl.java:120 org.apache.jackrabbit.test.api.workspacemovereferenceabletest.testmovenodesreferenceablenodesnewuuid workspacemovereferenceabletest.java:57
improv log nodetyperegistry.persistcustomnodetypedef close final block persistcustomnodetypedef throw ioexcept ignor least log take place ioexcept might still mean custom nodetyp definit store correct case instanc databasefilesystem use call out.clos trigger sql statement execut caus ioexcept fail
jcr2spi provid actual size rangeiterator.gets current jcr2spi alway return -1 rangeiterator.gets return valu legal mean unknown may caus client simpli iter whole list realli want simpli count use case use case count number member nt_folder without open nt_folder count member assum load memori make happen probabl need move away simpl iter spi level put quit addit work jcr2spi feedback appreci
path correct reorder children reorder unsav children node correct path test case attach follow oper attempt three sns children name b 1 b 2 b 3 last element order first three time result initi children order
broken test addeventlisten 's test code comment inlin prefix reschk test link javax.jcr.observation.ev node_ad creat specifi path code isdeep /code code fals /code public void testisdeepfalsenodead throw repositoryexcept eventresult listen new eventresult log reschk listen chang testroot/nodename1 isdeep==fals obsmgr.addeventlisten listen event.node_ad testroot nodename1 fals null null fals reschk node testroot/nodename1 creat associ parent node event testroot node n testrootnode.addnod nodename1 testnodetyp reschk node testroot/nodename1/nodename2 creat associ parent node event testroot/nodename1 n.addnod nodename2 testrootnode.sav event event listener.getev default_wait_timeout obsmgr.removeeventlisten listen reschk test case expect event path testroot/nodename1 checknodead event new string nodename1 plain english test case listen event associ parent node equal testroot/nodename1 expect singl event event.getpath return testroot/nodename1 incorrect imho associ parent node *that* event testroot correct test would check checknodead event new string nodename1 nodename2 make chang cours lead test failur report ri feedback appreci
distribut common class jukka start discuss regard distribut common class ago http //www.mail-archive.com/dev jackrabbit.apache.org/msg06698.html
repositori lock keep file open repositorylock open randomaccessfil close problemat line lock new randomaccessfil file rw .getchannel .trylock usual problem file close randomaccessfil object garbag collect howev call lot short time frame result too mani open file environ exampl linux
contribut pluggabl permiss user manag jackrabbit work jackrabbit base applict extend secur handl aim extens allow eitabl resourc base author solut end bee plugabl extend question jackrabbit developper-list custom implement secur manag privileg jackrabbit like suggest implement contribut attach patch find high-level explan contain file concept hope prove usabl enhanc great repositori welcom feed-back like thank kind inspect regard christian keller patch contain follow 1 api jackrabbit-core-changes.20071010.patch api allow implement configur mechan authent author api acl- principal-bas acl princip manag independ jcr api allow implement use differ back-end system like directori server 2 chang current core jackrabbit-core-changes.20071010.patch small chang necessari core enabl configur access manag like session access usermanag 3 implement jackrabbit-core-implementation.20071010.patch addit implemen contain depend back-end system may therefor use default descript extens hook jackrabbit bei implement intefac accessmanag loginmodul addit chang configur set-up access use object patch extend api order allow client inspect user permiss contain api.patch see short introduct secur extens patch contain authent author extens follwo two model introduc authoriz user 's group user user authent authent jackrabbit done loginmodul issu princip result authent user object repres princip therfor base author ii acl acl polici authorzi acl grant deni princip privileg call action addit ther manag princip princip link user permiss user may relat multipl princip depend loginmodul verfiy idend login-attemp loginmodul may expos princip repositori via provid interfac allow usag ace model manag class api 's abstract fact use jc-repositori aka refer javax.jcr.item session etc allow implement extern sourc without impos jcr specif method taken ldap userbas exampl manag class usermang princpalmanag aclmanag set-up maintain repsoitori singular securitymang session specif version manag expos via session principalmang aclmang feed one multipl provid principalprovid may exist per loginmodul aclprovid per workspac authent user use loginmodul resolv base given credenti credenti valid user use resolv princip accord group-membership result session 's subject extend princip author acl use implement accessmanager-interfac aclmang relat item acl acl evalu permiss current subject 's princip default implement default implement use repositori store secur data user store within dedic workspac acl attach node relat acl inherit along item-hierarchi princip taken author configur loginmodul may declar principalprovid class via properti key name principal_provider.class workspac specif acl provid may ad via configur element worskspace.xml call workspacesecur factori class configur
better mimetyp handl save excel file webdav mimetyp chang mimetyp win2000 exel file application/vnd.ms-excel chang application/msexcel also problem make new offic 07 format docx xlsx pptx also chang application/octet-stream default mimetyp lot file type store jackrabbit properti file msinfopath- outlookmsg- msaccess-fil think better let mimetyp properti untouch mimetyp present must put possibl mimetyp properti file br claus
test case filesystem implement current test case memoryfilesystem test could easili general cover also filesystem implement
memoryfilesystem differ filesystem jcr-1175 uncov inconsist deletefold list method implement memoryfilesystem class act differ localfilesystem databasefilesystem class memoryfilesystem relat incorrect test case fix
move jackrabbit/trunk/contrib jackrabbit/sandbox discuss mail list see http //www.nabble.com/moving-contrib-outside-trunk-and-rename-to-sandbox-tf4635301.html follow svn move https //svn.apache.org/repos/asf/jackrabbit/trunk/contrib https //svn.apache.org/repos/asf/jackrabbit/sandbox day unless anyon object
rethrow except caus bundledbpersistencemanag except forward sql caus better diagnosi index jackrabbit-core/src/main/java/org/apache/jackrabbit/core/persistence/bundle/bundledbpersistencemanager.java jackrabbit-core/src/main/java/org/apache/jackrabbit/core/persistence/bundle/bundledbpersistencemanager.java revis 585555 +++ jackrabbit-core/src/main/java/org/apache/jackrabbit/core/persistence/bundle/bundledbpersistencemanager.java work copi -604,7 +604,7 return nameindex catch except e throw new illegalstateexcept unabl creat nsindex e throw new illegalstateexcept unabl creat nsindex e
event filter path work specifi filter node event path event filter n't compar use associ parent path see jsr-170 8.3.3 set event filter specifi restrict base characterist associ parent node event associ parent node event parent node item former path return event.getpath follow restrict avail • abspath isdeep event whose associ parent node abspath within subtre isdeep true receiv permiss regist listen path node current exist properti event filter correct fix special handl node event eventfilter.block simpli need remov
use common base class jackrabbit-cor jcr2spi part jcr-742 ve implement number generic jcr base class adapt org.apache.jackrabbit.common class base exist code jackrabbit-cor encourag code reus across jackrabbit-cor jcr2spi 'd like make compon use generic base class
put everyth jackrabbit-spi-common org.apache.jackrabbit.spi.common avoid confus name conflict put class packag jackrabbit-spi-common org.apache.jackrabbit.spi.common
jcr2spi potenti race condit event listen registr 's potenti race condit first event listen regist observationmanager.addeventlisten observ manag start listen event new spi event filter creat note 's relat problem *additional* event listen get regist repositoryservice.getev call alreadi progress
introduc spellcheck function base content workspac provid way spell check fulltext statement base content present workspac
build trunk fail javacc plugin version 2.2 /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 23,38 find symbol symbol class jcrsqlparservisitor class defaultparservisitor implement jcrsqlparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 25,24 find symbol symbol class simplenod locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 29,24 find symbol symbol class astqueri locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 33,24 find symbol symbol class astselectlist locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 37,24 find symbol symbol class astfromclaus locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 41,24 find symbol symbol class astwhereclaus locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astpredicate.java 21,34 find symbol symbol class simplenod public class astpred extend simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 49,24 find symbol symbol class astorexpress locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 53,24 find symbol symbol class astandexpress locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 57,24 find symbol symbol class astnotexpress locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 61,24 find symbol symbol class astbracketexpress locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astliteral.java 19,32 find symbol symbol class simplenod public class astliter extend simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astidentifier.java 21,35 find symbol symbol class simplenod public class astidentifi extend simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 73,24 find symbol symbol class astorderbyclaus locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astcontainsexpression.java 21,43 find symbol symbol class simplenod public class astcontainsexpress extend simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 81,24 find symbol symbol class astorderspec locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 85,24 find symbol symbol class astascendingorderspec locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 89,24 find symbol symbol class astdescendingorderspec locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 93,24 find symbol symbol class astlowerfunct locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 97,24 find symbol symbol class astupperfunct locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/defaultparservisitor.java 101,24 find symbol symbol class astexcerptfunct locat class org.apache.jackrabbit.core.query.sql.defaultparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astpredicate.java 37,22 find symbol symbol class jcrsqlparser locat class org.apache.jackrabbit.core.query.sql.astpred /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astpredicate.java 82,26 find symbol symbol class jcrsqlparservisitor locat class org.apache.jackrabbit.core.query.sql.astpred /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astliteral.java 30,22 find symbol symbol class jcrsqlparser locat class org.apache.jackrabbit.core.query.sql.astliter /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astliteral.java 54,28 find symbol symbol class jcrsqlparservisitor locat class org.apache.jackrabbit.core.query.sql.astliter /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astidentifier.java 29,23 find symbol symbol class jcrsqlparser locat class org.apache.jackrabbit.core.query.sql.astidentifi /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astidentifier.java 42,26 find symbol symbol class jcrsqlparservisitor locat class org.apache.jackrabbit.core.query.sql.astidentifi /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astcontainsexpression.java 31,33 find symbol symbol class jcrsqlparser locat class org.apache.jackrabbit.core.query.sql.astcontainsexpress /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astcontainsexpression.java 54,28 find symbol symbol class jcrsqlparservisitor locat class org.apache.jackrabbit.core.query.sql.astcontainsexpress /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/lucene/lucenequerybuilder.java 44,56 find symbol symbol class querypars locat packag org.apache.jackrabbit.core.query.lucene.fulltext /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/lucene/lucenequerybuilder.java 45,56 find symbol symbol class parseexcept locat packag org.apache.jackrabbit.core.query.lucene.fulltext /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 55,42 find symbol symbol class xpathvisitor public class xpathquerybuild implement xpathvisitor xpathtreeconst /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 55,56 find symbol symbol class xpathtreeconst public class xpathquerybuild implement xpathvisitor xpathtreeconst /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 23,35 find symbol symbol class node public class simplenod implement node /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 24,14 find symbol symbol class node locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 25,14 find symbol symbol class node locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 27,14 find symbol symbol class xpath locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 33,22 find symbol symbol class xpath locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 39,33 find symbol symbol class xpath locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 39,18 find symbol symbol class node locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 49,29 find symbol symbol class node locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 53,11 find symbol symbol class node locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 57,28 find symbol symbol class node locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 68,11 find symbol symbol class node locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 79,28 find symbol symbol class xpathvisitor locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 86,33 find symbol symbol class xpathvisitor locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/simplenode.java 132,29 find symbol symbol class token locat class org.apache.jackrabbit.core.query.xpath.simplenod /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/lucene/jqom2lucenequerybuilder.java 53,56 find symbol symbol class querypars locat packag org.apache.jackrabbit.core.query.lucene.fulltext /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/lucene/fulltext/fastcharstream.java 30,45 find symbol symbol class charstream public final class fastcharstream implement charstream /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 60,43 find symbol symbol class jcrsqlparservisitor public class jcrsqlquerybuild implement jcrsqlparservisitor /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 81,18 find symbol symbol class astqueri locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 121,31 find symbol symbol class astqueri locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 201,24 find symbol symbol class simplenod locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 206,24 find symbol symbol class astqueri locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 279,24 find symbol symbol class astselectlist locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 297,24 find symbol symbol class astfromclaus locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 311,24 find symbol symbol class astwhereclaus locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 447,24 find symbol symbol class astorexpress locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 459,24 find symbol symbol class astandexpress locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 469,24 find symbol symbol class astnotexpress locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 479,24 find symbol symbol class astbracketexpress locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 496,24 find symbol symbol class astorderbyclaus locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 505,24 find symbol symbol class astorderspec locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 526,24 find symbol symbol class astascendingorderspec locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 531,24 find symbol symbol class astdescendingorderspec locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 556,24 find symbol symbol class astlowerfunct locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 566,24 find symbol symbol class astupperfunct locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/jcrsqlquerybuilder.java 576,24 find symbol symbol class astexcerptfunct locat class org.apache.jackrabbit.core.query.sql.jcrsqlquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astpredicate.java 87,15 find symbol symbol variabl super locat class org.apache.jackrabbit.core.query.sql.astpred /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astliteral.java 59,15 find symbol symbol variabl super locat class org.apache.jackrabbit.core.query.sql.astliter /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/sql/astidentifier.java 47,15 find symbol symbol variabl super locat class org.apache.jackrabbit.core.query.sql.astidentifi /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/lucene/lucenequerybuilder.java 376,12 find symbol symbol class querypars locat class org.apache.jackrabbit.core.query.lucene.lucenequerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/lucene/lucenequerybuilder.java 376,37 find symbol symbol class querypars locat class org.apache.jackrabbit.core.query.lucene.lucenequerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/lucene/lucenequerybuilder.java 378,31 find symbol symbol variabl querypars locat class org.apache.jackrabbit.core.query.lucene.lucenequerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/lucene/lucenequerybuilder.java 440,17 find symbol symbol class parseexcept locat class org.apache.jackrabbit.core.query.lucene.lucenequerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 267,12 find symbol symbol class xpath locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 269,26 find symbol symbol class xpath locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 271,33 find symbol symbol class xpath locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 283,17 find symbol symbol class parseexcept locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 356,17 find symbol symbol variabl jjtxpath2 locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 359,17 find symbol symbol variabl jjtroot locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 360,17 find symbol symbol variabl jjtrootdescend locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 368,17 find symbol symbol variabl jjtstepexpr locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 415,17 find symbol symbol variabl jjtnametest locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 429,17 find symbol symbol variabl jjtelementnameorwildcard locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 432,41 find symbol symbol variabl jjtanynam locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 437,17 find symbol symbol variabl jjttexttest locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 443,17 find symbol symbol variabl jjttypenam locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 456,17 find symbol symbol variabl jjtorexpr locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 463,17 find symbol symbol variabl jjtandexpr locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 470,17 find symbol symbol variabl jjtcomparisonexpr locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 473,17 find symbol symbol variabl jjtstringliter locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 474,17 find symbol symbol variabl jjtdecimalliter locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 475,17 find symbol symbol variabl jjtdoubleliter locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 476,17 find symbol symbol variabl jjtintegerliter locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 480,40 find symbol symbol variabl jjtintegerliter locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 490,17 find symbol symbol variabl jjtunaryminus locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 497,17 find symbol symbol variabl jjtfunctioncal locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 500,17 find symbol symbol variabl jjtorderbyclaus locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild /users/adc/dev/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/query/xpath/xpathquerybuilder.java 505,17 find symbol symbol variabl jjtordermodifi locat class org.apache.jackrabbit.core.query.xpath.xpathquerybuild
webdav allow extens mimeresolv configur current mime type detect done use content type header miss use static mimeresolv instanc ioutil class mimeresolv read properti file obvious list possibl extens mimetyp could improv extend resourc configur extend importcontext exportcontext interfac replac current usag iouti mimeresolv correspond call context class get mimeresolv retriev resourc configur
qvaluefactori improv 1 allow creat method throw repositoryexcept 2 document creat valu type throw valueformatexcept 3 remov special case creat file
war miss jcr jar drop latest war latest svn present error point browser http //localhost:8080/jackrabbit-webapp-1.4-snapshot/ simpl solut make sure jcr-1.0.jar ad generat war org.apache.jasper.jasperexcept unabl compil class jsp error occur line 1 generat java file type javax.jcr.repositori resolv indirect referenc requir .class file error occur line 9 generat java file import javax.jcr.repositori resolv error occur line 27 jsp file /index.jsp repositori resolv type 24 /head 25 bodi style= font-famili monospac 26 27 repositori rep 28 tri 29 rep repositoryaccessservlet.getrepositori pagecontext.getservletcontext 30 catch throwabl e error occur line 84 jsp file /index.jsp repository.rep_vendor_url_desc resolv type 81 /li 82 /ol 83 p/ 84 hr size= 1 em power href= rep.getdescriptor repository.rep_vendor_url_desc rep.getdescriptor repository.rep_name_desc /a version rep.getdescriptor repository.rep_version_desc /em 85 /bodi 86 /html error occur line 84 jsp file /index.jsp repository.rep_name_desc resolv type 81 /li 82 /ol 83 p/ 84 hr size= 1 em power href= rep.getdescriptor repository.rep_vendor_url_desc rep.getdescriptor repository.rep_name_desc /a version rep.getdescriptor repository.rep_version_desc /em 85 /bodi 86 /html error occur line 84 jsp file /index.jsp repository.rep_version_desc resolv type 81 /li 82 /ol 83 p/ 84 hr size= 1 em power href= rep.getdescriptor repository.rep_vendor_url_desc rep.getdescriptor repository.rep_name_desc /a version rep.getdescriptor repository.rep_version_desc /em 85 /bodi 86 /html stacktrac org.apache.jasper.compiler.defaulterrorhandler.javacerror defaulterrorhandler.java:92 org.apache.jasper.compiler.errordispatcher.javacerror errordispatcher.java:330 org.apache.jasper.compiler.jdtcompiler.generateclass jdtcompiler.java:423 org.apache.jasper.compiler.compiler.compil compiler.java:308 org.apache.jasper.compiler.compiler.compil compiler.java:286 org.apache.jasper.compiler.compiler.compil compiler.java:273 org.apache.jasper.jspcompilationcontext.compil jspcompilationcontext.java:566 org.apache.jasper.servlet.jspservletwrapper.servic jspservletwrapper.java:317 org.apache.jasper.servlet.jspservlet.servicejspfil jspservlet.java:320 org.apache.jasper.servlet.jspservlet.servic jspservlet.java:266 javax.servlet.http.httpservlet.servic httpservlet.java:803 note full stack trace root caus avail apach tomcat/6.0.14 log
node.restor may throw invaliditemstateexcept seem itemmanag cach maintain correct 'm get invaliditemstateexcept propertyid modifi extern tryin restore/checkout version node singl thread itemst evict itemstatemanag cach modifi seem status itemst chang modifi itemst remain cach
issu load list class path hi retriev list object direct path save know simul issu henc use digestersimplequerytest attach path newli ad test case testobjectlistretrievalatbasepath case patch mark attach modifi file instead creat page /test creat /sample/test search /sample/test return noth search /sampl would return object anoth import point caus issu retriev page class test case retriev paragraph class embed insid page class still work fine regard kaizer
remov depend log4j current two class test case contain unus refer log4j attach patch remov unus logger make packag independ lo4j
allow spi implement comput default valu autocr properti current creat node transient space jcr2spi use hard-wir logic tri popul system generat properti jcr creat jcr uuid problemat n't scale fail autocr properti known jcr2spi syntax default may depend back end legal syntax uu id propos extend qvaluefactori someth like qvalu computedefaultvalu qpropertydefinit use jcr2spi get rid current hard-wir logic
reorgan test suit 'd like better organ test setup jackrabbit-cor current test repositori locat applications/test manag custom ant task explicit do_init/do_test surefir configur would better test repositori locat target/repositori templat content come src/test/repositori manag use maven 2 integr test lifecycl phase
redesign spi observ current spi observ design may happen event lost filter event listen chang see http //www.nabble.com/spi-observ 3a-eventfilter-lifecycle-tf4732281.html http //people.apache.org/~mreutegg/spi-event/problem.png propos introduc subscript interfac see attach patch http //people.apache.org/~mreutegg/spi-event/proposal.png
uuid generat securerandom use default current uuid generat use regular java.util.random implement generat random uuid seed valu random initi use system.currenttimemilli window resolut 15 millisecond mean two comput start creat uuid jackrabbit within 15 millisecond interv generat uuid cluster environ node could start automat time exampl backup also random class use 48-bit seed much less number random bit uuid 122 secur see also http //en.wikipedia.org/wiki/uuid random uuid probabl duplic probabl duplic also depend qualiti random number generat cryptograph secur pseudorandom number generat must use generat valu otherwis probabl duplic may signific higher therefor suggest chang versionfourgener use securerandom implement default
nodeimpl.checkout call save two time similar jcr-975 version relat properti version node check save individu need save individu checkd node must pend chang save call safe node
webdav pack abstractwebdavservlet jackrabbit-webdav project suggest post alan cabrera dev list quit handi servlet bad 's jackrabbit-serv would better place jackrabbit-webdav 'm write server bit webdav would prefer jcr/jackrabbit stuff realiz fussi prefer
uuiddocid cach work proper weakrefer combin new instanc combin indexread queri use childaxisqueri descendantselfaxisqueri make use getpar function know wether parent correct result allow getpar call recurs everi hit becom expens henc docid.uuiddocid parent cach current docid.uuiddocid 's cach weakref combinedindexread combinedindexread recreat time impli gc allow remov expens cach much better solut weakrefer combinedindexread refer indexread segment mean getpar int n searchindex return return id.getdocumentnumb need replac return id.getdocumentnumb subread someth similar cachingmultiread obvious node/properti added/removed/chang part cach docid.uuiddocid invalid main small index updat frequent obvious less expens recomput
docid.uuiddocid string attr uuid jcr-1213 solv lot docid.uuiddocid cach clean everi gc number cach uuiddocid grow larg depend size repositori therefor instead store privat string uuid make memori effici store 2 long 's lsb msb uuid store 1.000.000 parent uuiddocid might differ 100mb memori even test remov entir uuid string use msb lsb everyth work proper refer index reader segment see jcr-1213 uuid never need uuiddocid getdocumentnumb indexread reader throw ioexcept could set uuid null return work perfect well index reader recreat cachingindexread recreat henc docid parent recreat imo think might abl remov uuid entir docnumb found docid.uuiddocid obvious jcr-1213 wdot
unreferenc session get garbag collect applic open mani session n't close never garbag collect time virtual machin run memori code run memori thousand login repositori rep new transientrepositori int 0 i++ rep.login new simplecredenti new char 0 use final close sessionimpl n't work seem refer hard referenc part cach sessionimpl object mayb possibl remov refer chang weak refer
aggreg includ ignor primarytyp set includ element aggreg definit primarytyp attribut includ never match
repositoryutil move outsid main sourc tree appear repositoryutil class move src/main src/test class use ocm-spr project
webapp eas first access new user look webdav server suggest post mike oliv user list know jackrabbit n't jakarta slide expect one thing right project creat runnabl war file n't requir learn curv get start instal war file creat network place login root root user start creat content folder document jackrabbit think peopl would tri use spend time learn make
indexmerg block client thread obsolet index segment delet index segment merg obsolet index replac new one delet afterward current delet obsolet segment insid multiindex synchron block may block thread updat index concurr
index node parallel cpus multipl core standard jackrabbit make use make sens analyz content node index quit cost broken easili task execut parallel e.g index multipl node parallel
releas refer jcr item teardown 64-bit environ os/jvm tri mvn clean instal got outofmemori except 32-bit environ mac osx 10.5 java 1.5 test fine indexmerg signific faster run org.apache.jackrabbit.test.testal 21.11.2007 10:29:51 *info indexmerg indexmerg merg 549 document 289 ms _a indexmerger.java line 304 21.11.2007 10:29:55 *error* main importhandl fatal error encount line 1 column 10 pars xml stream org.xml.sax.saxparseexcept attribut name associ element type must follow charact importhandler.java line 116 21.11.2007 10:29:55 *error* main importhandl fatal error encount line 1 column 10 pars xml stream org.xml.sax.saxparseexcept attribut name associ element type must follow charact importhandler.java line 104 21.11.2007 10:29:59 *error* main importhandl fatal error encount line -1 column -1 pars xml stream org.xml.sax.saxparseexcept prematur end file importhandler.java line 104 21.11.2007 10:29:59 *error* main importhandl fatal error encount line -1 column -1 pars xml stream org.xml.sax.saxparseexcept prematur end file importhandler.java line 116 21.11.2007 10:30:45 *info indexmerg indexmerg merg 555 document 2015 ms _l indexmerger.java line 304 21.11.2007 10:33:13 *info indexmerg indexmerg merg 412 document 25587 ms _w indexmerger.java line 304 except thread timer-1 java.lang.outofmemoryerror java heap space org.apache.lucene.store.bufferedindexoutput. init bufferedindexoutput.java:26 org.apache.lucene.store.fsdirectori fsindexoutput. init fsdirectory.java:592 org.apache.lucene.store.fsdirectory.createoutput fsdirectory.java:435 org.apache.lucene.util.bitvector.writ bitvector.java:122 org.apache.lucene.index.segmentreader.docommit segmentreader.java:236 org.apache.lucene.index.indexreader.commit indexreader.java:794 org.apache.lucene.index.filterindexreader.docommit filterindexreader.java:190 org.apache.lucene.index.indexreader.commit indexreader.java:825 org.apache.lucene.index.indexreader.clos indexreader.java:841 org.apache.jackrabbit.core.query.lucene.abstractindex.clos abstractindex.java:327 org.apache.jackrabbit.core.query.lucene.multiindex deleteindex.execut multiindex.java:1715 org.apache.jackrabbit.core.query.lucene.multiindex.executeandlog multiindex.java:936 org.apache.jackrabbit.core.query.lucene.multiindex.flush multiindex.java:880 org.apache.jackrabbit.core.query.lucene.multiindex.checkflush multiindex.java:1110 org.apache.jackrabbit.core.query.lucene.multiindex.access 100 multiindex.java:75 org.apache.jackrabbit.core.query.lucene.multiindex 1.run multiindex.java:324 java.util.timerthread.mainloop timer.java:512 java.util.timerthread.run timer.java:462 21.11.2007 10:34:37 *error* main databasepersistencemanag fail write node state cfbffd6d-114d-4738-9383-48da2b5dbc1d databasepersistencemanager.java line 441 java.lang.outofmemoryerror java heap space java.util.properti linereader. init properties.java:346 java.util.properties.load properties.java:284
readonlyindexread re-creat everi access abstractindex.getreadonlyindexread creat new instanc everi call return index reader instead cach kept open long chang under index
serverqueri use remoteadapterfactori creat serverqueryresult serverqueri sould use factori creat serverqueryresult sieh method serverquery.execut code public remotequeryresult execut throw repositoryexcept remoteexcept return new serverqueryresult query.execut getfactori code code public remotequeryresult execut throw repositoryexcept remoteexcept return getfactori .getremotequeryresult this.query.execut code
restor empti multivalu properti alway chang properti type string restor empti multivalu properti opv=copi restor properti alway string type matter properti type frozen state solut set properti type frozen state instead retriv first valu mulitvalu valu type set undefin final chang string restor method attach patch test case
remov build.xml jackrabbit-cor jcr-1203 build.xml within jackrabbit-cor contain singl ant task could well move pom.xml file run inlin maven antrun plugin
jcr-server use output upon get root- workspace-resourc contrast resourc repres jcr node properti root resourc resourc repres workspac present repositori n't provid output access browser add simpl list 2 resourc type
jcr2spi unneed call getpropertyinfo upon creat new nodest creat new nodest may result addit unneed call getpropertyinfo jcr uuid jcr mixintyp properti present avoid sinc correspond properti valu alreadi present
merg uuid nodeid current nodeid class most wrapper around uuid caus two object instanti node identifi system use memori process overhead quit small given ton nodeid instanc would good elimin overhead also lot code convert uuid nodeid vice versa could simplifi code use nodeid everywher also might want open possibl use non-uuid node identifi point futur would make lot sens remov nodeid.getuuid method reli direct nodeid 's equal hashcod tostr method mani place current use uuid
creat org.apache.jackrabbit.core.id 'd like creat separ packag identifi interfac class jackrabbit-cor current identifi org.apache.jackrabbit.cor make almost packag depend o.a.j.cor caus troubl various package-level code qualiti depend analysi tool packag would contain itemid nodeid propertyid class
cachingmultiread inconsist name class extend indexread also name way except cachingmultiread renam cachingmultiindexread
o.a.j.core.integration.preparetestrepositori fail 2nd everi subsequ invoc consol output test set org.apache.jackrabbit.core.integration.preparetestrepositori test run 1 failur 0 error 1 skip 0 time elaps 3.428 sec failur testpreparetestrepositori org.apache.jackrabbit.core.integration.preparetestrepositori time elaps 3.397 sec error javax.jcr.repositoryexcept invalid node type definit http //www.apache.org/jackrabbit/test version alreadi exist http //www.apache.org/jackrabbit/test version alreadi exist org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:308 org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:488 org.apache.jackrabbit.core.integration.preparetestrepository.testpreparetestrepositori preparetestrepository.java:49
new jackrabbit site skin time ago michael eppelheim day creat new skin jackrabbit web site ve streamlin bit integr maven site build mechan templat easi adapt also confluenc get around migrat
chang default valu respectdocumentord current default valu search index configur paramet respectdocumentord true almost applic interest document order default add signific overhead queri execut document order inform present index calcul complet result set propos chang default valu fals document chang 1.4 releas note applic reli document order one still explicit set paramet configur true
chang default valu maxmergedoc actual left time jcr-197 implement back index merg perform client thread would hold execut long time larg number node merg default valu maxmergedoc limit 100'000 node result coupl second merg oper default valu make sens anymor index merg perform background thread may take long time without effect regular workspac oper workspac grow larg may caus perform degrad number index segment increas linear 100'000 node propos set new default integer.max_valu
index segment commit close check abstractindex.commit prevent delet document commit index lucen version 2.0 index lock pend chang begin lucen 2.1 true anymor see lucene-701 regress jcr-788 henc occur releas trunk
nodeindex creat unnecessari string represent name valu nodeindexer.addnamevalu call name.tostr never use
need noderefer jcr2spi happen come across org.apache.jackrabbit.jcr2spi.state.noderefer interfac realiz current spi definit 's realli need abstract propertyid array return nodeinfo.getrefer quit good enough jcr2spi without noderefer wrap around
jcr2spi use namespac decl present import xml resolv name/path valu
databasepersistencemanager.stor except null caus sqlexcept pm keep loop forev line ise null ise.getcaus instanceof sqlexcept trial 0 one first two check fail shortcircuit n't decrement trial
add warnlog extract failur fine feedback except occur textextractor moment empti stringread return issu updat content textextractor except occur index updat document searchabl old content
helper method escap illeg xpath search term tri perform search like //element nt base jcr contain test get except javax.jcr.repositoryexcept except build queri org.apache.jackrabbit.core.query.lucene.fulltext.parseexcept encount eof line 1 column 6
ad larg 100mb binari dbdatastor fail insuffici memori except attach small test case fail save think relat mention http //mail-archives.apache.org/mod_mbox/jackrabbit-dev/200711.mbox/ 3c00fc01c832b9 f1f08730 7309240a goku 3e full stacktrac follow javax.jcr.repositoryexcept unabl updat item fail write properti state cafebabe-cafe-babe-cafe-babecafebabe/ bin fail write properti state cafebabe-cafe-babe-cafe-babecafebabe/ bin org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1252 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:858 org.apache.jackrabbit.core.data.bigbinarytest.testbigbinari bigbinarytest.java:16 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 junit.framework.testcase.runtest testcase.java:154 junit.framework.testcase.runbar testcase.java:127 junit.framework.testresult 1.protect testresult.java:106 junit.framework.testresult.runprotect testresult.java:124 junit.framework.testresult.run testresult.java:109 junit.framework.testcase.run testcase.java:118 org.apache.jackrabbit.test.abstractjcrtest.run abstractjcrtest.java:404 junit.framework.testsuite.runtest testsuite.java:208 junit.framework.testsuite.run testsuite.java:203 org.eclipse.jdt.internal.junit.runner.junit3.junit3testreference.run junit3testreference.java:128 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:460 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:673 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:386 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196 caus org.apache.jackrabbit.core.state.itemstateexcept fail write properti state cafebabe-cafe-babe-cafe-babecafebabe/ bin org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.stor databasepersistencemanager.java:487 org.apache.jackrabbit.core.persistence.abstractpersistencemanager.stor abstractpersistencemanager.java:75 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.stor databasepersistencemanager.java:282 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:687 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:856 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:324 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:313 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:300 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:306 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1244 21 caus org.apache.jackrabbit.core.data.datastoreexcept read identifi a2ada2d96d0b05214288efa03be9005a5bb98c9b memoria insuficient utilic cursor del servidor para result set grand java heap space tamaño de result set:104.857.723 tamaño memoria total jvm:66.650.112. memoria insuficient utilic cursor del servidor para result set grand java heap space tamaño de result set:104.857.723 tamaño memoria total jvm:66.650.112. org.apache.jackrabbit.core.data.db.dbdatastore.convert dbdatastore.java:438 org.apache.jackrabbit.core.data.db.dbdatastore.getinputstream dbdatastore.java:481 org.apache.jackrabbit.core.data.db.dbdatarecord.getstream dbdatarecord.java:61 org.apache.jackrabbit.core.value.blobindatastore.getstream blobindatastore.java:93 org.apache.jackrabbit.core.persistence.util.serializer.seri serializer.java:198 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.stor databasepersistencemanager.java:476 30 caus com.microsoft.sqlserver.jdbc.sqlserverexcept memoria insuficient utilic cursor del servidor para result set grand java heap space tamaño de result set:104.857.723 tamaño memoria total jvm:66.650.112. com.microsoft.sqlserver.jdbc.sqlserverexception.makefromdrivererror unknown sourc com.microsoft.sqlserver.jdbc.dbcomms.rec unknown sourc com.microsoft.sqlserver.jdbc.sqlserverpreparedstatement.doexecutepreparedstat unknown sourc com.microsoft.sqlserver.jdbc.sqlserverpreparedstat preparedstatementexecutionrequest.executestat unknown sourc com.microsoft.sqlserver.jdbc.cancelablerequest.execut unknown sourc com.microsoft.sqlserver.jdbc.sqlserverconnection.executerequest unknown sourc com.microsoft.sqlserver.jdbc.sqlserverpreparedstatement.execut unknown sourc org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmtintern connectionrecoverymanager.java:362 org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmtintern connectionrecoverymanager.java:292 org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmt connectionrecoverymanager.java:257 org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmt connectionrecoverymanager.java:237 org.apache.jackrabbit.core.data.db.dbdatastore.getinputstream dbdatastore.java:474 34 org.apache.jackrabbit.core.state.itemstateexcept fail write properti state cafebabe-cafe-babe-cafe-babecafebabe/ bin org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.stor databasepersistencemanager.java:487 org.apache.jackrabbit.core.persistence.abstractpersistencemanager.stor abstractpersistencemanager.java:75 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.stor databasepersistencemanager.java:282 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:687 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:856 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:324 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:313 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:300 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:306 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1244 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:858 org.apache.jackrabbit.core.data.bigbinarytest.testbigbinari bigbinarytest.java:16 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 junit.framework.testcase.runtest testcase.java:154 junit.framework.testcase.runbar testcase.java:127 junit.framework.testresult 1.protect testresult.java:106 junit.framework.testresult.runprotect testresult.java:124 junit.framework.testresult.run testresult.java:109 junit.framework.testcase.run testcase.java:118 org.apache.jackrabbit.test.abstractjcrtest.run abstractjcrtest.java:404 junit.framework.testsuite.runtest testsuite.java:208 junit.framework.testsuite.run testsuite.java:203 org.eclipse.jdt.internal.junit.runner.junit3.junit3testreference.run junit3testreference.java:128 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:460 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:673 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:386 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196 caus org.apache.jackrabbit.core.data.datastoreexcept read identifi a2ada2d96d0b05214288efa03be9005a5bb98c9b memoria insuficient utilic cursor del servidor para result set grand java heap space tamaño de result set:104.857.723 tamaño memoria total jvm:66.650.112. memoria insuficient utilic cursor del servidor para result set grand java heap space tamaño de result set:104.857.723 tamaño memoria total jvm:66.650.112. org.apache.jackrabbit.core.data.db.dbdatastore.convert dbdatastore.java:438 org.apache.jackrabbit.core.data.db.dbdatastore.getinputstream dbdatastore.java:481 org.apache.jackrabbit.core.data.db.dbdatarecord.getstream dbdatarecord.java:61 org.apache.jackrabbit.core.value.blobindatastore.getstream blobindatastore.java:93 org.apache.jackrabbit.core.persistence.util.serializer.seri serializer.java:198 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.stor databasepersistencemanager.java:476 30 caus com.microsoft.sqlserver.jdbc.sqlserverexcept memoria insuficient utilic cursor del servidor para result set grand java heap space tamaño de result set:104.857.723 tamaño memoria total jvm:66.650.112. com.microsoft.sqlserver.jdbc.sqlserverexception.makefromdrivererror unknown sourc com.microsoft.sqlserver.jdbc.dbcomms.rec unknown sourc com.microsoft.sqlserver.jdbc.sqlserverpreparedstatement.doexecutepreparedstat unknown sourc com.microsoft.sqlserver.jdbc.sqlserverpreparedstat preparedstatementexecutionrequest.executestat unknown sourc com.microsoft.sqlserver.jdbc.cancelablerequest.execut unknown sourc com.microsoft.sqlserver.jdbc.sqlserverconnection.executerequest unknown sourc com.microsoft.sqlserver.jdbc.sqlserverpreparedstatement.execut unknown sourc org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmtintern connectionrecoverymanager.java:362 org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmtintern connectionrecoverymanager.java:292 org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmt connectionrecoverymanager.java:257 org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmt connectionrecoverymanager.java:237 org.apache.jackrabbit.core.data.db.dbdatastore.getinputstream dbdatastore.java:474 34
descendantselfaxisqueri creat mani object instanc descendantselfaxisquery.descendantselfaxisscorer.isvalid arraylist integ instanc creat everi call sinc method get call realli often queri object creation/gc affect perform
bundlefspersistencemanag remov deprec set set bundlefspersistencemanag use intern remov blobfsinitialcach blobfsmaximumcach itemfsblocks itemfsinitialcach itemfsmaximumcach
databasejourn commit twice insid transact caus error mysql commit transact cluster setup multipl record may append databasejourn append record commit call connect auto-commit mode enabl apart semant correct commit connect alreadi auto-commit mode throw error use mysql backend
add path encod iso9075 util class iso9075 allow encod decod name also method allow pass path use xpath queri creat path constraint base e.g node.getpath
util code filter packag tree attach zip contain new util code filter packag tree repositori tree travers provid tree walker travers configur filter appli filter influenc travers like skip node properti includ filter test node name node type etc custom filter possibl well tree walker notifi tree walker listen interfac whenev travers item second util code abl packag whole tree descript export way export interfac could e.g export serial tree zip archiv etc
deprec abstractwebdavservlet empti extend new abstractwebdavservlet abstractwebdavservlet copi jcr-server webdav project class old locat mark deprec suggest addit mark deprec class extend new abstractwebdavservlet class webdav project contain field method way user old class alway get newest best version still use old class provid patch propos
move simplewebdavservlet jcr-server make abstract line iss jcr-417 suggest partial move simplewebdavservlet jcr-webapp project jcr-server project partial mean new move servlet abstract getrepositori method abstract jcr-webapp project still contain simplewebdavservlet backward compat mainta name extend new servlet implement getrepositori method use repositoryaccess servlet allow reus jcr-server project includ abstract simplewebdavservlet environ intent includ project along webdav project sling provid patch propos issu separ jcr-1262 suggest angela
ifhead incorrect test pars keyword parseiflist test keyword test last charact ='t || 't alway yield true time correct test would ='t 't
lower-cas search-funct work upper-cas searchstr perform queri like testroot/* jcr like fn lower-cas prop1 fo get valid result even though valu properti foo valu search work lower upper-cas search string
use creation tick instead weak refer docnumbercach avoid need keep two map cachingmultiindexread guess fewer weak refer better
unreach catch block nameexcept valueconstraint.java unreach catch block nameexcept specif except thrown handl previous catch block valueconstraint.java line 855
move jcrwebdavserverservlet jcr-server make abstract line iss jcr-417 suggest partial move jcrwebdavserverservlet jcr-webapp project jcr-server project partial mean new move servlet abstract getrepositori method abstract jcr-webapp project still contain jcrwebdavserverservlet backward compat mainta name extend new servlet implement getrepositori method use repositoryaccess servlet allow reus jcr-server project includ abstract jcrwebdavserverservlet environ
stop use baseexcept o.a.j.baseexcept class deprec sinc jcr-1169 caught anywher 's need keep use
compactnodetypedefread recognis mixin order sequenc code dooption miss set setorderablechildnod flag order token mixin order
nullpointerexcept iter properti run concurrentreadwritetest num_nodes=5 num_threads=3 run_num_seconds=120 result nullpointerexcept except thread thread-11 java.lang.nullpointerexcept org.apache.commons.collections.map.abstractreferencemap referenceentry.getvalu abstractreferencemap.java:596 org.apache.commons.collections.map.abstractreferencemap.containskey abstractreferencemap.java:204 org.apache.jackrabbit.core.state.itemstatemap.contain itemstatemap.java:66 org.apache.jackrabbit.core.state.itemstatereferencecache.iscach itemstatereferencecache.java:91 org.apache.jackrabbit.core.state.localitemstatemanager.hasitemst localitemstatemanager.java:173 org.apache.jackrabbit.core.state.xaitemstatemanager.hasitemst xaitemstatemanager.java:252 org.apache.jackrabbit.core.state.sessionitemstatemanager.getitemst sessionitemstatemanager.java:174 org.apache.jackrabbit.core.itemmanager.createiteminst itemmanager.java:495 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:326 org.apache.jackrabbit.core.lazyitemiterator.prefetchnext lazyitemiterator.java:90 org.apache.jackrabbit.core.lazyitemiterator.next lazyitemiterator.java:203 org.apache.jackrabbit.core.lazyitemiterator.nextproperti lazyitemiterator.java:118 org.apache.jackrabbit.core.concurrentreadwritetest 1 1.execut concurrentreadwritetest.java:64 org.apache.jackrabbit.core.abstractconcurrencytest executor.run abstractconcurrencytest.java:110 java.lang.thread.run thread.java:619 cach synchron access time current thread anoth thread notifi itemst chang
property.getvalu throw repositoryexcept intern error run concurrentreadwritetest num_nodes=5 num_threads=3 run_num_seconds=120 result repositoryexcept call property.getvalu javax.jcr.repositoryexcept intern error retriev valu b3fc1ea8-3364-4236-bcc7-dea0baf90640/ test null null debug show nullpointerexcept java.lang.nullpointerexcept org.apache.jackrabbit.core.propertyimpl.getvalu propertyimpl.java:481 org.apache.jackrabbit.core.concurrentreadwritetest 1 1.execut concurrentreadwritetest.java:68 org.apache.jackrabbit.core.abstractconcurrencytest executor.run abstractconcurrencytest.java:110 java.lang.thread.run thread.java:619 's probabl state discard sanitycheck
unnecessari pars name valu internalvalue.tojcrvalu namepathresolv format name valu construct namevalu use format string implement namevalue.valueof string check format quit expens unnecessari case
nullpointerexcept abstractversionmanager.createversionhistori run concurrentcheckinmixedtransactiontest 200 thread result nullpointerexcept abstractversionmanag except thread thread-16 java.lang.nullpointerexcept org.apache.jackrabbit.core.version.abstractversionmanager.createversionhistori abstractversionmanager.java:309 org.apache.jackrabbit.core.version.xaversionmanager.createversionhistori xaversionmanager.java:145 org.apache.jackrabbit.core.itemimpl.initversionhistori itemimpl.java:785 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1221 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:897 org.apache.jackrabbit.core.concurrentcheckinmixedtransactiontest 1 1.execut concurrentcheckinmixedtransactiontest.java:66 org.apache.jackrabbit.core.abstractconcurrencytest executor.run abstractconcurrencytest.java:110 java.lang.thread.run thread.java:619 'm sure node creat current thread avail assum thread use xa transact commit chang current thread creat node chang commit thread overwrit node modifi current thread write lock somewhat bypass case
properti node name accord paragraph 3.3.4 jsr 283 specif public review draft properti node name
connectionrecoverymanag creat twice dbdatastor init method seem introduc pool old initizi connectionrecoverymanag remov index dbdatastore.java dbdatastore.java revis 605626 +++ dbdatastore.java work copi -479,8 +479,6 initdatabasetyp connectionpool new pool maxconnect connectionrecoverymanag conn getconnect conn new connectionrecoverymanag fals driver url user password conn.setautoreconnect true databasemetadata meta conn.getconnect .getmetadata log.info use jdbc driver meta.getdrivernam meta.getdriververs meta.getdriververs duplic initi remov ve never run code yet
add configur path synonymprovid enhanc synonymprovid includ 1.4 releas current interfac getsynonym method allow initi synonymprovid possibl initi provid configur file configur may includ synonym definit pointer locat synonym defin configur implement depend addit simpl default implement jackrabbit-cor wordnet-synonym sandbox limit use must built manual
path.equ work path implement pathimpl.equ take path implement account like typo
move ocm document jackrabbit-sit ocm document jackrabbit-ocm/xdoc move jackrabbit-sit also old refer graffito replac jackrabbit
publish jackrabbit-ocm dtd jackrabbit-ocm dtd jackrabbit-ocm/src/dtd made avail refer jackrabbit web site
add miss licens header rat tool http //code.google.com/p/arat/ point file within jackrabbit trunk current miss correct licens header fix
use bundl persist default configur default repositori configur file jackrabbit-cor -webapp still use old simpl databas persist updat use bundl persist 1.4 releas
objectcontentmanagerimpl.getobject queri throw nosuchelementexcept queri match object queri return object objectcontentmanagerimpl.getobject queri throw follow except java.util.nosuchelementexcept java.util.abstractlist itr.next abstractlist.java:427 org.apache.jackrabbit.ocm.manager.impl.objectcontentmanagerimpl.getobject objectcontentmanagerimpl.java:538 javadoc objectcontentmanag interfac suggest objectcontentmanagerexcept thrown case
filterimpl.getstringvalu use custom convert class specifi field annot pojo follow field field convert localeconverter.class privat local local attempt queri object base field get nullpointerexcept java.lang.nullpointerexcept org.apache.jackrabbit.ocm.query.impl.filterimpl.getstringvalu filterimpl.java:281 org.apache.jackrabbit.ocm.query.impl.filterimpl.addequalto filterimpl.java:129 filterimpl preferenti use atom type convert defin field annot convert valu fallback global convert convert local string use queri workaround logic string convers resid localeconvert class
jackrabbit-webapp facelift still 1.4 meant make jackrabbit-webapp look bit nicer 'm take skin jcr-1236 appli jackrabbit-webapp
error report page jackrabbit-webapp jackrabbit webapp error report page would help user collect relev environ log inform inclus bug report
tm-extractors.jar block usag newer poi version use tm-extractors-0.4.jar http //repo1.maven.org/maven2/org/textmining/tm-extractors/ includ various class poi well poi-2.5.1 referenc depend pom.xml 's seem possibl use newer version poi e.g poi-3.0.1-fin togeth tm-extractor jackrabbit solut could use function newer poi version 'm sure scratchpad yet use fix version tm-extractors.jar n't inlud poi class
miss class jndidatabasejourn re deal set cluster repositori run issu miss featur state fix upcom v1.4 scan sourc v1.4-rc1 still ca n't find class jndidatabasejourn org.apache.jackrabbit.core.journal.jndidatabasejourn silb class jndidatabasefilesystem org.apache.jackrabbit.core.fs.db.jndidatabasefilesystem jndidatabasepersistencemanag org.apache.jackrabbit.core.persistence.db.jndidatabasepersistencemanag miss one ll need configur part repositori handel abstract way e.g one common jndi databas resourc short simplic sourc code one think ad miss featur take hour thank support
deprec class point wrong replac due various packag renam class replac equival jackrabbit-spi-common point wrong replac deprec javadoc tag
reorderreferenceablesnstest failur check jackrabbit 1.4 branch new directori call mvn clean instal error build jackrabbit jcr spi task-seg clean instal testrevertreord org.apache.jackrabbit.jcr2spi.reorderreferenceablesnstest junit.framework.assertionfailederror reorder ad child node junit.framework.assert.fail assert.java:47 org.apache.jackrabbit.jcr2spi.reordertest.testord reordertest.java:90 org.apache.jackrabbit.jcr2spi.reordertest.testrevertreord reordertest.java:122
tablespac filegroup support ms sql server tablespac support ad oracl databas server issu https //issues.apache.org/jira/browse/jcr-968 would like tablespac filegroup support ms sql server well address creat patch use trunk jackrabbit close follow patch name issu
except may get lost workspacemanager.operationvisitorimpl.execut method call batch.submit final block tri final block throw except one tri block ignor
set svn eol-styl ddl file ddl file jackrabbit-core/src/main/resourc n't svn eol-styl properti set set nativ
wrong schemaobjectprefix paramet default repository.xml object schema prefix hard-cod default configur file think taken jackrabbit-core.jar persistencemanag class= org.apache.jackrabbit.core.persistence.bundle.derbypersistencemanag param name= url value= jdbc derbi wsp.home /db create=tru param name= schemaobjectprefix value= jackrabbit core_ /persistencemanag probabl caus jcr-945 though ve idea wsp.name replac name modul mark issu minor still work derbypersistencemanag separ databas instanc workspac becom problem data base persist manag dedic server use
default configur suitabl demo web applic default configur suitabl demo applic text extractor configur make popul search demo useless propos solut creat new repository.xml jackrabbit-webapp text extractor configur know actual tri reduc number repository.xml file one dedic jackrabbit-webapp seem reason tri achiev jackrabbit-cor modul
spi2dav improv perform larg binari properti send larg binari properti spi2dav slow requir lot heap space client server one problemat part base64 convers properti valu contrari use normal webdav interfac /repository/default/ instead /server upload file tradit webdav client pretti fast n't impact heap space suggest previous discuss avoid temporari copi data persist larg object earli possibl transfer larg object block jackrabbit spi client server back make usag global data store jcr-926 straight forward put single-valu properti link discuss http //www.mail-archive.com/dev jackrabbit.apache.org/msg09481.html
troubl undeploy jackrabbit-webapp tomcat test jackrabbit-webapp 1.4 releas came across issu ve occasion seen also never qualifi enough bug report jackrabbit webapp would deploy without problem undeploy webapp tomcat fail remov derbi jar web-inf/lib unpackwar enabl caus problem especi autodeploy enabl tomcat deploy skeleton webapp right undeploy way realli get rid webapp shutdown tomcat manual remov webapp file system suspect problem relat derbi jar somehow referenc even webapp undeploy caus window prevent jar file remov unless someon bright idea resolv ll consid known issu jackrabbit 1.4
arrayhit end proper skipto n't find document skipto target find document higher valu target fall loop call next possibl return previous found document patch make sure -1 return case otherwis confus result might occur index src/main/java/org/apache/jackrabbit/core/query/lucene/hits/arrayhits.java src/main/java/org/apache/jackrabbit/core/query/lucene/hits/arrayhits.java revis 608900 +++ src/main/java/org/apache/jackrabbit/core/query/lucene/hits/arrayhits.java work copi -87,9 +87,9 int nextdocvalu hit nextdocvalu target index break return next return next return -1
miss derbi depend derbi depend miss ocm subproject unit test execut
support system properti var xml config file variabl replac config file like repository.xml current allow special variabl introduc jackrabbit eg wsp.name rep.hom would use support java system properti kind standard java xml config file see spring exampl make easier inject variabl outsid config file eg set command line inject programmat test case typic paramet includ databas connect credenti one want avoid put repository.xml file often check svn especi true test case eg current work persist manag compon want includ repository.xml sourc tree applications/test without specif credenti appli load user-specif properti file test case repositori start config read
jndi data sourc bundledbpersistencemanag unsupportedoperationexcept use org.apache.tomcat.dbcp.dbcp.basicdatasourcefactori bundledbpersistencemanag open databas connect via jndi method datasource.getconnect user password support instead datasource.getconnect must use work connectionfactory.getconnect chang call method user name password empti
reduc number differ repository.xml present jackrabbit-cor take look repositori configur relat test-cas saw quit repository.xml file around think bit confus probabl hard maintain make chang config would suggest consolid possibl get rid ca n't would suggest put comment everi differ configur file indic use ve seen far still miss complet overview 1 http //svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-core/src/main/config/repository.xml current comment exampl repositori configur file usag 2 http //svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-core/src/main/resources/org/apache/jackrabbit/core/test-repository.xml current comment use repositori configur org.apache.jackrabbit.core.testrepository.java 3 http //svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-core/src/main/resources/org/apache/jackrabbit/core/repository.xml current comment exampl repositori configur file use org.apache.jackrabbit.core.config.repositoryconfigtest.java order creat anoth repository.xml target/test-repository.xml bit confus given fact test-repository.xml exist well would suggest renam repository_xml constant repositoryconfigtest 4 http //svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-core/src/test/repository/repository.xml current comment exampl repositori configur file usag assum one referenc test/resources/repositorystubimpl.properti 5 http //svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-core/src/test/resources/org/apache/jackrabbit/core/config/repository.xml current comment exampl repositori configur file usag
unnecessari null check effectivenodetype.getapplicablechildnodedef trivial thing notic inspect code getapplicablechildnodedef say tri name node definit first itemdef def getnameditemdef name def null getnameditemdef current defin return null public itemdef getnameditemdef name name list def list nameditemdefs.get name def null || defs.siz 0 return itemdef.empty_array return itemdef defs.toarray new itemdef defs.siz n't check see unnecessari null check
refactor dbms support jndi datasourc shop current use oracl project common applic server tomcat webspher etc use configur j2ee datasourc unfortun mani class fix quirk specif dbms forc configur jdbc connect look org.apache.jackrabbit.core.fs.db.oraclefilesystem instanc bad idea applic server applic server manag resourc like db connect etc want use dbfilesystem base oracl databas ca n't use datasourc jndi lookup effect make jackrabbit unus cluster enterpris environ would much better refactor current databas support separ method implement obtain connect function
webdav drop xerc depend jukka final assigne thank take
addit excerpt provid implement current defaulthtmlexcerpt implement simpl basic pick first three fragment regardless mani match contain altern implement weight fragment base number match term whether phrase match
add googl analyt jackrabbit web site 'd like add googl analyt web site better track site use much traffic generat current best stat http //people.apache.org/~vgritsenko/stats/projects/jackrabbit.html nice near good could
id field descriptor inherit case uuid field descriptor id field descriptor defin base class jcr-map inherit child class also defin patch attach herewith patch similar line uuid field descriptor
add mbean method programat creat new workspac would use mbean method creat new workspac use jmx consol
repositori home lock releas despit repositoryexcept thrown except thrown call repositoryimpl.cr .lock file creat repositori home directori remov despit longer activ connect user attempt creat repositori e.g recov except url repositori temporarili unavail repositoryexcept thrown indic repositori home lock anoth process .lock file repositori success creat repositori home lock lock releas repositori shutdown case repositori object never creat success method call
nullpointerexcept access simplewebdavservlet prefix path access simplewebdavservlet root path path set resource-path-prefix nullpointerexcept thrown java.lang.nullpointerexcept org.apache.jackrabbit.name.parsingpathresolver.getqpath parsingpathresolver.java:91 org.apache.jackrabbit.name.cachingpathresolver.getqpath cachingpathresolver.java:74 org.apache.jackrabbit.core.sessionimpl.getqpath sessionimpl.java:601 org.apache.jackrabbit.core.sessionimpl.getitem sessionimpl.java:804 org.apache.sling.jcr.api.internal.pooledsession.getitem pooledsession.java:157 org.apache.jackrabbit.webdav.simple.resourcefactoryimpl.getnod resourcefactoryimpl.java:140 org.apache.jackrabbit.webdav.simple.resourcefactoryimpl.createresourc resourcefactoryimpl.java:89 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.servic abstractwebdavservlet.java:187 javax.servlet.http.httpservlet.servic httpservlet.java:820 org.mortbay.jetty.servlet.servletholder.handl servletholder.java:487 org.mortbay.jetty.servlet.servlethandler.handl servlethandler.java:362 org.ops4j.pax.web.service.internal.httpserviceservlethandler.handl httpserviceservlethandler.java:51 org.mortbay.jetty.servlet.sessionhandler.handl sessionhandler.java:181 org.mortbay.jetty.handler.contexthandler.handl contexthandler.java:722 org.ops4j.pax.web.service.internal.httpservicecontext.handl httpservicecontext.java:87 org.ops4j.pax.web.service.internal.jettyserverhandlercollection.handl jettyserverhandlercollection.java:63 org.mortbay.jetty.handler.handlerwrapper.handl handlerwrapper.java:139 org.mortbay.jetty.server.handl server.java:324 org.mortbay.jetty.httpconnection.handlerequest httpconnection.java:505 org.mortbay.jetty.httpconnect requesthandler.headercomplet httpconnection.java:828 org.mortbay.jetty.httpparser.parsenext httpparser.java:514 org.mortbay.jetty.httpparser.parseavail httpparser.java:211 org.mortbay.jetty.httpconnection.handl httpconnection.java:380 org.mortbay.jetty.bio.socketconnector connection.run socketconnector.java:228 org.mortbay.thread.boundedthreadpool poolthread.run boundedthreadpool.java:450 problem seem resourcefactoryimpl.createresourc method rather getnod method prepar davresourceloc instanc whose resourcepath null could imagin resourcefactoryimpl.getnod method might want return root node case
cluster inform persist databas connect case sensit ms sql server 2005 call session :save observ cluster inform written schemaobjectprefix journal schemaobjectprefix global_revis tabl test oracl 10 databas server ms sql server 2005 server problem notic ms sql server 2005 initi problem mask sinc test written part unit test environ except generat jdbc show log separ test carri shown code pre import java.io.fileinputstream import javax.jcr.nod import javax.jcr.repositori import javax.jcr.sess import javax.jcr.simplecredenti import org.apache.jackrabbit.core.transientrepositori import org.apache.jackrabbit.core.config.repositoryconfig public class main public static void main string arg throw except system.setproperti org.apache.jackrabbit.core.cluster.node_id testid repositoryconfig config repositoryconfig.cr new fileinputstream repository.xml repositori repositori repositori new transientrepositori session session repository.login new simplecredenti usernam password .tochararray node root session.getrootnod root.addnod node1 root.addnod node2 root.addnod node3 session.sav /pre configur file use configur repositori attach debug obtain except previous visibl note jackrabbit continu run cluster code run separ thread even except problem revision_id field exist mssql.ddl schema file set tabl name capit howev least two sql statement databasejourn use lower case tabl name exampl pre updateglobalstmt con.preparestat updat schemaobjectprefix global_revis set revision_id revision_id 1 selectglobalstmt con.preparestat select revision_id schemaobjectprefix global_revis /pre addit error mssql.ddl file miss follow pre insert one revis counter record help avoid race condit insert schemaobjectprefix global_revis valu 0 /pre fix two issu fix problem ms sql server 2005
use queryimpl.setlimit queryimpl.setoffset nodeiterator.gets report wrong size use queryimpl.setlimit queryimpl.setoffset nodeiterator.gets report wrong size return size seem allway limit
problem map custom collect use custom list extend java.util.abstractlist manageablecollectionutil.getmanageablecollect rais jcrmappingexcept consid custom list java.util.list use object.getclass .equal list.class instead object instanceof list thing probabl happen use custom collect custom arraylist etc stack trace org.apache.jackrabbit.ocm.exception.jcrmappingexcept unsupport collect type mycustomlist class org.apache.jackrabbit.ocm.manager.collectionconverter.manageablecoll ctionutil.getmanageablecollect manageablecollectionutil.java:153 org.apache.jackrabbit.ocm.manager.objectconverter.impl.objectconvert rimpl.insertcollectionfield objectconverterimpl.java:780 org.apache.jackrabbit.ocm.manager.objectconverter.impl.objectconvert rimpl.insert objectconverterimpl.java:221 org.apache.jackrabbit.ocm.manager.objectconverter.impl.objectconvert rimpl.insert objectconverterimpl.java:146 org.apache.jackrabbit.ocm.manager.impl.objectcontentmanagerimpl.ins objectcontentmanagerimpl.java:407 come bug use mycustomlist myclass mycustomlist extend java.util.abstractlist myclass
log path miss node re-index fail one tri re-index corrupt workspac uuid miss node log possibl log also contain path miss node
spi pom improv spi compon upgrad sandbox n't pay much attent pom detail thus still number configur entri duplic stuff jackrabbit parent pom etc plan get rid duplic remov unneed depend spi-common compil scope depend junit general updat pom line releas compon
repository.xml dtd n't allow datastor element repository.xml dtd http //jackrabbit.apache.org/dtd/repository-1.4.dtd conflict instruct wiki page http //wiki.apache.org/jackrabbit/datastor ad datastor element specifi wiki page violat dtd
improp deprec lock class lock class jcr-common packag deprec 1.4 move spi-common howev common class depend spi rather stay jcr-common depend spi simpli remov
clone -aggreg includ ignor primarytyp set includ element aggreg definit primarytyp attribut includ never match
jackrabbit-jcr-rmi suppli javax.transaction.xa.xid assum serializ environ webspher provid non-serializ javax.transaction.xa.xid implement caus clientxaresourc fail notserializableexcept pass xid rmi work around convert suppli xid local serializ xid implement take suppli xid paramet implement hashcod equal correct privat static class serializablexid implement javax.transaction.xa.xid serializ serial version id privat static final long serialversionuid -1390620315181450507l privat final byte branchqualifi privat final byte globaltransactionid privat final int formatid privat final int hashcod public serializablexid xid xid branchqualifi xid.getbranchqualifi globaltransactionid xid.getglobaltransactionid formatid xid.getformatid hashcod xid.hashcod public byte getbranchqualifi return branchqualifi public int getformatid return formatid public byte getglobaltransactionid return globaltransactionid public final int hashcod return hashcod public final boolean equal object obj obj return true obj instanceof xid return fals xid xidimpl xid obj formatid xidimpl.getformatid return fals els return arrays.equ branchqualifi xidimpl.getbranchqualifi arrays.equ globaltransactionid xidimpl.getglobaltransactionid
deadlock due differ thread access prepar commit transact sinc configur j2c resourc adapt modif repositori end deadlock
bad assumpt queryresult.getiter semant queryresultnodeiteratortest.testskip testskip assum call getiter second time return new iter size jsr-170 silent forc server implement essanti mean queri result must cach 's refer queryresult anymor test skip getiter test realli refetch new queryresult order obtain new iter note issu semant queryresult.getiter discuss jcr eg
bug duplic map check bug mappingdescriptor check map node type alreadi avail follow patch solv problem index /users/cziegeler/developer/workspaces/default/jackrabbit/jackrabbit-ocm/src/main/java/org/apache/jackrabbit/ocm/mapper/model/mappingdescriptor.java /users/cziegeler/developer/workspaces/default/jackrabbit/jackrabbit-ocm/src/main/java/org/apache/jackrabbit/ocm/mapper/model/mappingdescriptor.java revis 614136 +++ /users/cziegeler/developer/workspaces/default/jackrabbit/jackrabbit-ocm/src/main/java/org/apache/jackrabbit/ocm/mapper/model/mappingdescriptor.java work copi -75,7 +75,7 null classdescriptor.getjcrtyp .equal classdescriptor.getjcrtyp managerconstant.nt_unstructured.equ classdescriptor.getjcrtyp classdescriptorsbynodetype.get classdescriptor.getclassnam null classdescriptorsbynodetype.get classdescriptor.getjcrtyp null classdescriptor.usesnodetypeperconcreteclassstrategi log.warn duplic classdescriptor node type classdescriptor.getjcrtyp
optim first execut queri descendantselfaxisweight/childaxisqueri first execut queri involv descendantselfaxisweight/childaxisqueri slow consecut queri faster hierarchi cach
manageablecollectionutil n't support map manageablecollectionutil two getmanageablecollect method current return manageablecollect wrap map managedhashmap alreadi exist codebas assum creat purpos getmanageablecollect method could modifi someth like object instanceof map return new managedhashmap map object altern solut might modifi jcr map support explicit defin managedxxx class
cluster journal directori creat automat cluster journal directori exist start cluster except thrown error org.apache.jackrabbit.core.repositoryimpl fail start repositori directori specifi either exist directori far know consist compon jackrabbit work think directori creat automat exist new file .mkdir know could argu bug view import usabl issu
creat osgi bundl manifest header abl easili use librari jackrabbit insid osgi framework exampl apach sling would helpful jackrabbit librari includ osgi bundl manifest header cours possibl defin manifest header definit librari jackrabbit-api jackrabbit-jcr-common jackrabbit-jcr-rmi certain good candid
replac xerc serial jaxp org.apache.jackrabbit.rmi.xml.importcontenthandl class current use xerc implement sax documenthandl serial xml byte depend drop jaxp use instead function
unsynchron namefactoryimpl initi org.apache.jackrabbit.spi.commons.name.namefactoryimpl use unsaf pattern initi privat static namefactori factori privat namefactoryimpl public static namefactori getinst factori null factori new namefactoryimpl return factori bad multi-thread environ see http //www.ibm.com/developerworks/library/j-dcl.html detail
classcastexcept updat properti use webdav issu proppatch command classcastexcept rais e.g proppatch /jackrabbit-webapp-1.4/repository/default/test/test_file_v.txt http/1.1 host localhost:9000 connect te te trailer deflat gzip compress user-ag uci dav explorer/0.91 rpt-httpclient/0.3-3 translat f author basic y3jvc3nqytp0zxn0 accept-encod deflat gzip x-gzip compress x-compress content-typ text/xml content-length 170 propertyupd xmlns a= dav set prop auto-vers checkout-checkin /a auto-vers /a prop /a set /a propertyupd result 24.01.2008 15:38:34 *error* webdav servlet.servic servlet webdav threw except standardwrappervalve.java line 257 java.lang.classcastexcept org.apache.jackrabbit.webdav.property.defaultdavpr operti org.apache.jackrabbit.webdav.simple.davresourceimpl.alterproperti d avresourceimpl.java:456 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.doproppatch abstractwebdavservlet.java:457 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.execut ab tractwebdavservlet.java:234 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.servic ab tractwebdavservlet.java:192 javax.servlet.http.httpservlet.servic httpservlet.java:803 org.apache.catalina.core.applicationfilterchain.internaldofilt appl icationfilterchain.java:269 org.apache.catalina.core.applicationfilterchain.dofilt applicationf ilterchain.java:188 org.apache.catalina.core.standardwrappervalve.invok standardwrapperv alve.java:210 org.apache.catalina.core.standardcontextvalve.invok standardcontextv alve.java:174 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.j ava:127 org.apache.catalina.valves.errorreportvalve.invok errorreportvalve.j ava:117 org.apache.catalina.core.standardenginevalve.invok standardenginev ve.java:108 org.apache.catalina.connector.coyoteadapter.servic coyoteadapter.jav a:151 org.apache.coyote.http11.http11processor.process http11processor.java :870 org.apache.coyote.http11.http11baseprotocol http11connectionhandler.p rocessconnect http11baseprotocol.java:665 org.apache.tomcat.util.net.pooltcpendpoint.processsocket pooltcpendpo int.java:528 org.apache.tomcat.util.net.leaderfollowerworkerthread.runit leaderfol lowerworkerthread.java:81 org.apache.tomcat.util.threads.threadpool controlrunnable.run threadp ool.java:685 java.lang.thread.run thread.java:595 24.01.2008 15:38:34 *error* webdav servlet.servic servlet webdav threw except slf4jlocationawarelog.java line 174 java.lang.classcastexcept org.apache.jackrabbit.webdav.property.defaultdavpr operti org.apache.jackrabbit.webdav.simple.davresourceimpl.alterproperti d avresourceimpl.java:456 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.doproppatch abstractwebdavservlet.java:457 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.execut ab tractwebdavservlet.java:234 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.servic ab tractwebdavservlet.java:192 javax.servlet.http.httpservlet.servic httpservlet.java:803 org.apache.catalina.core.applicationfilterchain.internaldofilt appl icationfilterchain.java:269 org.apache.catalina.core.applicationfilterchain.dofilt applicationf ilterchain.java:188 org.apache.catalina.core.standardwrappervalve.invok standardwrapperv alve.java:210 org.apache.catalina.core.standardcontextvalve.invok standardcontextv alve.java:174 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.j ava:127 org.apache.catalina.valves.errorreportvalve.invok errorreportvalve.j ava:117 org.apache.catalina.core.standardenginevalve.invok standardenginev ve.java:108 org.apache.catalina.connector.coyoteadapter.servic coyoteadapter.jav a:151 org.apache.coyote.http11.http11processor.process http11processor.java :870 org.apache.coyote.http11.http11baseprotocol http11connectionhandler.p rocessconnect http11baseprotocol.java:665 org.apache.tomcat.util.net.pooltcpendpoint.processsocket pooltcpendpo int.java:528 org.apache.tomcat.util.net.leaderfollowerworkerthread.runit leaderfol lowerworkerthread.java:81 org.apache.tomcat.util.threads.threadpool controlrunnable.run threadp ool.java:685 java.lang.thread.run thread.java:595 24.01.2008 15:53:54 *error* webdav servlet.servic servlet webdav threw except standardwrappervalve.java line 257 java.lang.classcastexcept org.apache.jackrabbit.webdav.property.defaultdavpr operti org.apache.jackrabbit.webdav.simple.davresourceimpl.alterproperti d avresourceimpl.java:456 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.doproppatch abstractwebdavservlet.java:457 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.execut ab tractwebdavservlet.java:234 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.servic ab tractwebdavservlet.java:192 javax.servlet.http.httpservlet.servic httpservlet.java:803 org.apache.catalina.core.applicationfilterchain.internaldofilt appl icationfilterchain.java:269 org.apache.catalina.core.applicationfilterchain.dofilt applicationf ilterchain.java:188 org.apache.catalina.core.standardwrappervalve.invok standardwrapperv alve.java:210 org.apache.catalina.core.standardcontextvalve.invok standardcontextv alve.java:174 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.j ava:127 org.apache.catalina.valves.errorreportvalve.invok errorreportvalve.j ava:117 org.apache.catalina.core.standardenginevalve.invok standardenginev ve.java:108 org.apache.catalina.connector.coyoteadapter.servic coyoteadapter.jav a:151 org.apache.coyote.http11.http11processor.process http11processor.java :870 org.apache.coyote.http11.http11baseprotocol http11connectionhandler.p rocessconnect http11baseprotocol.java:665 org.apache.tomcat.util.net.pooltcpendpoint.processsocket pooltcpendpo int.java:528 org.apache.tomcat.util.net.leaderfollowerworkerthread.runit leaderfol lowerworkerthread.java:81 org.apache.tomcat.util.threads.threadpool controlrunnable.run threadp ool.java:685 java.lang.thread.run thread.java:595 24.01.2008 15:53:54 *error* webdav servlet.servic servlet webdav threw except slf4jlocationawarelog.java line 174 java.lang.classcastexcept org.apache.jackrabbit.webdav.property.defaultdavpr operti org.apache.jackrabbit.webdav.simple.davresourceimpl.alterproperti d avresourceimpl.java:456 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.doproppatch abstractwebdavservlet.java:457 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.execut ab tractwebdavservlet.java:234 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.servic ab tractwebdavservlet.java:192 javax.servlet.http.httpservlet.servic httpservlet.java:803 org.apache.catalina.core.applicationfilterchain.internaldofilt appl icationfilterchain.java:269 org.apache.catalina.core.applicationfilterchain.dofilt applicationf ilterchain.java:188 org.apache.catalina.core.standardwrappervalve.invok standardwrapperv alve.java:210 org.apache.catalina.core.standardcontextvalve.invok standardcontextv alve.java:174 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.j ava:127 org.apache.catalina.valves.errorreportvalve.invok errorreportvalve.j ava:117 org.apache.catalina.core.standardenginevalve.invok standardenginev ve.java:108 org.apache.catalina.connector.coyoteadapter.servic coyoteadapter.jav a:151 org.apache.coyote.http11.http11processor.process http11processor.java :870 org.apache.coyote.http11.http11baseprotocol http11connectionhandler.p rocessconnect http11baseprotocol.java:665 org.apache.tomcat.util.net.pooltcpendpoint.processsocket pooltcpendpo int.java:528 org.apache.tomcat.util.net.leaderfollowerworkerthread.runit leaderfol lowerworkerthread.java:81 org.apache.tomcat.util.threads.threadpool controlrunnable.run threadp ool.java:685 java.lang.thread.run thread.java:595
internalvalue.createcopi binari properti jcr data caus problem run 1.4 data store configur option org.jackrabbit.usedatastor set i.e true follow code give 0 properti length node n root.getnod relpath session.getworkspac .copi n.getpath destpath node contentnod n.getnod jcrconstants.jcr_cont properti p contentnode.getproperti jcrconstants.jcr_data system.out.println length +p.getlength internalvalue.createcopi check use_data_stor return valu sourc node 's state bundlebinding.writest call blobinmemory.discard persist new node chang valu exist node properti set option org.jackrabbit.usedatastor fals work fine possibl check binari properti type internalvalue.createcopi done first
move jackrabbit queri parser core spi-common queri parser use outsid jackrabbit-cor instanc repositori implement base jcr2spi propos move sourc build infrastructur o.a.j.core.queri o.a.j.spi.commons.queri switch jackrabbit.cor use spi-common queri optim add specif test case queri tree generat
add serial content handler jcr-1310 jcr-1343 need xml serial function ve also previous jcr-367 jcr-1086 implement someth similar would good central code 'd like use alreadi referenc code cocoon 1 basi serializingcontenthandl class jackrabbit-jcr-common 1 https //svn.apache.org/repos/asf/cocoon/trunk/core/cocoon-pipeline/cocoon-pipeline-impl/src/main/java/org/apache/cocoon/serialization/abstracttextserializer.java
xml import access extern entiti current jackrabbit follow xml document import doctyp foo system http //invalid.address/ foo/ even dtd address extern resourc referenc xml document correct n't think importxml even tri resolv refer
document inherit node type attribut order document task see http //mail-archives.apache.org/mod_mbox/jackrabbit-users/200801.mbox/brows
creat quick start develop bundl model 1,2,3 deploy pleas creat quick start develop bundl deploy model 1,2,3 depend lib applic startup code kind hello world app model 1,2,3 tomcat jetti bundl would nice
cluster revis file close repositori shutdown shut repositori configur cluster cluster revis file still open
ad node concurr run session caus except except thrown tri add child node one parent node differ session run concurr one follow except alway thrown except thread thread-8 java.lang.runtimeexcept javax.jcr.nodetype.constraintviolationexcept /a/7 need save well except thread thread-8 java.lang.runtimeexcept javax.jcr.repositoryexcept /a unabl updat item unabl resolv path item 016b885a-64aa-45b9-a990-05cbabb4586f/ http //www.jcp.org/jcr/1.0 primarytyp unabl resolv path item 016b885a-64aa-45b9-a990-05cbabb4586f/ http //www.jcp.org/jcr/1.0 primarytyp accord jcr-584 improv handl concurr node modif follow scenario session 1 add remov child node x session 2 add remov child node y run grace follow test constant fail public void testsync throw except node rootnod getsess .getrootnod rootnode.addnod rootnode.sav final session session1 getrepositori .login new simplecredenti usernam password .tochararray final session session2 getrepositori .login new simplecredenti usernam password .tochararray thread thread1 new thread new runnabl public void run tri addnod session1 0 catch repositoryexcept ex throw new runtimeexcept ex thread thread2 new thread new runnabl public void run tri addnod session2 1001 catch repositoryexcept ex throw new runtimeexcept ex thread1.start thread2.start thread1.join thread2.join privat void addnod string parentnam session session int startindex throw repositoryexcept node parentnod session.getrootnod .getnod parentnam int startindex startindex 100 i++ string name integer.tostr parentnode.addnod name parentnode.sav btw except also thrown tri add node one thread remov anoth one thread use 's session node uniqu name
pars built-in cnd xml nodetyp result equal nt-definit creat test order make sure builtin-nodetypes.xml builtin-nodetypes.cnd provid definit actual want test chang reveal exist built-in nodetypedefinit equal due follow reason xml-format nt base alway specifi super type extend nt base cnd notat nt base omit see quot appendix jsr 283 even super type defin none extend nt base affect follow nodetyp extend mix referenc nt versionhistori nt version nt frozennod nt resourc quot public-review jsr 283 7.2.2.4 supertyp node type name come option list supertyp element present node type mixin see 7.2.2.5 option supertyp nt base assum 'm total sure accord quot built-in cnd-definit valid sinc state nt base assum super type defin case node type mix referenc defin super type total true non-mixin type alway sub type nt base either case understand node type result pars xml cnd file equal definit valid may need adjust compactnodetypedefread
lock test assum chang one session immedi visibl differ session locktest.testlogout assum chang one session log remov session-scop lock immedi visibl anoth session propos insert n1.getsess .refresh true call check assertfals node must lock n1.islock
databasejourn improp find tabl extern schema use oracl databasejourn current call databas metadata determin journal tabl alreadi creat use follow code resultset rs metadata.gett null null tablenam null oracl driver sometim return tabl anoth schema databas dbms code within jackrabbit specif oracl version handl case order journal tabl proper creat oracl databas need schema name includ gettabl call
migrat lucen 2.3
dirlistingexporthandl implement propertyhandl issu found roland porath dirlistingexporthandl use collect nodetyp nt folder may allow properti list dav properti obtain upon propfind deleg propertyhandl result imcomplet list sinc benefit dirlistingexporthandl display someth nice upon get folder 'd suggest remov implement propertyhandl dirlistingexporthandl angela
queri path constraint like foo//*/bar scale resolv step lucenequerybuild current creat matchallqueri check everi node foo ancestor instead search bar node check foo ancestor least one arbitrari hierarchi level
dbdatastor tableprefix accomod init test exist datastor tabl provid test db deploy prepopul data includ jackrabbit datastor tri specifi tableprefix creat initi repositori tabl creat proper howev clean instal run fresh databas exist datastor store jackrabbit_ds_datastor tabl startup fail init meta data check tabl name match tablesql properti resultset rs meta.gett null null tablesql null tablesql properti never modifi base tableprefix properti use tablesql modifi queri base prefix think init method modifi test tabl name base tableprefix note assum differ jdbc driver may handl differ use sql server 2007 jtds driver sinc databasemetadata api unclear paramet gettabl tablenamepattern wildcard work specif tabl specifi datastor config datastor class= org.apache.jackrabbit.core.data.db.dbdatastor param name= classnam value= org.apache.jackrabbit.core.data.db.dbdatastor param name= url value= jdbc jtds sqlserver //localhost:1433/nga_admin preparesql=2 responsebuffering=adapt param name= user value= sa param name= password value= param name= databasetyp value= sqlserver param name= driver value= net.sourceforge.jtds.jdbc.driv bug jackrabbit make tableprefix work param name= tableprefix value= jackrabbit_ds_ param name= minrecordlength value= 1 param name= maxconnect value= 2 param name= copywhenread value= true /datastor
improv document spi batch addproperti clarifi batch.addproperti succeed even though properti alreadi exist see mail list thread start http //mail-archives.apache.org/mod_mbox/jackrabbit-dev/200801.mbox/ 3c47a1e1c1.2050107 gmx.de 3e
indexing-rul allow wildcard global properti name eg indexing-rul nodetype= properti text /properti properti *text /properti /indexing-rul defin properti name text end text fulltext index properti name includ namespac prefix wildcard allow ani namespac eg titl j* titl
patch unnecessari synchron collect use thread safe way nodetyperead use vector local variabl thread safe way thus synchron valu vector need slow code noth patch switch collect arraylist
patch fix possibl null ptr except connectionfactori code throw npe driver string null patch fix
patch dbdatastor make sure stream close stream n't close end use patch fix
limit field read index read lucen document index limit field necessari
searchindex paramet caches ignor caches alway set 1024 matter specifi configur
reduc memori usag docnumbercach instead use uuid string uuid instanc use key cach
remov sessionimpl depend queryobjectmodelfactoryimpl queryobjectmodelfactoryimpl independ jackrabbit-cor
abstractexcerpt use wrong logger use defaultxmlexcerpt instead abstractexcerpt
cachinghierarchymanag synchron problem method cachinghierarchymanager.resolvenodepath synchron cachemonitor object result endless loop cach nullpointerexcept unexpect behavior cachinghierarchymanag
path index insert new node sns use jackrabbit ocm insert two node path second node 's path index node path search path retriev first node node map includ follow annot node jcrmixintypes= mix referenc mix lockabl mix version public class articl field uuid=tru privat string id null field path=tru privat string path null
uuid field popul save new node follow articl class field set true path uuid jcr properti mixin referenc henc support uuid declar node level class save node objectcontentmanag uuid field popul could expect node jcrmixintypes= mix referenc mix lockabl mix version public class articl field uuid=tru privat string id null field path=tru privat string path null field privat string content null constructor getter setter full discuss http //www.nabble.com/ocm-issues-with-path-and-id-fields- 28annot 29-tt15460625.html a15460625
jackrabbit allow concurr read data store copywhenreading=fals jackrabbit allow concurr read data store copywhenreading=fals even maxconnect 1 see jcr-1184 test problem run copywhenreading=fals
setproperti name new valu 0 propertytype.long lose properti type ad empti multivalu properti specif non-str type unstructur node i.e one undefin multivalu properti definit creat empti multivalu properti type string case keep explicit type inform import avoid lose
patch remov minor unneed code stutter code repeat method call isorder reason code public string getsupportedmethod string ms super.getsupportedmethod isorder stringbuff sb new stringbuff ms order isorder sb.append .append orderingresource.method return sb.tostr els return ms code patch clean
patch except thrown appear code creat expect appar error state n't throw look like class org.apache.jackrabbit.webdav.jcr.search.searchresultproperti ctor public searchresultproperti davproperti properti valuefactori valuefactori throw repositoryexcept around line 96 els new illegalargumentexcept searchresultproperti requir list dcr column xml element patch fix
filedatastor garbag collector empti directori org.apache.jackrabbit.core.data.garbagecollector call filedatastor file object correct delet sub directori n't remov time result huge tree unus empti directori ve creat small chanc method filedatastore.deleteolderrecurs remov directori n't file entri pleas note current file object store three level deep take three gc call remov directori think problem current implement lightweight current filedatastore.java privat int deleteolderrecurs file file long min int count 0 file.isfil file.exist file.canwrit file.lastmodifi min dataidentifi id new dataidentifi file.getnam inuse.containskey id file.delet count++ els file.isdirectori file list file.listfil int 0 list.length i++ count += deleteolderrecurs list min return count new privat int deleteolderrecurs file file long min int count 0 file.isfil file.exist file.canwrit file.lastmodifi min dataidentifi id new dataidentifi file.getnam inuse.containskey id file.delet count++ els file.isdirectori file list file.listfil list.length==0 file.delet els int 0 list.length i++ count += deleteolderrecurs list min return count
use common io 1.4 common io contain number util class method work file stream mani util would quit use jackrabbit 'd like introduc commons-io 1.4 depend jackrabbit-cor
datevalue.getd copi notic getdat org.apache.jackrabbit.value.datevalu return refer accord specif copi see jsr 170 section 6.2.7 privat calendar date public calendar getdat throw valueformatexcept illegalstateexcept repositoryexcept setvalueconsum date null return date els throw new valueformatexcept empti valu short test valuefactori factori session.getvaluefactori valu v factory.createvalu gregoriancalendar.getinst calendar c0 v.getdat calendar c1 v.getdat c0 c1 out.println error refer equal out.println c0
allow queri result unknown size optim certain queri queri implement chang allow unknown result size current one queri queri result return unknown size special queri result implement return time fix one implement use
patch classdescriptor.hasidfield use faulti logic hasidfield tri compar fielddescriptor empti string n't make sens public boolean hasidfield return this.idfielddescriptor null this.idfielddescriptor.equ 'm assum return this.idfielddescriptor null this.idfielddescriptor.isid patch
backport jcr-1197 node.restor may throw invaliditemstateexcept backport issu jcr-1197 node.restor may throw invaliditemstateexcept 1.3 branch 1.3.4 separ issu avoid re-open jcr-1197 alreadi releas 1.4
backport jcr-940 add db connect autoconnect bundledbpersistencemanag backport issu jcr-940 add db connect autoconnect bundledbpersistencemanag 1.3 branch 1.3.4 separ issu avoid re-open jcr-940 alreadi releas 1.4
removing-nod unexpect nodetyp tobia add logic jcr-973 defaulthandl check nodetyp jcr content node match delet creat new one think danger automaci chang node type node ad programat save webdav could happen nodetyp chang nt resourc nt unstructur logic depend nodetyp failur search hard
path.getancestor path.isancestor symmetr although method name refer ancestor oper sub-path consid pathfactori pf pathfactoryimpl.getinst path.el p pf.getparentel path path pf.creat new path.el p p path ancestor path.getancestor 1 assertfals ancestor.isancestorof path one would expect look method signatur suggest renam getancestor getsubpath clarifi javadoc deprec getancestorcount patch follow
spi describ equal requir itemid michael duerig ask clarif regard equal itemid discuss came follow conclus two itemid consid equal uniqu part path part equal denot type id see denotesnod nobodi object would adjust javadoc itemid accord
javadoc write generat mvn mvn -sourc 1.5 javadoc javadoc work follow line must ad pom.xml plugin artifactid maven-javadoc-plugin /artifactid configur sourc 1.5 /sourc /configur /plugin pleas also write comprehens javadoc allow better sourc understand develop co-oper
spi introduc nodeinfo.getchildinfo improv suggest marcel childinfo basic strip nodeinfo littl effort would even possibl nodeinfo extend childinfo sure use sinc n't inherit code time near 100 overlap make suspici 's anoth idea introduc method childinfo nodeinfo.getchildinfo method either return child info also give correct number child node may also mean empti array return indic child node null indic *lots* child node method repositoryservice.getchildinfo iter use
add org.apache.jackrabbit.rmi.jackrabbit packag rmic generat unicastremoteobject 's serverjackrabbitnodetypemanag serverjackrabbitworkspac stub generat
patch trivial javadoc fix repositoryconfig yes realli trivial keep come class tri figur work javadoc parm scrambl patch fix
invalid queri result use jcr like case transform function pattern start wildcard repositori contain node follow valu properti name john john joe joey run follow queri //element document jcr like fn lower-cas name joh previous node match especi last 2 node reason use two rang scan lucen term index _name_joh _name_joh_ _name_joh _name_joh_ first rang contain _name_jo properti second contain _name_joey pattern joh regexp rang scan match substr valu properti first rang y second rang solut use full pattern ie joh match properti
pathfactoryimpl creat illeg path object current possibl creat illegal/inconsist path use default path factori path object expect repres syntact correct path exampl pathfactori pf pathfactoryimpl.getinst path.el re pf.getrootel path illegalpath pf.creat new path.el re re path.el pe pf.getparentel path nonnormalizedpath pf.creat new path.el pe pe assertfals nonnormalizedpath.isnorm
patch retain except stack trace code catch one except throw anoth lose stack trace inform causal except make difficult understand happen except occur patch retain stack trace occur caus thrown except
data store garbag collect inus correct synchron access field dbdatastore.inus filedatastore.inus synchron problem concurr call garbagecollector.deleteunus access data store concurrentmodificationexcept thrown
cluster configur document syncdelay n't match bit mismatch current document avail configur cluster node repositori look dtd repository.xml 1 state syncdelay attribut cluster element second howev read javadoc clusterconfig 2 object state syncdelay millisecond 'm guess valu actual millisecond least two document tell stori 1 -http //jackrabbit.apache.org/dtd/repository-1.4.dtd 2 http //jackrabbit.apache.org/api/1.4/org/apache/jackrabbit/core/config/clusterconfig.html
patch need call tostr string code call tostr string
patch remov code stutter method call getqnam reason public string getnam throw repositoryexcept checkstatus name qname getqnam return session.getnameresolv .getjcrnam getqnam patch fix
redesign nodeinfo.getrefer method return array propertyid lot refer may becom problem return valu potenti larg return iter suggest redesign handl refer line recent discuss child info handl nodeinfo implement must either return complet list propertyid null want return propertyid time introduc new method iter propertyid repositoryservice.getrefer sessioninfo nodeid follow advantag load refer delay realli need larg collect refer stream spi
add test node.restor may throw invalidstateexcept add unit test jcr-1399 1.3 branch test origin featur trunk/1.4 jcr-1197 need separ issu
backport jcr-1111 access version histori result read version version node backport issu jcr-1111 accesss version histori result read version version node 1.3 branch 1.3.4 separ issu avoid re-open jcr-1111 alreadi releas 1.4
patch simplifi convers string primit use parsexxx valueof xxx .xxxvalu code convert string primit use two step process eg boolean.valueof mystr .booleanvalu simplifi boolean.parseboolean mystr true float doubl int etc case avoid alloc temporari box object patch fix
patch reduc duplic convers offsetcharsequ lower/upp string code repetit convert offsetcharsequ string repetit convert lower/upp case generat search term patch fix
xpath queri child axi predic execut queri use long child path child axi predic like a/b/c/d/e/ prop='someth may return mani enough node ll attach zip file contain 2 test case show issu apolog test data french
add api select bundl consist check jackrabbit-specif add jackrabbit-specif api select consistencycheck ie singl node current entire-workspac check slow workspac larg enough also easi write tool invok featur programmat rather configur restart see exist implement current bundl consistencycheck featur enabl set bundl pm paramet restart jackrabbit run upon startup see jcr-972 issu regard bundl consist check check look broken parent-child relationship ie remov child node entri refer non-exist parent node non-exist parent uuid problem bundl log outlook advanc consistencycheck could also check non-exist version node vice-versa see jcr-630 focus issu could later addit api
mvn eclips eclips inconsist mvn eclips eclips result inconsist due deprec avacc-maven-plugin usag use pipe jjtree-javacc goal core execut id fulltext-jjtre /id configur sourcedirectori basedir /src/main/javacc/fulltext /sourcedirectori outputdirectori project.build.directori /generated-src/main/java /outputdirectori timestampdirectori project.build.directori /generated-src/javacc-timestamp /timestampdirectori packagenam org.apache.jackrabbit.core.query.lucene.fulltext /packagenam /configur goal goal jjtree-javacc /goal /goal /execut spi-common execut id sql-jjtree-javacc /id configur sourcedirectori basedir /src/main/javacc/sql /sourcedirectori outputdirectori project.build.directori /generated-src/main/java /outputdirectori timestampdirectori project.build.directori /generated-src/javacc-timestamp /timestampdirectori packagenam org.apache.jackrabbit.spi.commons.query.sql /packagenam /configur goal goal jjtree-javacc /goal /goal /execut execut id xpath-jjtree-javacc /id configur sourcedirectori basedir /src/main/javacc/xpath /sourcedirectori outputdirectori project.build.directori /generated-src/main/java /outputdirectori timestampdirectori project.build.directori /generated-src/javacc-timestamp /timestampdirectori packagenam org.apache.jackrabbit.spi.commons.query.xpath /packagenam /configur goal goal jjtree-javacc /goal /goal /execut
save node delet modifi extern throw constraintviolationexcept delet node save parent might result constraintviolationexcept node modifi extern invaliditemstateexcept messag item x modifi extern would intuit
spi descript path.isdescendantof path descript path.isdescendantof list differ reason illegalargumentexcept repositoryexcept isancestorof obvious mistak
add framework perform test add test suit run various kind perform test
move method return error 412 precondit fail hi tri maco x 10.5 finder 's webdav client test jackrabbit 1.4 host tomcat 5.5.25 window xp sp2 comput lan encount error remot edit abl open text document problem could n't save tri find log tomcat sad jackrabbit n't produc log file regard problem use ether 0.99.0 check packet window xp comput trace summari export text file packet analyz problem occur line 11818 time sourc destin protocol info 4352 27.629257 10.60.1.90 10.60.1.187 http move /jackrabbit-webapp-1.4/repository/default/.temporaryitems/folders.501/temporaryitems/ 20document 20be 20save 20bi 20textedit /copi 20of 20request_for_gams_user_account.rtf http/1.1 frame 4352 592 byte wire 592 byte captur ethernet ii src applecom_72 c3:5e 00:0d:93:72 c3:5e dst 00:19 d1 a0:34 f7 00:19 d1 a0:34 f7 internet protocol src 10.60.1.90 10.60.1.90 dst 10.60.1.187 10.60.1.187 transmiss control protocol src port 64970 64970 dst port 8080 8080 seq 69060 ack 90475 len 526 sourc port 64970 64970 destin port 8080 8080 sequenc number 69060 relat sequenc number next sequenc number 69586 relat sequenc number acknowledg number 90475 relat ack number header length 32 byte flag 0x0018 psh ack window size 524280 scale checksum 0xd4f9 correct option 12 byte hypertext transfer protocol move /jackrabbit-webapp-1.4/repository/default/.temporaryitems/folders.501/temporaryitems/ 20document 20be 20save 20bi 20textedit /copi 20of 20request_for_gams_user_account.rtf http/1.1\r\n request method move request uri /jackrabbit-webapp-1.4/repository/default/.temporaryitems/folders.501/temporaryitems/ 20document 20be 20save 20bi 20textedit /copi 20of 20request_for_gams_user_account.rtf request version http/1.1 user-ag webdavfs/1.5 01508000 darwin/9.1.0 power macintosh \r\n accept */*\r\n destin http //10.60.1.187:8080/jackrabbit-webapp-1.4/repository/default/au/gov/arc/www/rtf/copi 20of 20request_for_gams_user_account.rtf\r\n author basic ywrtaw46ywrtaw4=\r\n credenti admin admin content-length 0\r\n connect keep-alive\r\n host 10.60.1.187:8080\r\n \r\n line 11850 time sourc destin protocol info 4353 27.630345 10.60.1.187 10.60.1.90 http http/1.1 412 precondit fail text/html frame 4353 1191 byte wire 1191 byte captur ethernet ii src 00:19 d1 a0:34 f7 00:19 d1 a0:34 f7 dst applecom_72 c3:5e 00:0d:93:72 c3:5e internet protocol src 10.60.1.187 10.60.1.187 dst 10.60.1.90 10.60.1.90 transmiss control protocol src port 8080 8080 dst port 64970 64970 seq 90475 ack 69586 len 1125 sourc port 8080 8080 destin port 64970 64970 sequenc number 90475 relat sequenc number next sequenc number 91600 relat sequenc number acknowledg number 69586 relat ack number header length 32 byte flag 0x0018 psh ack window size 65535 checksum 0x1c18 incorrect 0xa2f0 option 12 byte hypertext transfer protocol http/1.1 412 precondit failed\r\n request version http/1.1 respons code 412 server apache-coyote/1.1\r\n content-typ text/html charset=utf-8\r\n content-length 965\r\n date fri 29 feb 2008 02:31:01 gmt\r\n \r\n line-bas text data text/html html head titl apach tomcat/5.5.25 error report /titl style h1 font-famili tahoma arial sans-serif color white background-color 525d76 font-size:22px h2 font-famili tahoma arial sans-serif color white background-color 52
npe thrown two cluster node hit under databas ve creat test creat two repositori cluster enabl back databas use follow workflow caus nullpointerexcept thrown workflow 'm use root node version clusternode1 creat version child node name foo test wait make sure syncdelay pass clusternode2 notic newli creat node clusternode2 retriev foo child node remov test wait chang clusternode1 sync chang clusternode1 tri creat anoth new node howev nullpointerexcept thrown tri checkout rootnod java.lang.nullpointerexcept null valu allow org.apache.commons.collections.map.abstractreferencemap.put abstractreferencemap.java:251 org.apache.jackrabbit.core.version.versionmanagerimpl.getitem versionmanagerimpl.java:280 org.apache.jackrabbit.core.version.xaversionmanager.getitem xaversionmanager.java:334 org.apache.jackrabbit.core.version.abstractversionmanager.getvers abstractversionmanager.java:87 org.apache.jackrabbit.core.nodeimpl.getbasevers nodeimpl.java:3198 org.apache.jackrabbit.core.nodeimpl.checkout nodeimpl.java:2991 com.cerner.system.configuration.repository.jcr.simplejackrabbitconflicttest.testnullpointerexceptionthrown simplejackrabbitconflicttest.java:96
fsimport.java link wiki dead link fsimport.java http //svn.apache.org/repos/asf/jackrabbit/trunk/contrib/examples/src/java/org/apache/jackrabbit/examples/fsimport.java wiki page http //wiki.apache.org/jackrabbit/examplespag dead could updat pleas
make jcamanagedconnectionfactori non final extend hello reason jcamanagedconnectionfactori final need build one 'd rather reus code
getoutputstream memoryfilesystem class replac folder newli creat file seem filepath paramet pass getoutputstream method memoryfilesystem class point exist folder file folder replac newli creat file function probabl check whether pass path point file throw except point folder
patch use entryset iter avoid map look up loop code use keyset iter loop map look use key retriev iter might well use entryset iter avoid n map lookup patch
nt versionedchild problem problem occur parent child bean version jackrabbit creat nt versionedchild node referenc parent node referenc child versionedhistori node child current ocm code handl correct produc error node type nt versionedchild match descriptor node type nt unstructur exampl code problem patch appear correct resolv problem within objectconverterimpl creat method public node getactualnod session session node node throw repositoryexcept nodetyp type node.getprimarynodetyp type.getnam .equal nt versionedchild string uuid node.getproperti jcr childversionhistori .getvalu .getstr node actualnod session.getnodebyuuid uuid string name actualnode.getnam actualnod session.getnodebyuuid name return actualnod return node modifi follow call method public object getobject session session class clazz string path tri session.itemexist path return null requestobjectcache.iscach path return requestobjectcache.getobject path classdescriptor classdescriptor getclassdescriptor clazz checknodetyp session classdescriptor node node node session.getitem path classdescriptor.isinterfac node getactualnod session node checkcompatibleprimarynodetyp session node classdescriptor true classdescriptor alternativedescriptor null classdescriptor.usesnodetypeperhierarchystrategi node.hasproperti managerconstant.discriminator_property_nam string classnam node.getproperti managerconstant.discriminator_property_nam .getvalu .getstr alternativedescriptor getclassdescriptor reflectionutils.fornam classnam els classdescriptor.usesnodetypeperconcreteclassstrategi string nodetyp node.getprimarynodetyp .getnam nodetype.equ classdescriptor.getjcrtyp alternativedescriptor classdescriptor.getdescendantclassdescriptor nodetyp case altern could found walk class descriptor hierarchi check whether would descriptor node type direct may case class descriptor hierarchi incomplet due miss configur see jcr-1145 detail alternativedescriptor null alternativedescriptor mapper.getclassdescriptorbynodetyp nodetyp altern class descriptor check whether extend request class alternativedescriptor null class alternativeclazz reflectionutils.fornam alternativedescriptor.getclassnam clazz.isassignablefrom alternativeclazz clazz alternativeclazz classdescriptor alternativedescriptor ensur class concret neither interfac abstract clazz.isinterfac || modifier.isabstract clazz.getmodifi throw new jcrmappingexcept instanti non-concret class clazz.getnam node path type node.getprimarynodetyp .getnam object object reflectionutils.newinst classdescriptor.getclassnam requestobjectcache.iscach path requestobjectcache.cach path object simplefieldshelp.retrievesimplefield session classdescriptor node object retrievebeanfield session classdescriptor node path object fals retrievecollectionfield session classdescriptor node object fals return object catch pathnotfoundexcept pnfe hint never get throw new objectcontentmanagerexcept imposs get object path pnfe catch repositoryexcept re throw new org.apache.jackrabbit.ocm.exception.repositoryexcept imposs get object path re build test applic ocm follow class annot ocm problem updat version root object pressreleas bean author version nt versionedchild ocm check node type compat throw follow except look like versionedchild handl correct suggest also attempt retriev version base version name rootvers also trap version object access version entri thank wes node jcrmixintypes= mix version public class pressreleas field path=tru string path field string titl field date pubdat field string content bean author author collect elementclassname=comment.class list comment comment new arraylist comment public string getpath return path public void setpath string path this.path path public string getcont return content public void setcont string content this.cont content public date getpubd return pubdat public void setpubd date pubdat this.pubd pubdat public string gettitl return titl public void settitl string titl this.titl titl public author getauthor return author public void setauthor author author this.author author public list comment getcom return comment public void setcom list comment comment this.com comment node jcrmixintypes= mix version public class author field path=tru string path field string name public string getnam return name public void setnam string name this.nam name public string getpath return path public void setpath string path this.path path main versioniterator.hasnext version version version versioniterator.next system.out.println version found version.getnam version.getpath version.getcr .gettim version.getnam .equal jcr rootvers get object match first version pressreleas pressreleas ocm.getobject /newtutori version.getnam system.out.println pressreleas titl pressrelease.gettitl system.out.println author pressrelease.getauthor .getnam system.out.println content pressrelease.getcont list comment pressrelease.getcom iter iter comments.iter iterator.hasnext comment comment iterator.next system.out.println comment comment.getdata comment.gettext consol version found jcr rootvers /jcr system/jcr versionstorage/fc/0b/fd/fc0bfd89-c487-4fbe-930f-d837e5dfed79/jcr rootvers thu feb 28 15:54:42 est 2008 version found 1.0 /jcr system/jcr versionstorage/fc/0b/fd/fc0bfd89-c487-4fbe-930f-d837e5dfed79/1.0 thu feb 28 15:54:59 est 2008 except thread main org.apache.jackrabbit.ocm.exception.objectcontentmanagerexcept map object type com..pc.repository.author node type nt versionedchild match descriptor node type nt unstructur org.apache.jackrabbit.ocm.manager.objectconverter.impl.objectconverterimpl.checkcompatibleprimarynodetyp objectconverterimpl.java:552 org.apache.jackrabbit.ocm.manager.objectconverter.impl.objectconverterimpl.getobject objectconverterimpl.java:361 org.apache.jackrabbit.ocm.manager.beanconverter.impl.defaultbeanconverterimpl.getobject defaultbeanconverterimpl.java:80 org.apache.jackrabbit.ocm.manager.objectconverter.impl.objectconverterimpl.retrievebeanfield objectconverterimpl.java:666 org.apache.jackrabbit.ocm.manager.objectconverter.impl.objectconverterimpl.retrievebeanfield objectconverterimpl.java:621 org.apache.jackrabbit.ocm.manager.objectconverter.impl.objectconverterimpl.getobject objectconverterimpl.java:309 org.apache.jackrabbit.ocm.manager.impl.objectcontentmanagerimpl.getobject objectcontentmanagerimpl.java:313 com.pc.repository.main.main main.java:345
regist nodetyp empti namespac prefix caus namespac except sync node regist nodetyp empti namespac prefix caus namespac except sync node stacktrac look follow 03.03.2008 15:33:50 *error* clusternod unabl read revis 10618 clusternode.java line 1051 o.a.j.core.journal.journalexcept pars error read node type definit o.a.j.core.journal.abstractrecord.readnodetypedef abstractrecord.java:256 o.a.j.core.cluster.clusternode.consum clusternode.java:1026 o.a.j.core.journal.abstractjournal.dosync abstractjournal.java:198 o.a.j.core.journal.abstractjournal.sync abstractjournal.java:173 o.a.j.core.cluster.clusternode.sync clusternode.java:303 o.a.j.core.cluster.clusternode.run clusternode.java:274 java.lang.thread.run thread.java:595 caus o.a.j.core.nodetype.compact.parseexcept error pars bla intern line 3 o.a.j.core.nodetype.compact.lexer.fail lexer.java:152 o.a.j.core.nodetype.compact.compactnodetypedefreader.toqnam compactnodetypedefreader.java:653 o.a.j.core.nodetype.compact.compactnodetypedefreader.donodetypenam compactnodetypedefreader.java:265 o.a.j.core.nodetype.compact.compactnodetypedefreader.pars compactnodetypedefreader.java:215 o.a.j.core.nodetype.compact.compactnodetypedefreader. init compactnodetypedefreader.java:178 o.a.j.core.nodetype.compact.compactnodetypedefreader. init compactnodetypedefreader.java:162 o.a.j.core.journal.abstractrecord.readnodetypedef abstractrecord.java:248 6 caus javax.jcr.namespaceexcept uri pefix declar o.a.j.spi.commons.namespace.namespacemapping.geturi namespacemapping.java:74 o.a.j.spi.commons.conversion.nameparser.pars nameparser.java:116 o.a.j.spi.commons.conversion.parsingnameresolver.getqnam parsingnameresolver.java:62 o.a.j.spi.commons.conversion.defaultnamepathresolver.getqnam defaultnamepathresolver.java:61 o.a.j.core.nodetype.compact.compactnodetypedefreader.toqnam compactnodetypedefreader.java:646 11
move method memoryfilesystem may accept invalid destin path result invalid entri fs seem problem move method memoryfilesystem class look code look accept destin specifi folder exist file system exampl somefolder/somefil file call method pass say somefolder/someotherfolder/somefil destin destin accept code even somefolder/someotherfold exist folder function execut result file somefolder/someotherfolder/somefil path within file system somefolder/someotherfold folder code probabl check whether destin path realli valid one valid could perform exampl follow way take path element destin path except last one insur result path point exist folder throw except otherwis current jackrabbit build/test environ set could verifi practic whether issu describ realli take place supposit made look move method implement
allow access journal insid clusternod jcr-757 ad support multipl consumers/produc attach journal order access journal howev o.a.j.core.cluster.clusternod allow access journal creat
nullpointerexcept may thrown tri enumer observ event listen call observationmanager.getregisteredeventlisten nullpointerexcept may thrown event listen regist yet reason clientobservationmanager.getregisteredeventlisten method intern field access direct creat demand thus may null
databas connect pool jackrabbit use databas connect pool instead singl connect per persist manag cluster journal databas data store
restart rmi-compon fail 's releas shutdown move setup model jackrabbit repositori tomcat-glob jndi-datasouc autonom server connect via rmi get rid problem total restart tomcat e.g someth chang jackrabbit setup restart rmi compon jackrabbit server packag fail shutdown rmi bind n't releas restart socket still use rmi compon fail start hand n't possibl connect server remain rmi compon ll get eof-except rmi communic cours complet restart tomcat help n't appropri look like releas shutdown miss may somebodi provid patch log except restart 20080306-093849.086 info ajp-8009-2 repositorystartupservlet creat registri java.rmi.server.exportexcept port alreadi use 1099 nest except java.net.bindexcept address alreadi use sun.rmi.transport.tcp.tcptransport.listen tcptransport.java:249 sun.rmi.transport.tcp.tcptransport.exportobject tcptransport.java:184 sun.rmi.transport.tcp.tcpendpoint.exportobject tcpendpoint.java:382 sun.rmi.transport.liveref.exportobject liveref.java:116 sun.rmi.server.unicastserverref.exportobject unicastserverref.java:180 sun.rmi.registry.registryimpl.setup registryimpl.java:92 sun.rmi.registry.registryimpl. init registryimpl.java:68 java.rmi.registry.locateregistry.createregistri locateregistry.java:222 org.apache.jackrabbit.j2ee.repositorystartupservlet.registerrmi repositorystartupservlet org.apache.jackrabbit.j2ee.repositorystartupservlet.startup repositorystartupservlet.java org.apache.jackrabbit.j2ee.repositorystartupservlet.init repositorystartupservlet.java:21 javax.servlet.genericservlet.init genericservlet.java:212
nullpointerexcept startup indexingqueu pend node happen newli introduc index version yet set indexingqueu instanci
typo repository.xml extractorpools paramet name trail white space make jackrabbit ignor
deadlock concurr commit/checkin oper run concurr jackrabbit transact includ checkin oper lead deadlock
repository.xml throw except error current unsupport paramet repository.xml workspace.xml ignor find problem earlier problem result except start repositori possibl happen unsupport valu current unavail option text extract filter class class classpath least warn written error log error thrown
configur similar similar implement index search configur
configurationexcept constructor packag privat configurationexcept constructor packag privat prevent reus packag eg extend configur
hide ugli repositori init code ocm hide repositori namespac registr ocm discrimin node type registr implement ocm
locktest.testlogout fail refresh session check lock session locktest.testlogout fail refresh session check lock state node lock anoth session propos insert n1.refresh fals asserttru node must lock n1.islock
data store garbag collect scaneventlisten work scaneventlisten current call use scan node recurs strategi call persist manag implement iterablepersistencemanag garbagecollector.scanpersistencemanag scaneventlisten call everi case otherwis possibl see progress garbag collect howev problem iterablepersistencemanager.getallnodeid n't return node object would make littl sens creat real node object perform advantag scanpersistencemanag would lost therefor propos workaround scaneventlisten call use pseudonod class implement node meaning getuuid tostr method allow creat meaning progress bar uuid return order
error regist nodetyp propdef supertyp error check pd.getrequiredtyp epd.getrequiredtyp pd.ismultipl epd.ismultipl conflict string msg properti definit name node type def.getdeclaringnodetyp conflict node type existingdef.getdeclaringnodetyp ambigu properti definit log.debug msg throw new nodetypeconflictexcept msg need invert
extend secur config repository-1.5.dtd along issu jcr-1171 'd like extend configur requir new version repository-1.5.dtd repositori dtd present jackrabbit-site/src/site/resources/dtd order new version repository.xml work proper see attach diff show differ recent repository-1.4.dtd nobodi object would put propos repository-1.5.dtd site done proper adjust repository.xml file uncom doctyp tag start commit new secur function angela
consist check fail derbypm bundl size exceed 32k due problem derbi derby-1486 interleav read bundl larger 32k result error error xj073 data blob clob longer avail blob clob transact may commit connect close issu alreadi address jcr-1039 fix consist check
inconsist version label remov execut random oper version storag came across situat version remov version label current behaviour jackrabbit imo correct version node get remov version label still present version histori mean referenc properti point nowher guess either version label properti must remov well version remov remov version oper fail version still referenc n't abl find relev section spec though must admit n't know version section well
restor base version throw nullpointerexcept happen oper enclos xa transact see test org.apache.jackrabbit.core.version.restoretest
incorrect link apach jackrabbit welcom homepag link jsr283 welcom text point http //jcp.org/en/jsr/detail id=170 instead http //jcp.org/en/jsr/detail id=283
perform random oper test discuss mail list jira issu make sens execut test perform random oper repositori help us detect concurr issu jackrabbit increas code coverag
patch n't use reflect form collect .toarray pass prototyp array collect .toarray small make toarray call expend alot effort use reflect 's job perform pass correct size prototyp patch
deadlock execut version oper happen xa transact commit without chang xaversionmanag check internalxaresourc return getxaresourcebegin acquir write lock version manag version relat chang transact kind check miss method xaversionmanager.prepare/commit/rollback
versionhistory.removevers throw referentialintegrityexcept insid xatransact immedi remov version creat checkin succeed even though fail referenti integr violat reason seem creat version return refer end transact fail referenti integr check shareditemstatemanag correct imo removevers fail first ad test case org.apache.jackrabbit.core.version.checkinremoveversiontest
jackrabbit web page scroll slow firefox visit http //jackrabbit.apache.org/ firefox ubuntu browser scroll slow make cpu go 100 problem seem fix attribut css background definit remov bodi background white url bg.png repeat-x fix center bottom font-famili verdana helvetica arial sans-serif font-siz small margin:0pt padding:0pt
move common node type function jackrabbit-spi-common jackrabbit-cor depend jackrabbit-spi-common would possibl common function share core jcr2spi spi-common project node type packag offer quit potenti
node.getrefer proper reflect save yet commit chang node.getrefer current return commit refer specif howev say quot level 2 implement may return properti save transact set includ properti save yet commit well properti commit level 2 implement may addit return properti ad within current session yet save /quot jackrabbit support latter least support first
introduc daili integr test suit time ago discuss integr test would run daili basi see also comment issu jcr-1452 seem reach consensus run daili integr test suit desir 's propos introduc test suit org.apache.jackrabbit.core.integration.daily.dailyintegrationtest includ test run daili basi configur continu integr system run test suit daili basi e.g mvn -dtest=dailyintegrationtest packag approach n't need introduc maven profil pom magic yet 's easi develop run daili test need
introduc timer idl time current timer stop intern thread soon task schedul usag pattern repeat schedul task immedi cancel one thread per schedul task creat idl time background thread stop
transient state persist depth-first travers order insid node.sav fill list transient modifi item node ad first transient transient descend node depth-first order lead follow problem shareabl node path-bas access manag 1 assum node n share child share least one node n' 2 s.removeshar invok remov list child node n 3 n.save invok n persist first s. path-bas access manag tri build path n persist longer return list remov child node entri except thrown circumv ad n last
node delet queri execut affect result size current queryresultimpl count result node invalid access check throw itemnotfoundexcept line 311 lead inconsist total size imo suffici count invalid client iter node line 555
patch updatetest two typo updatetest typo n't grab element array use array comparison patch fix
uuid check bundlefspersistencemanager.getlistrecurs lead endless loop uuid comparison getlistrecurs wrong lead endless loop test persistencemanageriteratortest.getallnodeid run workspac use bundlefspersistencemanag 'm sure alway happen sure workspac content root jcr system node 's also problem test case batch mode nodeid set last id return previous get node fetch mean batch retriev never actual test nodeid last one
make behaviour configur re-index detect workspac inconsist current queri handler throw except repositori start multipl option deal situat 1 fail repositori startup fail 2 ignor proceed 3 fix inconsist proceed 1 2 implement quit easili recent enhanc jcr-1428 3 also implement reason effort case error messag written log
root except log clusternod clusterexcept mysql server fail queri follow log error clusternode-node1 org.apache.jackrabbit.core.cluster.clusternod period sync journal fail unabl return record iterat root except sqlexcept case miss log prevent quick find reason
patch xpathquerybuild report mislead column number faulti queri xpathquerybuild return error string column offset pars error occur unfortun valu difficult correl user queri string xpathquerybuild embellish queri statement v statement return v patch append modifi statement queri messag user get real posit error
namespaceadder.addnamespac throw classcastexcept 's method public void addnamespac namespacemap nsm throw namespaceexcept unsupportedrepositoryoperationexcept repositoryexcept map m nsm.getprefixtourimap iter m.valu .iter i.hasnext map.entri e map.entri i.next string prefix string e.getkey string uri string e.getkey registry.registernamespac prefix uri entryset iter uri come valu patch fix occur spi-common jcr-common duplic code
incorrect decodedattributevalu abstractimportxmltest string liter correct escap later decod attribut valu use check import valu current odd test check encod attribut valu twice
error log repositori shut happen bundl derbypersistencemanag derbypersistencemanager.clos embed derbi databas shut super.clos call connectionrecoverymanag close tri oper connect alreadi shut derbi databas log contain entri like 25.03.2008 13:49:29 *error* thread-5 connectionrecoverymanag fail close connect reason current connection. state/cod 08003/40000 connectionrecoverymanager.java line 453
remov properti spi two way batch current provid two way delet properti similar jcr batch.remov batch.setvalu null jcr2spi current use afaik batch.remov propos clarifi qvalu argument setvalu must non-nul setvalu
journal log file rotat overwrit old file journal log file rotat follow journal.log.n journal.log n+1 list file rotat creat alphanumer sort order descend may destroy file follow situat journal.log.9 journal.log.10 journal.log.2 journal.log.3 journal.log.10 journal.log.11 journal.log.1 journal.log.2 i.e journal.log.10 overwritten journal.log.9 move
typo repository.xml 's anoth typo repository.xml basic jcr-1460 searchindex element bottom repository.xml
ms excel mime type miss msexceltextextractor msexceltextextractor listen mime type application/vnd.ms-excel store excel result mime type application/msexcel tag file index msexceltextextractor class regist mime type like mswordtextextractor
improv handl inherit mixin abstract class annot mixin type annot must repeat concret class e.g node jcrmixintypes= mix referenc isabstract=tru public abstract class content class referenc node extend=content.class public class page extend content one node extend=content.class jcrmixintypes= mix referenc public class folder extend content would nice annot inherit default
submiss amazon s3 persist manag project note previous dev-list http //markmail.org/search/ q=amazon+list 3aorg.apache.jackrabbit.dev queri amazon 20list 3aorg.apache.jackrabbit.dev+page:1+mid qw27gopsn4lnbde5+st result written amazon s3 bundl persist manag jackrabbit want submit code sandbox full sourc includ zip file licens asf project also aim implement normal persist manag abandon favor effici bundl pm implement work 100 file system impl s3 rough structur present spi impl connect s3 dream info includ readme.txt project welcom jackrabbit persist amazon webservic ie s3 modul contain various persist option use amazon webservic backend jackrabbit jcr amazon two persist servic s3 public simpledb still beta follow option available/idea 1 persist manag connect s3 normal bundl work probabl effici 2 persist manag connect simpledb feasibl 3 spi implement connect s3 implement complic probabl effici see detail also todo.txt instal test need patch jackrabbit 1.3.x version patch found directori patches-for-1.3 one patch modifi pom jackrabbit-cor generat jackrabbit test jar reus project build custom version need follow step 1 svn co http //svn.apache.org/repos/asf/jackrabbit/branches/1.3 jackrabbit-1.3 2 cd jackrabbit-1.3 3 appli patch patches-for-1.3 directori patch -p0 jr-amazon-path /patches-for-1.3/ patch .patch 4 mvn instal 5 cd jr-amazon-path 6 chang jackrabbit version number pom.xml one built eg project/parent/vers 1.3.4 7 cp aws.properties.templ aws.properti 8 enter credenti aws.properti 9 mvn test debug chang log applications/test/log4j.properti set proxi monitor traffic eg tcp mon applications/test/jets3t.properti detail implement 1 org.apache.jackrabbit.persistence.amazon.amazons3persistencemanag http //www.amazon.com/s3 store jcr node properti insid s3 object use uuid node uuid/nam properti object name node refer store via references/uuid configur paramet accesskey amazon aw access key aka account user id requir secretkey amazon aw secret key aka account password requir bucket name s3 bucket use option default use accesskey note bucket name global use accesskey recommend prevent conflict aw user objectprefix prefix use object name option default includ workspac name wsp.name version version pm put multipl workspac one bucket exampl xml config persistencemanag class= org.apache.jackrabbit.persistence.amazon.amazons3persistencemanag param name= accesskey value= abcde01234 param name= secretkey value= topsecret param name= bucket value= abcde01234.jcrstor param name= objectprefix value= wsp.name /persistencemanag 2 amazonsimpledbpersistencemanag *not* feasibl restrict appli simpledb item 256 attribut attribut contain string valu one 1024 char see link inform http //docs.amazonwebservices.com/amazonsimpledb/2007-11-07/developerguide/sdb_api_putattributes.html 3 org.apache.jackrabbit.spi2s3 todo lot work origin written alexand klimetschek alexander.klimetschek googlemail dot com 2008 see apach jackrabbit web site http //jackrabbit.apache.org/ document inform welcom join jackrabbit mail list http //jackrabbit.apache.org/mail-lists.html discuss compon use jackrabbit issu tracker http //issues.apache.org/jira/browse/jcr report issu request new featur apach jackrabbit project apach softwar foundat http //www.apache.org
patch verbos except messag batcheditemoper ad context except messag batcheditemoper aid debug
incorrect check replac import item collid id fix jcr-1128 bug introduc due incorrect check uuid behavior current code 201 existing.getid .equal id 202 uuidbehavior importuuidbehavior.import_uuid_collision_remove_exist 203 || uuidbehavior importuuidbehavior.import_uuid_collision_remove_exist 204 throw new itemexistsexcept existing.safegetjcrpath 205 check importuuidbehavior.import_uuid_collision_replace_exist one case line 202 203 also possibl id import item known therefor valu id variabl null check alway fail would nice case handl well
repositoryservice.checkin return inform newli creat version mismatch node.checkin return new version object repositoryservice.checkin return void client spi jcr2spi thus make addit request base version properti obvious drawback anoth call potenti caus race condit propos chang return code nodeid
spi javadoc issu qnodetypedefinit getpropertydef getchildnodedef javadoc mention method current state return array contain properti definit code null /code set default implement return empti array find much nicer nobodi object would fix javadoc accord
compactnodetypedefwrit use bad format residu properti compactnodetypedefwrit write instead residu properti
add compact namespac node type definit support spi-common add support read write compact namespac node type definit cnd-file spi-common
bundlefspersistencemanag properti call minblobs 2008-04-03 16:48:51 error org.apache.jackrabbit.core.repositoryimpl thread-237 fail start repositori instanti persist manag org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanag bean type org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanag properti call minblobs javax.jcr.repositoryexcept instanti persist manag org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanag bean type org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanag properti call minblobs bean type org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanag properti call minblobs org.apache.jackrabbit.core.repositoryimpl.createpersistencemanag repositoryimpl.java:1176 org.apache.jackrabbit.core.repositoryimpl.createversionmanag repositoryimpl.java:390 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:294 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:557 pps.jcr.util.repositorymanager.createrepositori repositorymanager.java:117 pps.jcr.util.repositorymanager.startrepositori repositorymanager.java:43 pps.jcr.ejb.session.jcrutilfacade.startrepositori jcrutilfacade.java:62 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 com.sun.enterprise.security.application.ejbsecuritymanager.runmethod ejbsecuritymanager.java:1067 com.sun.enterprise.security.securityutil.invok securityutil.java:176 com.sun.ejb.containers.basecontainer.invoketargetbeanmethod basecontainer.java:2895 com.sun.ejb.containers.basecontainer.intercept basecontainer.java:3986 com.sun.ejb.containers.ejblocalobjectinvocationhandler.invok ejblocalobjectinvocationhandler.java:197 com.sun.ejb.containers.ejblocalobjectinvocationhandlerdelegate.invok ejblocalobjectinvocationhandlerdelegate.java:127 proxy181.startrepositori unknown sourc pps.jcr.web.jcrlifecyclelistener.contextiniti jcrlifecyclelistener.java:55 org.apache.catalina.core.standardcontext.listenerstart standardcontext.java:4523 org.apache.catalina.core.standardcontext.start standardcontext.java:5184 com.sun.enterprise.web.webmodule.start webmodule.java:326 org.apache.catalina.core.containerbase.addchildintern containerbase.java:973 org.apache.catalina.core.containerbase.addchild containerbase.java:957 org.apache.catalina.core.standardhost.addchild standardhost.java:688 com.sun.enterprise.web.webcontainer.loadwebmodul webcontainer.java:1584 com.sun.enterprise.web.webcontainer.loadwebmodul webcontainer.java:1222 com.sun.enterprise.web.webcontainer.loadj2eeapplicationwebmodul webcontainer.java:1147 com.sun.enterprise.server.tomcatapplicationloader.doload tomcatapplicationloader.java:141 com.sun.enterprise.server.abstractloader.load abstractloader.java:244 com.sun.enterprise.server.applicationmanager.applicationdeploy applicationmanager.java:336 com.sun.enterprise.server.applicationmanager.applicationdeploy applicationmanager.java:210 com.sun.enterprise.server.applicationmanager.applicationdeploy applicationmanager.java:645 com.sun.enterprise.admin.event.admineventmulticaster.invokeapplicationdeployeventlisten admineventmulticaster.java:928 com.sun.enterprise.admin.event.admineventmulticaster.handleapplicationdeployev admineventmulticaster.java:912 com.sun.enterprise.admin.event.admineventmulticaster.processev admineventmulticaster.java:461 com.sun.enterprise.admin.event.admineventmulticaster.multicastev admineventmulticaster.java:176 com.sun.enterprise.admin.server.core.deploymentnotificationhelper.multicastev deploymentnotificationhelper.java:308 com.sun.enterprise.deployment.phasing.deploymentserviceutils.multicastev deploymentserviceutils.java:226 com.sun.enterprise.deployment.phasing.serverdeploymenttarget.sendstartev serverdeploymenttarget.java:298 com.sun.enterprise.deployment.phasing.applicationstartphase.runphas applicationstartphase.java:132 com.sun.enterprise.deployment.phasing.deploymentphase.executephas deploymentphase.java:108 com.sun.enterprise.deployment.phasing.pedeploymentservice.executephas pedeploymentservice.java:919 com.sun.enterprise.deployment.phasing.pedeploymentservice.start pedeploymentservice.java:591 com.sun.enterprise.deployment.phasing.pedeploymentservice.start pedeploymentservice.java:635 com.sun.enterprise.admin.mbeans.applicationsconfigmbean.start applicationsconfigmbean.java:744 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 com.sun.enterprise.admin.mbeanhelper.invokeoperationinbean mbeanhelper.java:375 com.sun.enterprise.admin.mbeanhelper.invokeoperationinbean mbeanhelper.java:358 com.sun.enterprise.admin.config.baseconfigmbean.invok baseconfigmbean.java:464 com.sun.jmx.interceptor.defaultmbeanserverinterceptor.invok defaultmbeanserverinterceptor.java:836 com.sun.jmx.mbeanserver.jmxmbeanserver.invok jmxmbeanserver.java:761 sun.reflect.generatedmethodaccessor19.invok unknown sourc sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 com.sun.enterprise.admin.util.proxy.proxyclass.invok proxyclass.java:90 proxy1.invok unknown sourc com.sun.enterprise.admin.server.core.jmx.sunoneinterceptor.invok sunoneinterceptor.java:304 com.sun.enterprise.interceptor.dynamicinterceptor.invok dynamicinterceptor.java:174 com.sun.enterprise.deployment.client.deploymentclientutils.startappl deploymentclientutils.java:145 com.sun.enterprise.deployment.client.deployaction.run deployaction.java:537 java.lang.thread.run thread.java:619 caus java.lang.illegalargumentexcept bean type org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanag properti call minblobs org.apache.commons.collections.beanmap.put beanmap.java:367 org.apache.jackrabbit.core.config.beanconfig.newinst beanconfig.java:109 org.apache.jackrabbit.core.repositoryimpl.createpersistencemanag repositoryimpl.java:1171 64 xml version= 1.0 repositori datastor class= org.apache.jackrabbit.core.data.filedatastor param name= path value= rep.hom /datastor param name= minrecordlength value= 100 /datastor filesystem class= org.apache.jackrabbit.core.fs.local.localfilesystem param name= path value= rep.hom /filesystem secur appname= jackrabbit accessmanag class= org.apache.jackrabbit.core.security.simpleaccessmanag loginmodul class= org.apache.jackrabbit.core.security.simpleloginmodul param name= anonymousid value= anonym /loginmodul /secur workspac rootpath= rep.hom /workspac defaultworkspace= default workspac name= wsp.name filesystem class= org.apache.jackrabbit.core.fs.local.localfilesystem param name= path value= rep.hom wsp.name /filesystem persistencemanag class= org.apache.jackrabbit.core.persistence.obj.objectpersistencemanag persistencemanag class= org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanag param name= bundlecaches value= 8 param name= blobfsblocks value= 0 param name= minblobs value= 4096 param name= errorhandl value= /persistencemanag searchindex class= org.apache.jackrabbit.core.query.lucene.searchindex param name= path value= wsp.home /index param name= textfilterclass value= org.apache.jackrabbit.extractor.msexceltextextractor org.apache.jackrabbit.extractor.mspowerpointtextextractor org.apache.jackrabbit.extractor.mswordtextextractor org.apache.jackrabbit.extractor.pdftextextractor org.apache.jackrabbit.extractor.plaintextextractor org.apache.jackrabbit.extractor.htmltextextractor org.apache.jackrabbit.extractor.xmltextextractor org.apache.jackrabbit.extractor.rtftextextractor org.apache.jackrabbit.extractor.openofficetextextractor /searchindex /workspac version rootpath= rep.hom /version filesystem class= org.apache.jackrabbit.core.fs.local.localfilesystem param name= path value= rep.hom /version /filesystem persistencemanag class= org.apache.jackrabbit.core.persistence.obj.objectpersistencemanag persistencemanag class= org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanag param name= bundlecaches value= 8 param name= blobfsblocks value= 0 param name= minblobs value= 4096 param name= errorhandl value= /persistencemanag /version searchindex class= org.apache.jackrabbit.core.query.lucene.searchindex param name= path value= rep.hom /index param name= textfilterclass value= org.apache.jackrabbit.extractor.msexceltextextractor org.apache.jackrabbit.extractor.mspowerpointtextextractor org.apache.jackrabbit.extractor.mswordtextextractor org.apache.jackrabbit.extractor.pdftextextractor org.apache.jackrabbit.extractor.plaintextextractor org.apache.jackrabbit.extractor.htmltextextractor org.apache.jackrabbit.extractor.xmltextextractor org.apache.jackrabbit.extractor.rtftextextractor org.apache.jackrabbit.extractor.openofficetextextractor /searchindex /repositori
property.getlength return -1 boolean refer date valu seem three simpli miss propertyimpl.getlength
databasefilesystem 's logger refer wrong class databasefilesystem logger construct privat static logger log loggerfactory.getlogg dbfilesystem.class construct privat static logger log loggerfactory.getlogg databasefilesystem.class
patch png apng mng text extractor text extractor text chunk png apng mng format
patch test use 12 month invalid test creat calendar 12 month invalid decemb 11 use calendar.decemb instead patch fix
jackrabbit depend oracl driver blob support oracl version previous 10.2 oracl version previous 10.2 jackrabbit explicit use class oracl driver provid blob support see oraclefilesystem.init special handl longer necesari oracl 10.2+ provid new implement discuss list creat new class oracl 10.2+ make inherit dbfilesystem overrid createschema tabl space relat method one need special handl furthermor could refactor current oraclefilesystem break two clase one keep current behavior new one keep common code could renam oraclebasefilesystem similar maintain compatibl code use oraclefilesystem version previous 10.2 make oracle10filesystem inherit latter
various improv path pathimpl various issu path pathimpl follow patch address fix problem normal path pathimpl fix handl relat path pathimpl fix wrong return valu depth ancestor count pathimpl ad method determin equival path pathimpl fix subpath method pathimpl clarifi blurri contract path ad mani new test case mani fix credit due angela
support maxdb sapsb databas admit maxdb sapsb bit exot support easi achiev provid correct ddls
clone -manageablecollectionutil n't support map manageablecollectionutil two getmanageablecollect method current return manageablecollect wrap map managedhashmap alreadi exist codebas assum creat purpos getmanageablecollect method could modifi someth like object instanceof map return new managedhashmap map object altern solut might modifi jcr map support explicit defin managedxxx class
mspowerpointtextextractor extract ppts € sign mspowerpointtextextractor class problem read ppts € sign contain text follow sign ignor perhap poi powerpointextractor use instead pars data hand side effect would simpli code extract could done follow public reader extracttext inputstream stream string type string encod throw ioexcept tri powerpointextractor extractor new powerpointextractor stream return new stringread extractor.gettext true true catch runtimeexcept e logger.warn fail extract powerpoint text content e return new stringread final tri stream.clos catch ioexcept ignor
patch add column line number repository.xml pars except messag code caught saxexcept xml pars except occur pars repository.xml catch saxparseexcept subclass allow access column line number problem also catch except add except messag make easier fix error
error 40xd0 contain close except derbi db seem similar jcr-1039 get 1.4 use regular databasepersistencemanag fix jcr-1039 1.3.3 merg 1.4.x relev part except info jvm 1 2008/04/10 14:00:37 caus javax.jcr.repositoryexcept fail retriev item state item fb648866-a236-42aa-8039-df68f26dd2ad/ http //www.jcp.org/jcr/1.0 data fail read properti state fb648866-a236-42aa-8039-df68f26dd2ad/ http //www.jcp.org/jcr/1.0 data fail read properti state fb648866-a236-42aa-8039-df68f26dd2ad/ http //www.jcp.org/jcr/1.0 data info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.itemmanager.createiteminst itemmanager.java:570 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:395 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.nodeimpl.getproperti nodeimpl.java:2553 info jvm 1 2008/04/10 14:00:37 org.artifactory.jcr.jcrfile.getstream jcrfile.java:133 info jvm 1 2008/04/10 14:00:37 55 info jvm 1 2008/04/10 14:00:37 caus org.apache.jackrabbit.core.state.itemstateexcept fail read properti state fb648866-a236-42aa-8039-df68f26dd2ad/ http //www.jcp.org/jcr/1.0 data info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.load databasepersistencemanager.java:406 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.state.shareditemstatemanager.loaditemst shareditemstatemanager.java:1161 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.state.shareditemstatemanager.getnonvirtualitemst shareditemstatemanager.java:1086 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.state.shareditemstatemanager.getitemst shareditemstatemanager.java:248 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.state.localitemstatemanager.getpropertyst localitemstatemanager.java:118 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.state.localitemstatemanager.getitemst localitemstatemanager.java:150 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.state.xaitemstatemanager.getitemst xaitemstatemanager.java:226 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.state.sessionitemstatemanager.getitemst sessionitemstatemanager.java:175 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.itemmanager.createiteminst itemmanager.java:564 info jvm 1 2008/04/10 14:00:37 58 info jvm 1 2008/04/10 14:00:37 caus javax.jcr.repositoryexcept error creat temporari file error 40xd0 contain close error 40xd0 contain close info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.value.blobintempfile. init blobintempfile.java:69 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.value.blobintempfile.getinst blobintempfile.java:103 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.value.internalvalue.getblobfilevalu internalvalue.java:630 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.value.internalvalue.cr internalvalue.java:265 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.persistence.util.serializer.deseri serializer.java:296 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.load databasepersistencemanager.java:397 info jvm 1 2008/04/10 14:00:37 66 info jvm 1 2008/04/10 14:00:37 caus java.io.ioexcept error 40xd0 contain close info jvm 1 2008/04/10 14:00:37 org.apache.derby.impl.store.raw.data.overflowinputstream.fillbytehold unknown sourc info jvm 1 2008/04/10 14:00:37 org.apache.derby.impl.store.raw.data.bufferedbyteholderinputstream.read unknown sourc info jvm 1 2008/04/10 14:00:37 java.io.datainputstream.read datainputstream.java:132 info jvm 1 2008/04/10 14:00:37 java.io.filterinputstream.read filterinputstream.java:116 info jvm 1 2008/04/10 14:00:37 java.io.filterinputstream.read filterinputstream.java:116 info jvm 1 2008/04/10 14:00:37 java.io.sequenceinputstream.read sequenceinputstream.java:191 info jvm 1 2008/04/10 14:00:37 java.io.inputstream.read inputstream.java:85 info jvm 1 2008/04/10 14:00:37 org.apache.jackrabbit.core.value.blobintempfile. init blobintempfile.java:61 info jvm 1 2008/04/10 14:00:37 71
updat poi depend 3.0.2-final 3.0.2-final recent poi releas
use poiextractor wherev possibl poi scratchpad come coupl text extractor util make easier extract text rather use util write extractor code help avoid issu like jcr-1530
test assum implement javax.jcr.item overrid equal follow 3 test follow line number contain bad assert org.apache.jackrabbit.test.api.referencestest.testreferencetarget:135 org.apache.jackrabbit.test.api.referencestest.testalterreference:169 org.apache.jackrabbit.test.api.version.versionhistorytest:152 assum implement javax.jcr.item overrid equal assert.assertequ n1 n2 java.util.set.contain n1 work two equal node n1 n2 node n1 previous put set howev section specif would mandat test therefor replac assertequ one mechan offici support javax.jcr.node.issam
index alreadi present except open restor repositori creat new repositori ad one node copi file jackrabbit run close repositori restor backup tri open repositori unfortun result follow except javax.jcr.repositoryexcept index alreadi present index alreadi present index alreadi present org.apache.jackrabbit.core.searchmanager.initializequeryhandl searchmanager.java:575 org.apache.jackrabbit.core.searchmanager. init searchmanager.java:255 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.getsearchmanag repositoryimpl.java:1613 org.apache.jackrabbit.core.repositoryimpl.initworkspac repositoryimpl.java:606 backup contain follow index file workspaces/default/index/redo.log file directori file directori also _n directori content redo.log -1 str -1 add cafebabe-cafe-babe-cafe-babecafebab -1 com 0 str 0 del cafebabe-cafe-babe-cafe-babecafebab 0 add fa87759b-f9fe-4ba8-986c-d1914ffce3d 0 add eda04b36-9c21-4712-bedf-206c36f0e3d2 0 add ae917cca-a0bb-4ac0-a16d-805aac6c7b10 0 add cafebabe-cafe-babe-cafe-babecafebab 0 com 1 str 1 add 0121f271-bbe7-4f71-a793-5f4380f3c487 1 com
classdescriptor.hasidfield fail id declar upper class org.apache.jackrabbit.ocm.mapper.model.classdescriptor.hasidfield look current class whole hierarchi fail id field declar upper class hasidfield use getidfielddescriptor access idfielddescriptor field direct follow public boolean hasidfield return this.getidfielddescriptor null .getidfielddescriptor .isid pleas find patch enclos sincer stéphane landell
patch add tostr nodeimpl propertyimpl add tostr nodeimpl propertyimpl new format see like ad
spi get rid unus method iteminfo.getparentid look various spi impl trunk sandbox reveal iteminfo.getparentid use 'd like suggest get rid method objections/concern angela
bundledbpersistencemanager.checkconsist fix inconsist consistencyfix enabl configur method paramet explicit tell whether inconsist fix thus configur paramet ignor suggest patch index bundledbpersistencemanager.java bundledbpersistencemanager.java revis 648657 +++ bundledbpersistencemanager.java work copi -864,7 +864,7 repair collect broken bundl consistencyfix modifications.isempti fix modifications.isempti log.info name fix modifications.s inconsist bundl iter iter modifications.iter iterator.hasnext
evict fix nodepropbundl cach bundledbpersistencemanag store back fix nodepropbundl checkconsist invalid cach may potenti contain cach version nodepropbundl
improv reliabl canaddmixin current implement canaddmixin jcr2spi lack flexibl consult spi node type registri check 1 whether mixin exist 2 whether alreadi present 3 whether 's consist node 's type fine store legal mixin ad anywher n't work well store limit instanc nt file node made mix version nt folder node ca n't propos enhanc qnodetypedefinit public name getsupportedmixin return valu either null constraint constraint known list mixin type support node type
webapp troubleshooting.jsp fail
h2persistencemanag need call shutdown javadoc bug h2persistencemanag implement call shutdown forc close databas use file base databas need use h2 databas engin databas close automat last connect close also javadoc h2persistencemanag need fix
jcr2spi remov depend state-packag within nodetyp packag
sever bug last svn commit bug last svn commit sinc work thought use mention 1 org.apache.jackrabbit.ocm.reflection.reflectionutil handl set add defaultimplement 2 org.apache.jackrabbit.ocm.manager.collectionconverter.manageableobjectsutil.getmanageableobject correct defaultimplement test defaultimplement null throw new jcrmappingexcept default implement interfac manageableobjectsclass thank keep good work sincer stephan
remov iteminfo.getnam sinc redund propos remov method getnam org.apache.jackrabbit.spi.iteminfo sinc redund name alway last element path avail via getpath method
transientrepositori applic n't exit quick use transientrepositori repositori close last session log work case long 60 second delay close last session close repositori test case public static void main string arg throw except repositori repositori new transientrepositori session session repository.login new simplecredenti new char 0 session.getrootnod .setproperti 0 session.sav quick logout without line session.logout system.out.println logout final long time system.currenttimemilli runtime.getruntim .addshutdownhook new thread public void run system.out.println end system.currenttimemilli time
clusternod proper shutdown repositori shutdown sometim repositori shutdown clusternod shutdown therefor tri updat record access close journal file setup generat except 3 vms repositori connect databas stack trace one repositori shutdown howev clusternod thread also tri updat repositori journal time copi stack trace 4/23/08 9:58:52:496 cdt 00000061 systemout o 89811653 webcontain 2 info org.apache.jackrabbit.core.repositoryimpl shut repositori 4/23/08 9:58:52:511 cdt 0000054c systemout o 89811621 clusternode-b06e4fe7-a602-4a93-b106-e0834046ae0f info org.apache.jackrabbit.core.cluster.clusternod process revis 7174 4/23/08 9:58:52:527 cdt 00000061 systemout o 89811684 webcontain 2 info org.apache.jackrabbit.core.repositoryimpl shut workspac default 4/23/08 9:58:52:574 cdt 00000061 systemout o 89811715 webcontain 2 info org.apache.jackrabbit.core.observation.observationdispatch notif eventlisten stop 4/23/08 9:58:53:058 cdt 00000061 systemout o 89812215 webcontain 2 info org.apache.jackrabbit.core.repositoryimpl workspac default shutdown 4/23/08 9:58:53:308 cdt 00000308 systemout o 91641048 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7165 4/23/08 9:58:53:324 cdt 00000308 systemout o 91641064 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7166 4/23/08 9:58:53:324 cdt 00000308 systemout o 91641064 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7167 4/23/08 9:58:53:339 cdt 00000308 systemout o 91641079 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7168 4/23/08 9:58:53:339 cdt 00000308 systemout o 91641079 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7169 4/23/08 9:58:53:355 cdt 00000308 systemout o 91641095 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7170 4/23/08 9:58:53:371 cdt 00000308 systemout o 91641111 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7171 4/23/08 9:58:53:386 cdt 00000308 systemout o 91641126 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7172 4/23/08 9:58:53:417 cdt 00000308 systemout o 91641157 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7173 4/23/08 9:58:53:433 cdt 00000308 systemout o 91641173 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7174 4/23/08 9:58:53:433 cdt 00000308 systemout o 91641173 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.cluster.clusternod process revis 7175 4/23/08 9:58:53:496 cdt 00000308 systemout o 91641236 clusternode-e609e8a6-320e-44ea-be0f-ab8c5cb89662 info org.apache.jackrabbit.core.journal.abstractjourn synchron revis 7175 4/23/08 9:58:54:292 cdt 00000131 systemout o 89171473 clusternode-4930503b-ab33-4444-999e-c87fb3681bf7 info org.apache.jackrabbit.core.cluster.clusternod process revis 7173 4/23/08 9:58:54:308 cdt 00000131 systemout o 89171504 clusternode-4930503b-ab33-4444-999e-c87fb3681bf7 info org.apache.jackrabbit.core.cluster.clusternod process revis 7174 4/23/08 9:58:54:308 cdt 00000131 systemout o 89171504 clusternode-4930503b-ab33-4444-999e-c87fb3681bf7 info org.apache.jackrabbit.core.cluster.clusternod process revis 7175 4/23/08 9:58:54:386 cdt 00000131 systemout o 89171582 clusternode-4930503b-ab33-4444-999e-c87fb3681bf7 info org.apache.jackrabbit.core.journal.abstractjourn synchron revis 7175 4/23/08 9:58:55:417 cdt 00000061 systemout o 89814574 webcontain 2 info org.apache.jackrabbit.core.repositoryimpl repositori shutdown 4/23/08 9:58:56:089 cdt 0000054c systemout o 89815199 clusternode-b06e4fe7-a602-4a93-b106-e0834046ae0f error org.apache.jackrabbit.core.cluster.clusternod unabl read revis 7174 org.apache.jackrabbit.core.journal.journalexcept i/o error read string org.apache.jackrabbit.core.journal.readrecord.readstr readrecord.java:169 org.apache.jackrabbit.core.cluster.clusternode.consum clusternode.java:979 org.apache.jackrabbit.core.journal.abstractjournal.dosync abstractjournal.java:198 org.apache.jackrabbit.core.journal.abstractjournal.sync abstractjournal.java:173 org.apache.jackrabbit.core.cluster.clusternode.sync clusternode.java:303 org.apache.jackrabbit.core.cluster.clusternode.run clusternode.java:274 java.lang.thread.run thread.java:797 caus java.io.ioexcept close connect oracle.jdbc.driver.databaseerror.sqltoioexcept databaseerror.java:517 oracle.jdbc.driver.oracleblobinputstream.needbyt oracleblobinputstream.java:187 oracle.jdbc.driver.oraclebufferedstream.readintern oraclebufferedstream.java:130 oracle.jdbc.driver.oraclebufferedstream.read oraclebufferedstream.java:108 java.io.datainputstream.readboolean datainputstream.java:246 org.apache.jackrabbit.core.journal.readrecord.readstr readrecord.java:161 6 4/23/08 9:58:56:261 cdt 0000054c systemout o 89815355 clusternode-b06e4fe7-a602-4a93-b106-e0834046ae0f error org.apache.jackrabbit.core.journal.databasejourn error move next record java.sql.sqlexcept close connect next oracle.jdbc.driver.databaseerror.throwsqlexcept databaseerror.java:112 oracle.jdbc.driver.databaseerror.throwsqlexcept databaseerror.java:146 oracle.jdbc.driver.oracleresultsetimpl.next oracleresultsetimpl.java:181 org.apache.jackrabbit.core.journal.databaserecorditerator.fetchrecord databaserecorditerator.java:136 org.apache.jackrabbit.core.journal.databaserecorditerator.hasnext databaserecorditerator.java:85 org.apache.jackrabbit.core.journal.abstractjournal.dosync abstractjournal.java:190 org.apache.jackrabbit.core.journal.abstractjournal.sync abstractjournal.java:173 org.apache.jackrabbit.core.cluster.clusternode.sync clusternode.java:303 org.apache.jackrabbit.core.cluster.clusternode.run clusternode.java:274 java.lang.thread.run thread.java:797 4/23/08 9:58:56:402 cdt 0000054c systemout o 89815418 clusternode-b06e4fe7-a602-4a93-b106-e0834046ae0f warn org.apache.jackrabbit.core.cluster.clusternod unabl set current revis 7174. org.apache.jackrabbit.core.journal.journalexcept revis file close org.apache.jackrabbit.core.journal.filerevision.set filerevision.java:100 org.apache.jackrabbit.core.cluster.clusternode.setrevis clusternode.java:1073 org.apache.jackrabbit.core.journal.abstractjournal.dosync abstractjournal.java:211 org.apache.jackrabbit.core.journal.abstractjournal.sync abstractjournal.java:173 org.apache.jackrabbit.core.cluster.clusternode.sync clusternode.java:303 org.apache.jackrabbit.core.cluster.clusternode.run clusternode.java:274 java.lang.thread.run thread.java:797
staleitemstateexcept distribut transact seam serious bug jackrabbit use distribut transact occur local transact seam relat jcr-566 2 scenario staleitemstateexcept occur reproduc caus transact fail oper implement custom servicebean setproperti deletenod run separ transact transact configur spring annot transact scenario setproperti 1 multipl setproperti properti name node newli creat alreadi exist 3. setproperti sometim also 5 staleitemstateexcept properti state rais transact commit follow setproperti invoc fail scenario b deletenod 1 iter 10 time 1.1 creat new node n subnod n 1.2 delet node n delet node n rais staleitemstateexcept node n iter 1 3 6 7 relat transact commit follow delet node n also fail predict pattern except trace scenario 's scenario b one differ staleitemstateexcept rais node properti org.springframework.transaction.unexpectedrollbackexcept jta transact unexpect roll back mayb due timeout nest except javax.transaction.rollbackexcept error one-phas commit org.springframework.transaction.jta.jtatransactionmanager.docommit jtatransactionmanager.java:1031 org.springframework.transaction.support.abstractplatformtransactionmanager.processcommit abstractplatformtransactionmanager.java:709 org.springframework.transaction.support.abstractplatformtransactionmanager.commit abstractplatformtransactionmanager.java:678 org.springframework.transaction.interceptor.transactionaspectsupport.committransactionafterreturn transactionaspectsupport.java:321 org.springframework.transaction.interceptor.transactioninterceptor.invok transactioninterceptor.java:116 org.springframework.aop.framework.reflectivemethodinvocation.proce reflectivemethodinvocation.java:171 org.springframework.aop.framework.jdkdynamicaopproxy.invok jdkdynamicaopproxy.java:204 proxy9.setnodeproperti unknown sourc de.zeb.control.prototype.jrtxbug.test.testjackrabbittxbug.testtransactionbug001 testjackrabbittxbug.java:97 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 org.testng.internal.methodhelper.invokemethod methodhelper.java:580 org.testng.internal.invoker.invokemethod invoker.java:478 org.testng.internal.invoker.invoketestmethod invoker.java:607 org.testng.internal.invoker.invoketestmethod invoker.java:874 org.testng.internal.testmethodworker.invoketestmethod testmethodworker.java:125 org.testng.internal.testmethodworker.run testmethodworker.java:109 org.testng.testrunner.runwork testrunner.java:689 org.testng.testrunner.privaterun testrunner.java:566 org.testng.testrunner.run testrunner.java:466 org.testng.suiterunner.runtest suiterunner.java:301 org.testng.suiterunner.runsequenti suiterunner.java:296 org.testng.suiterunner.privaterun suiterunner.java:276 org.testng.suiterunner.run suiterunner.java:191 org.testng.testng.createandrunsuiterunn testng.java:808 org.testng.testng.runsuitesloc testng.java:776 org.testng.testng.run testng.java:701 org.testng.remote.remotetestng.run remotetestng.java:73 org.testng.remote.remotetestng.main remotetestng.java:124 caus javax.transaction.rollbackexcept error one-phas commit org.apache.geronimo.transaction.manager.transactionimpl.commit transactionimpl.java:281 org.apache.geronimo.transaction.manager.transactionmanagerimpl.commit transactionmanagerimpl.java:143 org.apache.geronimo.transaction.context.inheritabletransactioncontext.complet inheritabletransactioncontext.java:196 org.apache.geronimo.transaction.context.inheritabletransactioncontext.commit inheritabletransactioncontext.java:146 org.apache.geronimo.transaction.context.onlineusertransaction.commit onlineusertransaction.java:80 org.jencks.factory.usertransactionfactorybean geronimousertransaction.commit usertransactionfactorybean.java:118 org.springframework.transaction.jta.jtatransactionmanager.docommit jtatransactionmanager.java:1028 30 caus javax.transaction.xa.xaexcept org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:155 org.apache.jackrabbit.core.xasessionimpl.commit xasessionimpl.java:337 org.apache.jackrabbit.jca.transactionboundxaresource.commit transactionboundxaresource.java:39 org.apache.geronimo.transaction.manager.wrappernamedxaresource.commit wrappernamedxaresource.java:47 org.apache.geronimo.transaction.manager.transactionimpl.commit transactionimpl.java:272 36 caus org.apache.jackrabbit.core.transactionexcept unabl prepar transact org.apache.jackrabbit.core.state.xaitemstatemanager.prepar xaitemstatemanager.java:150 org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:138 40 caus org.apache.jackrabbit.core.state.staleitemstateexcept bef3c056-bc91-4195-a35c-aa184182b5ad/ test_properti modifi extern org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:620 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:843 org.apache.jackrabbit.core.state.xaitemstatemanager.prepar xaitemstatemanager.java:144 41 debug jackrabbit see caus staleitemstateexcept local state und overlay state differ valu modcount attribut modcount local state lower modcount overlay state perhap state cach problem 'm attach simpl java applic configur maven readi run standalon jca contain jboss therefor replac jenck order support distribut transact configur repositori use inmempersistencemanag scenario implement testng test catch occur transactionexcept print stacktrac therefor see except test fail
add support boolean valu qvalu suggest add support read write boolean valu qvalu qvaluefactori find strang support data type boolean must construct via string
persistencemanag api chang break backward compat persist manag api chang introduc jcr-1428 break backward compat although public visibl api render 3rd parti pms invalid extend abstractpersistencemanag least 1.4.3 patch releas suggest revert api chang next 1.4.4 releas leav method abstract pm introduc 1.5
avoid except shut repositori sever pms/fss use db accord doc forum discuss 's legal use db differ filesystems/persist manag configur seem work fine repositori stop except produc like follow sever error close version manag java.sql.sqlnontransientconnectionexcept current connect org.apache.derby.impl.jdbc.sqlexceptionfactory40.getsqlexcept unknown sourc org.apache.derby.impl.jdbc.util.newembedsqlexcept unknown sourc org.apache.derby.impl.jdbc.util.newembedsqlexcept unknown sourc org.apache.derby.impl.jdbc.util.nocurrentconnect unknown sourc org.apache.derby.impl.jdbc.embedconnection.checkifclos unknown sourc org.apache.derby.impl.jdbc.embedconnection.getmetadata unknown sourc org.apache.jackrabbit.core.persistence.db.derbypersistencemanager.closeconnect derbypersistencemanager.java:109 org.apache.jackrabbit.core.persistence.db.databasepersistencemanager.clos databasepersistencemanager.java:261 org.apache.jackrabbit.core.version.versionmanagerimpl.clos versionmanagerimpl.java:201 org.apache.jackrabbit.core.repositoryimpl.doshutdown repositoryimpl.java:1000 org.apache.jackrabbit.core.repositoryimpl.shutdown repositoryimpl.java:948 org.apache.jackrabbit.core.transientrepository.stoprepositori transientrepository.java:275 org.apache.jackrabbit.core.transientrepository.loggedout transientrepository.java:427 org.apache.jackrabbit.core.sessionimpl.notifyloggedout sessionimpl.java:574 org.apache.jackrabbit.core.sessionimpl.logout sessionimpl.java:1247 org.apache.jackrabbit.core.xasessionimpl.logout xasessionimpl.java:403 com.blandware.tooling.jcrplugin.exportmojo.execut exportmojo.java:81 org.apache.maven.plugin.defaultpluginmanager.executemojo defaultpluginmanager.java:447 org.apache.maven.lifecycle.defaultlifecycleexecutor.executego defaultlifecycleexecutor.java:539 org.apache.maven.lifecycle.defaultlifecycleexecutor.executestandalonego defaultlifecycleexecutor.java:493 org.apache.maven.lifecycle.defaultlifecycleexecutor.executego defaultlifecycleexecutor.java:463 org.apache.maven.lifecycle.defaultlifecycleexecutor.executegoalandhandlefailur defaultlifecycleexecutor.java:311 org.apache.maven.lifecycle.defaultlifecycleexecutor.executetaskseg defaultlifecycleexecutor.java:278 org.apache.maven.lifecycle.defaultlifecycleexecutor.execut defaultlifecycleexecutor.java:143 org.apache.maven.defaultmaven.doexecut defaultmaven.java:333 org.apache.maven.defaultmaven.execut defaultmaven.java:126 org.apache.maven.cli.mavencli.main mavencli.java:282 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 org.codehaus.classworlds.launcher.launchenhanc launcher.java:315 org.codehaus.classworlds.launcher.launch launcher.java:255 org.codehaus.classworlds.launcher.mainwithexitcod launcher.java:430 org.codehaus.classworlds.launcher.main launcher.java:375 caus java.sql.sqlexcept current connect org.apache.derby.impl.jdbc.sqlexceptionfactory.getsqlexcept unknown sourc org.apache.derby.impl.jdbc.sqlexceptionfactory40.wrapargsfortransportacrossdrda unknown sourc 35
null pointer except look davproperti n't set null pointer except except occur davpropertyset.map contain expect entri itemresourceconstants.jcr_nam suggest fix add constant nameset repositoryserviceimpl.java:760 nameset.add itemresourceconstants.jcr_nam tri work see stack trace except thread main java.lang.nullpointerexcept org.apache.jackrabbit.spi2dav.uriresolverimpl.buildpropertyid uriresolverimpl.java:201 org.apache.jackrabbit.spi2dav.repositoryserviceimpl.getnodeinfo repositoryserviceimpl.java:808 org.apache.jackrabbit.spi2dav.repositoryserviceimpl.getiteminfo repositoryserviceimpl.java:834 org.apache.jackrabbit.jcr2spi.state.workspaceitemstatefactory.createnodest workspaceitemstatefactory.java:88 org.apache.jackrabbit.jcr2spi.state.transientisfactory.createnodest transientisfactory.java:99 org.apache.jackrabbit.jcr2spi.hierarchy.nodeentryimpl.doresolv nodeentryimpl.java:959 org.apache.jackrabbit.jcr2spi.hierarchy.hierarchyentryimpl.resolv hierarchyentryimpl.java:95 org.apache.jackrabbit.jcr2spi.hierarchy.hierarchyentryimpl.getitemst hierarchyentryimpl.java:212 org.apache.jackrabbit.jcr2spi.itemmanagerimpl.getitem itemmanagerimpl.java:157 org.apache.jackrabbit.jcr2spi.sessionimpl.getrootnod sessionimpl.java:225
data store oracl fail creat tabl use oracl databas follow except occur tri creat tabl ora.00902 invalid datatyp problem oracl n't support data type bigint instead long use
new msoutlook messag extractor sins use poi 3.0.2 use outlook messag extractor
jndi data sourc various persistencemanag wrong default valu jcr-1305 jackrabbit support creat connect throug jndi datasourc without configur user password work provid persistencemanag like oracle-specif bundledbpersistencemanag set default valu user password none provid jackrabbit config way imposs use persistencemanag plain jndi ds concern follow bundledbpersistencemanag oraclepersistencemanag derbypersistencemanag h2persistencemanag also might pms perhap special simpledbpersistencemanag similar behaviour
data store utfdataformatexcept use larg minrecordlength use valu larger 33000 minrecordlength tri store valu 33000 byte follow except thrown utfdataformatexcept reason valu serial use dataoutputstream.writeutf size limit 65 k use method small entri hex encod prefix limit minrecordlength 32000 problem filedatastor dbdatastor
jsr 283 namespac handl jsr 283 make namespac handl flexibl user-friend less except unexpect map chang session etc. chang most compliant jsr 170 implement alreadi jackrabbit 1.x todo jsr 283 namespac handl relat tck test
jsr 283 lifecycl manag jsr 283 specifi simpl lifecycl manag mechan node refer implement implement featur also need implement relat tck test featur introduc new api method jackrabbit 1.x introduc custom jsr-283 api extens
data store db2 fail creat tabl db2 throw except 1 creat tabl correct sql sentenc creat createtable=cr tabl tableprefix tabl id varchar 255 primari key null length bigint last_modifi bigint data blob 1000m 1 sorri n't except inform sinc made chang week ago
upgrad pdfbox 0.7.3 tri upload pdf document view fine acrobat reader load get follow except 01.05.2008 12:24:44 *warn pdftextextractor fail extract pdf text content pdftextextractor.java line 91 java.io.ioexcept error expect integ type actual= eof org.pdfbox.pdfparser.baseparser.readint baseparser.java:1159 org.pdfbox.pdfparser.pdfparser.parseobject pdfparser.java:349 org.pdfbox.pdfparser.pdfparser.pars pdfparser.java:132 org.apache.jackrabbit.extractor.pdftextextractor.extracttext pdftextextractor.java:69 org.apache.jackrabbit.extractor.compositetextextractor.extracttext compositetextextractor.java:90 org.apache.jackrabbit.core.query.lucene.jackrabbittextextractor.extracttext jackrabbittextextractor.java:195 org.apache.jackrabbit.core.query.lucene.nodeindexer.addbinaryvalu nodeindexer.java:393 replac version pdfbox 0.6.4 bundl jackrabbit war file recent version 0.7.3 fontbox 01 work fine bundl version upgrad hand softwar appear inact probabl differ packag select long run simpl upgrad trick
patch better except messag generat schema statement fail execut generat schema patch output statement fail
davmethodbas getresponseexcept fail bodi valid xml set use jcr webdav server custom remot client ve notic one thing anytim request node n't exist error come back server follow fatal error :1:941 element type hr must termin match end-tag /hr javax.jcr.repositoryexcept element type hr must termin match end-tag /hr element type hr must termin match end-tag /hr n't realli make sens ok handl problem partial popul repositori root node like /edu/ /com/ibm/.. want creat node type nt folder com/mycompany/folder1 problem creat sinc com alreadi exist end com 2 /mycompany/folder1 went ahead use parentnode.hasnod foldernam method method return true com portion test mycompani folder return fals get error respons shown server webdav request look follow propfind /jackrabbit/server/default/jcr 3aroot/com/mycompani snippet code look follow privat node createfold session session node parentnod list string folder throw repositoryexcept node foldernod null string folder folder parentnode.hasnod folder foldernod parentnode.getnod folder els foldernod parentnode.addnod folder nt folder parentnod foldernod session.sav return foldernod
dbdatastor connect alway reconnect dbdatastor connect close due error subsequ addrecord call fail connect close autoreconnect fals getrecord call connect reconnect addrecord succeed connect valid set autoreconnect fals retriev pool
lucen queri except attempt access delet document hi get except tri execut queri spring jcrtemplat class .use follow code querymanag qmgr session.getworkspac .getquerymanag queryresult result qmgr.createqueri xpathqueri query.xpath .execut except thrown second line follow debug 0x9 org.apache.lucene.search.indexsearcher.search indexsearcher.java:113 \n debug 0x9 org.apache.lucene.search.hits.getmoredoc hits.java:74 \n debug 0x9 org.apache.lucene.search.hits. lt init hits.java:53 \n debug 0x9 org.apache.lucene.search.searcher.search searcher.java:46 \n debug 0x9 org.apache.lucene.search.searcher.search searcher.java:38 \n debug 0x9 org.apache.jackrabbit.core.query.lucene.searchindex.executequeri searchindex.java:660 \n debug 0x9 org.apache.jackrabbit.core.query.lucene.queryresultimpl.executequeri queryresultimpl.java:242 \n debug 0x9 org.apache.jackrabbit.core.query.lucene.queryresultimpl.getresult queryresultimpl.java:290 \n debug 0x9 org.apache.jackrabbit.core.query.lucene.queryresultimpl. lt init queryresultimpl.java:192 \n debug 0x9 org.apache.jackrabbit.core.query.lucene.queryimpl.execut queryimpl.java:138 \n debug 0x9 org.apache.jackrabbit.core.query.queryimpl.execut queryimpl.java:176 \n debug 0x9 com.intel.cds.cr.jcr.jcrmanag 5.doinjcr jcrmanager.java:363 \n debug 0x9 org.springmodules.jcr.jcrtemplate.execut jcrtemplate.java:76 \n debug 0x9 org.springmodules.jcr.jcrtemplate.execut jcrtemplate.java:108 \n debug 0x9 19 \n debug /except /detail /soapenv fault /soapenv bodi /soapenv envelop org.apache.axis2.axisfault attempt access delet document org.apache.axis2.util.utils.getinboundfaultfrommessagecontext utils.java:486 org.apache.axis2.description.outinaxisoperationclient.handlerespons outinaxisoperation.java:343 org.apache.axis2.description.outinaxisoperationclient.send outinaxisoperation.java:389 org.apache.axis2.description.outinaxisoperationclient.executeimpl outinaxisoperation.java:211 org.apache.axis2.client.operationclient.execut operationclient.java:163 jackrabbit/lucen configur follow searchindex class= org.apache.jackrabbit.core.query.lucene.searchindex param name= path value= rep.hom /repository/index param name= usecompoundfil value= fals param name= mergefactor value= 5 param name= caches value= 10000 param name= respectdocumentord value= fals /searchindex configur issu bug thank david
patch cleanup unwant stream close n't use due refactor stream close never use n't harm cruft
remov repositoryservic exist repositoryservic exist use anywher suggest remov
remov repositoryservice.getrootid consist reason jcr2spi use idfactory.createnodeid string null pathfactory.getrootpath everywher build nodeid root node two separ method confus
jcr2spi updatetest testupdateremovesextraproperti testupdateaddsmissingsubtre fail occasion issu report jukka everi see follow jcr2spi test failur clean checkout test error testupdateremovesextraproperti org.apache.jackrabbit.jcr2spi.updatetest testupdateaddsmissingsubtre org.apache.jackrabbit.jcr2spi.updatetest problem seem caus test case automat choos secur workspac updat test reason test fail occasion current order string array return getaccessibleworkspacenam determinist work around issu make repositoryimpl.getworkspacenam explicit sort return array name proper fix would probabl ensur workspac select updatetest use test
improv xml export handl mention jcr-1574 current xml export function generat workaround like new propertywrapp class 'd like refactor clean xml export stuff workaround would n't need addit bonus would make core jcr2spi use xml export mechan exampl one core alreadi support jsr 283 shareabl node one jcr2spi
typo propertydefinitiontempl setvalueconstarint read setvalueconstraint
classcastexcept regist new node type java.lang.classcastexcept org.apache.jackrabbit.core.nodetype.nodetypeimpl org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:708 org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:637
paramet idletim queryclass caus queryhandl fail issu occur releas jackrabbit-cor version chang jcr-1462 jackrabbit fail startup unknown paramet bean configur paramet idletim queryclass use queryhandl searchmanag instanti queryhandl therefor paramet show queryhandl suggest introduc common base class abstractqueryhandl
remov call system.out test two test write system.out querytest hierarchynodetest
creat org.apache.jackrabbit.api.jsr283 jackrabbit-api move futur jsr283 interfac class discuss mail list implement new featur jsr283 start suggest put new jsr283 interfac jackrabbit-api instead core possibl way alreadi figur inter-modul depend issu peopl start use experiment featur api rather cast object core interfac suggest use org.apache.jackrabbit.api.jsr283 base packag new jsr283 interfac class exampl use org.apache.jackrabbit.api.jsr283.nodetype.nodedefinitiontempl futur javax.jcr.nodetype.nodedefinitiontempl jcr2.0 releas drop interim interfac
tri reus version label transact except thrown follow sequenc caus failur 1. first transact 1.1 creat version node 1.2 creat version 1 node 2. second transact 2.1 creat version 2 node 2.2 assign label version 2 3. third transact 3.1 restor node version 1 3.2 remov version 2 3.3 make version 3 node 3.4 assign label assign version 2 version 3 fail sequenc use transact work fine go attach test case
jsr 283 access control contain issu jsr 283 access control function
jsr 283 retent hold manag
jsr 283 lock
jsr 283 nodetyp manag
jsr 283 activ
jsr 283 simpl version
search.jsp n't handl utf-8 paramet correct 1 use webdav client upload file whose name chines file name 郭可为.txt upload command webdav client someth like outbound messag put /op/ ed ef 3a.txt http/1.1 host localhost:8080 server n't decod correct result file name got screw file content upload 2 default web.war modul search.jsp render search page type chines text search box search.jsp decod input paramet iso-8859-1 utf-8 turn search engin search wrong string 3 search engin search correct hardcod queri variabl search.jsp decod queri paramet iso-885901 utf-8
jcarepositoryhandle.login method never throw nosuchworkspaceexcept call sequenc jcarepositoryhandle.login credenti string non-exist workspac specifi login jcarepositoryhandle.login jcaconnectionrequestinfo connectionmanager.allocateconnect managedconnectionfactori connectionrequestinfo jcamanagedconnection.opensess jcaconnectionrequestinfo repository.login credenti string nosuchworkspaceexcept thrown catch jcamanagedconnection.opensess jcaconnectionrequestinfo _set linkedexception_ resourceexcept thrown jcarepositoryhandle.login jcaconnectionrequestinfo resourceexcept caught _cause_ retreiv caus nosuchworkspaceexcept 's thrown els anoth except thrown note except occur lower level 's wrap resourceexcept use setlinkedexcept upper level 's unwrap use getcaus caus set anyon 's null nosuchworkspaceexcept never thrown suggest fix use mechan end either chang wrap mechan except chain new resourceexcept msg caus unwrap use resourceexception.getlinkedexcept
problemat except handl jackrabbit webapp project caus except often ignor messag caus use catch except e log.error error configur e.tostr throw new servletexcept error configur e.tostr addit problem use servletexcept string messag throwabl rootcaus rootcaus use printstacktrac mean caus log see also http //closingbraces.net/2007/11/27/servletexceptionrootcause/ therefor better convert throw new servletexcept unabl creat rmi repositori jcr-rmi.jar might miss e servletexcept new servletexcept unabl creat rmi repositori jcr-rmi.jar might miss s.initcaus e throw
lucenequerybuild assum readabl root-nod grant case user u user u deni read user u allow read /home/u queri user u workspac fail accessdeniedexcept except caus call insid lucenequerybuild ln212 nodeid id nodeimpl session.getrootnod .getnodeid could n't find specif impos readabl root-nod precondt queri therefor consid behavior bug
remov nolockhack shareditemstatemanag increas test coverag specif recent ad multi-thread test 'm reason confid nolockhack shareditemstatemanag need anymor attach patch remov hack test still pass includ daili integr test
occasion nullpointerexcept itemmanag time time see nullpointerexcept itemmanag run concurrentreadwritetest except probabl caus anoth session remov properti effect itemst itemdata set null except thread thread-11 java.lang.nullpointerexcept org.apache.jackrabbit.core.itemmanager.canread itemmanager.java:313 org.apache.jackrabbit.core.itemmanager.getitemdata itemmanager.java:293 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:226 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:486 org.apache.jackrabbit.core.lazyitemiterator.prefetchnext lazyitemiterator.java:111 org.apache.jackrabbit.core.lazyitemiterator. init lazyitemiterator.java:93 org.apache.jackrabbit.core.lazyitemiterator. init lazyitemiterator.java:75 org.apache.jackrabbit.core.itemmanager.getchildproperti itemmanager.java:658 org.apache.jackrabbit.core.nodeimpl.getproperti nodeimpl.java:2663 org.apache.jackrabbit.core.concurrentreadwritetest 1 1.execut concurrentreadwritetest.java:65 org.apache.jackrabbit.core.abstractconcurrencytest executor.run abstractconcurrencytest.java:206 java.lang.thread.run thread.java:595 issu occur releas trunk
dbdatastor problem index pdf file report claus köll import pdf file repositori configur dbdatastor follow except occur happen use dbdatastor copywhenreading=tru java.io.ioexcept stream close java.io.bufferedinputstream.getbufifopen bufferedinputstream.java:156 java.io.bufferedinputstream.read bufferedinputstream.java:315 org.apache.jackrabbit.core.data.db.tempfileinputstream.read tempfileinputstream.java:107 java.io.bufferedinputstream.read1 bufferedinputstream.java:265 java.io.bufferedinputstream.read bufferedinputstream.java:324 java.io.bufferedinputstream.fil bufferedinputstream.java:229 java.io.bufferedinputstream.read bufferedinputstream.java:246 java.io.filterinputstream.read filterinputstream.java:89 java.io.pushbackinputstream.read pushbackinputstream.java:141 org.pdfbox.io.pushbackinputstream.peek pushbackinputstream.java:71 org.pdfbox.io.pushbackinputstream.iseof pushbackinputstream.java:88 org.pdfbox.pdfparser.pdfparser.parseobject pdfparser.java:370 org.pdfbox.pdfparser.pdfparser.pars pdfparser.java:176
remov getsafejcrpath method hierarchymanagerimpl getsafejcrpath util method hierarchymanagerimpl class use sinc revis 485720 presenc still caus hierarchi manag depend namespac map inform ll remov method simplifi thing
repositorylock work nfs sometim repositorylock mechan current use jackrabbit use filelock n't work nfs file system look like nfs version 4 newer support lock older implement may throw ioexcept lock avail mean nfs support byte-rang lock propos add second lock mechan add configur option use exampl filelock class= acm second lock mechan cooper lock protocol use background watchdog thread use regular file oper
add namespacehelp jcr-common number code snippet jackrabbit-cor mani jcr client someth like follow get prefix/uri given namespac uri/prefix without throw except namespac found return null instead get map contain current namespac prefix- uri map get prefix name given uri local name pair given session without depend spi safe regist given namespac n't throw namespac alreadi regist automat select unus prefix need etc 'd like introduc namespacehelp class jcr-common cover common code
jsr 283 workspac manag
jsr 283 new properti type new properti type weakrefer uri decim
regist nodetyp templat throw except invalid decl node type ad propertydefinitiontempl nodetypetempl intern declarednodetyp field set caus registr fail org.apache.jackrabbit.api.jsr283.nodetype.invalidnodetypedefinitionexcept foo test invalid declar node type specifi org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:695 org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:615
reintroduc namespacestorag hi jukka open issu remind recent discuss basel decid reintroduc namespacestorag recent remov jcr2spi reintroduc namespac cach jcr2spi use simpl map instead namespacecach object addit agre want share namespaceregistryimpl jcr2spi jackrabbit-cor volent provid patch thank advanc angela
remov access check move node node remov accessmanag allow still move use session.mov
webdav drop depend commons-collect webdav librari bring depend commons-collect sole one refer linkedmap sinc none addit featur class use understand jackrabbit requir jdk 1.4+ replac linkedhashmap jcr-common still bring commons-collect depend believ safe exclud user n't need use predic true webdav client
remov commons-collect slf4j-api depend jcr-common note jcr-1615 discuss mail list 1 would good jackrabbit-jcr-common n't come extra depend beyond standard java class librari jcr api current jackrabbit-jcr-common depend commons-collect slf4j-api depend relat isol could drop relat littl effort depend chang may backward incompat exist client sinc impact reason small easi resolv 'd ok 1.5 1 http //markmail.org/message/724ruk4l7b5rjtan
updat copyright year readm notic readme.txt file jackrabbit compon contain copyright line like collect work copyright 2007 apach softwar foundat year updat
session.getuserid return first princip set obtain subject.getprincip may lead wrong valu userid e.g name group princip jsr 170 defin getuserid return user id associ session impli javadoc method relat login issu alreadi partial address work jsr 283 access control trunk
typo deltavconst class constant xml_checkout_checkin valu spot typo http //svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-webdav/src/main/java/org/apache/jackrabbit/webdav/version/deltavconstants.java releas 1.4 version 's line public static final string xml_checkout_checkin checkin-checkout probabl public static final string xml_checkout_checkin checkout-checkin
proxi improv 1 improv need abl detect bean ocm proxi alreadi load kind functionn exampl hibern hibernate.isiniti object proxi develop someth similar modifi proxymanagerimpl use invocationhandl instead lazyload way make proxi implement special interfac whose method intercept 2 bug beanconvert specifi objectconverterimpl pass proxi callback instead let beanlazyload use default objectconvert think bug behavior differ bean properti proxifi 3 improv jcrtype map java type specifi objectconverterimpl make proxi type use bean properti type particular use bean properti type interfac sorri report bundl instead seper item develop patch whole let know need help enclos patch sincer stéphane landell
repository-1.5.dtd well form repository-1.5.dtd file http //jackrabbit.apache.org/dtd/repository-1.5.dtd well form time write 200/05/23 19:30gmt 1 look like requir miss line 173 2 detect tri 5minut ocm tutori hope help
pom.xml sandbox/spi wrong scm url pom sandbox/spi wrong scm url see pom http //svn.apache.org/repos/asf/jackrabbit/sandbox/spi/pom.xml probabl scm connect scm svn http //svn.apache.org/repos/asf/jackrabbit/sandbox/spi /connect developerconnect scm svn https //svn.apache.org/repos/asf/jackrabbit/sandbox/spi /developerconnect url http //svn.apache.org/viewvc/jackrabbit/sandbox/spi /url /scm
spi testsuit spi interfac peopl start write spi implement provid test-suit run spi direct order provid develop way assert basic complianc implement without jcr api
miss third parti notic licens info compon bundl extern librari jackrabbit-webapp jackrabbit-jca come appropri copyright notic licens inform
replac commons-log depend slf4j poi depend jackrabbit-text-extractor bring transit depend commons-log sinc use slf4j log exclud commons-log depend replac jcl104-over-slf4j
mixin type loss use bundl persist manag mixin type inform may corrupt lucen index caus queri like //element mixin fail problem jcr mixintyp may store bundl could happen first step creat node add mixin everyth 's fine queri //element work second step select node add second mixin b second mixin ad abstractbundlepersistencemanag load propertyid call get current mixin node method store propertyst jcr mixintyp bundl contain mixin nodeimpl setmixintypesproperti set propertyst jcr mixintyp node state contain mixin b session save changelog abstractbundlepersistencemanag store contain modif jcr mixintyp 's ignor leav bundl mixin nodeindex look node state get mixin type index node correct queri //element //element b work thrid step select node updat properti session save nodeindex ask jcr mixintyp properti call abstractbundlepersistencemanag load propertyid load bundl contain properti return mixin store second step caus index use mixin queri //element still work //element b n't work anymor simpl solut would store propertyst jcr mixintyp jcr uuid jcr primarytyp class descript state bundl propertyst load would fix issu content exist repositori one way allow repositori fix read write 3 properti bundlebind readbundl bundlebind writebundl method 'm sure wether would perform impact
node creat lock transact except thrown follow code fail execut insid xa transact node n session.getrootnod .addnod n n.addmixin mix lockabl session.sav lock lock n.lock fals fals stacktrac caus javax.transaction.xa.xaexcept org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:155 org.apache.jackrabbit.core.xasessionimpl.commit xasessionimpl.java:337 org.apache.jackrabbit.jca.transactionboundxaresource.commit transactionboundxaresource.java:39 org.apache.geronimo.transaction.manager.wrappernamedxaresource.commit wrappernamedxaresource.java:47 org.apache.geronimo.transaction.manager.transactionimpl.commit transactionimpl.java:301 32 caus org.apache.jackrabbit.core.transactionexcept unabl updat org.apache.jackrabbit.core.lock.xaenvironment.prepar xaenvironment.java:275 org.apache.jackrabbit.core.lock.xalockmanager.prepar xalockmanager.java:245 org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:138 36 caus javax.jcr.itemnotfoundexcept fail build path 48fb59d8-ac77-4b9f-8b53-9f2492dca5e5 48fb59d8-ac77-4b9f-8b53-9f2492dca5e5 48fb59d8-ac77-4b9f-8b53-9f2492dca5e5 org.apache.jackrabbit.core.hierarchymanagerimpl.getpath hierarchymanagerimpl.java:407 org.apache.jackrabbit.core.cachinghierarchymanager.getpath cachinghierarchymanager.java:272 org.apache.jackrabbit.core.lock.lockmanagerimpl.getpath lockmanagerimpl.java:651 org.apache.jackrabbit.core.lock.lockmanagerimpl.internallock lockmanagerimpl.java:276 org.apache.jackrabbit.core.lock.xaenviron lockinfo.upd xaenvironment.java:409 org.apache.jackrabbit.core.lock.xaenvironment.prepar xaenvironment.java:273 38 caus org.apache.jackrabbit.core.state.nosuchitemstateexcept 48fb59d8-ac77-4b9f-8b53-9f2492dca5e5 org.apache.jackrabbit.core.state.sessionitemstatemanager.getitemst sessionitemstatemanager.java:189 org.apache.jackrabbit.core.hierarchymanagerimpl.getitemst hierarchymanagerimpl.java:188 org.apache.jackrabbit.core.hierarchymanagerimpl.getpath hierarchymanagerimpl.java:402 43
xa transact session.addlocktoken effect follow sequenc work expect 1. first tx first session creat node make lockabl 2. second tx second session lock node save lock token 3. third tx third session add save lock token session modifi lock node fail lock token ad session3 sequenc work expect without transact separ transact 1 2 jcr-1633 prevent node lock tx creat
make shutdown hook transientfilefactori remov transientfilefactori class alway regist shutdown hook jackrabbit class load web-app classload releas web-app undeploy jackrabbit-jcr-common jar insid war caus classload leak seem use abil cancel transientfilefactori 's shutdown hook applic go unload avoid classload leak
redund call repositoryservice.getchildinfo case jcr2spi issu call repositoryservice.getchildinfo item haven return last call repositoryservice.getiteminfo happen workspaceitemstatefactory.createdeeppropertyst ask creat node state item return repositoryservice.getchildinfo order return iter tri creat item state item deeper hierarchi anoth item come later iter call repositoryservice.getchildinfo issu latter
configur adminid anonymousid defaultuserid caus login modul ignor credenti use defaultloginmodul defaultaccessmanag defaultsecuritymanag call repository.login credenti caus follow stack trace thrown javax.jcr.loginexcept loginmodul ignor credenti loginmodul ignor credenti loginmodul ignor credenti org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1353 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:53 com.cerner.system.configuration.repository.jcr.jackrabbittest.testloginwithcredenti jackrabbittest.java:23 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 org.junit.internal.runners.testmethod.invok testmethod.java:59 org.junit.internal.runners.methodroadie.runtestmethod methodroadie.java:98 org.junit.internal.runners.methodroadi 2.run methodroadie.java:79 org.junit.internal.runners.methodroadie.runbeforesthentestthenaft methodroadie.java:87 org.junit.internal.runners.methodroadie.runtest methodroadie.java:77 org.junit.internal.runners.methodroadie.run methodroadie.java:42 org.junit.internal.runners.junit4classrunner.invoketestmethod junit4classrunner.java:88 org.junit.internal.runners.junit4classrunner.runmethod junit4classrunner.java:51 org.junit.internal.runners.junit4classrunn 1.run junit4classrunner.java:44 org.junit.internal.runners.classroadie.rununprotect classroadie.java:27 org.junit.internal.runners.classroadie.runprotect classroadie.java:37 org.junit.internal.runners.junit4classrunner.run junit4classrunner.java:42 org.eclipse.jdt.internal.junit4.runner.junit4testreference.run junit4testreference.java:45 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:460 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:673 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:386 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196 caus javax.security.auth.login.failedloginexcept loginmodul ignor credenti org.apache.jackrabbit.core.security.authentication.localauthcontext.login localauthcontext.java:73 org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1346 24 javax.security.auth.login.failedloginexcept loginmodul ignor credenti org.apache.jackrabbit.core.security.authentication.localauthcontext.login localauthcontext.java:73 org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1346 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:53 com.cerner.system.configuration.repository.jcr.jackrabbittest.testloginwithcredenti jackrabbittest.java:23 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 org.junit.internal.runners.testmethod.invok testmethod.java:59 org.junit.internal.runners.methodroadie.runtestmethod methodroadie.java:98 org.junit.internal.runners.methodroadi 2.run methodroadie.java:79 org.junit.internal.runners.methodroadie.runbeforesthentestthenaft methodroadie.java:87 org.junit.internal.runners.methodroadie.runtest methodroadie.java:77 org.junit.internal.runners.methodroadie.run methodroadie.java:42 org.junit.internal.runners.junit4classrunner.invoketestmethod junit4classrunner.java:88 org.junit.internal.runners.junit4classrunner.runmethod junit4classrunner.java:51 org.junit.internal.runners.junit4classrunn 1.run junit4classrunner.java:44 org.junit.internal.runners.classroadie.rununprotect classroadie.java:27 org.junit.internal.runners.classroadie.runprotect classroadie.java:37 org.junit.internal.runners.junit4classrunner.run junit4classrunner.java:42 org.eclipse.jdt.internal.junit4.runner.junit4testreference.run junit4testreference.java:45 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:460 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:673 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:386 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196 testcas repository.xml file attach short
defaultloginmodule/simpleloginmodul n't support custom principalprovid configur custom principalprovid simpleloginmodul defaultloginmodul insid repository.xml file configur follow secur appname= jackrabbit accessmanag class= org.apache.jackrabbit.core.security.defaultaccessmanag /accessmanag loginmodul class= org.apache.jackrabbit.core.security.authentication.defaultloginmodul param name= principalprovid value= com.foo.jcr.basicprincipalprovid /loginmodul securitymanag class= org.apache.jackrabbit.core.defaultsecuritymanag /securitymanag /secur yield follow stacktrac javax.jcr.loginexcept org.apache.jackrabbit.core.security.authentication.defaultloginmodul support principalprovid org.apache.jackrabbit.core.security.authentication.defaultloginmodul support principalprovid org.apache.jackrabbit.core.security.authentication.defaultloginmodul support principalprovid org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1353 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:53 com.foo.jcr.principalprovidertest.testprincipalprovid principalprovidertest.java:24 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 org.junit.internal.runners.testmethod.invok testmethod.java:59 org.junit.internal.runners.methodroadie.runtestmethod methodroadie.java:98 org.junit.internal.runners.methodroadi 2.run methodroadie.java:79 org.junit.internal.runners.methodroadie.runbeforesthentestthenaft methodroadie.java:87 org.junit.internal.runners.methodroadie.runtest methodroadie.java:77 org.junit.internal.runners.methodroadie.run methodroadie.java:42 org.junit.internal.runners.junit4classrunner.invoketestmethod junit4classrunner.java:88 org.junit.internal.runners.junit4classrunner.runmethod junit4classrunner.java:51 org.junit.internal.runners.junit4classrunn 1.run junit4classrunner.java:44 org.junit.internal.runners.classroadie.rununprotect classroadie.java:27 org.junit.internal.runners.classroadie.runprotect classroadie.java:37 org.junit.internal.runners.junit4classrunner.run junit4classrunner.java:42 org.eclipse.jdt.internal.junit4.runner.junit4testreference.run junit4testreference.java:45 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:460 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:673 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:386 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196 caus javax.security.auth.login.loginexcept org.apache.jackrabbit.core.security.authentication.defaultloginmodul support principalprovid org.apache.jackrabbit.core.security.authentication.localauthcontext.login localauthcontext.java:68 org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1346 24 javax.security.auth.login.loginexcept org.apache.jackrabbit.core.security.authentication.defaultloginmodul support principalprovid org.apache.jackrabbit.core.security.authentication.localauthcontext.login localauthcontext.java:68 org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1346 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:53 com.foo.jcr.principalprovidertest.testprincipalprovid principalprovidertest.java:24 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:585 org.junit.internal.runners.testmethod.invok testmethod.java:59 org.junit.internal.runners.methodroadie.runtestmethod methodroadie.java:98 org.junit.internal.runners.methodroadi 2.run methodroadie.java:79 org.junit.internal.runners.methodroadie.runbeforesthentestthenaft methodroadie.java:87 org.junit.internal.runners.methodroadie.runtest methodroadie.java:77 org.junit.internal.runners.methodroadie.run methodroadie.java:42 org.junit.internal.runners.junit4classrunner.invoketestmethod junit4classrunner.java:88 org.junit.internal.runners.junit4classrunner.runmethod junit4classrunner.java:51 org.junit.internal.runners.junit4classrunn 1.run junit4classrunner.java:44 org.junit.internal.runners.classroadie.rununprotect classroadie.java:27 org.junit.internal.runners.classroadie.runprotect classroadie.java:37 org.junit.internal.runners.junit4classrunner.run junit4classrunner.java:42 org.eclipse.jdt.internal.junit4.runner.junit4testreference.run junit4testreference.java:45 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:460 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:673 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:386 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:196
make namespacecontext getprefix java.lang.str iter instead recurs current method org.apache.jackrabbit.core.xml.namespacecontext getprefix java.lang.str use recurs larg xml file 50 mb magnolia websit export caus stack overflow method easili rewritten use iter
add support map referenc bean ocm support map map referenc bean collect collectionconverter= beanreferencecollectionconverterimpl.class privat java.util.map string referencedbean amap beanreferencecollectionconverterimpl main method dogetcollect need updat support interfac manageablemap interfac
npe openofficetextextractor tri load open offic writer document see attach receiv except 2008-06-10 17:19:59 warn btpool0-1 compositetextextractor fail extract text content 92 java.lang.nullpointerexcept org.apache.jackrabbit.extractor.openofficetextextractor.extracttext openofficetextextractor.java:7 8 org.apache.jackrabbit.extractor.compositetextextractor.extracttext compositetextextractor.java:90 org.apache.jackrabbit.core.query.lucene.jackrabbittextextractor.extracttext jackrabbittextextracto r.java:195 org.apache.jackrabbit.core.query.lucene.nodeindexer.addbinaryvalu nodeindexer.java:393 org.apache.jackrabbit.core.query.lucene.nodeindexer.addvalu nodeindexer.java:282 org.apache.jackrabbit.core.query.lucene.nodeindexer.createdoc nodeindexer.java:221 org.apache.jackrabbit.core.query.lucene.searchindex.createdocu searchindex.java:892 org.apache.jackrabbit.core.query.lucene.searchindex 2.next searchindex.java:543 org.apache.jackrabbit.core.query.lucene.multiindex.upd multiindex.java:428 org.apache.jackrabbit.core.query.lucene.searchindex.updatenod searchindex.java:527 org.apache.jackrabbit.core.searchmanager.onev searchmanager.java:504 org.apache.jackrabbit.core.observation.eventconsumer.consumeev eventconsumer.java:231 org.apache.jackrabbit.core.observation.observationdispatcher.dispatchev observationdispatch java:201 org.apache.jackrabbit.core.observation.eventstatecollection.dispatch eventstatecollection.java:425 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:737 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:873 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:334 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:337 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:310 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:317 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1247 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:897 org.apache.jackrabbit.jca.jcasessionhandle.sav jcasessionhandle.java:178
usermanag throw javax.jcr.query.invalidqueryexcept createus usermanag method createus string userid string password throw except javax.jcr.query.invalidqueryexcept user name contain charact stack trace except thread main javax.jcr.query.invalidqueryexcept lexic error line 1 column 76 encount 64 statement v /jcr root/rep security/rep authorizables/rep groups//el test example.com rep group return v lexic error line 1 column 76 encount 64 lexic error line 1 column 76 encount 64 org.apache.jackrabbit.spi.commons.query.xpath.xpathquerybuilder. init xpathquerybuilder.java:302 org.apache.jackrabbit.spi.commons.query.xpath.xpathquerybuilder.createqueri xpathquerybuilder.java:331 org.apache.jackrabbit.spi.commons.query.xpath.querybuilder.createquerytre querybuilder.java:39 org.apache.jackrabbit.spi.commons.query.queryparser.pars queryparser.java:57 org.apache.jackrabbit.core.query.lucene.queryimpl. init queryimpl.java:91 org.apache.jackrabbit.core.query.lucene.searchindex.createexecutablequeri searchindex.java:615 org.apache.jackrabbit.core.query.queryimpl.init queryimpl.java:128 org.apache.jackrabbit.core.searchmanager.createqueri searchmanager.java:282 org.apache.jackrabbit.core.query.querymanagerimpl.createqueri querymanagerimpl.java:102 org.apache.jackrabbit.core.security.user.indexnoderesolver.buildqueri indexnoderesolver.java:105 org.apache.jackrabbit.core.security.user.indexnoderesolver.findnod indexnoderesolver.java:50 org.apache.jackrabbit.core.security.user.usermanagerimpl.getauthoriz usermanagerimpl.java:93 org.apache.jackrabbit.core.security.user.usermanagerimpl.createus usermanagerimpl.java:177 org.apache.jackrabbit.core.security.user.usermanagerimpl.createus usermanagerimpl.java:158 firsthop.main firsthop.java:20 caus org.apache.jackrabbit.spi.commons.query.xpath.tokenmgrerror lexic error line 1 column 76 encount 64 org.apache.jackrabbit.spi.commons.query.xpath.xpathtokenmanager.getnexttoken xpathtokenmanager.java:13263 org.apache.jackrabbit.spi.commons.query.xpath.xpath.jj_ntk xpath.java:9187 org.apache.jackrabbit.spi.commons.query.xpath.xpath.elementtest xpath.java:8745 org.apache.jackrabbit.spi.commons.query.xpath.xpath.kindtest xpath.java:8120 org.apache.jackrabbit.spi.commons.query.xpath.xpath.nodetest xpath.java:5041 org.apache.jackrabbit.spi.commons.query.xpath.xpath.abbrevforwardstep xpath.java:4891 org.apache.jackrabbit.spi.commons.query.xpath.xpath.forwardstep xpath.java:4747 org.apache.jackrabbit.spi.commons.query.xpath.xpath.axisstep xpath.java:4692 org.apache.jackrabbit.spi.commons.query.xpath.xpath.stepexpr xpath.java:4597 org.apache.jackrabbit.spi.commons.query.xpath.xpath.relativepathexpr xpath.java:4547 org.apache.jackrabbit.spi.commons.query.xpath.xpath.pathexpr xpath.java:4396 org.apache.jackrabbit.spi.commons.query.xpath.xpath.valueexpr xpath.java:4125 org.apache.jackrabbit.spi.commons.query.xpath.xpath.unaryexpr xpath.java:4032 org.apache.jackrabbit.spi.commons.query.xpath.xpath.castexpr xpath.java:3935 org.apache.jackrabbit.spi.commons.query.xpath.xpath.castableexpr xpath.java:3898 org.apache.jackrabbit.spi.commons.query.xpath.xpath.treatexpr xpath.java:3861 org.apache.jackrabbit.spi.commons.query.xpath.xpath.instanceofexpr xpath.java:3824 org.apache.jackrabbit.spi.commons.query.xpath.xpath.intersectexceptexpr xpath.java:3748 org.apache.jackrabbit.spi.commons.query.xpath.xpath.unionexpr xpath.java:3672 org.apache.jackrabbit.spi.commons.query.xpath.xpath.multiplicativeexpr xpath.java:3586 org.apache.jackrabbit.spi.commons.query.xpath.xpath.additiveexpr xpath.java:3510 org.apache.jackrabbit.spi.commons.query.xpath.xpath.rangeexpr xpath.java:3451 org.apache.jackrabbit.spi.commons.query.xpath.xpath.comparisonexpr xpath.java:3353 org.apache.jackrabbit.spi.commons.query.xpath.xpath.andexpr xpath.java:3290 org.apache.jackrabbit.spi.commons.query.xpath.xpath.orexpr xpath.java:3227 org.apache.jackrabbit.spi.commons.query.xpath.xpath.exprsingl xpath.java:2214 org.apache.jackrabbit.spi.commons.query.xpath.xpath.forclaus xpath.java:2337 org.apache.jackrabbit.spi.commons.query.xpath.xpath.flworexpr xpath.java:2233 org.apache.jackrabbit.spi.commons.query.xpath.xpath.exprsingl xpath.java:2133 org.apache.jackrabbit.spi.commons.query.xpath.xpath.expr xpath.java:2094 org.apache.jackrabbit.spi.commons.query.xpath.xpath.querybodi xpath.java:2066 org.apache.jackrabbit.spi.commons.query.xpath.xpath.mainmodul xpath.java:512 org.apache.jackrabbit.spi.commons.query.xpath.xpath.modul xpath.java:387 org.apache.jackrabbit.spi.commons.query.xpath.xpath.querylist xpath.java:151 org.apache.jackrabbit.spi.commons.query.xpath.xpath.xpath2 xpath.java:118 org.apache.jackrabbit.spi.commons.query.xpath.xpathquerybuilder. init xpathquerybuilder.java:295 14 org.apache.jackrabbit.spi.commons.query.xpath.tokenmgrerror lexic error line 1 column 76 encount 64 org.apache.jackrabbit.spi.commons.query.xpath.xpathtokenmanager.getnexttoken xpathtokenmanager.java:13263 org.apache.jackrabbit.spi.commons.query.xpath.xpath.jj_ntk xpath.java:9187 org.apache.jackrabbit.spi.commons.query.xpath.xpath.elementtest xpath.java:8745 org.apache.jackrabbit.spi.commons.query.xpath.xpath.kindtest xpath.java:8120 org.apache.jackrabbit.spi.commons.query.xpath.xpath.nodetest xpath.java:5041 org.apache.jackrabbit.spi.commons.query.xpath.xpath.abbrevforwardstep xpath.java:4891 org.apache.jackrabbit.spi.commons.query.xpath.xpath.forwardstep xpath.java:4747 org.apache.jackrabbit.spi.commons.query.xpath.xpath.axisstep xpath.java:4692 org.apache.jackrabbit.spi.commons.query.xpath.xpath.stepexpr xpath.java:4597 org.apache.jackrabbit.spi.commons.query.xpath.xpath.relativepathexpr xpath.java:4547 org.apache.jackrabbit.spi.commons.query.xpath.xpath.pathexpr xpath.java:4396 org.apache.jackrabbit.spi.commons.query.xpath.xpath.valueexpr xpath.java:4125 org.apache.jackrabbit.spi.commons.query.xpath.xpath.unaryexpr xpath.java:4032 org.apache.jackrabbit.spi.commons.query.xpath.xpath.castexpr xpath.java:3935 org.apache.jackrabbit.spi.commons.query.xpath.xpath.castableexpr xpath.java:3898 org.apache.jackrabbit.spi.commons.query.xpath.xpath.treatexpr xpath.java:3861 org.apache.jackrabbit.spi.commons.query.xpath.xpath.instanceofexpr xpath.java:3824 org.apache.jackrabbit.spi.commons.query.xpath.xpath.intersectexceptexpr xpath.java:3748 org.apache.jackrabbit.spi.commons.query.xpath.xpath.unionexpr xpath.java:3672 org.apache.jackrabbit.spi.commons.query.xpath.xpath.multiplicativeexpr xpath.java:3586 org.apache.jackrabbit.spi.commons.query.xpath.xpath.additiveexpr xpath.java:3510 org.apache.jackrabbit.spi.commons.query.xpath.xpath.rangeexpr xpath.java:3451 org.apache.jackrabbit.spi.commons.query.xpath.xpath.comparisonexpr xpath.java:3353 org.apache.jackrabbit.spi.commons.query.xpath.xpath.andexpr xpath.java:3290 org.apache.jackrabbit.spi.commons.query.xpath.xpath.orexpr xpath.java:3227 org.apache.jackrabbit.spi.commons.query.xpath.xpath.exprsingl xpath.java:2214 org.apache.jackrabbit.spi.commons.query.xpath.xpath.forclaus xpath.java:2337 org.apache.jackrabbit.spi.commons.query.xpath.xpath.flworexpr xpath.java:2233 org.apache.jackrabbit.spi.commons.query.xpath.xpath.exprsingl xpath.java:2133 org.apache.jackrabbit.spi.commons.query.xpath.xpath.expr xpath.java:2094 org.apache.jackrabbit.spi.commons.query.xpath.xpath.querybodi xpath.java:2066 org.apache.jackrabbit.spi.commons.query.xpath.xpath.mainmodul xpath.java:512 org.apache.jackrabbit.spi.commons.query.xpath.xpath.modul xpath.java:387 org.apache.jackrabbit.spi.commons.query.xpath.xpath.querylist xpath.java:151 org.apache.jackrabbit.spi.commons.query.xpath.xpath.xpath2 xpath.java:118 org.apache.jackrabbit.spi.commons.query.xpath.xpathquerybuilder. init xpathquerybuilder.java:295 org.apache.jackrabbit.spi.commons.query.xpath.xpathquerybuilder.createqueri xpathquerybuilder.java:331 org.apache.jackrabbit.spi.commons.query.xpath.querybuilder.createquerytre querybuilder.java:39 org.apache.jackrabbit.spi.commons.query.queryparser.pars queryparser.java:57 org.apache.jackrabbit.core.query.lucene.queryimpl. init queryimpl.java:91 org.apache.jackrabbit.core.query.lucene.searchindex.createexecutablequeri searchindex.java:615 org.apache.jackrabbit.core.query.queryimpl.init queryimpl.java:128 org.apache.jackrabbit.core.searchmanager.createqueri searchmanager.java:282 org.apache.jackrabbit.core.query.querymanagerimpl.createqueri querymanagerimpl.java:102 org.apache.jackrabbit.core.security.user.indexnoderesolver.buildqueri indexnoderesolver.java:105 org.apache.jackrabbit.core.security.user.indexnoderesolver.findnod indexnoderesolver.java:50 org.apache.jackrabbit.core.security.user.usermanagerimpl.getauthoriz usermanagerimpl.java:93 org.apache.jackrabbit.core.security.user.usermanagerimpl.createus usermanagerimpl.java:177 org.apache.jackrabbit.core.security.user.usermanagerimpl.createus usermanagerimpl.java:158 firsthop.main firsthop.java:20
separ notic licens binari sourc packag base recent discuss sling-dev see 1 legal-discuss see 2 'd like rearrang notic licens file root level file refer bit includ sourc releas case differ file includ binari artifact would place src/main/resources/meta-inf see also jcr-1630 relat work 1 http //markmail.org/message/2enw6ktxhc4ixmrk 2 http //markmail.org/message/bttmkavpicxxg7gl
xpathquerybuild may handl multipl jcr deref correct follow tree inspir dereftest peopl carl worksfor company/microsoft frank worksfor company/microsoft compani microsoft eotm carl follow queri translat testroot/people/frank/jcr deref worksfor '* /jcr deref eotm '* root node select properti pathquerynod locationstepquerynod nodetest= testroot descendants=fals index=non locationstepquerynod nodetest= peopl descendants=fals index=non locationstepquerynod nodetest= frank descendants=fals index=non derefquerynod nodetest=* descendants=fals index=non derefquerynod nodetest=* descendants=fals index=non match carl node testroot/people/frank/jcr deref worksfor '* /jcr deref eotm '* jcr uuid root node select properti pathquerynod locationstepquerynod nodetest= testroot descendants=fals index=non locationstepquerynod nodetest= peopl descendants=fals index=non locationstepquerynod nodetest= frank descendants=fals index=non locationstepquerynod nodetest=* descendants=fals index=non derefquerynod nodetest=* descendants=fals index=non relationquerynod op null prop= http //www.jcp.org/jcr/1.0 uuid match carl node testroot/people/frank/jcr deref worksfor '* jcr uuid /jcr deref eotm '* jcr uuid root node select properti pathquerynod locationstepquerynod nodetest= testroot descendants=fals index=non locationstepquerynod nodetest= peopl descendants=fals index=non locationstepquerynod nodetest= frank descendants=fals index=non derefquerynod nodetest=* descendants=fals index=non relationquerynod op null prop= http //www.jcp.org/jcr/1.0 uuid derefquerynod nodetest=* descendants=fals index=non relationquerynod op null prop= http //www.jcp.org/jcr/1.0 uuid match carl node testroot/people/frank/jcr deref worksfor '* jcr uuid /jcr deref eotm '* root node select properti pathquerynod locationstepquerynod nodetest= testroot descendants=fals index=non locationstepquerynod nodetest= peopl descendants=fals index=non locationstepquerynod nodetest= frank descendants=fals index=non derefquerynod nodetest=* descendants=fals index=non relationquerynod op null prop= http //www.jcp.org/jcr/1.0 uuid derefquerynod nodetest=* descendants=fals index=non match carl node xpathquerybuild call naryquerynod removeoperand querynod order replac current locationstepquerynod derefquerynod naryquerynod removeoperand querynod use intern list thus reli object equal object retriev object remov equal method redefin everi querynod differ semant call naryquerynod removeoperand querynod remov want operand first operand return true call equal arraylist remov object
node.addnod string string n't prevent use mixin type primari type
better invalid format except messag valu class valueof method valu class throw except without inform desir type without string valu gave error
nodeidimpl realli serializ ve tri get jcr2spi rmi spi2jcr work error 'm see report java.io.notserializableexcept org.apache.jackrabbit.spi.commons.identifier.idfactoryimpl believ track nodeidimpl implicit referenc contain instanc idfactoryimpl serializ nodeidimpl attempt serial case follow stack org.apache.jackrabbit.spi.rmi.client.clientrepositoryservice.getiteminfo clientrepositoryservice.java:258 org.apache.jackrabbit.jcr2spi.state.workspaceitemstatefactory.createnodest workspaceitemstatefactory.java:94 org.apache.jackrabbit.jcr2spi.state.transientisfactory.createnodest transientisfactory.java:99 org.apache.jackrabbit.jcr2spi.hierarchy.nodeentryimpl.doresolv nodeentryimpl.java:972 org.apache.jackrabbit.jcr2spi.hierarchy.hierarchyentryimpl.resolv hierarchyentryimpl.java:95 org.apache.jackrabbit.jcr2spi.hierarchy.hierarchyentryimpl.getitemst hierarchyentryimpl.java:212 org.apache.jackrabbit.jcr2spi.itemmanagerimpl.getitem itemmanagerimpl.java:170 org.apache.jackrabbit.jcr2spi.sessionimpl.getrootnod sessionimpl.java:216 think must someth wrong seem like fundament problem jcr2spi rmi spi2jcr look svn histori n't see ever could work either session.getrootnod never test use jcr2spi rmi spi2jcr ve got someth setup wrong
incorrect slf4j-log4j12 depend scope spi-common slf4j-log4j12 depend scope jackrabbit-spi-common runtim test n't want impos specif log solut downstream project
upgrad nekohtml depend latest cyberneko html parser version alv2-licens better maven depend metadata
cluster revis entri retriev order selectrevisionstmtsql databasejourn buildsqlstat return result set may order revision_id effect cluster instanc want synchron latest revis updat local revis appropri sinc assum revis result set order see code abstractjourn dosync might caus lot unnecessari cpu cycl machin degrad perform result furthermor caus function issu well event may fire multipl time wrong order
execut queri throw unsupportedrepositoryoperationexcept level_2_support level 1 implement execut queri throw unsupportedrepositoryoperationexcept level_2_support spi implement level 2 org.apache.jackrabbit.jcr2spi.query.execut call session.getvaluefactori contract throw level 2 support quick fix would call getjcrvaluefactori avail managerprovid interfac implement sessionimpl instead getvaluefactori howev think better fix might pass managerprovid queryimpl constructor instead session manag provid separ
extend mimetyp list text extractor think would possibl extend mimetyp list mspowerpoint msexcel textextractor application/powerpoint application/excel took half hour figur document n't turn jackrabbit fulltext-search mayb user might run problem 'm sure kind standard list possibl default mimetyp quick googl search seem uncommon
add pattern match path suggest add util class spi-common use pattern match path similar regular express
refer properti produc duplic string memori refer properti load pm serializer.deseri noderefer inputstream call call propertyid.valueof string turn call namefactoryimpl.cr string final split full properti name namespac local name namespac intern local name comment say done avoid perm space overfil end new string instanc creat local name lead consider memori wast repositori lot node refer properti seem local name part could intern repositori 's allow creat properti arbitrari name danger perm space exhaust seem argument way resolv mayb new namefactori implement could creat would use properti possibl main propertyid.valueof string would extend exist namefactoryimpl overrid creat string method think
jndi referenc issu 'm question use referenc bindableresourc bindableresourcefactori class jndi lookup process reason referenc need addr exact order order consid see http //java.sun.com/j2se/1.4.2/docs/api/javax/naming/reference.html equal java.lang.object order get jndi refer found correct chang bindableresource.getrefer method swap order stringrefer ad match pass glassfish seem extrem fragil n't know order say jboss would pass stringref refer object factori method also anoth problem getrefer bind class name bindablerepositori class implement javax.jcr.repositori caus match follow exampl wiki set jndi refer use javax.jcr.repositori type either fix chang jndi refer use bindablerepositori class chang bindablerepositori class set repositori interfac sure would consid better patch fix first issu least glassfish second seem like realli breakabl setup right sure would better make sure avoid
jcaconnectionrequestinfo equal hashcod implement inconsist jcaconnectionrequestinfo behav differ equal hashcod method former awar simplecredenti structur two instanc jcaconnectionrequestinfo suppli simplecredenti instanc userid password attribut consid equal jcaconnectionrequestinfo.hashcod deleg simplecredentials.hashcod object 's method break session pool
jcarepositorymanag close inputstream use obtain repositori config classpath
repositoryimpl instanc creat shut class unload ve built simpl web-appl contain one servlet load start-up init method instanc repositoryimpl creat destroy method instanc stop use shutdown servlet code class jackrabbit-cor jcr api servlet api referenc jackrabbit-cor version 1.4.5 jackrabbit-jcr-common version 1.4.2 jackrabbit lib 1.4 version even servlet 's doget method never get call web-appl redeploy class still hang memori produc memori leak init method public void init throw servletexcept super.init tri repositoryconfig repoconfig repositoryconfig.cr getclass .getresourceasstream repository.xml repo repositoryimpl.cr repoconfig catch except e throw new servletexcept e destroy method public void destroy repo.shutdown super.destroy even appli patch jcr-1636 ad transientfilefactory.shutdown call destroy method noth chang test jetti 6.1.9 tomcat 6.0.14
text.isdescend return fals parent '/ method isdescend string string text util class return fals pass potenti parent-path repres root node
ad event interfac isloc repositori cluster use seem common problem mani peopl detect observ event send chang local instanc remot instanc cluster especi import want post process data base observ post process done one instanc cluster current solut cast jcr event object eventimpl jackrabbit core obvious nice solut ad event interfac jackrabbit api extend jcr event interfac add isloc method
provid mean except handl querynodevisitor implement current method querynodevisitor declar except even though queri tree might syntact correct implement might reach point continu i.e support one option queri featur case current two solut 1. throw uncheck except 2. communic error state visitor use data object pass along n't like 2. still option 1 'm sure right way go might better actual throw check except therefor creat patch declar repositoryexcept visit method querynodevisitor although necessari chang class use querynodevisitor trivial quit mani opinion check except probabl break trivial exist code vs. use check except
provid name constant queryconst debug log user interact purpos queryconst includ descript name constant provid
allow workspac creation cluster workspac creat cluster node node ad workspac proper event sent journal cluster node abl process n't workspac would nice configur option cluster creat workspac automat instead log error
nullpointerexcept constructor jcrdavexcept within davsessionproviderimpl.attachsess org.apache.jackrabbit.rmi.client.remoterepositoryexcept thrown catch repositoryexcept pass ctor jcrdavexcept lookup class static hashmap codemap class fail npe thrown suggest fix static lookup javax.jcr *except class must fix includ deriv except class
simpl webdav dir name repositori incorrect behavior use default repositori name default exampl creat directori name default repositori issu directori behav correct view dir jetti http //localhost:8080/jackrabbit/repository/default/default/ show content default directori howev click content go incorrect url e.g directori name test creat url test http //localhost:8080/jackrabbit/repository/default/test/ instead http //localhost:8080/jackrabbit/repository/default/default/test/ notic one default path provid jackrabbit caus content directori inaccess
dbdatastor improv error messag init fail initi databas data store fail error messag contain enough data analyz problem driver oracl jdbc driver 10.2.0.1.0 could execut statement reason ora-00902 invalid datatyp state/cod 42000/902 init data store driver=oracle.jdbc.oracledriv url=jdbc oracl thin localhost:1521 orcl user=jackrabbit addit creat tabl statement log tabl name
session return offer transact support javax.jcr.sess instanc return repositori implement org.apache.jackrabbit.jca.jcasessionhandl n't implement interfac org.apache.jackrabbit.api.xasess
jcr2spi move test execut spi2jcr propos patch see issu jcr-1629 allow remov depend jackrabbit-spi2jcr jackrabbit-cor jcr2spi remov duplic test sandbox/spi
spi sandbox use tests-jar introduc jcr-1629 jcr-1683 remov duplic test
catch throwabl call textextractor differ except handl current textextractor method signatur throw ioexcept intern handl differ exampl msexceltextextractor runtimeexcept 's catch extractor see jcr-574 think catch throwabl nodeindex prevent outofmemoryerro index node
namespaceregistryimpl.getnameresolver/getpathresolv alway return null seem left restructur common class jcr-1169 method remov
queri parser build invalid pars tree call org.apache.jackrabbit.spi.commons.query.queryparser.pars select prop1 nt unstructur prop1 null order prop1 asc result follow pars tree select properti prop1 pathquerynod locationstepquerynod nodetest=* descendants=tru index=non relationquerynod op null prop= prop1 type=str value= nodetypequerynod prop= http //www.jcp.org/jcr/1.0 primarytyp value= http //www.jcp.org/jcr/nt/1.0 unstructur orderquerynod prop1 asc=tru relationquerynod second operand sinc null oper unari
multipl test test lock instead version multipl test claim check whether version support realiti check lock patch includ
includ new old mimetyp openofficetextextractor handl follow patch add old openoffic 1.0 version mimetyp content extract ve test simpl file work cat openofficetextextractor-mimetype.patch jackrabbit-1.4/jackrabbit-text-extractors/src/main/java/org/apache/jackrabbit/extractor/openofficetextextractor.java 2007-12-19 12:57:58.000000000 -0200 +++ jackrabbit-1.4-modified/jackrabbit-text-extractors/src/main/java/org/apache/jackrabbit/extractor/openofficetextextractor.java 2008-07-24 15:01:08.000000000 -0300 -54,7 +54,11 application/vnd.oasis.opendocument.graph application/vnd.oasis.opendocument.present application/vnd.oasis.opendocument.spreadsheet application/vnd.oasis.opendocument.text application/vnd.oasis.opendocument.text application/vnd.sun.xml.calc application/vnd.sun.xml.draw application/vnd.sun.xml.impress application/vnd.sun.xml.writ textextractor
jndidatabasejourn n't work oracl schema unabl use oracledatabasejourn jndi datasourc databas journal work fine oracl use oracledatabasejourn implement need use jndi datasourc actual need use org.apache.jackrabbit.core.journal.jndidatabasejourn n't work fine oracl schema follow configur cluster id= node1 syncdelay= 10 journal class= org.apache.jackrabbit.core.journal.jndidatabasejourn param name= schema value= oracl jackrabbit crash startup well defin sql error investig problem see oracle.ddl file contain tablespac variabl replac oracledatabasejourn implement workaround user creat differ ddl without tablespac variabl probabl work better box wdyt one follow solut make base databasejourn implement support jndi datasourc like persistencemanag without specif configur properti specifi jndi locat url properti move replac tablespac variabl mayb add generic replac *any* paramet found databasejourn configur main databasejourn implement could handi make oracledatabasejourn extens useless see moment problem mssql implement sinc add tablespac name 's set empti string
system properti get replac cluster configur sinc jcr-1304 ad jackrabbit 1.4 guess report bug still debug deepli tri configur cluster use cluster id= server syncdelay= 10 set server system properti expect cluster initi proper use valu properti realiz cluster node get initi final valu server instead cluster config good place use system properti sinc configur usual ident cluster node id properti must differ anyth missed/did wrong configur
improv promot spi-logg spi-logg use debug spi implement howev support repositoryservic interfac spi interfac support also write log inform string seem bit restrict final includ jackrabbit-spi packag introduc addit depend debug therefor suggest add support major spi interfac replac current way log string writer instanc versatil mechan i.e client provid interfac consum structur log data provid default implement mechan i.e write file write slf4j base logger write consol promot project jackrabbit-spi
add plaintextextractor default configur transientrepositori current default configur transientrepositori includ plaintextextractor mean resourc type text/plain fulltext index plaintextextractor ad configur
simpl googl style queri sling project 's need simpl queri languag see sling-573 ve creat parser translat simpl queri xpath queri statement execut jcr workspac ll commit jackrabbit-jcr-common modul
remov unnecessari testal class jcr-common modul jackrabbit-jcr-common use default test configur mean testal test suit necessari actual caus test execut twice
log warn coerc valu queri possibl lucenequerybuild current log warn string liter coerc type deriv inform provid node type manag log level lower debug
deprec namespacelisten abstractnamespaceresolv namespacelisten interfac longer use jsr 283 style namespac handl avoid lot synchron previous keep local namespac map date also remain purpos abstractnamespaceresolv class add support manag namespacelisten sinc function nowher use anymor make subclass use namespaceresolv interfac direct sinc namespacelisten abstractnamespaceresolv public jackrabbit-spi-common mark deprec get rid jackrabbit 2.0
oracl jndi datasourc support org.apache.jackrabbit.core.persistence.bundle.util.connectionfactori tri get connect jndi datasourc without login pasword user/password specifi re retriev empti string null tri ds.getconnect user password fail pleas complet test line 66 user null || user.length 0 password null || password.length 0 sincer stéphane landell
index rule inherit n't work index rule suppos inherit children node type org.apache.jackrabbit.core.query.lucene.indexingconfigurationimpl.init rule regist declar node type children howev rule 's node type still origin one rule get reject org.apache.jackrabbit.core.query.lucene.indexingconfigurationimpl indexingrule.appliesto one simpl solut would regist origin rule copi origin node type replac child one pleas find correct class attach sincer stéphane
reduc memori usag transient node ad lot transient node n't child node leaf attach patch initi nodestate.childnodeentri unmodifi empti childnodeentri instanc turn modifi one need run test 100k node 10 children per node memori consumpt child node entri drop 42mb 12mb patch
fix unexpect behavior text.getnam text.getnam variant return empti string given path alreadi name eg text.getnam foo return foo one would expect relat path suggest chang
imposs import string contain _x0020_ session.importxml importxml use valuehelper.seri method option decodeblank simpl string replac replac _x0020_ space line 695 793 option alway set true unless import data binari see bufferedstringvalu stringvalu getvalu method result imposs import string _x0020_ get translat space simpl solut would turn declodeblank option 'm sure ad first place anoth option would use real encod instead replac like o.a.j.util.iso9075
remov serializ itemst class itemst never direct serial mean n't implement serializ anymor see also http //markmail.org/message/wsqnih2lembkcrdf
promot childnodeentri childnodeentri top level class current nodest class quit heavi weight sourc code wise inner class childnodeentri use lot place outsid nodest think use promot top level class
download improv user experi download section http //jackrabbit.apache.org/downloads.html contain mani file number file reduc contain file exampl .rar file .war file file jackrabbit-jca-1.4.rar contain old version jackrabbit-cor jackrabbit-core-1.4.jar howev newest version jackrabbit-cor jackrabbit-core-1.4.5.jar often lead problem
jsr 283 jcr name
queryimpl result offset must consid secur class grant item ackrabbit version 1.4 jackrabbit-cor 1.4.5 use search result limit offset work wrong case let suppos total node return search name grantaccess offset node1 true 0 node2 fals 1 node3 true 2 node4 true 3 node5 fals 4 page must 2 record first count search get size 3 record filter secur class invok automat jackrabbit 2 page show user first page must return 2 record cours second must return 1 record first search set queryimp.setoffset 0 queryimpl.setlimit 2 get node 1 3 that correct second search second page set queryimp.setoffset 2 queryimpl.setlimit 2 way pretend get two record start record nro 3 would node4 result got node3 node4 offset work accord grantacess provid secur class accord sequenc raw result offset start correct posit count grant node return secur class hope make sens thank helio
prevent excess path.el instanc even cachinghierarchymanag use jackrabbit creat lot path.el instanc intern use pathmap spi-common creat new path.el instanc whenev path construct even path construct cach pathmap.el run test 10k node result 250k path.el instanc creat held memori most event
prefer pathfactory.createel createpath .getnameel latter creat unnecessari path instanc
configur occurr properti valu excerpt jackrabbit current includ index properti valu potenti content excerpt alway desir may properti need full-text index show excerpt
repository-1.5.dtd chang order main element current order element repository.xml element repositori filesystem secur workspac workspac version searchindex cluster datastor would like chang element repositori cluster filesystem datastor secur workspac workspac version searchindex think make sens current xml valid disabl therefor order element dtd need match repository.xml file howev soon xml valid enabl repository.xml file use wrong order longer work repositori start request enabl xml valid http //issues.apache.org/jira/browse/jcr-1462
make extract session userid subject configur sessionimpl class must extract string name prinicp subject use session userid 1.4 sessionimpl class direct select first avail princip 1.5 deleg securitymanag choos first non-group princip would use abl configur specif select criteria princip use session userid simpl mechan would involv specifi princip implement classnam configur first instanc class found subject would use userid one way implement 1.4 would extend authcontext includ method getsessionprincip encapsul select logic ad option loginmoduleconfig specifi class name princip select particular use case use ldap loginmodul sun jdk 6 repositori first princip ldaploginmodul popul subject instanc ldapprincip render userid full dn user loginmodul also add instanc userprincip whose name simpl username/uid attribut would appropri session userid sinc correspond usernam provid user applic authent mechan provid usernam expand full dn prior authent login modul configur mechan avail one could configur ldaploginmodul specifi userid extract first instanc com.sun.security.auth.userprincip sinc rewrit loginmodul alway possibl desir chang would enabl stabl integr 3rd-parti login modul may popul subject sever princip
jcr2spi configur entri size itemcach order make size itemcach configur see todo jcr2spi sessionimpl 'd like extend jcr2spi repositoryconfig default valu provid abstractrepositoryconfig test section
make collect element name configur add jcrelementnam collectiondescriptor collect annot make collection_element_nam protect instead privat
jackrabbit util attach two util jackrabbit first one datastor implement use amazon s3 storag fair straightforward configur ad datastor section repository.xml file e.g datastor class= org.jcrutil.s3datastor param name= awsaccesskey value= param name= awssecretkey value= param name= bucketnam value= param name= minmodifiedd value= 0 param name= minrecordlength value= 0 /datastor second util jcr base common vfs filesystem provid allow access jcr repositori nt file nt folder node use common vfs api ve also use mina ftp server dctm vfs http //dctmvfs.sourceforge.net/ provid ftp access jackrabbit repositori
hudson build n't detect java 5 class refer due fact maven 2 support hudson work java 5 current ci build http //hudson.zones.apache.org/hudson/job/jackrabbit-trunk/ n't detect refer class method avail java 5 class librari
htmltextextractor modifi utf-8 encod string tri extract html utf-8 encod modifi utf-8 special char like á é ó ã etc caus wrong search lucen use extractor index content see attach exampl problem
observ log error node move place error messag written log follow sequenc oper execut creat node parent creat node child child parent save creat node tmp move child tmp remov parent move tmp former path parent log say eventstatecollect unabl calcul old path move node zombi path child equal new path move eventstatecollect detect new parentid assign child expect new path differ zombi path case howev show use case path equal event generat
node addnod fail accessdeniedexcept session lack read-permiss ancestor consid session follow permiss /home permiss /home/myself read|remove|set_property|add_nod session tri add node /home/myself accessdeniedexcept thrown indic read /home except caus node 's check checked-out check asum session read-access ancestor break case see nodeimpl internalischeckedout ln 3875
background text extract possibl supporthighlight set true indexingqueu hold node index background thread text extract take time configur limit supporthighlight set true indexingqueu never use text extract immedi request nodeindex instead text extract retriev node ad index
session.checkpermiss add_nod throw pathnotfoundexcept instead accesscontrolexcept invok session.checkpermiss add_nod pathnotfoundexcept thrown except thread main javax.jcr.pathnotfoundexcept ancestor path degre 1 org.apache.jackrabbit.spi.commons.name.pathfactoryimpl pathimpl.getancestor pathfactoryimpl.java:443 org.apache.jackrabbit.core.sessionimpl.checkpermiss sessionimpl.java:710 test.main test.java:35 assum getancestor 1 use return null earlier version
webdav bind support 'm tempt work implement webdav bind protocol current defin http //greenbytes.de/tech/webdav/draft-ietf-webdav-bind-20.html issu use collect design propos track progress 1 dav resource-id live properti implement term jcr uuid howev need turn one uri webdav jcr uuid happen *really* use uuid syntax *could* use urn uuid otherwis would probabl use mint http uri serv webdav servlet note latter disadvantag move node differ server affect resource-id case server allow import uuid 2 rebind unbind method move delet excpet marshal 3 dav parent-set properti either trivial node n't share need use jcr 2.0 share set function 4 bind method either trivial shareabl node n't support need use jcr 2.0 share set function 5 cycl detect depth infin request tbd
generat cluster node id persist cluster node id specifi configur cluster node id automat generat id never persist anoth startup new probabl differ cluster node id use instead automat generat cluster id persist insid repositori home
expos bootstrapconfig servlet repostitorystartup repositroyaccess servlet use bootstrap config object initi order generat diagnost report would use abl access
jsp page compil error depoy use oc4j error welcome.jsp produc follow find symbol symbol method log java.lang.str java.lang.throw respons user group determin expect jackrabbit jsppage implement inherit generalservlet base class
beanconfig may incorrect throw configurationexcept chang jcr-1462 beanconfig.newinst may throw configurationexcept bean support configur paramet configur may case check newinst yield unsupport properti even though bean properti present given key implement use map.get key null check properti name method throw key exist valu null implement rather use map.containskey key
use delet anymor queri handler implement current use delet file keep track index segment need anymor delet general index segment delet right away need anymor may happen index reader still open time consum queri index segment delet moment case index segment name written delet file index period tri delet segment later implement rather infer index file startup segment still need use
make objectiter implement rangeiter interfac current 's possibl skip part result return form objectiter exampl implement db-like pagin featur offset/max paramet would great objectiter implement rangeiter interfac 's trivial enough sinc under nodeiter implement interfac
flush volatil index size limit reach current volatil index commit minmergedoc reach inconveni take size node account account lot small node ad volatil index commit less frequent similar node lot properti index volatil index commit frequent instead size volatil index byte trigger disk write
cachemanag resizeal slow cachemanager.resizeal call log.debug complex construct log messag messag immedi discard except use debug log level improv perform log.isdebugen use
propfind respons request properti exist report empti dav prop element propfind respons request properti exist report empti dav prop element request propfind xmlns= dav prop doesnotexist/ /prop /propfind respons d multistatus xmlns xml='http //www.w3.org/xml/1998/namespac xmlns d='dav d respons d href /d href d propstat d prop/ d status http/1.1 200 ok /d status /d propstat d propstat d prop d doesnotexist/ /d prop d status http/1.1 404 found /d status /d propstat /d respons /d multistatus
mark pend node indexingqueu direct index index current write indexing_queue.log file contain node time text extract instead index mark index node pend robust addit file must written
cluster syncdelay attribut millisecond repositori dtds document cluster syncdelay attribut sync interv second realli interv millisecond
org.apache.jackrabbit.core.query.lucene.searchindex in-memori lucen index 'm wrong actual way configur searchindex order use memori lucen index sinc configur repositori use org.apache.jackrabbit.core.state.mem.inmempersistencemanag make sens also search index offer similar configur multiindex persistentindex alway use org.apache.lucene.store.fsdirectori refactor order allow switch org.apache.lucene.store.ramdirectori
jcrurlconnect reli nt file/nt resourc jcrurlconnect class implement jcr url handler jcr class loader reli fact intend primari type jcr content child node nt file node type nt resourc write file jackrabbit webdav server case jcr content child node type nt unstructur result jcrurlconnection.connect method fail itemnotfoundexcept util.getproperti item method primari item nt unstructur node type defin
creat qvalu stream stream close qvaluefactoryimpl.cr inputstream close input stream mandat contract
updat slf4j pleas updat slf4j 1.3.0 1.5.2. jcl104-over-slf4j renam jcl-over-slf4j one use recent version exclud jcl104-over-slf4j everi jackrabbit depend quit pain impact observ best regard stephan landell
allow user disabl valid digestermapperimpl leav valid set default true creat digesterdescriptorread dtd avail anywher publish sourc usual declar map file digesterdescriptorread complain could possibl leav user way configur valid simpliest way would add constructor digestermapperimpl public digestermapperimpl inputstream stream boolean valid descriptorread new digesterdescriptorread stream digesterdescriptorreader.class.cast descriptorread .setvalid valid this.buildmapp best regard stephan landell
allow mean forc repositori synchron cluster base thread user mail list 'm log propos ad sync method forc cluster synchron use jackrabbitrepositori extens api purpos method distribut cluster environ sometim cluster synchron occur certain repositori stale state method would provid mean forc repositori updat pull possibl chang made jackrabbit repositori
jackrabbit-ocm dtd 1.5 miss publish jackrabbit-ocm dtd 1.5 miss made avail refer jackrabbit web site
classcastexcept regist custom node xml file tri regist node type xml file use follow code jackrabbitnodetypemanag nodetypemanag jackrabbitnodetypemanag workspace.getnodetypemanag resourc resourc nodedefinit system.out.println regist node +resourc nodetypemanager.registernodetyp resource.getinputstream jackrabbitnodetypemanager.text_xml receiv surpris caus java.lang.classcastexcept com.sun.org.apache.xerces.internal.dom.deferreddocumentimpl org.apache.jackrabbit.core.util.domwalker.iterateel domwalker.java:215 org.apache.jackrabbit.core.nodetype.xml.nodetypereader.getnodetypedef nodetypereader.java:121 org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:257 org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:499 pl.codeservice.jcr.jcrcustomnoderegister.registernod jcrcustomnoderegister.java:41 pl.codeservice.jcr.jcrcustomnoderegister.init jcrcustomnoderegister.java:27 regist node .cnd file work fine
includ ocm main jackrabbit build use java 5 current ocm compon separ rest jackrabbit build due fact need java 5 compil 'd like add java5 profil main jackrabbit build contain ocm compon automat activ build java 5 higher would simplifi build instruct allow us remov extra jackrabbit-ocm hudson build current use build ocm compon
ocm translate-project goal found jackrabbit-ocm pom n't specifi requir version retrotransl plugin use case caus build use older version plugin n't come translate-plugin goal goal includ latest version 1.0-alpha-4 plugin
improv undefinedtypeconverterimpl map super type effect improv org.apache.jackrabbit.ocm.manager.atomictypeconverter.impl.undefinedtypeconverterimpl 's implement public valu getvalu valuefactori valuefactori object propvalu use equal check class name decid whether object propvalu worthi attempt map apropri properti sinc purpos class provid best effort attempt map object type java.lang.object better use instanceof approach convert specif class well inherit object exampl use instanceof let us map bufferedinputstream sub class inputstream binari properti
simplifi usag ocm annot use reflect ocm init phase class descriptor load ocm annot set necessari node isabtract=tru use specifi abstract class node extend= use specifi ancestor class node isinterface= use specifi entiti interfac implement use specifi associ interfac refactor done set deprec perform suffer done applic startup objectcontentmanag initi
ocm add abil specifi name collect element xml map file collect element get map node collection-el map specifi xml config file need abil control name configur without featur queri object structur pain exampl structur class foo string id list foo children list foo friend need queri foo id 100 interest child node id 110 could specifi filter look node name childfoo flexibl ad child node name
improv multivaluecollectionconverterimpl map collect element class object.class current multivaluecollectionconverterimpl support element type object.class type contain class specifi either map file bean annot even flexibl object.class specif exclud good reasons. view definit multivaluecollectionconverterimpl make best effort convert best effort includ use undefin undefinedtypeconverterimpl convert object convers strategi run resolv patch ocm sourc test case also upload patch file right
occasion indexingqueuetest failur everi clean build latest jackrabbit trunk see follow test failur jackrabbit-cor test set org.apache.jackrabbit.core.query.lucene.testal test run 1 failur 1 error 0 skip 0 time elaps 1.665 sec failur testqueu org.apache.jackrabbit.core.query.lucene.indexingqueuetest time elaps 1.654 sec failur junit.framework.assertionfailederror junit.framework.assert.fail assert.java:47 junit.framework.assert.asserttru assert.java:20 junit.framework.assert.asserttru assert.java:27 org.apache.jackrabbit.core.query.lucene.indexingqueuetest.testqueu indexingqueuetest.java:69 typic problem disappear rebuild test still fail
config make element secur configur option order introduc new mandatori element secur configur
bundl bind deseri problem 'm tri upgrad 1.3.x jackrabbit 1.4.x branch problem exist repostori probali issu 1.5.x caus org.apache.jackrabbit.core.state.itemstateexcept fail read bundl deadbeef-face-babe-cafe-babecafebab java.lang.illegalargumentexcept invalid namespaceuri specifi org.apache.jackrabbit.core.persistence.bundle.bundledbpersistencemanager.loadbundl bundledbpersistencemanager.java:1229 org.apache.jackrabbit.core.persistence.bundle.bundledbpersistencemanager.loadbundl bundledbpersistencemanager.java:1161 look issu introduc resolv jcr-1632
xml serial jdk 1.4 broken most webdav webdav use xmlrequestent serial xml turn use org.apache.jackrabbit.commons.xml.serializingcontenthandl work around jdk 1.4 problem serial absenc explicit namespac declar follow test fail jdk 1.4 pass newer jdks public void testxmlseri throw parserconfigurationexcept ioexcept saxexcept documentbuilderfactori dbf documentbuilderfactory.newinst dbf.setnamespaceawar true documentbuild db dbf.newdocumentbuild document doc db.newdocu doc.appendchild doc.createelementn dav propfind xmlrequestent xmlent new xmlrequestent doc bytearrayoutputstream bos new bytearrayoutputstream xmlent.writerequest bos document doc2 db.pars new bytearrayinputstream bos.tobytearray element docelem doc2.getdocumentel assertequ dav docelem.getnamespaceuri
rfc4918 featur propfind/includ rfc4918 section 14.8 http //greenbytes.de/tech/webdav/rfc4918.html rfc.section.14.8 defin extens propfind allow client retriev rfc2518 properti dead properti plus set addit live properti help avoid second roundtrip retriev realli properti
rfc4918 featur absolut path destin header rfc4918 allow absolut path instead absolut uri destin header http //greenbytes.de/tech/webdav/rfc4918.html rfc.section.14.8 make simpler deal situat revers proxi involv usual awar webdav request header rewrit
jcr2spi avoid unnecessari roundtrip nodeentry.getpropertyentri sinc nodeinfo.getpropertyid alway return complet set properti name need extra round trip spi upon nodeentry.getpropertyentri correspond code could simplifi
shareabl node wrong path return caus remov delet wrong node seem shareabl node happen getpath return wrong path one anoth node share set verifi share node return correct path public void testpath throw except node a1 testrootnode.addnod a1 node a2 a1.addnod a2 node b1 a1.addnod b1 b1.addmixin mix shareabl testrootnode.sav //now shareabl node n path a1/b1 session session testrootnode.getsess workspac workspac session.getworkspac string path a2.getpath /b2 workspace.clon workspace.getnam b1.getpath path fals //now anoth shareabl node n share set n path a1/a2/b2 //use path a1/a2/b2 get node n item item session.getitem path string p item.getpath assertfals unexpect got path anoth node share set p.equal b1.getpath note happen subsequ remov delet wrong node thank manfr spot one
jackrabbit concurr review invari ve work review verifi intern concurr model jackrabbit attempt proactiv prevent kind deadlock issu ve seen overal thing seem pretti good nowaday ll updat web site result design review doc help guid futur work area also creat global invari check ll ad codebas
transaction-saf version ve work partial fix jcr-630 instead implement fulli transact version i.e checkin disappear transactin roll back 'm ensur version oper within transact leav version store consist state even transact otherwis fail point
unit test well configur unit test use annot support well defin inherit digestertestbas instead annotationtestbas
bindablerepositoryfactori n't handl repositori shutdown bindablerepositoryfactori class keep cach refer repositori even repositori shut caus follow code snippet fail illegalstateexcept hashtabl environ new hashtabl environment.put context.initial_context_factori dummyinitialcontextfactory.class.getnam environment.put context.provider_url http //jackrabbit.apache.org/ context context new initialcontext environ jackrabbitrepositori repositori string xml src/test/repository/repository.xml string dir target/repositori string key repositori creat first repositori registryhelper.registerrepositori context key xml dir true repositori jackrabbitrepositori context.lookup key repository.login .logout repository.shutdown creat second repositori configur registryhelper.registerrepositori context key xml dir true repositori jackrabbitrepositori context.lookup key repository.login .logout throw illegalstateexcept repository.shutdown
wiki refer miss cnd resourc wiki page http //wiki.apache.org/jackrabbit/nt 3aexampl refer miss resourc http //jackrabbit.apache.org/doc/nodetype/cnd.html
destin header contain uri scheme caus npe webdavrequestimpl getdestinationloc assum uri.getauthor alway non-nul rfc2518 full uri inde requir npe caus status 500 instead 400 expect rfc4918 absolut path allow propos deleg gethrefloc alreadi right thing
jcr2spi incomplet changelog combin move remov new destin parent
ocm uuid collect element chang updat ocm.upd transact current implement defaultcollectionconverterimpl recreat colleciton-el node id field specificaiton complet valid major case came across case colleciton element uuid field case also happen current implement drop element old collection-el recreat new one major flip side left brand new uuid think address uniqu characterist specifi uuid also map colleciton element patch testcas verifi implement digest peopl feel approach right work annot base testcas well think go fail even annot
provid access cluster record cluster record read/written insid o.a.j.core.cluster.clusternod privat method order support tool journal walker would display human readabl descript cluster record inner work made public
terminolog sourc use protect properti someth indirect term document method name davproperti use protect pseudonym return upon propfind/allprop n't realli accur live properti defin rfc2518/4918 *are* protect return propfind/allprop nevertheless propos updat document method name say someth like visibleinallprop
new util journal walker journal file given cluster record access provid jcr-1789 add journal walker utilt provid descript inform content journal record
jcr frozenuuid contain jcr content store version file get problem retriev jcr data custom node type store node type xrc learningcont pd xrc keyword pd xrc mimetyp pd jcr mixintyp pd xrc descript pd xrc languag pd xrc creator pd jcr creat pd xrc titl pd jcr primarytyp extend nt resourc pd jcr uuid pd jcr mixintyp pd jcr data pd jcr encod pd jcr mimetyp pd jcr lastmodifi pd jcr primarytyp commit chang later pull version get 's frozennod node frozennod v.getnod jcrconstants.jcr_frozennod return properti contain within propertyiter pi frozennode.getproperti pi.hasnext system.out.println pi.nextproperti .getnam return jcr frozenuuid jcr uuid jcr frozenprimarytyp jcr frozenmixintyp jcr primarytyp frozen node type nt frozennod pd pd pd jcr frozenuuid pd jcr uuid pd jcr mixintyp pd jcr frozenprimarytyp pd jcr frozenmixintyp pd jcr primarytyp basic would seem recurs copi insid internalfrozennodeimpl work seem case code trace add line 368 internalfrozennodeimpl.java system.out.println new node creat prop tri propertyst ps node.getproperti propertyst p ps system.out.println p.getnam system.out.println p.tostr nodestateex ns node.getchildnod nodestateex n ns system.out.println n.getnam system.out.println n.tostr catch itemstateexcept e todo auto-gener catch block e.printstacktrac get result new node creat prop http //www.jcp.org/jcr/1.0 uuid org.apache.jackrabbit.core.state.propertyst 10dd791 http //www.jcp.org/jcr/1.0 frozenprimarytyp org.apache.jackrabbit.core.state.propertyst 1c38291 http //www.jcp.org/jcr/1.0 frozenmixintyp org.apache.jackrabbit.core.state.propertyst b12fbb http //www.jcp.org/jcr/1.0 basevers org.apache.jackrabbit.core.state.propertyst b4d4b6 http //www.jcp.org/jcr/1.0 primarytyp org.apache.jackrabbit.core.state.propertyst 1f9045f http //www.jcp.org/jcr/1.0 ischeckedout org.apache.jackrabbit.core.state.propertyst 18e16b5 http //www.jcp.org/jcr/1.0 frozenuuid org.apache.jackrabbit.core.state.propertyst 174cb00 http //www.jcp.org/jcr/1.0 predecessor org.apache.jackrabbit.core.state.propertyst bb7c1b http //www.jcp.org/jcr/1.0 data org.apache.jackrabbit.core.state.propertyst d10133 http //www.jcp.org/jcr/1.0 versionhistori org.apache.jackrabbit.core.state.propertyst 1a5f001 http //www.jcp.org/jcr/1.0 encod org.apache.jackrabbit.core.state.propertyst 12fe3ef http //www.jcp.org/jcr/1.0 mimetyp org.apache.jackrabbit.core.state.propertyst 11d92c8 http //www.jcp.org/jcr/1.0 lastmodifi org.apache.jackrabbit.core.state.propertyst 8fb83a new node creat prop http //www.xerceo.com/learn/jcr-1.0 keyword org.apache.jackrabbit.core.state.propertyst 18808f3 http //www.jcp.org/jcr/1.0 uuid org.apache.jackrabbit.core.state.propertyst 397a4 http //www.jcp.org/jcr/1.0 frozenprimarytyp org.apache.jackrabbit.core.state.propertyst 1d88ffd http //www.xerceo.com/learn/jcr-1.0 creator org.apache.jackrabbit.core.state.propertyst d5625b http //www.xerceo.com/learn/jcr-1.0 languag org.apache.jackrabbit.core.state.propertyst 12c70e6 http //www.xerceo.com/learn/jcr-1.0 titl org.apache.jackrabbit.core.state.propertyst a836b3 http //www.jcp.org/jcr/1.0 frozenmixintyp org.apache.jackrabbit.core.state.propertyst 19f273c http //www.jcp.org/jcr/1.0 primarytyp org.apache.jackrabbit.core.state.propertyst 1c8e97d http //www.jcp.org/jcr/1.0 frozenuuid org.apache.jackrabbit.core.state.propertyst 15915a3 http //www.jcp.org/jcr/1.0 predecessor org.apache.jackrabbit.core.state.propertyst 19ba907 http //www.xerceo.com/learn/jcr-1.0 mimetyp org.apache.jackrabbit.core.state.propertyst 763ca1 http //www.xerceo.com/learn/jcr-1.0 descript org.apache.jackrabbit.core.state.propertyst 8687e8 http //www.jcp.org/jcr/1.0 versionhistori org.apache.jackrabbit.core.state.propertyst 44ca0f http //www.jcp.org/jcr/1.0 content org.apache.jackrabbit.core.version.nodestateex 2da721 new node defin new properti somehow extend frozennod work anyon help
namespac handl abstractsess synchron abstractsess base class o.a.j.common implicit assum session never access concurr one thread thus n't synchron access namespac map caus problem session *is* access concurr instead reli client code enforc thread-safeti explicit synchron potenti unsaf oper session instanc
advertis support rfc4918 webdav complianc class 3 recent chang propfind/allprop/includ jcr-1769 pars destination/if header jcr-1770 advertis rfc 4918 l3 support http //greenbytes.de/tech/webdav/rfc4918.html rfc.section.18.3 note still test failur tag header noth complianc class 3
spi repositoryservice.getiteminfo allow return entri outsid request tree michael duerig ask extens semant repositoryservice.getiteminfo current n't work lead inconsist hierarchi
jcr2spi avoid individu item reload upon session/item.refresh true cachebehaviour.invalid item.refresh true session.refresh true result individu reload exist entri hierarchi circumv batch read optim apart general optim refresh refresh true rather mark exist item forc reload upon next access similar behaviour implement refresh fals
jcr2spi updat event swallow cachebehavior.observ cachebehavior.observ hierarchi held within jcr2spi updat base event session-a persist add mix referenc node alreadi load session-b latter inform chang reason upon process spi event hierarchyeventlisten onev parent retriev event itemid former case contain uniqueid part known yet listen session-b consequ nodeentri affect event updat possibl fix look parent entri event n't succeed 2nd lookup use event path perform
jcr2spi lockmgr n't awar extern unlock cachebehavior.observ issu occur cachebehavior.observ lock manag expect jcr lockisdeep properti creat upon success lock howev n't case sinc time chang operation.persist method invalid affect state consequ mgr never start listen chang made jcr lockisdeep properti consequ n't awar extern remov suggest fix forc re-load lock hold node
node.restor throw java.lang.classcastexcept 'm tri upgrad 1.5 use exist 1.3.x repositori restor version node throw classcastexcept caus java.lang.classcastexcept org.apache.jackrabbit.uuid.uuid org.apache.jackrabbit.core.value.internalvalue.getstr internalvalue.java:436 org.apache.jackrabbit.core.version.internalfrozennodeimpl. init internalfrozennodeimpl.java:113 org.apache.jackrabbit.core.version.abstractversionmanager.createinternalversionitem abstractversionmanager.java:576 org.apache.jackrabbit.core.version.versionmanagerimpl.getitem versionmanagerimpl.java:258 org.apache.jackrabbit.core.version.internalversionimpl.getfrozennod internalversionimpl.java:111 org.apache.jackrabbit.core.version.versionimpl.getfrozennod versionimpl.java:120 org.apache.jackrabbit.core.nodeimpl.internalrestor nodeimpl.java:4180 org.apache.jackrabbit.core.nodeimpl.internalrestor nodeimpl.java:4141 org.apache.jackrabbit.core.nodeimpl.restor nodeimpl.java:3429 seem bug introduc alreadi 1.4 part jcr-926 internalvalu cleanup index c /data/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/version/internalfrozennodeimpl.java c /data/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/version/internalfrozennodeimpl.java revis 549117 +++ c /data/jackrabbit/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/version/internalfrozennodeimpl.java work copi -109,10 +109,10 propertyst prop prop prop.getnam .equal qname.jcr_frozenuuid special properti frozenuuid uuid.fromstr node.getpropertyvalu qname.jcr_frozenuuid .internalvalu .tostr frozenuuid uuid.fromstr node.getpropertyvalu qname.jcr_frozenuuid .getstr probabl one assumpt made wrong type qname.jcr_frozenuuid string object.tostr use
ad function map manag type enum ocm api come mapper map type enum ad function attach patch test case test featur simpl field collect field anot digest base implement
trim whitespac paramet name configur file ve coupl issu extra whitespac paramet name caus configur option lost strict valid configur set mistak even prevent repositori start one hand 's good thing user would explicit need fix broken configur would nice user intervent need sinc lead trail whitespac never allow paramet name well trim automat
jcr2spi avoid extra round trip spi upon node.getnod session.getitem upon session.getitem/itemexist node.getnode/hasnod jcr2spi current tri load node persist layer spi correspond entri exist hierarchi sinc jcr-1638 flag introduc indic child node entri complet case extra round trip could omit
jcr2spi exportsysviewtest testexportsysview_handler_session_savebinary_* occasion fail time time saw exportsysviewtest testexportsysview_handler_session_savebinary_* test fail n't occur consist never manag reproduc run test idea
workspaceupdatechannel.updatecommit log much cluster record updat info messag log think much log reduc debug level
invalid journal record xatransact prepar phase xatransact xaitemstatemanager.prepar call shareitemstagemanager.beginupd case clusternod call clusternode.updateprepar changelogrecord.writ last method locat clusterrecord systemat write begin end journal record consequ useless corrupt record written journal everytim transact end without jackrabbit updat caus polut journal cluster node tri sync corrupt updat fail clusterrecorddeseri ca n't deseri record identifi empti changelogrecord even clusterrecord implement write 's effect updat propos follow solut add follow method changelog client know 's effect updat public boolean hasupd return addedstates.isempti modifiedstates.isempti deletedstates.isempti modifiedrefs.isempti chang clusterrecord public final void write throw journalexcept hasupd record.writestr workspac dowrit record.writechar end_mark protect abstract boolean hasupd implement hasupd everi clusterrecord implement changelogrecord protect boolean hasupd return changes.hasupd || events.isempti lockrecord namespacerecord protect boolean hasupd return true nodetyperecord protect boolean hasupd return collection.isempti best regard stephan landell
benchmark improv transpar test result discuss jcr-1501
provid option ocm crud api writer enhanc function work extens object content manag angl requir method variabl base class expos protect access modifi getter caus issu current function request review addit trunk 1. ad clone implement filterimpl 2 expos public collectionconvert getcollectionconvert session session collectiondescriptor collectiondescriptor objectconvert
core mislead method name workspac session move283 copy283 clone283 seem leftov previous draft jsr 283 within jackrabbit core name workspaceimpl clone283 workspaceimpl copy283 workspaceimpl move283 sessionimpl move283 give impress jsr 283 method would return string howev case therefor suggest remov method
mani open file merg larg index segment larg index segment merg may happen lot smaller index segment creat wait larg index merg complet may lead too mani open file except system find solut larg index merg better decoupl regular index oper
jcr2spi add specif deep load node properti jcr2spi item deep load whenev hierarchi complet session itemexist session getitem ok tri load node first found properti inconveni generat unnecessari round trip spi case origin jcr call indic whether node properti expect case node.getnod string relpath node.getproperti string relpath mayb other therefor suggest add specif method hierarchymanag getnodeentri hierarchymanag getpropertyentri nodeentri getdeepnodeentri nodeentri getdeeppropertyentri someth similar
ensur queri block larg updat index current guarante long run queri block updat addit queri *may* run updat guarante depend avail index reader avail updat start index reader invalid end updat forc creation new index reader next queri execut consid follow scenario 1 updat index transact id t1 2 potenti index reader invalid 3 execut queri creat index reader r1 includ chang t1 4 updat index transact id t2 5 index reader r1 invalid 6 updat index larg transact transact id t3 7 previous updat run execut queri thread block reader avail improv detect larg transact prepar index reader potenti queri updat 6 split 6a detect larg transact prepar index reader r2 includ chang t2 6b updat index transact id t3 updat run queri use index reader r2
jcr2spi item.issam may return wrong result ancestor invalid julian detect issu jcr2spi previous shadow due heavi reload item upon save recent chang howev reload item postpon next access caus follow test fail node n testrootnode.addnod afil nt file n n.addnod jcr content nt resourc n.setproperti jcr lastmodifi calendar.getinst n.setproperti jcr mimetyp text/plain properti jcrdata n.setproperti jcr data abc propertytype.binari testrootnode.sav access properti differ session session othersess helper.getreadonlysess tri properti otherproperti properti othersession.getitem jcrdata.getpath asserttru jcrdata.issam otherproperti final othersession.logout asserttru n.issam othersession.getitem n.getpath would success reason jcrdata properti reload 's parent still _invalidated_ consequ properti n't awar 's id chang due fact nt resourc node type extend mix referenc possibl fix 1 mark item _invalid_ save instead set status non-protected/autocr properti exist forc jcrdata reload issam call drawback much round trip server make sure id date 2 chang item issam make sure workspaceid date walk hierarchi forc reload first invalid ancestor drawback referenc node rare miss caus extra round trip 3 chang item.issam compar workspacepath instead workspaceid drawback upon persist move referenc node item issam return fals take closer look code addit test would opt 2
repository.login throw illegalstateexcept call login method repositori instanc shut throw illegalstateexcept caus repositoryimpl.sanitycheck method except unexpect caller login method specifi throw one loginexcept nosuchworkspaceexcept repositoryexcept particular spec say repositoryexcept thrown anoth error occur suggest modifi repositoryimpl.login credenti string follow patch trunk index /usr/src/jackrabbit/trunk/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/repositoryimpl.java /usr/src/jackrabbit/trunk/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/repositoryimpl.java revis 706543 +++ /usr/src/jackrabbit/trunk/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/repositoryimpl.java work copi -1358,6 +1358,8 catch accessdeniedexcept ade authent subject author specifi workspac throw new loginexcept workspac access deni ade catch runtimeexcept re throw new repositoryexcept re.getmessag re final shutdownlock.readlock .releas
chang log level text extractor timeout current info messag written log text extractor job time may happen quit frequent chang log level debug
dbdatastor n't support concurr read understand set paramet copywhenread true allow concurr read spool binari properti temporari file free databas resourc connect immedi make avail thread appli patch jcr-1388 dbdatastor n't support concurr read anymor resultset kept open db connect block stream read close copywhenread set true db connect releas immedi reason guess temporari file use
chang default valu searchindex extractorpools current default valu extractorpools 0 mean disabl default think chang default use featur peopl dig document make use new default comput base avail processor suggest use 2 runtime.availableprocessor
improv comment qvalue.getlength comment qvalue.getlength document -1 return valu
plaintextextractor return empti reader encod unsupport plaintextextractor fail index text file search content text file come back result extracttext inputstream stream string type string encod method encod come empti string throw java.io.unsupportedencodingexcept line 40 return new inputstreamread stream encod modifi follow statement fix problem encod null encod null encoding.equ
xmltextextractor return empti reader encod unsupport xmltextextractor fail index xml file search content xml file come back result extracttext inputstream stream string type string encod method encod come empti string throw except line 62 reader.pars sourc modifi follow statement fix problem encod null encod null encoding.equ
miss log4j.properti file log4j.properti file miss test resourc
test case rtftextextractor test case rtftextextractor
jsr 283 creat repositoryfactori implement jsr 283 specifi repositoryfactori retriev repositori instanc base map paramet follow implement local repositori repositori home repositori configur paramet repositori obtain via jndi repositori obtain via rmi
databas data store support databas type mssql ms sql server refer schema name mssql persist manag cluster journal dbdatastor call sqlserver consist
persist support properti databasetyp persist manag cluster journal term schema use mean databas type use term schema actual quit confus view definit schema http //en.wikipedia.org/wiki/database_schema schema defin tabl field tabl relationship field tabl addit databas schema name space within databas http //java.sun.com/j2se/1.4.2/docs/api/java/sql/databasemetadata.html getschema suggest support properti databasetyp addit schema persist manag cluster journal
garbag collect delet temporari file filedatastor filedatastore.addrecord inputstream temporari file creat data written file move final locat base content hash garbag collector run whilst temp file present delet solari 10 least addrecord fail attempt renam non-exist temp file attach minim patch prevent temp file delet deleteolderrecurs regardless lastmodifi valu made minor prioriti sinc obvious workaround disabl gc
jsr 283 introduc event.getd jsr 283 add method event return date chang happen caus event
ocm test verbos ocm test case print quit bit stuff standard output make standard build output harder read would better test either use explicit assert verifi correct behaviour least redirect free-form output log file target directori
workspace.xml ca n't load bom wonder specif reason workspace.xml file load use fileread instead inputstream repositoryconfig workspace.xml file bom could happen someon edit file manual misbehav editor ca n't load content allow prolog 's littl patch fix left output part untouch i.e still use writer make littl inconsist mayb someon better knowledg jr filesystem api could fix
spi repositoryservice.obtain allow pass null workspacenam indic default workspac improv suggest tobi contract public sessioninfo obtain credenti credenti string workspacenam public sessioninfo obtain credenti credenti string workspacenam chang allow null workspacenam param workspacenam name workspac code sessioninfo /code built code null /code indic info creat default workspac consequ could either deprec repositoryconfig.getdefaultworkspacenam allow return null well remov altogeth
jcr2spi wrong status chang upon conflict remov cachebehaviour.observ cachebehaviour.observ extern remov transient remov item result wrong status chang bring back life
conveni method multipl valu singl filter ad conveni method add filter properti multipl valu simul claus jackrabbit
jackrabbit thread content issu due fat lock hello run jackrabbit 1.4.5 use persist file data store within weblog contain encount varieti thread lock issu get around problem forc synchron thread access jcr repositori reduc thread worker count 1 heavi perform impact applic 'm exact sure problem wonder someon look issu workaround/fix plan oct 30 2008 10:45:32 pdt error weblogicserv bea-000337 stuck executethread 5 queue weblogic.kernel.default self-tun busi 1,863 second work request weblogic.work.j2ee.j2eeworkmanag workwithlisten 2117cc9 configur time stuckthreadmaxtim 1,800 second stack trace thread-94 stuck executethread 5 queue weblogic.kernel.default self-tun aliv nativ suspend wait priority=1 daemon wait notif edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock 152c384 fat lock java.lang.object.wait object.java java.lang.object.wait object.java:474 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock.acquir unknown sourc org.apache.jackrabbit.core.journal.abstractjournal.lockandsync abstractjournal.java:235 org.apache.jackrabbit.core.journal.defaultrecordproducer.append defaultrecordproducer.java:49 oct 30 2008 10:45:32 pdt error weblogicserv bea-000337 stuck executethread 2 queue weblogic.kernel.default self-tun busi 1,916 second work request weblogic.work.j2ee.j2eeworkmanag workwithlisten 227b6d4 configur time stuckthreadmaxtim 1,800 second stack trace thread-25 stuck executethread 2 queue weblogic.kernel.default self-tun aliv nativ suspend wait priority=1 daemon wait notif edu.oswego.cs.dl.util.concurrent.linkednod 42d58e0 fat lock java.lang.object.wait object.java java.lang.object.wait object.java:474 edu.oswego.cs.dl.util.concurrent.synchronouschannel.put unknown sourc edu.oswego.cs.dl.util.concurrent.pooledexecutor waitwhenblocked.blockedact unknown sourc edu.oswego.cs.dl.util.concurrent.pooledexecutor.execut unknown sourc org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:334 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:307 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:317 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1072 hold lock org.apache.jackrabbit.core.query.lucene.volatileindex 3eb0f41 thin lock org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:895 org.apache.jackrabbit.jca.jcasessionhandle.sav jcasessionhandle.java:178 com.qpass.inventory.ingestion.ingestionserviceimpl 1.doinjcr ingestionserviceimpl.java:124 com.qpass.inventory.model.jcrtemplate.execut jcrtemplate.java:17 com.qpass.inventory.ingestion.ingestionserviceimpl.ingestproduct ingestionserviceimpl.java:93 com.qpass.inventory.ingestion.bulk.abstractbulkingester.ingestproduct abstractbulkingester.java:42 com.qpass.inventory.ingestion.bulk.zipfilebulkingester.processfil zipfilebulkingester.java:35 com.qpass.inventory.ingestion.bulk.ingestionworker.processfil ingestionworker.java:26 com.qpass.inventory.ingestion.bulk.ingestionwork 1.run ingestionworker.java:64 org.springframework.scheduling.commonj.delegatingwork.run delegatingwork.java:61 weblogic.work.j2ee.j2eeworkmanag workwithlistener.run j2eeworkmanager.java:245 weblogic.work.executethread.execut executethread.java:206 weblogic.work.executethread.run executethread.java:173 oct 30 2008 10:45:32 pdt error weblogicserv bea-000337 stuck executethread 1 queue weblogic.kernel.default self-tun busi 1,891 second work request weblogic.work.j2ee.j2eeworkmanag workwithlisten 2117c83 configur time stuckthreadmaxtim 1,800 second stack trace thread-24 stuck executethread 1 queue weblogic.kernel.default self-tun aliv nativ suspend wait priority=1 daemon wait notif edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock 152c384 fat lock java.lang.object.wait object.java java.lang.object.wait object.java:474 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock.acquir unknown sourc org.apache.jackrabbit.core.journal.abstractjournal.lockandsync abstractjournal.java:235 org.apache.jackrabbit.core.journal.defaultrecordproducer.append defaultrecordproducer.java:49 org.apache.jackrabbit.core.cluster.clusternod workspaceupdatechannel.updatecr clusternode.java:556 oct 30 2008 11:21:30 pdt warn netuix bea-423420 redirect execut begin refresh action redirect url /console/console.port _nfpb=true _pagelabel=homepage1. oct 30 2008 11:44:32 pdt error weblogicserv bea-000337 stuck executethread 4 queue weblogic.kernel.default self-tun busi 1,803 second work request http request /inventory/rpc/searchservic configur time stuckthreadmaxtim 1,800 second stack trace thread-51 stuck executethread 4 queue weblogic.kernel.default self-tun aliv nativ suspend wait priority=1 daemon wait notif java.lang.object 1569e04 fat lock java.lang.object.wait object.java java.lang.object.wait object.java:474 org.apache.jackrabbit.core.query.lucene.multiindex.getindexread multiindex.java:694 org.apache.jackrabbit.core.query.lucene.searchindex.getindexread searchindex.java:825 org.apache.jackrabbit.core.query.lucene.searchindex.executequeri searchindex.java:682 org.apache.jackrabbit.core.query.lucene.queryresultimpl.executequeri queryresultimpl.java:242 org.apache.jackrabbit.core.query.lucene.queryresultimpl.getresult queryresultimpl.java:271 org.apache.jackrabbit.core.query.lucene.queryresultimpl. init queryresultimpl.java:177 org.apache.jackrabbit.core.query.lucene.queryimpl.execut queryimpl.java:105 org.apache.jackrabbit.core.query.queryimpl.execut queryimpl.java:174 com.qpass.inventory.service.queryprofiler.execut queryprofiler.java:20 com.qpass.inventory.service.searchserviceimpl 1.doinjcr searchserviceimpl.java:59 com.qpass.inventory.model.jcrtemplate.execut jcrtemplate.java:17 com.qpass.inventory.service.searchserviceimpl.dosearch searchserviceimpl.java:54 com.qpass.inventory.ui.impl.searchuiserviceimpl.search searchuiserviceimpl.java:48 sun.reflect.nativemethodaccessorimpl.invoke0 nativemethodaccessorimpl.java sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:27 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:570 org.springframework.aop.support.aoputils.invokejoinpointusingreflect aoputils.java:309 org.springframework.aop.framework.reflectivemethodinvocation.invokejoinpoint reflectivemethodinvocation.java:182 org.springframework.aop.framework.reflectivemethodinvocation.proce reflectivemethodinvocation.java:148 org.acegisecurity.intercept.method.aopalliance.methodsecurityinterceptor.invok methodsecurityinterceptor.java:62 org.springframework.aop.framework.reflectivemethodinvocation.proce reflectivemethodinvocation.java:148 org.springframework.aop.framework.jdkdynamicaopproxy.invok jdkdynamicaopproxy.java:151 proxy74.search unknown sourc sun.reflect.nativemethodaccessorimpl.invoke0 nativemethodaccessorimpl.java sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:27 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:570 org.gwtwidgets.server.spring.gwtrpcserviceexporter.invokemethodonservic gwtrpcserviceexporter.java:157 org.gwtwidgets.server.spring.gwtrpcserviceexporter.processcal gwtrpcserviceexporter.java:295 com.google.gwt.user.server.rpc.remoteserviceservlet.dopost remoteserviceservlet.java:173 org.gwtwidgets.server.spring.gwtrpcserviceexporter.handlerequest gwtrpcserviceexporter.java:361 com.qpass.base.ui.security.gwtserviceexporter.handlerequest gwtserviceexporter.java:45 org.springframework.web.servlet.mvc.httprequesthandleradapter.handl httprequesthandleradapter.java:49 org.springframework.web.servlet.dispatcherservlet.dodispatch dispatcherservlet.java:831 org.springframework.web.servlet.dispatcherservlet.doservic dispatcherservlet.java:781 org.springframework.web.servlet.frameworkservlet.processrequest frameworkservlet.java:567 org.springframework.web.servlet.frameworkservlet.dopost frameworkservlet.java:511 javax.servlet.http.httpservlet.servic httpservlet.java:736 javax.servlet.http.httpservlet.servic httpservlet.java:851 weblogic.servlet.internal.stubsecurityhelp servletserviceaction.run stubsecurityhelper.java:224 weblogic.servlet.internal.stubsecurityhelper.invokeservlet stubsecurityhelper.java:108 weblogic.servlet.internal.servletstubimpl.execut servletstubimpl.java:198 weblogic.servlet.internal.tailfilter.dofilt tailfilter.java:26 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:41 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:259 org.acegisecurity.intercept.web.filtersecurityinterceptor.invok filtersecurityinterceptor.java:93 org.acegisecurity.intercept.web.filtersecurityinterceptor.dofilt filtersecurityinterceptor.java:71 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:259 com.qpass.usersecurity.auth.updatepermissionsoncontextchangefilter.dofilt updatepermissionsoncontextchangefilter.java:44 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:259 org.acegisecurity.ui.abstractprocessingfilter.dofilt abstractprocessingfilter.java:191 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:259 org.acegisecurity.context.httpsessioncontextintegrationfilter.dofilt httpsessioncontextintegrationfilter.java:195 org.acegisecurity.util.filterchainproxi virtualfilterchain.dofilt filterchainproxy.java:259 org.acegisecurity.util.filterchainproxy.dofilt filterchainproxy.java:122 org.springframework.web.filter.delegatingfilterproxy.invokedeleg delegatingfilterproxy.java:236 org.springframework.web.filter.delegatingfilterproxy.dofilt delegatingfilterproxy.java:154 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:41 com.qpass.base.applicationcontext.requestcontextfilter.dofilt requestcontextfilter.java:103 org.springframework.web.filter.delegatingfilterproxy.invokedeleg delegatingfilterproxy.java:236 org.springframework.web.filter.delegatingfilterproxy.dofilt delegatingfilterproxy.java:154 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:41 org.springframework.web.filter.characterencodingfilter.dofilterintern characterencodingfilter.java:90 org.springframework.web.filter.onceperrequestfilter.dofilt onceperrequestfilter.java:61 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:41 weblogic.servlet.internal.requesteventsfilter.dofilt requesteventsfilter.java:24 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:41 weblogic.servlet.internal.webappservletcontext servletinvocationaction.run webappservletcontext.java:3214 weblogic.security.acl.internal.authenticatedsubject.doa authenticatedsubject.java:308 weblogic.security.service.securitymanager.runa securitymanager.java:117 weblogic.servlet.internal.webappservletcontext.securedexecut webappservletcontext.java:1946 weblogic.servlet.internal.webappservletcontext.execut webappservletcontext.java:1868 weblogic.servlet.internal.servletrequestimpl.run servletrequestimpl.java:1331 weblogic.work.executethread.execut executethread.java:206 weblogic.work.executethread.run executethread.java:173 oct 2 2008 2:09:36 pm pdt error weblogicserv bea-000337 stuck executethread 1 queue weblogic.kernel.default self-tun busi 696 second work request weblogic.work.j2ee.j2eeworkmanag workwithlisten 863e564 configur time stuckthreadmaxtim 600 second stack trace thread-21 stuck executethread 1 queue weblogic.kernel.default self-tun aliv nativ suspend priority=1 daemon java.io.fileoutputstream.writebyt fileoutputstream.java java.io.fileoutputstream.writ fileoutputstream.java:260 java.io.bufferedoutputstream.writ bufferedoutputstream.java:100 hold lock java.io.bufferedoutputstream 39d70a5 thin lock org.apache.jackrabbit.core.persistence.util.filesystemblobstore.put filesystemblobstore.java:88 org.apache.jackrabbit.core.persistence.bundle.util.bundlebinding.writest bundlebinding.java:561 org.apache.jackrabbit.core.persistence.bundle.util.bundlebinding.writebundl bundlebinding.java:245 org.apache.jackrabbit.core.persistence.bundle.oracle9persistencemanager.storebundl oracle9persistencemanager.java:114 hold lock org.apache.jackrabbit.core.persistence.bundle.oracle9persistencemanag 140f7b9 thin lock org.apache.jackrabbit.core.persistence.bundle.abstractbundlepersistencemanager.putbundl abstractbundlepersistencemanager.java:703 org.apache.jackrabbit.core.persistence.bundle.abstractbundlepersistencemanager.stor abstractbundlepersistencemanager.java:526 hold lock org.apache.jackrabbit.core.persistence.bundle.oracle9persistencemanag 140f7b9 thin lock org.apache.jackrabbit.core.persistence.bundle.bundledbpersistencemanager.stor bundledbpersistencemanager.java:517 hold lock org.apache.jackrabbit.core.persistence.bundle.oracle9persistencemanag 140f7b9 thin lock org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:699 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:873 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:334 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:334 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:307 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:317 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1072 hold lock org.apache.jackrabbit.core.xasessionimpl 1f2653b thin lock org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:895 org.apache.jackrabbit.jca.jcasessionhandle.sav jcasessionhandle.java:178 com.qpass.inventory.ingestion.ingestionserviceimpl 1.doinjcr ingestionserviceimpl.java:140 com.qpass.inventory.model.jcrtemplate.execut jcrtemplate.java:17 com.qpass.inventory.ingestion.ingestionserviceimpl.ingestproduct ingestionserviceimpl.java:112 hold lock java.lang.object 849ca9e fat lock com.qpass.inventory.ingestion.bulk.abstractbulkingester.ingestproduct abstractbulkingester.java:42 com.qpass.inventory.ingestion.bulk.zipfilebulkingester.processfil zipfilebulkingester.java:35 com.qpass.inventory.ingestion.bulk.ingestionworker.processfil ingestionworker.java:26 com.qpass.inventory.ingestion.bulk.ingestionwork 1.run ingestionworker.java:64 org.springframework.scheduling.commonj.delegatingwork.run delegatingwork.java:61 weblogic.work.j2ee.j2eeworkmanag workwithlistener.run j2eeworkmanager.java:245 weblogic.work.executethread.execut executethread.java:206 weblogic.work.executethread.run executethread.java:173
jsr 283 eventjourn implement event journal specifi jsr 283
journal use buffer input output stream journal use buffer input output stream wherev possibl current place byte direct written journal file degrad perform
spi helper proper retriev org.apache.jackrabbit.spi.workspacenam param consequ helper alway obtain sessioninfo null workspac name
session.exportdocumentview work jaxb 2.1.x unmarshallerhandl tri updat project jackrabbit 1.4 1.5 found follow error critic app project use import/export featur jcr jaxb map xml jcr java object exportdocumentview work stream call like unmarshal umr getunmarshal fo new fileoutputstream /tmp/export-node.xml jcrs.exportdocumentview path fo fals fals fi new fileinputstream /tmp/export-node.xml umr.unmarsh new inputsourc fi work call use sax event handler unmarshallerhandl ctxh umr.getunmarshallerhandl jcrs.exportdocumentview path ctxh fals fals give follow except java.lang.nullpointerexcept org.xml.sax.helpers.attributesimpl.getindex attributesimpl.java:203 com.sun.xml.bind.v2.runtime.unmarshaller.interningxmlvisitor attributesimpl.getindex interningxmlvisitor.java:112 com.sun.xml.bind.v2.runtime.unmarshaller.xsinilloader.selectload xsinilloader.java:62 com.sun.xml.bind.v2.runtime.unmarshaller.proxyloader.startel proxyloader.java:53 com.sun.xml.bind.v2.runtime.unmarshaller.unmarshallingcontext._startel unmarshallingcontext.java:449 com.sun.xml.bind.v2.runtime.unmarshaller.unmarshallingcontext.startel unmarshallingcontext.java:427 com.sun.xml.bind.v2.runtime.unmarshaller.interningxmlvisitor.startel interningxmlvisitor.java:71 com.sun.xml.bind.v2.runtime.unmarshaller.saxconnector.startel saxconnector.java:137 org.apache.jackrabbit.commons.xml.exporter.startel exporter.java:438 org.apache.jackrabbit.commons.xml.documentviewexporter.exportnod documentviewexporter.java:76 org.apache.jackrabbit.commons.xml.exporter.exportnod exporter.java:298 org.apache.jackrabbit.commons.xml.exporter.exportnod exporter.java:214 org.apache.jackrabbit.commons.xml.documentviewexporter.exportnod documentviewexporter.java:77 org.apache.jackrabbit.commons.xml.exporter.exportnod exporter.java:298 org.apache.jackrabbit.commons.xml.exporter.exportnod exporter.java:214 org.apache.jackrabbit.commons.xml.documentviewexporter.exportnod documentviewexporter.java:77 org.apache.jackrabbit.commons.xml.exporter.exportnod exporter.java:298 org.apache.jackrabbit.commons.xml.exporter.export exporter.java:144 org.apache.jackrabbit.commons.abstractsession.export abstractsession.java:461 org.apache.jackrabbit.commons.abstractsession.exportdocumentview abstractsession.java:241 ua.org.dg.semaril.helpers.abstracttyperesolver.getcont abstracttyperesolver.java:31 version 1.4. work fine jukka pleas check chang org.apache.jackrabbit.commons.xml.export
modifi queryimpl enabl extern queri builder read write jcr express orderbi claus queryimpl creat jcr express fli orderbyexpress job extern querybuild class need dynam collect properti order requir queryimpl support updat jcr express return built express sinc arraylist use collect properti chang enabl one add jcrexpress queryimpl object test ad chang file path src/main/java/org/apache/jackrabbit/ocm/query/impl/queryimpl.java src/test/java/org/apache/jackrabbit/ocm/manager/query/digestersimplequerytest.java
updat lucen 2.4.1 lucen 2.4 contain coupl perform improv see http //lucene.apache.org/java/2_4_0/changes/changes.html
chang valu searchindex default_extractor_back_log valu current 100 mean 100 extractor job pend index queue addit extractor job execut current thread think would use chang valu integer.max_valu word unbound backlog fill indic repositori busi put addit burden current thread case
jcr2spi npe sessionimport checkincludesmixreferenc nodeinfo n't contain mixin name issu report tobi java.lang.nullpointerexcept java.util.array arraylist. init arrays.java:2355 java.util.arrays.aslist arrays.java:2341 org.apache.jackrabbit.jcr2spi.xml.sessionimporter.checkincludesmixreferenc sessionimporter.java:637 org.apache.jackrabbit.jcr2spi.xml.sessionimporter.startnod sessionimporter.java:209 includ test case public void testemptymixin throw except string xml xml version=\ 1.0\ encoding=\ utf-8\ \n sv node xmlns nt=\ http //www.jcp.org/jcr/nt/1.0\ \n xmlns sv=\ http //www.jcp.org/jcr/sv/1.0\ \n xmlns mix=\ http //www.jcp.org/jcr/mix/1.0\ \n xmlns jcr=\ http //www.jcp.org/jcr/1.0\ \n sv name=\ testnode1\ \n sv properti sv name=\ jcr primarytype\ sv type=\ name\ \n sv valu nt unstructur /sv valu \n /sv properti \n sv properti sv name=\ jcr title\ sv type=\ string\ \n sv valu test node /sv valu \n /sv properti \n sv properti sv name=\ jcr uuid\ sv type=\ string\ \n sv valu 1234 /sv valu \n /sv properti \n /sv node inputstream new bytearrayinputstream xml.getbyt session.importxml importuuidbehavior.import_uuid_collision_throw session.sav
beanlazyload serializ class org.apache.jackrabbit.ocm.manager.objectconverter.impl.beanlazyload serializ ocm modul mark properti lazi load exampl bean proxy=tru scenario instead object proxi beanlazyload serializ problemat use anoth technolog exampl spring webflow requir object model store scope serializ use proxi model spring webflow receiv except org.springframework.webflow.execution.repository.snapshot.snapshotcreationexcept could serial flow execut make sure object store flow flash scope serializ caus java.io.notserializableexcept org.apache.jackrabbit.ocm.manager.objectconverter.impl.beanlazyload pleas make beanlazyload serializ
jcr2spi transient remov mandatori item throw constraintviolationexcept report tobi transient remov mandatori non-protect item immedi fail instead check postpon save call sinc would perfect legal remov mandatori item re-add suggest fix itemstatevalid checkremoveconstraint check protect ignor mandatori definit
creat jackrabbit-par current jackrabbit compon use top-level multi-modul pom parent pom share mani common build set howev plan mix compon releas model 1.5.x need abl increas version number top-level pom without affect individu compon thus better move share set explicit jackrabbit-par compon keep top-level pom simpli multi-modul contain
databas data store clean code unnecessari code dbdatastor remov also test ad
add data store jackrabbit api current garbag collect part jackrabbit api howev data store garbag collect must use data store enabl propos add requir interfac jackrabbit api also allow call garbag collect use rmi
queri may throw arrayindexoutofboundsexcept 's bug descendantselfaxisquery.descendantselfaxisscorer.skipto caus except
inconsist state remov mix lockabl lock node lock holder remov mix lockabl lock node lock relat properti get remov howev lock still live present node would expect either remov mix lockabl allow lock automat releas test code public void testremovemixlockablefromlockednod throw repositoryexcept node n testrootnode.addnod nodename1 n.addmixin mixlock testrootnode.sav lock l n.lock true true n.removemixin mixlock n.save assertfals n.isnodetyp mixlock ok assertfals l.isliv lock still live assertfals n.islock node still lock list token arrays.aslist superuser.getlocktoken assertfals tokens.contain l.getlocktoken session contain token assertfals n.hasproperti jcrlockown ok. prop got remov assertfals n.hasproperti jcrlockisdeep ok. prop got remov n.unlock lockexcept node lockabl
make lazi load proxi callback serializ hello probabl christoph would nice cglib callback serializ re proxi either even target ve seen ve made beanlazyload serializ would n't better abstractlazyload serializ collectionlazyload ve done declar abstractlazyload serializ declar non-serializ resourc session volatil throw illegalstateexcept beanlazyloader.fetch collectionlazyloader.fetch session null case happen proxi serial without volatil session n't make sens lazi load target btw realiz n't clean beanclassdescriptor beanlazyloader.cleanup correct ll attach modifi class sincer stéphane landell
jcr2spi reload invalid node n't benefit batch-read issu report stefan upon reload invalid node jcr2spi n't use batch-read retriev nodeinfo basic workspaceitemstatefactori ll 92 need chang omit extra handl invalid node entri alway use repositoryservice.getiteminfo build nodest tri soon possibl
jcr2spi use jcr name path log except messag coupl place jcr2spi add string represent path name itemid exception/error messag would conveni convert jcr name jcr path ever possibl
improv perform simpl path queri queri simpl path constraint quit slow way implement current implement basic hierarch join context node set node name next locat step specifi path quit select implement rather resolv path express use item state manag similar regular path resolv jcr api
move generic lock test jcr2spi jackrabbit-jcr-test touch jackrabbit-jcr-test jsr 283 implement also move generic test jackrabbit-jcr2spi overal test suit open issu remind marker issu angela
fail node.unlock might leav inconsist transient state similar issu jcr-538 node.unlock updat lock relat properti jcr lockisdeep jcr lockown fail e.g due miss permiss might inconsist transient modif pend
spi2dav sandbox project put common releas cycl remot jsr170 call requir obvious server client side server avail download jcr webdav server http //www.apache.org/dyn/closer.cgi/jackrabbit/binaries/jackrabbit-jcr-server-1.4.1.jar http //www.apache.org/dyn/closer.cgi/jackrabbit/binaries/jackrabbit-webapp-1.4.war howev client casual mention found jackrabbit sandbox issu request spi2dav client code especi responsefactori return jcr2spi repositori implement avail download well furthermor pleas make repositoryfactori implement javax.naming.spi.objectfactori configur vs. java code need order use org.apache.jackrabbit.rmi.client.clientrepositoryfactori work
use apach tika text extract apach tika releas resolut tika-175 make tika avail java 1.4 project replac direct parser librari depend tika parser ideal 'd use tika autodetectpars ll automat detect type binari pars accord solv jcr-728 guess keep level backward compat exist textfilterclasses= configur perhap keep exist textextractor class wrapper around respect tika parser
directori previous creat differ lockfactori open close delet repositori loop open transientrepositori loop throw except directori previous creat differ lockfactori instanc test case int 0 3 i++ fileutils.deletedirectori new file repositori repositori rep new transientrepositori session session rep.login new simplecredenti new char 0 session.logout problem seem org.apache.lucene.store.fsdirectory.directori clear fsdirectory.clos call stack trace except thread main javax.jcr.repositoryexcept directori previous creat differ lockfactori instanc pleas pass null lockfactori instanc use setlockfactori chang directori previous creat differ lockfactori instanc pleas pass null lockfactori instanc use setlockfactori chang directori previous creat differ lockfactori instanc pleas pass null lockfactori instanc use setlockfactori chang org.apache.jackrabbit.core.searchmanager.initializequeryhandl searchmanager.java:555 org.apache.jackrabbit.core.searchmanager. init searchmanager.java:239 org.apache.jackrabbit.core.repositoryimpl.getsystemsearchmanag repositoryimpl.java:688 org.apache.jackrabbit.core.repositoryimpl.access 3 repositoryimpl.java:681 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.getsearchmanag repositoryimpl.java:1780 org.apache.jackrabbit.core.repositoryimpl.initworkspac repositoryimpl.java:667 org.apache.jackrabbit.core.repositoryimpl.initstartupworkspac repositoryimpl.java:480 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:321 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:618 org.apache.jackrabbit.core.transientrepositori 2.getrepositori transientrepository.java:241 org.apache.jackrabbit.core.transientrepository.startrepositori transientrepository.java:261 caus java.io.ioexcept directori previous creat differ lockfactori instanc pleas pass null lockfactori instanc use setlockfactori chang org.apache.lucene.store.fsdirectory.getdirectori fsdirectory.java:192 org.apache.jackrabbit.core.query.lucene.directory.fsdirectorymanager.getdirectori fsdirectorymanager.java:64 org.apache.jackrabbit.core.query.lucene.multiindex. init multiindex.java:227 org.apache.jackrabbit.core.query.lucene.searchindex.doinit searchindex.java:477 org.apache.jackrabbit.core.query.abstractqueryhandler.init abstractqueryhandler.java:59
rtf text extractor fail java 1.4 environ ve seen rtf text extractor fail follow error java 1.4 unix platform platform issu jackrabbit prepar case exampl log warn return empti text stream encount error java.lang.unsatisfiedlinkerror /home/jukka/bin/java/j2sdk1.4.2_18/jre/lib/i386/libawt.so libxp.so.6 open share object file file directori java.lang.classload nativelibrary.load nativ method java.lang.classloader.loadlibrary0 classloader.java:1586 java.lang.classloader.loadlibrari classloader.java:1503 java.lang.runtime.loadlibrary0 runtime.java:788 java.lang.system.loadlibrari system.java:834 sun.security.action.loadlibraryaction.run loadlibraryaction.java:50 java.security.accesscontroller.doprivileg nativ method sun.awt.nativelibloader.loadlibrari nativelibloader.java:38 sun.awt.debughelper. clinit debughelper.java:29 java.awt.eventqueue. clinit eventqueue.java:83 javax.swing.swingutilities.iseventdispatchthread swingutilities.java:1238 javax.swing.text.stylecontext.reclaim stylecontext.java:419 javax.swing.text.stylecontext.addattribut stylecontext.java:276 javax.swing.text.stylecontext namedstyle.addattribut stylecontext.java:1468 javax.swing.text.stylecontext namedstyle.setnam stylecontext.java:1278 javax.swing.text.stylecontext namedstyle. init stylecontext.java:1226 javax.swing.text.stylecontext.addstyl stylecontext.java:88 javax.swing.text.stylecontext. init stylecontext.java:68 javax.swing.text.defaultstyleddocument. init defaultstyleddocument.java:88 org.apache.jackrabbit.extractor.rtftextextractor.extracttext rtftextextractor.java:60 org.apache.jackrabbit.extractor.rtftextextractortest.testextractor rtftextextractortest.java:35 java.lang.internalerror ca n't connect x11 window server use :0.0 valu display variabl sun.awt.x11graphicsenvironment.initdisplay nativ method sun.awt.x11graphicsenvironment. clinit x11graphicsenvironment.java:134 java.lang.class.forname0 nativ method java.lang.class.fornam class.java:141 java.awt.graphicsenvironment.getlocalgraphicsenviron graphicsenvironment.java:62 sun.awt.motif.mtoolkit. clinit mtoolkit.java:81 java.lang.class.forname0 nativ method java.lang.class.fornam class.java:141 java.awt.toolkit 2.run toolkit.java:748 java.security.accesscontroller.doprivileg nativ method java.awt.toolkit.getdefaulttoolkit toolkit.java:739 java.awt.toolkit.geteventqueu toolkit.java:1519 java.awt.eventqueue.isdispatchthread eventqueue.java:676 javax.swing.swingutilities.iseventdispatchthread swingutilities.java:1238 javax.swing.text.stylecontext.reclaim stylecontext.java:419 javax.swing.text.stylecontext.addattribut stylecontext.java:276 javax.swing.text.stylecontext namedstyle.addattribut stylecontext.java:1468 javax.swing.text.stylecontext namedstyle.setnam stylecontext.java:1278 javax.swing.text.stylecontext namedstyle. init stylecontext.java:1226 javax.swing.text.stylecontext.addstyl stylecontext.java:88 javax.swing.text.stylecontext. init stylecontext.java:68 javax.swing.text.defaultstyleddocument. init defaultstyleddocument.java:88 org.apache.jackrabbit.extractor.rtftextextractor.extracttext rtftextextractor.java:60 org.apache.jackrabbit.extractor.rtftextextractortest.testextractor rtftextextractortest.java:35
avoid project.vers depend anoth one jackrabbit 1.5 avoid use project.vers depend overrid version transit depend use project.vers notabl jetti depend jackrabbit-standalon avoid problem maven 2.0.9 caus mng-2339 1 1 http //jira.codehaus.org/browse/mng-2339
move node disappear move node refresh make disappear deletedirectori new file repositori repositori rep new transientrepositori session session rep.login new simplecredenti new char 0 node root session.getrootnod node root.addnod node b a.addnod b session.sav session.mov /a/b /b b.refresh fals session.sav effect nodeiter root.getnod it.hasnext node n it.nextnod system.out.println n.getnam nodeiter it2 n.getnod it2.hasnext system.out.println it2.nextnod .getnam trunk node b list refresh root page output jcr system jcr versionstorag jcr nodetyp jackrabbit 1.4.x throw except jcr system jcr versionstorag jcr nodetyp except thread main javax.jcr.repositoryexcept fail resolv name acee31c4-c33b-4ed4-b1b5-39db6f17fb09 org.apache.jackrabbit.core.hierarchymanagerimpl.getnam hierarchymanagerimpl.java:451 org.apache.jackrabbit.core.cachinghierarchymanager.getnam cachinghierarchymanager.java:287 org.apache.jackrabbit.core.nodeimpl.getnam nodeimpl.java:1931 org.apache.jackrabbit.core.fuzz.testmoveremoverefresh.test testmoveremoverefresh.java:33 org.apache.jackrabbit.core.fuzz.testmoveremoverefresh.main testmoveremoverefresh.java:15 void deletedirectori file file file.isdirectori file list file.listfil int i=0 list.length i++ deletedirectori list file.delet
cachingindexreader.initializepar scale well larg index 40+ gb index 'm test time initi parent cach 40 minut way much need optim done background thread
make terminfosindexdivisor configur workspac larg index may consum consider heap memori lucen implement multi level skip list term index first level skip list kept memori usual issu term consist long string memori consumpt increas drastic jackrabbit token string properti also creat singl term base complet string properti valu need jcr like function long term reason increas memori consumpt
jcr2spi unprocess iteminfo call repositoryservic getiteminfo stefan report follow problem batchread config read depth infin invalid tree call node.refresh fals forc load tree e.g node.getpath afterward may still invalid item state indic iteminfo process consequ addit call getiteminfo cover load tree problem occur relat limit item-cach size problem analysi bug workspaceitemstatefactori createitemst wrapper built around iteminfo-iter later iteminfo-iter use instead wrapper pre-fetch item under iter process upon hasnext /next
msoffic text extractor offic 2007 file creat patch provid mstextextractor jackrabbit patch entir replac exist ms extractor patch appli soon poi-3.5 avail ms text extractor support doc docx ppt pptx xls xlsx patch fulli test use poi code yet avail maven repo need build local
add customiz filter gql current gql flexibl hook allow modifi queri get generat gql syntax first step 'd like introduc filter mechan use post process result set exclud certain row use express applic constraint gql
incorrect support java interfac type collect field type collect field defin interfac type follow except thrown main object insert org.apache.jackrabbit.ocm.exception.jcrmappingexcept load class interfac name interfac exampl node public class entitya field path=tru string path collect list myinterfac entityb insert new instanc entitya null entityb except thrown workaround add elementclassnam annot collect ex collect elementclassname=myinterface.class list myinterfac entityb elementclassnam use untyp collect specifi type collect objectcontentmanag use reflexion check collect class name nice avoid usag elementclassnam type collect
spi2dav creat repositoryfactori implement
jcr2spi use soft ref hierarchi stefan suggest use soft ref hierarchi
uniqu id org.apache.jackrabbit.value.binaryvalu binaryvalu method get uniqu identifi one avail way applic may read stream valu alreadi process datastor use uniqu identifi avail probabl featur quit simpl implement see also http //www.nabble.com/workspace.copi -question- -td20435164.html pleas n't repli thread instead add comment issu anoth featur getfilenam get file name store file system method may need secur mechan exampl getfilenam session system check case file modifi mayb know file name alreadi danger case
replac custom queryparser.jjt rather use lucen default implement jackrabbit version extend eas mainten move one lucen version anoth
warn build dav parent-set root-nod resourc follow warn generat calcul dav parent-set resourc repres root-nod 05.12.2008 11:49:50 *warn davresourceimpl unabl calcul parent set davresourceimpl.java line 955 javax.jcr.itemnotfoundexcept root node n't parent org.apache.jackrabbit.core.nodeimpl.getpar nodeimpl.java:2078 org.apache.jackrabbit.webdav.simple.davresourceimpl.getparentel davresourceimpl.java:949 org.apache.jackrabbit.webdav.simple.davresourceimpl.initproperti davresourceimpl.java:393 could simpli avoid slight modifi method getparentel start line 937 ad test assert node.getpar call root node
jsr 283 event user data implement jsr 283 event user data
make observ poll time configur current poll time hard code 3 second org.apache.jackrabbit.jcr2spi.workspaceimpl suggest make configur similar cachebehaviour add respect set org.apache.jackrabbit.jcr2spi.config.repositoryconfig
rmiremotebindingservlet fail initi rmi registri avail rmi registri avail rmiremotebindingservlet jcr-rmi throw except init method prevent servlet load servlet howev also map normal http url space altern mechan make rmi endpoint avail client thus would better init method log warn instead fail complet
rmi refer automat bound standalon server rmi servlet 1.5.0 standalon server initi remot refer bound rmi registri http /rmi url first access rmi bind made soon standalon server start
use configur credenti repositoryfactoryimpltest test current use hard code credenti rather use configur credenti like test
node.setprimarynodetyp redefin child-definit cover new effect nt nodeimpl.setprimarynodetyp chang primari node type node reset definit child item requir current child item part effect node type new primari type get definit reset remov case match definit found point view n't proper cope mixin type present node child item defin mixin node type present probabl touch remov run test latest 283 secur chang tri provid fix along chang
dbdatastor keep resultset open dbdatastor alway close resultset lead memori leak and/or larg memori usag seem alreadi fix trunk 1.5
updat copyright year 2009 normal licens header n't contain copyright year notice.txt file updat year 2009 appropri
custom loginmodul configur broken 1.5.0 upgrad jackrabbit 1.4.5 1.5 creat ldap except configur file chang except ad new simplesecuritymanag requir default follow substitut loginmodul loginmodul class= com.sun.security.auth.module.ldaploginmodul param name= userprovid value= ldap //localhost/ou=peopl dc=exampl dc=com param name= userfilt value= amp uid= usernam objectclass=inetorgperson param name= authzident value= usernam param name= debug value= true /loginmodul configur work correct abl authent proper jackrabbit 1.4.5 configur 1.5 throw follow except javax.jcr.loginexcept com.sun.security.auth.module.ldaploginmodul support userprovid com.sun.security.auth.module.ldaploginmodul support userprovid com.sun.security.auth.module.ldaploginmodul support userprovid org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1414 org.apache.jackrabbit.jca.jcamanagedconnectionfactory.opensess jcamanagedconnectionfactory.java:140 org.apache.jackrabbit.jca.jcamanagedconnectionfactory.createmanagedconnect jcamanagedconnectionfactory.java:176 org.apache.jackrabbit.jca.jcamanagedconnectionfactory.createmanagedconnect jcamanagedconnectionfactory.java:168 com.sun.enterprise.resource.connectorallocator.createresourc connectorallocator.java:136 com.sun.enterprise.resource.abstractresourcepool.createsingleresourc abstractresourcepool.java:891 com.sun.enterprise.resource.abstractresourcepool.createresourceandaddtopool abstractresourcepool.java:1752 com.sun.enterprise.resource.abstractresourcepool.createresourc abstractresourcepool.java:917 com.sun.enterprise.resource.abstractresourcepool.initpool abstractresourcepool.java:225 com.sun.enterprise.resource.abstractresourcepool.internalgetresourc abstractresourcepool.java:516 com.sun.enterprise.resource.abstractresourcepool.getresourc abstractresourcepool.java:443 com.sun.enterprise.resource.poolmanagerimpl.getresourcefrompool poolmanagerimpl.java:248 com.sun.enterprise.resource.poolmanagerimpl.getresourc poolmanagerimpl.java:176 com.sun.enterprise.connectors.connectionmanagerimpl.internalgetconnect connectionmanagerimpl.java:337 com.sun.enterprise.connectors.connectionmanagerimpl.allocateconnect connectionmanagerimpl.java:189 com.sun.enterprise.connectors.connectionmanagerimpl.allocateconnect connectionmanagerimpl.java:165 com.sun.enterprise.connectors.connectionmanagerimpl.allocateconnect connectionmanagerimpl.java:158 org.apache.jackrabbit.jca.jcarepositoryhandle.login jcarepositoryhandle.java:98 org.apache.jackrabbit.jca.jcarepositoryhandle.login jcarepositoryhandle.java:89 org.apache.jackrabbit.jca.jcarepositoryhandle.login jcarepositoryhandle.java:73 com.threesl.sapphire.cradlejcr.login cradlejcr.java:44 tri initialcontext ctx new initialcontext repositori repositori ctx.lookup jcr/repositori session repository.login credenti catch except e com.threesl.sapphire.cradlews.dologin cradlews.java:68 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 com.sun.jersey.impl.model.method.dispatch.entityparamdispatchprovid typeoutinvoker._dispatch entityparamdispatchprovider.java:136 com.sun.jersey.impl.model.method.dispatch.resourcejavamethoddispatcher.dispatch resourcejavamethoddispatcher.java:85 com.sun.jersey.impl.uri.rules.httpmethodrule.accept httpmethodrule.java:123 com.sun.jersey.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:111 com.sun.jersey.impl.uri.rules.resourceclassrule.accept resourceclassrule.java:71 com.sun.jersey.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:111 com.sun.jersey.impl.uri.rules.rootresourceclassesrule.accept rootresourceclassesrule.java:63 com.sun.jersey.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:722 com.sun.jersey.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:692 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:344 javax.servlet.http.httpservlet.servic httpservlet.java:831 org.apache.catalina.core.applicationfilterchain.servletservic applicationfilterchain.java:411 org.apache.catalina.core.standardwrappervalve.invok standardwrappervalve.java:290 org.apache.catalina.core.standardcontextvalve.invokeintern standardcontextvalve.java:271 org.apache.catalina.core.standardcontextvalve.invok standardcontextvalve.java:202 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:632 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:577 com.sun.enterprise.web.webpipeline.invok webpipeline.java:94 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.java:206 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:632 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:577 org.apache.catalina.core.standardpipeline.invok standardpipeline.java:571 org.apache.catalina.core.containerbase.invok containerbase.java:1080 org.apache.catalina.core.standardenginevalve.invok standardenginevalve.java:150 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:632 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:577 org.apache.catalina.core.standardpipeline.invok standardpipeline.java:571 org.apache.catalina.core.containerbase.invok containerbase.java:1080 org.apache.coyote.tomcat5.coyoteadapter.servic coyoteadapter.java:272 com.sun.enterprise.web.connector.grizzly.defaultprocessortask.invokeadapt defaultprocessortask.java:637 com.sun.enterprise.web.connector.grizzly.defaultprocessortask.doprocess defaultprocessortask.java:568 com.sun.enterprise.web.connector.grizzly.defaultprocessortask.process defaultprocessortask.java:813 com.sun.enterprise.web.connector.grizzly.defaultreadtask.executeprocessortask defaultreadtask.java:341 com.sun.enterprise.web.connector.grizzly.defaultreadtask.dotask defaultreadtask.java:263 com.sun.enterprise.web.connector.grizzly.defaultreadtask.dotask defaultreadtask.java:214 com.sun.enterprise.web.connector.grizzly.taskbase.run taskbase.java:265 com.sun.enterprise.web.connector.grizzly.ssl.sslworkerthread.run sslworkerthread.java:106 caus javax.security.auth.login.loginexcept com.sun.security.auth.module.ldaploginmodul support userprovid org.apache.jackrabbit.core.security.authentication.localauthcontext.login localauthcontext.java:68 org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1407 62 javax.security.auth.login.loginexcept com.sun.security.auth.module.ldaploginmodul support userprovid org.apache.jackrabbit.core.security.authentication.localauthcontext.login localauthcontext.java:68 org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1407 org.apache.jackrabbit.jca.jcamanagedconnectionfactory.opensess jcamanagedconnectionfactory.java:140 org.apache.jackrabbit.jca.jcamanagedconnectionfactory.createmanagedconnect jcamanagedconnectionfactory.java:176 org.apache.jackrabbit.jca.jcamanagedconnectionfactory.createmanagedconnect jcamanagedconnectionfactory.java:168 com.sun.enterprise.resource.connectorallocator.createresourc connectorallocator.java:136 com.sun.enterprise.resource.abstractresourcepool.createsingleresourc abstractresourcepool.java:891 com.sun.enterprise.resource.abstractresourcepool.createresourceandaddtopool abstractresourcepool.java:1752 com.sun.enterprise.resource.abstractresourcepool.createresourc abstractresourcepool.java:917 com.sun.enterprise.resource.abstractresourcepool.initpool abstractresourcepool.java:225 com.sun.enterprise.resource.abstractresourcepool.internalgetresourc abstractresourcepool.java:516 com.sun.enterprise.resource.abstractresourcepool.getresourc abstractresourcepool.java:443 com.sun.enterprise.resource.poolmanagerimpl.getresourcefrompool poolmanagerimpl.java:248 com.sun.enterprise.resource.poolmanagerimpl.getresourc poolmanagerimpl.java:176 com.sun.enterprise.connectors.connectionmanagerimpl.internalgetconnect connectionmanagerimpl.java:337 com.sun.enterprise.connectors.connectionmanagerimpl.allocateconnect connectionmanagerimpl.java:189 com.sun.enterprise.connectors.connectionmanagerimpl.allocateconnect connectionmanagerimpl.java:165 com.sun.enterprise.connectors.connectionmanagerimpl.allocateconnect connectionmanagerimpl.java:158 org.apache.jackrabbit.jca.jcarepositoryhandle.login jcarepositoryhandle.java:98 org.apache.jackrabbit.jca.jcarepositoryhandle.login jcarepositoryhandle.java:89 org.apache.jackrabbit.jca.jcarepositoryhandle.login jcarepositoryhandle.java:73 com.threesl.sapphire.cradlejcr.login cradlejcr.java:44 com.threesl.sapphire.cradlews.dologin cradlews.java:68 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 com.sun.jersey.impl.model.method.dispatch.entityparamdispatchprovid typeoutinvoker._dispatch entityparamdispatchprovider.java:136 com.sun.jersey.impl.model.method.dispatch.resourcejavamethoddispatcher.dispatch resourcejavamethoddispatcher.java:85 com.sun.jersey.impl.uri.rules.httpmethodrule.accept httpmethodrule.java:123 com.sun.jersey.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:111 com.sun.jersey.impl.uri.rules.resourceclassrule.accept resourceclassrule.java:71 com.sun.jersey.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:111 com.sun.jersey.impl.uri.rules.rootresourceclassesrule.accept rootresourceclassesrule.java:63 com.sun.jersey.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:722 com.sun.jersey.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:692 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:344 javax.servlet.http.httpservlet.servic httpservlet.java:831 org.apache.catalina.core.applicationfilterchain.servletservic applicationfilterchain.java:411 org.apache.catalina.core.standardwrappervalve.invok standardwrappervalve.java:290 org.apache.catalina.core.standardcontextvalve.invokeintern standardcontextvalve.java:271 org.apache.catalina.core.standardcontextvalve.invok standardcontextvalve.java:202 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:632 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:577 com.sun.enterprise.web.webpipeline.invok webpipeline.java:94 org.apache.catalina.core.standardhostvalve.invok standardhostvalve.java:206 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:632 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:577 org.apache.catalina.core.standardpipeline.invok standardpipeline.java:571 org.apache.catalina.core.containerbase.invok containerbase.java:1080 org.apache.catalina.core.standardenginevalve.invok standardenginevalve.java:150 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:632 org.apache.catalina.core.standardpipeline.doinvok standardpipeline.java:577 org.apache.catalina.core.standardpipeline.invok standardpipeline.java:571 org.apache.catalina.core.containerbase.invok containerbase.java:1080 org.apache.coyote.tomcat5.coyoteadapter.servic coyoteadapter.java:272 com.sun.enterprise.web.connector.grizzly.defaultprocessortask.invokeadapt defaultprocessortask.java:637 com.sun.enterprise.web.connector.grizzly.defaultprocessortask.doprocess defaultprocessortask.java:568 com.sun.enterprise.web.connector.grizzly.defaultprocessortask.process defaultprocessortask.java:813 com.sun.enterprise.web.connector.grizzly.defaultreadtask.executeprocessortask defaultreadtask.java:341 com.sun.enterprise.web.connector.grizzly.defaultreadtask.dotask defaultreadtask.java:263 com.sun.enterprise.web.connector.grizzly.defaultreadtask.dotask defaultreadtask.java:214 com.sun.enterprise.web.connector.grizzly.taskbase.run taskbase.java:265 com.sun.enterprise.web.connector.grizzly.ssl.sslworkerthread.run sslworkerthread.java:106 rar5117 fail obtain/cr connect connect pool jackrabbit-connection-pool reason fail creat session com.sun.security.auth.module.ldaploginmodul support userprovid com.sun.security.auth.module.ldaploginmodul support userprovid
eventfilterimpl implement tostr would simplifi log debug
valid searchindex configur valid configur repository.xml workspace.xml enabl jcr-1462 unfortun problem loginmodul searchindex found see jcr-1920 later disabl two modul valid searchindex possibl need chang avoid problem chang done major version minor version
startup fail cluster jackrabbit upgrad 1.4.4 1.5 close relat jcr-1087 call checklocalrevisionschema late preaprestat alreadi use local_revis tabl checklocalrevisionschema call checkschema
ms-sql tablespac support filesystem persistencemanag trunk releas version 1.5.0 complet support ms-sqlserver tablespac patch origin submit via jcr-1295 appli 1.4 trunk
cve-2009-0026 cross site script issu webapp jackrabbit-webapp form n't proper escap user input display result html page lead potenti cross site script issu exampl search.jsp q= 25 22 3cscript 3ealert 1 3c/script 3e swr.jsp q= 25 script alert 1 /script swrnum=1 cve id issu cve-2009-0026 issu report red hat secur respons team
text.unescap throw stringindexoutofboundsexcept get follow except java.lang.stringindexoutofboundsexcept string index rang 3 java.lang.string.substr string.java:1935 org.apache.jackrabbit.util.text.unescap text.java:407 org.apache.jackrabbit.util.text.unescap text.java:438 would better fail illegalargumentexcept
1.5.0 webapp point 1.4 javadoc 's jackrabbit api link jackrabbit webapp 1.5.0 point http //jackrabbit.apache.org/api/1.4/ updat point http //jackrabbit.apache.org/api/1.5/
extra /div populate.jsp populate.jsp page jackrabbit-webapp extra /div caus minor breakag page layout
sharedfieldcach stringindex memori leak caus oom 's sharedfieldcach stringindex work proper meant cach docnumb lucen along term sort issu twofold solut second one first one realli solvabl jr pov lucen index reader alreadi heavili cach term explan problem *each* uniqu properti sort new lucen scoredoccompar creat see sharedfieldcompar newcompar new compar creat *per* lucen indexread sharedfieldcache.stringindex store weakhashmap key indexread indexread almost *never* garbag collect merg thus unus sharedfieldcache.stringindex rest jvm life sometim short seen simpl unittest attach obvious result pretti fast oom 1 issu one cach term sharedfieldcache.stringindex becom huge sort common properti date present lot node sort larg properti like titl sharedfieldcache.stringindex quick use hundr mb coupl hundr thousand node titl issu alreadi lucen issu lucen alreadi cach term otoh realli doubt whether index long string valu untoken lucen half work solut might two-step solut first sort first 10 char compar return 0 take entir string sort 2 issu two cach term sharedfieldcache.stringindex frequent spars consum incred amount memori string array contain main null valu exampl see attach unit test add 1.000.000 node queri sort non exist properti ll loos 1.000.000 4 byte 4 mb memori sort anoth non exist prop anoth 4 mb lost 100 time 400 mb lost ca n't reclaim ll attach solut work realli fine still almost unavoid memori absorpt make much smaller solut 10 string array fill consid array alreadi spars move hashmap solut perform decreas much case larg sparsiti increas less memori consumpt less gc etc perhap seem common issu certain unit test product environ memori snapshot indic memori held sharedfieldcach stringindex lucen term harder avoid 'd like see 1.5.1 other ok
session.getattribut call alway return empti array repositori repositori new rmiremoterepositori //localhost:1099/jackrabbit.repositori simplecredenti c new simplecredenti alex ok .tochararray c.setattribut anattribut avalu session repository.login c aworkspac string attr=s.getattributenam array attr empti accord doc contain attribut simplecredenti object
dbdatastor delet temporari file use final current read dbdatastor creat temporari file default applic n't fulli read close input stream file delet best solut use final in.clos applic easili forgotten suggest delet temp file use final small perform penalti creat temporari object compar i/o small note fileinputstream fileoutputstream also use final
incomplet jcr-1664 fix bindablerepositori chang jcr-1664 fulli merg trunk 1.4 branch due typo commit messag revis 683268 result bindablerepositori subclass becom bit cumbersom implement hope fix 1.4.7 subclass written partial fulli merg jcr-1664 fix work
incorrect licens header multipl compon notic thoma number file miss incorrect licens header trunk 1.5 branch follow list troublesom file 1.5.1 releas candid ./jackrabbit-api/src/main/java/org/apache/jackrabbit/api/security/user/user.java ./jackrabbit-core/src/main/java/org/apache/jackrabbit/core/security/authorization/principalbased/acleditor.java ./jackrabbit-core/src/main/java/org/apache/jackrabbit/core/security/authorization/principalbased/aclprovider.java ./jackrabbit-core/src/test/java/org/apache/jackrabbit/api/jsr283/retention/abstractretentiontest.java ./jackrabbit-core/src/test/java/org/apache/jackrabbit/core/security/authorization/combined/testall.java ./jackrabbit-core/src/test/java/org/apache/jackrabbit/core/security/authorization/principalbased/evaluationtest.java ./jackrabbit-core/src/test/java/org/apache/jackrabbit/core/security/authorization/principalbased/testall.java ./jackrabbit-core/src/test/java/org/apache/jackrabbit/core/security/principal/testall.java ./jackrabbit-core/src/test/java/org/apache/jackrabbit/core/security/user/administratortest.java ./jackrabbit-ocm/src/main/java/org/apache/jackrabbit/ocm/manager/objectconverter/impl/abstractlazyloader.java ./jackrabbit-ocm/src/main/java/org/apache/jackrabbit/ocm/manager/objectconverter/impl/ocmproxy.java ./jackrabbit-ocm/src/main/java/org/apache/jackrabbit/ocm/manager/objectconverter/impl/ocmproxyutils.java ./jackrabbit-ocm/src/test/java/org/apache/jackrabbit/ocm/testmodel/multivaluewithobjectcollection.java ./jackrabbit-ocm/src/test/java/org/apache/jackrabbit/ocm/testmodel/simpleannotedabstractclass.java ./jackrabbit-ocm/src/test/java/org/apache/jackrabbit/ocm/testmodel/simpleannotedclass.java ./jackrabbit-ocm/src/test/java/org/apache/jackrabbit/ocm/testmodel/simpleinterface.java ./jackrabbit-ocm/src/test/java/org/apache/jackrabbit/ocm/testmodel/unmappedinterface.java ./jackrabbit-ocm/src/test/java/org/apache/jackrabbit/ocm/testmodel/version/author.java ./jackrabbit-ocm/src/test/java/org/apache/jackrabbit/ocm/testmodel/version/pressrelease.java
automat licens header check use apach rat plugin avoid problem incorrect licens header includ autom header check maven build hudson run check whenev chang commit
accessmanag ask properti jcr creat permiss actual creation object implement custom accessmanag jackrabbit v1.5+ bug creat new object perform addnod accessmanag isgrant method overrid 'd perform follow code string perm null nodeid nodeid mhiermgr.resolvenodepath ppath propertyid propid null nodeid==nul propid mhiermgr.resolvepropertypath ppath system.out.println path ppath.tostr todo ok happen new object creat accessmanag ask read access properti propid==nul return true nodeid propid.getparentid system.out.println result path jecar default group testgroup http //www.jcp.org/jcr/1.0 creat stacktrac org.jecars.cars_accessmanager.isgr cars_accessmanager.java:844 org.jecars.cars_accessmanager.isgr cars_accessmanager.java:806 org.apache.jackrabbit.core.itemmanager.canread itemmanager.java:339 org.apache.jackrabbit.core.itemmanager.canread itemmanager.java:326 org.apache.jackrabbit.core.itemmanager.createitemdata itemmanager.java:696 org.apache.jackrabbit.core.itemmanager.getitemdata itemmanager.java:291 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:228 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:493 org.apache.jackrabbit.core.nodeimpl.createchildproperti nodeimpl.java:479 org.apache.jackrabbit.core.nodeimpl.createchildnod nodeimpl.java:535 org.apache.jackrabbit.core.nodeimpl.internaladdchildnod nodeimpl.java:795 org.apache.jackrabbit.core.nodeimpl.internaladdnod nodeimpl.java:729 org.apache.jackrabbit.core.nodeimpl.internaladdnod nodeimpl.java:677 org.apache.jackrabbit.core.nodeimpl.addnod nodeimpl.java:2110 seem read permiss jcr creat properti request object actual creat
jcr-test make properti valu properti type configur test-cas use node.setproperti property.setvalu most hardcod valu possibl specifi type valu config
privileg content represent properti type name content represent jcr privileg reflect fact privileg name chang simpl string jcr name
jcaresourceadapt must implement serializ run weblog 10.0 server cluster environ deploy rar alway get warn weblog stdout.log jan 15 2009 2:42:10 pst warn connector bea-190155 complianc checking/valid resourc adapt /home/user/jackrabbit_rar/jackrabbit-jca-1.5.0.rar result follow warn ra.xml resourceadapter-class class org.apache.jackrabbit.jca.jcaresourceadapt implement java.io.serializ not. tri jndi lookup repositori got error object found jackrabbit|nul jackrabbit entri jndi tree visibl javax.naming.refer jcarepositoryhandl due warn due ca n't deploy jackrabbit-jca test/product environ 'm expert jca feel fair easi implement serializ jcaresourceadapt pleas help us
jsr 283 node type attribut subtyp rule jcr 2.0 clarifi node type attribut subtyp rule wherea jcr 1.0 n't mandat specif behavior 3.7.6.7 node type attribut subtyp rule state assum subtyp order child node must order child node specifi primari item inherit set must overrid
let abstractismlockingtest test fail proper test abstractismlockingtest class call junit.framework.assert.fail thread manag junit framework therefor call fail interpret test failur mere log consol build succeed easi see stub implement ismlock type return non-nul refer two acquir method downgrad method mani follow stacktrac appear build succeed except thread thread-1 junit.framework.assertionfailederror acquirewritelock must block junit.framework.assert.fail assert.java:47 org.apache.jackrabbit.core.state.abstractismlockingtest.checkblock abstractismlockingtest.java:214 org.apache.jackrabbit.core.state.abstractismlockingtest 1.run abstractismlockingtest.java:88 java.lang.thread.run thread.java:613
nullpointerexcept delegatingobservationdispatch caus paramet null call createeventstatecollect null nullpointerexcept jackrabbit tri synchronis index 22 janv 2009 09:53:56 info clusternod process revis 4485 22 janv 2009 09:53:56 error clusternod unexpect error sync journal null java.lang.nullpointerexcept org.apache.jackrabbit.core.observation.delegatingobservationdispatcher.createeventstatecollect delegatingobservationdispatcher.java:80 org.apache.jackrabbit.core.version.versionmanagerimpl dynamicescfactory.createeventstatecollect versionmanagerimpl.java:556 org.apache.jackrabbit.core.version.versionmanagerimpl.externalupd versionmanagerimpl.java:500 org.apache.jackrabbit.core.cluster.clusternode.process clusternode.java:853 org.apache.jackrabbit.core.cluster.changelogrecord.process changelogrecord.java:457 org.apache.jackrabbit.core.cluster.clusternode.consum clusternode.java:799 org.apache.jackrabbit.core.journal.abstractjournal.dosync abstractjournal.java:213 org.apache.jackrabbit.core.journal.abstractjournal.sync abstractjournal.java:188 org.apache.jackrabbit.core.cluster.clusternode.sync clusternode.java:315 org.apache.jackrabbit.core.cluster.clusternode.run clusternode.java:286 java.lang.thread.run thread.java:595 fact method createeventstatecollect delegatingobservationdispatch call versionmanagerimpl session paramet null delegatingobservationdispatch public eventstatecollect createeventstatecollect sessionimpl session path pathprefix string userdata null tri userdata observationmanagerimpl session.getworkspac .getobservationmanag .getuserdata catch repositoryexcept e never happen implement support observ return new eventstatecollect session pathprefix userdata versionmanagerimpl dynamicescfactori public eventstatecollect createeventstatecollect sessionimpl sourc return obsmgr.createeventstatecollect sourc version_storage_path versionmanagerimpl public void externalupd changelog chang list event long timestamp string userdata throw repositoryexcept eventstatecollect esc getescfactori .createeventstatecollect null esc.addal event esc.settimestamp timestamp esc.setuserdata userdata sharedstatemgr.externalupd chang esc
test index properti check default index properti first org.apache.jackrabbit.core.query.lucene.nodeindex addvalu use follow condit propertytype.nam type properti isindex name || name.equ nameconstants.jcr_primarytyp || name.equ nameconstants.jcr_mixintyp addnamevalu doc fieldnam value.getqnam 'd effici test default properti first everi node anyway queri custom index rule everi time
domexcept namespace_err thrown export document view tri export node exportdocumentview get domexcept jackrabbit 1.5.2 version 1.4.6 work fine xerc version 2.8.1 code document document documentbuilder.newdocu element exportel element document.appendchild document.createel export result result new domresult exportel transformerhandl transformerhandl saxtransformerfactory.newtransformerhandl transformerhandler.setresult result session.exportdocumentview workflownode.getpath transformerhandl true fals except org.w3c.dom.domexcept namespace_err attempt made creat chang object way incorrect regard namespac org.apache.xerces.dom.coredocumentimpl.checkdomnserr unknown sourc org.apache.xerces.dom.attrnsimpl.setnam unknown sourc org.apache.xerces.dom.attrnsimpl. init unknown sourc org.apache.xerces.dom.coredocumentimpl.createattributen unknown sourc org.apache.xerces.dom.elementimpl.setattributen unknown sourc com.sun.org.apache.xalan.internal.xsltc.trax.sax2dom.startel sax2dom.java:194 com.sun.org.apache.xml.internal.serializer.toxmlsaxhandler.closestarttag toxmlsaxhandler.java:204 com.sun.org.apache.xml.internal.serializer.tosaxhandler.flushpend tosaxhandler.java:277 com.sun.org.apache.xml.internal.serializer.toxmlsaxhandler.startel toxmlsaxhandler.java:646 com.sun.org.apache.xalan.internal.xsltc.trax.transformerhandlerimpl.startel transformerhandlerimpl.java:263 org.apache.jackrabbit.commons.xml.exporter.startel exporter.java:438 org.apache.jackrabbit.commons.xml.documentviewexporter.exportnod documentviewexporter.java:76 org.apache.jackrabbit.commons.xml.exporter.exportnod exporter.java:298 org.apache.jackrabbit.commons.xml.exporter.exportnod exporter.java:214 org.apache.jackrabbit.commons.xml.documentviewexporter.exportnod documentviewexporter.java:77 org.apache.jackrabbit.commons.xml.exporter.exportnod exporter.java:295 org.apache.jackrabbit.commons.xml.exporter.export exporter.java:144 org.apache.jackrabbit.commons.abstractsession.export abstractsession.java:461 org.apache.jackrabbit.commons.abstractsession.exportdocumentview abstractsession.java:241
datastor gc.stopscan option data store garbag collect current work like gc.scan gc.stopscan gc.deleteunus current stopscan call except thrown user friend instead stopscan option allow time may use indic garbag collect finish tri gc.scan gc.deleteunus final gc.stopscan share repositori gc1.scan gc2.scan gc1.deleteunus gc2.stopscan
databas data store close result set databas data store n't close one result set problem databas anyway fix
move common valid check singl place check effect lock node checked-in protect item definit etc abund throughout jackrabbit-cor addit retent hold ad need check well suggest move check common util class pass item list check perform batcheditemoper alreadi provid similar pattern oper item state therefor suggest move flag base itemvalid add util method need
enhanc jcr remot extend webdav spi impl basic remot servlet
add support ingr rdbms hi folk ve put togeth stuff figur requir add support use ingr rbms ll upload svn diff ve done 1.5.2 version tag repositori look around could n't see way run test suit use ingr dbms provid possibl current environ cheer
web.xml refer 2.2 dtd web.xml present jackrabbit-webapp project contain follow doctyp doctyp web-app public -//sun microsystem inc.//dtd web applic 2.3//en http //java.sun.com/j2ee/dtds/web-app_2_2.dtd probabl meant doctyp web-app public -//sun microsystem inc.//dtd web applic 2.3//en http //java.sun.com/dtd/web-app_2_3.dtd sinc depend also point version 2.3 servlet-api nobodi object adjust accord
determin properti state differ skip binari valu o.a.j.jcr2spi.state.propertystate.diffpropertydata propertydata alway consid two binari valu differ current implement compar two binari valu equal implement general byte byte comparison valu like alway expens consid valu differ right start
virtualnodetypestateprovid creat propertyst type valu .gettyp virtualnodetypestateprovid creat item state content represent node type definit case jcr defaultvalu hard code type properti state thus jcr properti propertytype.str nt-definit nt propertydefinit howev state jcr defaultvalu n't requir type thus type rather determin base valu current behaviour lead situat property.gettyp property.getvalu 0 .gettyp point view bug
patch remov stutter itemvalid itemvalid duplic code reason remov duplic permiss permission.non path path item.getprimarypath accessmgr.isgr item.getprimarypath permiss return fals permiss permission.non path path item.getprimarypath accessmgr.isgr path permiss return fals
patch remov stutter nodest code duplic code reason index src/main/java/org/apache/jackrabbit/jcr2spi/state/nodestate.java src/main/java/org/apache/jackrabbit/jcr2spi/state/nodestate.java revis 740824 +++ src/main/java/org/apache/jackrabbit/jcr2spi/state/nodestate.java work copi -449,7 +449,7 nodest parent getpar nodeid wspid nodeid getworkspaceid def definitionprovider.getqnodedefinit getpar .getnodetypenam getnam getnodetypenam wspid def definitionprovider.getqnodedefinit parent.getnodetypenam getnam getnodetypenam wspid return def
imposs comparison nodetypeimpl org.apache.jackrabbit.jcr2spi.nodetype.nodetypeimpl public boolean isnodetyp name nodetypenam return getnam .equal nodetypenam || ent.includesnodetyp nodetypenam getnam string nodetypenam name alway fals perhap meant public boolean isnodetyp name nodetypenam return getnam .equal nodetypename.getlocalnam || ent.includesnodetyp nodetypenam
invalid node type definit test_nodetypes.xml attempt regist node type defin core/src/test/resources/org/apache/jackrabbit/core/nodetype/xml/test_nodetypes.xml fail invalid refer constraint autocr prop-def without default valu invalid requir type autocr prop-def undefin allow invalid requir primari type non exist invalid default primari type non exist
populate.jsp use java 1.5 method method urlconnection.setreadtimeout
use new jackrabbit parent pom offici releas new org.apache.jackrabbit parent:2 pom start use parent jackrabbit build
preserv uuid document version histori repositori migrat work migrat util openkm perform chang jackrabit-cor enabl version import preserv modif date also modifi org.apache.jackrabbit.core.nodeimpl preserv uuid migrat process migrat process need chang repositori node definit jackrabbit ca n't deal actual ve attach pdf chang need jackrabbit-cor work problem migrat repositori
jsr 283 evalu capabl expos session.hascap
text.unescap preserv unicod charact input text.unescap contain charact \u00ff signific byte lost result garbl output unescap function preserv charact order use decod internation resourc identifi rfc 3987
authent order chang 1.4.x 1.5.x 1.4.x insid repositoryimpl.login first local configur check configur loginmodul unsuccess jaa compon ask authcontext authctx loginmoduleconfig lmc repconfig.getloginmoduleconfig lmc null authctx new authcontext.jaa repconfig.getappnam credenti els 1.5.x behaviour move simplesecuritymanager.init chang loginmoduleconfig loginmodconf config.getloginmoduleconfig authctxprovid new authcontextprovid config.getappnam loginmodconf authctxprovider.isjaa log.info init use jaa loginmodul configur config.getappnam els authctxprovider.isloc problem jboss jaa implemant authctxprovider.isjaa alway true reason result configuration.getappconfigurationentri appnam never empti jaas.config specifi liferay use differ appnam take effect alway configur insid jaas.config use think still first local configur concern use jaa
clean spi-common pom.xml pom.xml contain line copi jackrabbit-cor actual need log4j.properti also miss test resourc see attach patch
deadlock concurr read transact write oper isuu introduc resolv jcr-1755 transaction-saf version fix chang sequenc commit time order acquir lock disturb
test class main sourc tree org.apache.jackrabbit.core.testrepositori main sourc folder src/main/java instead test folder src/test/java build jackrabbit-cor success even move class test folder look like mistak
except root caus swallow various place re-throw except root caus swallow place jackrabbit main convert ioexcept
provid chang log consolid spi-common provid base implement consolid chang log batch
usermanag limit set properti expos authorizableimpl authorizableimpl current expos properti present node repres user/group limit properti set api i.e non-protect prop defin rep authoriz node type
nullpointerexcept garbagecollector.scan datastor configur run garbag collector separ thread everi 5 minut garbagecollector gc sessionimpl msession .createdatastoregarbagecollector gc.scan gc.stopscan int du gc.deleteunus use jackrabbit v1.5.2 get sometim null pointer except java.lang.nullpointerexcept org.apache.jackrabbit.core.data.garbagecollector.scan garbagecollector.java:153
jackrabbit 's lucen base queri implement check properti constraint root node xpath queri kind /jcr root properti constraint appar alway match
abstractrecord ineffici list.indexof abstractrecord keep list alreadi use uuid refer index use record use list scale well record grow larger e.g transact 10k node take minut machin journal enabl time spent list.indexof abstractrecord.getorcreateindex
appendrecord write singl byte disk appendrecord initi buffer write memori start write temp file soon occupi 64k heap switch temp file data written unbuff
optim queri relat path order claus follow jcr-800 add way configur relat properti path aggreg index configur aggreg properti handl much effici use order implement jcr-800 use fallback aggreg configur see attach patch detail
usermanag miss assert princip name n't creat users/group princip empti name allow
exportsysviewtest fail system properti org.xml.sax.driv specifi exportsysviewtest class use xmlreaderfactory.createxmlread method depend system properti org.xml.sax.driv specifi appar use transformerfactori work around issu way problem appear chang xml export featur use custom serial class instead jaxp transform serial see jcr-1952 current workaround explicit forc transform load realli fix caus issu exampl replac xmlreader instanc saxpars
move *.log file target/ jackrabbit-cor compon alreadi put derby.log file target/ along build test artifact mani compon n't yet generat file target/ good make easi clean thing also thing like rat check jcr-1937 easier 's need worri extra file
handl date valu far futur prevent persist set date properti valu far futur e.g. year 20009 save session caus index compon throw except see datefield timetostr method furthermor repositori restart properti valu retriev anymor valueformatexcept caus empti valu restart repositori empti search index work index fail n't look effect queri
perform fix deseri larg jcr binari valuehelper.deseri profil import larg pdf file magnolia 3.6.3 use jackrabbit 1.4 jcr repositori found larg cpu time spent http-8080-4 daemon prio=6 tid=0x5569fc00 nid=0x6ec runnabl 0x5712d000..0x5712fb14 java.lang.thread.st runnabl java.io.fileoutputstream.writebyt nativ method java.io.fileoutputstream.writ fileoutputstream.java:260 org.apache.jackrabbit.util.base64.decod base64.java:269 org.apache.jackrabbit.util.base64.decod base64.java:184 org.apache.jackrabbit.value.valuehelper.deseri valuehelper.java:759 org.apache.jackrabbit.core.xml.bufferedstringvalue.getvalu bufferedstringvalue.java:258 org.apache.jackrabbit.core.xml.propinfo.appli propinfo.java:132 look sourc code base64.decod becam obvious write 1to3byt chunk unbuff fileoutputstream thus call os kernel mani time write byte caus lot cpu usag without disk usag provid fix quit trivial wrap fileoutputstream bufferedoutputstream
initi hierarchi cach startup case may desir initi hierarchi cach search index startup current initi done background larger workspac put consider load repositori may slow access queri configur paramet forc repositori initi hierarchi cach startup return repositori instanc initi complet default valu would current behaviour use background thread
deadlock concurr commit report followup jcr-1979 's case two transact may concurr insid commit bad break main assumpt http //jackrabbit.apache.org/concurrency-control.html transact first acquir version write lock look deeper find version write lock acquir transact commit contain version oper incorrect transact case need access version store check refer
support system properti defin defaulttransactiontimeout xasess possibl defin defaulttransactiontimeout xasess systemproperti
updat spi lock match jcr 2.0 jcr2spi current use jsr 170 way determin whether given session own lock check lock token null jsr 283 new lock method defin hand lock token alway null session-scop lock addit 283-lock allow specifi timeout hint hint owner info display inform purpos propos chang spi extend org.apache.jackrabbit.spi.lockinfo cover new function ad jsr 283 add variant repositoryservice.lock allow specifi timeout owner hint propos chang jcr2spi chang jcr2spi make use new function modifi test session lock holder main affect lockoper lockmanag impl lock impl
jcr2spi remov valid check same-nam node properti jsr 170 disallow parent node properti child node name limit remov jsr 283 ri jackrabbit-cor alreadi remov check would suggest chang jcr2spi accord leav valid under spi impl 'm mistaken jsr 170 requir assert singl place itemstatevalid
refer old repository-1.x.dtd compon still refer old version repository-1.x.dtd compon upgrad repository-1.6.dtd
import string special charact fail session.importxml workspace.importxml n't work correct case import larg foreign languag exampl chines text properti valu could result incorrect valu platform reason bufferedstringvalu buffer larg string temporari file use platform default encod read write text bufferedstringvalu relat slow system import larg text binari data use fd .sync export string valu contain carriag return \r charact truncat platform export string valu contain charact code 32 exclud newlin \n tab \t exampl form feed \f import string valu base64 encod
system search manag use sessionitemstatemanag note jcr-2000 system search manag respons index /jcr system subtre use sessionitemstatemanag instanc system session instead shareditemstatemanag under default workspac caus deadlock see thread dump jcr-2000 one thread access lockmanag also use system session anoth thread persist version chang see search-on-sism.patch attach jcr-2000 fix issu
larg file download webdav caus except download larg file 2gb webdav caus except note upload file work ok jackrabbit configur use filesystem datastor tri retriev file e.g wget get follow error gozer desktop greg wget http-user=xxx http-passwd=xxx http //localhost:8080/jackrabbit/repository/workbench/pkgs/demo/zip/zips/largetest-1.zip 08:59:50 http //localhost:8080/jackrabbit/repository/workbench/pkgs/demo/zip/zips/largetest-1.zip largetest-1.zip resolv localhost done connect localhost 127.0.0.1 :8080 connect http request sent await respons 500 input string 3156213760 09:04:53 error 500 input string 3156213760 server log see 06.03.2009 08:59:50 *info repositoryimpl securitymanag class org.apache.jackrabbit.core.security.simple.simplesecuritymanag repositoryimpl.java line 432 2009-03-06 09:04:53.822 :warn /jackrabbit/repository/workbench/pkgs/demo/zip/zips/largetest-1.zip java.lang.numberformatexcept input string 3156213760 java.lang.numberformatexception.forinputstr numberformatexception.java:48 java.lang.integer.parseint integer.java:459 java.lang.integer.parseint integer.java:497 org.apache.jackrabbit.webdav.io.outputcontextimpl.setcontentlength outputcontextimpl.java:60 org.apache.jackrabbit.server.io.exportcontextimpl.informcomplet exportcontextimpl.java:192 org.apache.jackrabbit.server.io.iomanagerimpl.exportcont iomanagerimpl.java:157 org.apache.jackrabbit.webdav.simple.davresourceimpl.spool davresourceimpl.java:332 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.spoolresourc abstractwebdavservlet.java:422 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.doget abstractwebdavservlet.java:388 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.execut abstractwebdavservlet.java:229 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.servic abstractwebdavservlet.java:196 javax.servlet.http.httpservlet.servic httpservlet.java:820 org.mortbay.jetty.servlet.servletholder.handl servletholder.java:502 org.mortbay.jetty.servlet.servlethandler.handl servlethandler.java:363 org.mortbay.jetty.security.securityhandler.handl securityhandler.java:216 org.mortbay.jetty.servlet.sessionhandler.handl sessionhandler.java:181 org.mortbay.jetty.handler.contexthandler.handl contexthandler.java:766 org.mortbay.jetty.webapp.webappcontext.handl webappcontext.java:417 org.mortbay.jetty.handler.contexthandlercollection.handl contexthandlercollection.java:230 org.mortbay.jetty.handler.handlercollection.handl handlercollection.java:114 org.mortbay.jetty.handler.handlerwrapper.handl handlerwrapper.java:152 org.mortbay.jetty.server.handl server.java:324 org.mortbay.jetty.httpconnection.handlerequest httpconnection.java:534 org.mortbay.jetty.httpconnect requesthandler.headercomplet httpconnection.java:864 org.mortbay.jetty.httpparser.parsenext httpparser.java:533 org.mortbay.jetty.httpparser.parseavail httpparser.java:207 org.mortbay.jetty.httpconnection.handl httpconnection.java:403 org.mortbay.io.nio.selectchannelendpoint.run selectchannelendpoint.java:409 org.mortbay.thread.boundedthreadpool poolthread.run boundedthreadpool.java:451 problem seem lie outputcontextimpl.java make mistak potenti tri pars long integ http //svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-webdav/src/main/java/org/apache/jackrabbit/webdav/io/outputcontextimpl.java method setcontentlength long contentlength public void setcontentlength long contentlength int length integer.parseint contentlength length 0 response.setcontentlength length 'm sure fix might like public void setcontentlength long contentlength contentlength integer.max_valu contentlength 0 response.setcontentlength int contentlength els contentlength integer.max_valu response.addhead content-length long.tostr contentlength would least set content-length header preliminari test seem allow download file
retriev row path via hierarchi manag instead node jackrabbit current load node associ result row retriev path load node may prevent retriev path cach hierarchi manag
replac mixin type n't preserv properti nodeimpl.setprimarytyp string attempt redefin node properti defin previous node type also appear new type match definit node/properti new type valu convers match node/properti fail children remov exampl say node harri primari type human defin bloodgroup properti set primari type unrel type anim similar bloodgroup properti properti valu surviv call setprimarytyp anim appar possibl mixin nodeimpl.removemixin name immedi remov children defin mixin strict present effect node type result mixin remov addit nodeimpl.addmixin name immedi throw nodetypeconflictexcept attempt add mixin defin identically-nam properti prior call removemixin exampl say node matrix mixin type movi defin titl properti wish replac movi mixin node anoth jcr titl mixin type exist titl properti delet occur regardless order removemixin addmixin call without session.sav call one option code defer valid possibl node/properti remov session.sav call strict bug jsr-283 seem leav detail assign node type section 5.5 unspecifi howev say node.removemixin string semant chang effect node type persist chang jcr mixintyp properti occur save ideal could emul nice behaviour nodeimpl.setprimarytyp string mixin type
ioutil getcreat simpledateformat threadsaf simpledateformat threadsaf http //bugs.sun.com/bugdatabase/view_bug.do bug_id=4146524 see except attach imho enough synchron format method httpdateformat class
jcr2spi warn upon reload properti valu tobi report follow log-warn written upon reload properti valu warn properti data discard seem introduc jcr-1963 take closer look get impress discard flag set valu notifi accord addit seem mergeresult dispos method someth similar order replac old properti valu proper releas
cachingindexread nullpointerexcept initi parent cach use jackrabbit-core-1.4.9 upgrad jackrabbot-core-1.4.6 follow except log code except happen introduc jcr-1884 first includ 1.4.9 core releas 10.03.2009 18:56:25 *warn cachingindexread error initi parent cach cachingindexreader.java line 310 java.lang.nullpointerexcept org.apache.jackrabbit.core.query.lucene.cachingindexread cacheiniti 2.collect cachingindexreader.java:362 org.apache.jackrabbit.core.query.lucene.cachingindexread cacheinitializer.collecttermdoc cachingindexreader.java:426 org.apache.jackrabbit.core.query.lucene.cachingindexread cacheinitializer.initializepar cachingindexreader.java:356 org.apache.jackrabbit.core.query.lucene.cachingindexread cacheinitializer.run cachingindexreader.java:306 org.apache.jackrabbit.core.query.lucene.cachingindexreader. init cachingindexreader.java:109 org.apache.jackrabbit.core.query.lucene.abstractindex.getreadonlyindexread abstractindex.java:276 org.apache.jackrabbit.core.query.lucene.multiindex.getindexread multiindex.java:731 org.apache.jackrabbit.core.query.lucene.multiindex. init multiindex.java:303 org.apache.jackrabbit.core.query.lucene.searchindex.doinit searchindex.java:454 com.day.crx.query.lucene.lucenehandler.doinit lucenehandler.java:93 org.apache.jackrabbit.core.query.abstractqueryhandler.init abstractqueryhandler.java:53 org.apache.jackrabbit.core.searchmanager.initializequeryhandl searchmanager.java:583 org.apache.jackrabbit.core.searchmanager. init searchmanager.java:265 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.getsearchmanag repositoryimpl.java:1600 org.apache.jackrabbit.core.repositoryimpl.initworkspac repositoryimpl.java:606 org.apache.jackrabbit.core.repositoryimpl.getworkspaceinfo repositoryimpl.java:718 com.day.crx.core.crxrepositoryimpl.login crxrepositoryimpl.java:964 org.apache.sling.jcr.base.internal.sessionpool.acquiresess sessionpool.java:268 org.apache.sling.jcr.base.internal.sessionpoolmanager.login sessionpoolmanager.java:99 org.apache.sling.jcr.base.abstractslingrepository.login abstractslingrepository.java:240 org.apache.sling.jcr.base.abstractslingrepository.loginadministr abstractslingrepository.java:206 org.apache.sling.jcr.base.abstractslingrepository.pingandcheck abstractslingrepository.java:506 org.apache.sling.jcr.base.abstractslingrepository.startrepositori abstractslingrepository.java:810 org.apache.sling.jcr.base.abstractslingrepository.activ abstractslingrepository.java:629 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 org.apache.felix.scr.impl.immediatecomponentmanager.createimplementationobject immediatecomponentmanager.java:226 org.apache.felix.scr.impl.immediatecomponentmanager.createcompon immediatecomponentmanager.java:133 org.apache.felix.scr.impl.abstractcomponentmanager.activateintern abstractcomponentmanager.java:476 org.apache.felix.scr.impl.abstractcomponentmanager.enableintern abstractcomponentmanager.java:398 org.apache.felix.scr.impl.abstractcomponentmanager.access 000 abstractcomponentmanager.java:36 org.apache.felix.scr.impl.abstractcomponentmanag 1.run abstractcomponentmanager.java:99 org.apache.felix.scr.impl.componentactorthread.run componentactorthread.java:85 10.03.2009 18:56:31 *info searchindex index initi /u01/media/u01/crxlocal/workspaces/dailymail-prod/index version 2 searchindex.java line 492
childnodeentriesimpl.upd log incorrect error childnodeentriesimpl log error correct updat childinfo iter contain multipl entri name|index uniqueid ignor childnodeinfo line 186
system view export truncat carriag return string contain carriag return \r charact truncat platform
jcr-remot pathnotfoundexcept item name end .json jcr-remoting-servlet contain follow comment issu todo tobefix behav proper resourc path i.e item name todo end .json extens and/or contain depth-selector pattern
spi2davex valu factori test spi test suit fail
overlap index aggreg updat overlap index aggreg index configur item updat belong multipl aggreg first aggreg root re-index
webdav add support dav lockroot see http //www.webdav.org/specs/rfc4918.html element_lockroot element ad rfc 4918. add constant davconst extend activelock interfac accord
workspaceinfo.dispos deregist shareditemstatemanag virtual item state provid automat dispos idl workspac free unus workspac correspond shareditemstatemanag releat persistencemanag still kept memori referenc virtual item state provid lead memori leak
bundl cach clear *bundlepersistencemanag close close method persist manag respons releas acquir resourc case bundlepersistencemanag also free memori clear bundl cach
optim concurr queri number bottleneck prevent scalabl concurr queri fake norm creat repeat new searchindex combinedindexread creat queri prevent cach fake norm level combinedindexread creat fake norm index reader span multipl sub reader ineffici avoid like jackrabbit specif queri one termqueri awar sub reader weight creat one scorer sub reader effect reus fake norm sub reader uuid cach map document number uuid basic invers exist docnumbercach uuid lookup regular bottleneck segmentread method document synchron i/o queri often contain constraint limit result node certain flag set liter constraint cach queri handler
dbdatastor garbag collect deadlock sometim unit test hang follow thread block look like databas level deadlock caus dbdatastor implement databas use apach derbi org.apache.jackrabbit.core.data.db.dbdatastore.addrecord line=298 org.apache.jackrabbit.core.value.blobindatastore.getinst line=120 org.apache.jackrabbit.core.value.internalvalue.getblobfilevalu line=644 org.apache.jackrabbit.core.value.internalvalue.cr line=123 org.apache.jackrabbit.core.propertyimpl.setvalu line=609 org.apache.jackrabbit.core.propertyimpl.setvalu line=525 org.apache.jackrabbit.core.nodeimpl.setproperti line=2312 org.apache.jackrabbit.core.data.copyvaluetest.dotestcopi line=64 org.apache.jackrabbit.core.data.copyvaluetest.testcopystream line=45 org.apache.jackrabbit.core.data.db.dbdatastore.updatelastmodifiedd line=641 org.apache.jackrabbit.core.data.db.dbdatastore.touch line=631 org.apache.jackrabbit.core.data.db.dbdatastore.getrecord line=484 org.apache.jackrabbit.core.value.blobindatastore.getdatarecord line=136 org.apache.jackrabbit.core.value.blobindatastore.getlength line=92 org.apache.jackrabbit.core.data.garbagecollector.scanpersistencemanag org.apache.jackrabbit.core.data.garbagecollector.scan line=161 org.apache.jackrabbit.core.data.gcthread.run line=52
remov background initi hierarchi cach follow jcr-1998 rethink initi background thread come conclus initi either complet startup background thread put addit load process possibl fight i/o startup procedur
jsr 283 jcr path jsr 283 jcr path defin consist combin follow segment • name segment j j jcr name integ index ≥ 1 • identifi segment u u jcr identifi • root segment • self segment • parent segment name segment extend qualifi form see issu jcr-1712 identifi segment new jsr283 alway identifi node see new method node.getidentifi non-standard part alway need standard follow make path non-standard expand name segment trail index 1 identifier-seg get resolv upon pass api call take path exist node n't get resolv use creat path valu object except path valu jcr path return api normal standard thus never identifier-bas path valu contrast must convert standard form must normal i.e redund segment identifi must preserv
improv log messag includ path cluster log messag append oper log messag current revis number interest log messag would user name path chang specif path chang contain multipl node
jcr-server basiccredentialsprovidertest throw npe defaultauthhead init param miss password issu report dominiqu jaeggi missing-auth-head init param form uid instead uid pw uid result npe upon simplecredenti creation
add option skip checkschema method sometim checkschema method various compon db filesystem db persist manag db journal fail detect requir tabl alreadi exist result startup fail see mail thread dev list http //jackrabbit.markmail.org/message/jtq2sqis2aceh7ro option skip checkschema method startup would solv issu
indexingqueu check initi index creation default valu 100 extractorbacklogs lot text extract time temp folder get fill extractor*.tmp file indexingqueue.getfinisheddocu call initi index creation issu regular oper method call period timer thread
set_properti permiss check save new node new node save add_nod permiss check set_properti permiss 's properti itemimpl.validatetransientitem alreadi fix trunk implement slight differ
spi2dav setup autom test execut task copi jcr-1877
lower log level o.a.j.jcr2spi.query.nodeiteratorimpl nodeiteratorimpl.fetchnext log error load node skip node sinc error condit node could delet anoth session log occur warn level
add log inform node/properti type determin fail getqnodedefinit getqpropertydefinit o.a.j.jcr2spi.nodetype.itemdefinitionproviderimpl silent ignor error might occur determin node properti type instead method use repositoryservice.getnodedefinit repositoryservice.getpropertydefinit respect determin type might lead difficult track problem repositoryservic call occur error node type definit suggest add log statement method
creat jcr-client modul task copi jcr-1877 think would wise creat new modul main consist repositoryfactori combin jackrabbit-jcr2spi known also spi implement
repositoryfactori implement jcr2spi repositoryfactori implement jcr2spi also cover acquir under repositoryservic purpos suggest creat repositoryservicefactori jackrabbit-spi encapsul spi implement specifc instanti repositoryservic factori probabl need singl method take paramet map repositoryfactori implement jcr2spi work uri contain requir inform connect/acquir repositoryservic use jcr2spi/spi2jcr/jackrabbit-cor jcr+file //path/to/repository/hom config=repository.xml use jcr2spi/spi2dav jcr+dav //localhost:8080/server/repository/ br=4 use jcr2spi/spi2davex jcr+davex //localhost:8080/server/repository/ implement repositoryservicefactori must check scheme decid handl creat repositoryservic instanc otherwis must return null mean would singl name connect uri repositoryservicefactori implement
pass resultfetchsize/limit hint sortedlucenequeryhit sortedlucenequeryhit current use default valu 100 taken lucen initi retriev sort result larger result set optim caus re-execut under queri valu 200 400 800 1600 3200 6400 etc instead queri hit get limit set queri resultfetchs configur searchindex
jcr-server missing-auth-map init paramet option guestcredenti login missing-auth-map paramet servlet contain jcr-server defin follow param-valu anonym anonym /param-valu descript defin miss author header handl 1 init-param miss 401 respons generat suiteabl client eg webdav client send proper author header possibl server never sent 401 2 init-param present empti valu null-credenti return thus forc null login repositori 3 init-param user password valu respect simpl credenti generat /descript jcr 2.0 introduc guestcredenti use obtain anonym session therefor probabl extend/modifi missing-auth-param way allow distinguish null-login guest login case miss author header
test failur org.apache.jackrabbit.test.testal subsequ test run fail unless mvn clean first e run org.apache.jackrabbit.spi2jcr.spi.testal test run 50 failur 0 error 0 skip 0 time elaps 3.965 sec run org.apache.jackrabbit.test.testal test run 1038 failur 11 error 0 skip 0 time elaps 44.925 sec failur run org.apache.jackrabbit.spi2jcr.jcr2spi.testal test run 394 failur 0 error 0 skip 0 time elaps 5.416 sec result fail test testorderbyascend org.apache.jackrabbit.test.api.query.sqlorderbytest testorderbydescend org.apache.jackrabbit.test.api.query.sqlorderbytest testorderbydefault org.apache.jackrabbit.test.api.query.sqlorderbytest testdocorderindexednot org.apache.jackrabbit.test.api.query.xpathposindextest testdocorderpositionfunct org.apache.jackrabbit.test.api.query.xpathdocordertest testdocorderpositionindex org.apache.jackrabbit.test.api.query.xpathdocordertest testdocorderlastfunct org.apache.jackrabbit.test.api.query.xpathdocordertest testdocorderfirstfunct org.apache.jackrabbit.test.api.query.xpathdocordertest testorderbyascend org.apache.jackrabbit.test.api.query.xpathorderbytest testorderbydescend org.apache.jackrabbit.test.api.query.xpathorderbytest testorderbi org.apache.jackrabbit.test.api.query.xpathorderbytest
workspac shut creat initi index happen maxidletim configur workspac repository.xml workspac index default workspac idl check consid workspac idl system session open configur idl time elaps also case workspac initi repositori either check workspac still initi need move search manag initi workspaceinfo.doiniti method
optim refresh oper current implement recurs refresh oper caus full travers sub-tre root item caus refresh potenti expens instead invalid item respect sub-tre propos mark root sub-tre invalid mark would includ time stamp also individu item would time stamp resolut time item access would check resolut time stamp older latest invalid time stamp check whether invalid appli travers path would re-resolv case resolut time stamp updat approach would make invalid much cheaper without put much addit load simpl item access moreov addit load travers path appli invalid pend
xpath queryformat may produc malform xpath statement queri tree contain select properti *and* order claus xpath queryformat produc malform xpath statement e.g //element foo a| b order bar round trip //element foo order bar/ a| b
jsr 283 shareabl node support queri
provid base class simplifi read repositoryservic implement base class simplifi implement repositoryservic read access
repositorystub implement jackrabbit-cor current set jackrabbit repositori use tck relat complex oper larg repositorystubimpl.properti file lot special craft test content set worri make hard set new tck test instanc various jcr spi layer simplifi thing 'd like introduc repositorystubimpl class relat configur file insid src/main/java jackrabbit-cor
jsr 283 binari interfac binari interfac replac deprec method getting/set inputstream given jcr valu method creat binari valu valuefactori
creat multipl repositori instanc point home open second session remov .lock file follow test case use reproduc bug repositori repo1 new transientrepositori repoconfig session session1_1 repo1.login session session2_2 repo1.login repositori repo2 new transientrepositori repoconfig fail expect session session2_1 repo2.login fail javax.jcr.repositoryexcept repositori home /tmp/_repositori appear alreadi lock current process expect session session2_2 repo2.login work repositori repo3 new transientrepositori repoconfig fail either expect session session3_1 repo3.login fail javax.jcr.repositoryexcept repositori home /tmp/_repositori appear alreadi lock current process expect session session3_2 repo3.login fail javax.jcr.repositoryexcept directori previous creat differ lockfactori instanc open first session repo2 fail also remov .lock file thus second session succeed may corrupt repositori multipl session open multipl repositori behaviour occur repo3 .lock file remov slight differ case new except thrown creat lucen index clear twist case repositori point home must creat simultan think must robust prevent data corrupt reproduc bug jr 1.4.7 1.5.3 think affect least version jr 1.5.3
jsr 283 versionmanag new version method jsr 283 introduc new interfac versionmanag expos version function former present node workspac addit follow new method checkpoint string abspath version merg string abspath string srcworkspac boolean besteffort boolean isshallow nodeiter merg node activitynod nodeiter see issu jcr-1592 activ configur featur
jsr 283 access property/nod session new method access properti node session getnod string abspath node getnodebyidentifi string id node getproperti string abspath properti test exist nodeexist string abspath boolean propertyexist string abspath boolean remov removeitem string abspath void function ad rev 571494 rev 712984 apart session.removeitem test case present far
jsr 283 access node properti array nameglob propos final draft contain new variant node.getnod node.getproperti node.getnod string nameglob node.getproperti string nameglob see section 5.2.2 iter child item 5.2.2.2 name glob
jsr 283 refer dereferenc properti valu refer new method node.getrefer string name propertyiter node.getweakrefer propertyiter node.getweakrefer string name propertyiter derferenc jsr 283 follow properti type may dereferenc node refer weakrefer path type convert either type new method property.getproperti return properti point path valu type convert path
jsr 283 repositori complianc jsr 283 defin huge set new chang repositori descriptor well coupl new method repositori interfac allow api consum determin featur set expos implement new method repository.isstandarddescriptor string key repository.issinglevaluedescriptor string key repository.getdescriptorvalu string key valu repository.getdescriptorvalu string key valu
filedatastor garbag collect delet file still need look like filedatastor garbag collect regular scan persist manag scan delet file still need current look like reason last access time resolut oper system 2 second fat mac os x ntfs 100 ns 1 second file system mean file scan begin sometim delet later last modifi time scan start
add new jsr283 featur cnd reader/writ current cnd parser writer support new option specifi jsr283
use intern cnd file builtin nodetyp jackrabbit node type registri read built node type xml file sinc cnd compact node type definit notat specifi jsr283 would like drop builtin .xml file read builtin node typeson .cnd file certain help develop furthermor node type jsr283 spece cnd convert xml pain error prone
nodetyperegistri could auto-subtyp nt base basic copi jcr-433 fix somehow sneak tie regist primari nodetyp extend nt base follow error thrown primari node type except nt base must direct indirect deriv nt base sinc registri abl detect error would easi auto-subtyp nodetyp nt base imo 's pointless explicit add nt base everi superclass set analog n't need extend java.lang.object explicit compil automat
filedatastor open stream realli necessari current propertyimpl.getvalu open fileinputstream filedatastor use applic n't use valu stream never close propertyimpl.getvalu return internalgetvalu .tojcrvalu session internalvalue.tojcrvalu case propertytype.binari return new binaryvalu blobfilevalu val .getstream blobindatastore.getstream return getdatarecord .getstream filedatarecord.getstream return new fileinputstream file one solut return lazi file input stream open file read stream close file last byte read mayb alreadi class apach common mayb
jcr-server respect child node definit jcr content creat new file jcr content default nt unstructur caus file creation fail under persist store i.e spi implement support nt unstructur jcr content suggest check whether under implement provid node type jcr content use one default nt unstructur
indexmerg throw null pointer except without stacktrac get follow error log file random seem happen often creat lucen indic happen time well indexmerg error error merg index java.lang.nullpointerexcept code org.apache.jackrabbit.core.query.lucene.indexmerg line 344 appear point error log inform provid throwabl n't sent log tostr version except n't abl tell index corrupt happen suggest logger chang determin null pointer come first resolv actual issu occur
jsr 283 new event type
jsr 283 identifi base event filter jsr 283 pfd state event whose associ parent node one identifi uuid string array receiv paramet null identifier-rel restrict place event receiv note specifi empti array instead null result node listen uuid use backward compat jcr 1.0
jsr 283 qom sql2 adjust titl issu cover queri chang enhanc jsr 283
datastor garbag collect fail use workspac maxidletim garbagecollectortest fail workspac idl timeout data store garbag collector prevent workspac close-on-idl propos solut instead use regular system session garbag collector use special regist system session session get garbag collect longer use mean patch requir jcr-1216 unreferenc session get garbag collect appli workspac code initi workspac requir wspinfo.getsystemsess sessionimpl session systemsession.cr rep wspinfo.getconfig mark session activ workspac get dispos workspace-janitor garbag collector done rep.onsessioncr session
nameset implement equal object hashcod method merg context use nameset.equ nameset method compar two set howev nameset class overrid default object.equ object method inherit abstractset e therefor merg check fail even though mixin set object instanc equival perform oppos set equival behavior observ one thread check ism given time demonstr code avail upon request nodestatemerg line 83 mixin type state.getmixintypenam .equal overlayedstate.getmixintypenam mixin modifi look diff ca n't determin chang happen sinc diff either remov mixin overlay ad mixin transient state would look ident return fals propos solut implement nameset.equ method public boolean equal object obj obj null obj instanceof nameset nameset oo nameset obj return oo.names.equ this.nam return fals
queri work log workspac index login workspac index creat queri return result unless relog output run attach code sampl node node1240842434531 creat workspac test1240842434312 properti name set somevalueofmyproperti ask queri select nt unstructur nt name like somevalueofmyproperti found 1 node delet index ask queri select nt unstructur nt name like somevalueofmyproperti found 0 node delet index done
blob store open stream realli necessari current propertyimpl.getvalu open fileinputstream blobstor use applic n't use valu stream never close see also jcr-2067 filedatastor
datastor garbag collect fail workspac initi test case gceventlistenertest fail follow except testeventlisten org.apache.jackrabbit.core.data.gceventlistenertest time elaps 10.235 sec error java.lang.illegalstateexcept workspac test initi org.apache.jackrabbit.core.repositoryimpl workspaceinfo.getpersistencemanag repositoryimpl.java:1703 org.apache.jackrabbit.core.sessionimpl.createdatastoregarbagecollector sessionimpl.java:694 org.apache.jackrabbit.core.data.gceventlistenertest.dotesteventlisten gceventlistenertest.java:75 org.apache.jackrabbit.core.data.gceventlistenertest.testeventlisten gceventlistenertest.java:49
test case tck mainten jcr 2.0 umbrella issu changes/addit junit test case setup config
upgrad java 5 base platform discuss mail list jackrabbit 2.0 use java 5 base platform 1.x branch updat build set trunk use java 5
drop maven 1 compat migrat maven 1 maven 2 build system jackrabbit 1.2 kept compat relat maven 1 build maven-one-plugin deploy build also local maven 1 repositori hard downstream project use maven 1 anymor 's safe us simplifi build drop use maven-one-plugin
jsr 283 new method nodetyp jsr 283 add method nodetype.getsubtyp nodetype.getdeclaredsubtyp
searchabl set propertydefinit relat jcr-1591 new jcr 2.0 properti definit contain set searchabl properti 'm sure deepli want implement set perhap hard-cod valu case relev method need implement
make spi queri code compat jcr 2.0 spi-common current 's outdat copi new jcr 2.0 queri interfac
implement queryobjectmodelfactory.fulltextsearch querymanagerimpl jcr-1104 upgrad jcr 2.0 ran issu best handl queryobjectmodelfactory.fulltextsearch method seem chang bit sinc spi-common version written marcel take look time dummi implement ad line 97 querymanagerimpl.java jackrabbit-cor
use enumer qom oper pfd version queryobjectmodelconst contain incorrect constant valu make unus sourc oper constant sinc use java 5 propos instead ad replac constant string implement type-saf oper enumer contain fix version oper constant declar queryobjectmodelconst
use enumer qom join type like jcr-2094 join type join type constant pfd version queryobjectmodelconst broken type-saf enumer would case good altern string constant
broke lock test jcr2spi jcr 2.0 upgrad chang jcr 2.0 upgrad broken follow test spi2jcr org.apache.jackrabbit.test.api.lock.locktest org.apache.jackrabbit.jcr2spi.lock.sessionscopedlocktest ll mark known issu get hudson build back continu look caus breakag
jackrabbit-jcr-test still base java 1.4 jcr 2.0 tck need runnabl java 1.4 even though ve upgrad java 5 base platform jackrabbit 2.0 jackrabbit-jcr-test compon need still base java 1.4
getalllinearvers return base version appear given linear version histori getalllinearvers return less version getallvers root version seem miss
jsr 283 nodetyp manag
systemsess creat garbagecollector log simpl garbag collect task run period upgrad 1.5.5 start log warn short run 2009-05-09 03:44:45,480 warn org.apache.jackrabbit.core.sessionimpl unclos session detect session open java.lang.except stack trace org.apache.jackrabbit.core.sessionimpl. init sessionimpl.java:239 org.apache.jackrabbit.core.systemsession. init systemsession.java:76 org.apache.jackrabbit.core.systemsession.cr systemsession.java:64 org.apache.jackrabbit.core.sessionimpl.createdatastoregarbagecollector sessionimpl.java:649 's session intern creat systemsess code 'm use gettempl .execut new jcrcallback public object doinjcr session session throw ioexcept repositoryexcept sessionimpl sessionimpl sessionimpl session garbagecollector gc sessionimpl.createdatastoregarbagecollector gc.scan gc.stopscan gc.deleteunus return null true
jsr 283 queri
jsr 283 observ
remov deprec class jcr-common mani class jackrabbit-jcr-common ve replac better altern spi-common 'd like clean thing remov deprec version jcr-common re upgrad jackrabbit 2.0
o.a.j.spi.commons.query.sql2.parsertest use platform encod non-ascii charact parsertest class load seri test sql statement test.sql2.txt contain non-ascii charact good test unfortun file read use default platform encod break linux-bas test build ll recod file utf-8 explicit specifi encod file read
jsr 283 node identifi
jsr 283 properti type
jsr 283 built-in node type sync definit built-in node type spec
jsr 283 adopt cnd syntax chang cnd syntax chang public review draft public final draft old new syntax incompat
method creat default repositoryconfig repositori directori would use static method like repositoryconfig.cr file would take repositori directori expect find repositori configur repository.xml file insid directori directori exist would creat repositori configur file exist would creat default configur includ jackrabbit
java.lang.iter support rangeiter make javax.jcr.rangeiter extend java.lang.iter order enabl foreach loop implement rangeiter
use java.util.uuid replac use org.apache.jackrabbit.uuid.uuid new java.util.uuid class introduc java 5
better name path factori except messag ve ran across case name path factori throw except invalid path name fail includ actual path name except messag would help extra bit inform includ
increment revison target workspac initi happen workspac initi syncron perform happen cluster member perform re-index workspac changelog ignor process workspac initail
serialversionuid authorizableexistsexcept
datastore.clos never call ve search jackrabbit-cor code never found call datastore.clos although method exist datastor interfac
ad derbydatastor handl proper close embed databas use embed derbi conjunct dbdatastor derbi databas never shutdown requir special code execut creat connect shutdown=tru may provid derbydatastor extend standard dbdatastor handl
prevent data inconsist due incorrect miss merg itemstatemanag two place transient state chang merg persist state sessionism.statemodifi call back method typic call save thread 's chang save ii sharedism.update.begin method sometim merg strategi fail sens corrupt data written databas reproduc attach test program contain step reproduc issu testinconsistency1 method concurr add node d node move child node b anoth place sometim result situat node still child refer node b wherea b anoth parent situat jackrabbit start anymor search index miss jun 8 2009 2:16:23 pm org.apache.jackrabbit.core.query.onworkspaceinconsist 1 handlemissingchildnod sever node /a a7a29e8c-8d13-4fbd-b0ca-4f93f9c0ef42 miss child b 80aa13c5-1db6-4f62-b576-5e7f626d90c1 jun 8 2009 2:16:23 pm org.apache.jackrabbit.core.repositoryimpl initstartupworkspac sever fail initi workspac wm9 testinconsistency2 method concurr add refer properti node b thread exact sometim result situat referenc node never remov anymor ghost refer remov give referentialintegrityexcept jun 8 2009 2:19:51 pm org.apache.jackrabbit.core.state.mlruitemstatecach cach warn overwrit cach entri bc28ff87-216d-4ccd-bd73-03e7499ab54e/ ref b except thread main javax.jcr.referentialintegrityexcept 9f025634-d3e1-448e-904c-1c285f6b1bf6 node remov still referenc seem first problem parent-child relat caus incorrect merg nodestatemerg class second problem might also caus incorrect miss merg sure whether 's real problem
node.removemixin remov valid item assum defin mixin like test mix aprop string anod nt base add mixin nt unstructur add anod set aprop subsequ node.removemixin test also remov anod aprop although valid definit nt unstructur imo item remov becom invalid definit result effect node type
o.a.j.core.state.childnodeentri overrid equal object hashcod method o.a.j.c.state.nodestatemerg call childnodeentries.equ childnodeentri compar two child node entri collect childnodeentri howev n't overrid equal object method
remov deprec class jackrabbit-webdav correspond impl jcr-server
data store enabl fix test current unit test testtwogetstream fail trunk work older version fix also data store disabl default test n't run default data store enabl test
usermanag make membership weakrefer 2.0 user manag code still contain todo ask chang group-membership refer weakrefer weakrefer implement jackrabbit-cor 'd like make chang node type definit code 'm open issu order give us chanc keep track node type chang may caus troubl
use type staticoperand fulltextsearchexpress see https //jsr-283.dev.java.net/issues/show_bug.cgi id=691
prevent persist faulti back-refer shareditemstatemanag updat refer data sometim back-refer refer properti updat correct result node remov anymor attach patch contain junit test case possibl solut
regist nodetyp defaultvalu fail indexoutofbound tri regist one nodetpy default valu get follow except caus java.lang.arrayindexoutofboundsexcept 4 org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.tonodetypedef nodetypemanagerimpl.java:790 org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:560 assum index missmatch implement valu valu pdef .getdefaultvalu valu null internalvalu qvalu new internalvalu values.length int j 0 j values.length j++ tri qvalu j internalvalue.cr valu session catch valueformatexcept e throw new invalidnodetypedefinitionexcept invalid default valu format e qpdef.setdefaultvalu qvalu
jsr 283 configur baselin
internalvalu implement qvalue.discard binari type current jackrabbit-cor alway extract blobfilevalu order free resourc sinc internalvalu implement qvalu could achiev internalvalu direct howev current base implement inherit instead deal blobfilevalu
regist nodetyp base exist nodetyp fail creat new nodetypetempl use code show nodetypemanagerimpl ntm nodetypemanagerimpl session.getworkspac .getnodetypemanag nodetypedefinit nt nodetypedefinit ntm.getnodetyp wr entiti nodetypetempl ntt ntm.createnodetypetempl nt list declaredsupertyp contain name origin nodetyp repet twice declaredsupertyp origin nodetyp exampl nt base nt file ntt.getdeclaredsupertypenam wr entiti wr entiti
internalvalu refactor use valu factori spi-common internalvalu code simplifi
remov deprec class jackrabbit-cor similar jcr-2109 think would favor get rid stuff mark deprec 1.x releas
move extens jsr 283 secur api jackrabbit-cor jackrabbit-api 2.0.0 releas 'd like jackrabbit-specif extens jsr 283 secur api part jackrabbit-api
data store remov kill switch internalvalue.use_data_stor still kill switch public static final boolean use_data_stor class org.apache.jackrabbit.core.value.internalvalu version 2.0 constant remov also system properti org.jackrabbit.usedatastor longer use still possibl disabl datastor n't includ datastor configur repository.xml
deprec blobstor use datastor instead believ blob store deprec favor data store sourc code document blob store still support version 2.x cours
valueformat provid method getjcrstr order retriev jcr string represent qvalu current follow call requir valueformat.getjcrvalu qvalu namepathresolv valuefactori value.getstr could simplifi valueformat would provid valueformat.getjcrstr qvalu namepathresolv
introduc qvalueconstraint chang return type qpropertydefinition.getvalueconstraint public interfac qvalueconstraint empti array code qvalueconstraint /code public static final qvalueconstraint empty_array new qvalueconstraint 0 check specifi valu match constraint param valu valu test throw constraintviolationexcept specifi valu code null /code match constraint throw repositoryexcept anoth error occur void check qvalu valu throw constraintviolationexcept repositoryexcept constraint namespac prefix map sensit method return defin code link propertydefinit getvalueconstraint /code p/ namespac prefix map sensit e.g code nameconstraint /code code pathconstraint /code code referenceconstraint /code return expand string return expand definit string string getexpandeddefinit +++ jackrabbit-spi/src/main/java/org/apache/jackrabbit/spi/qpropertydefinition.java work copi -45,7 +45,7 return array valu constraint public string getvalueconstraint public qvalueconstraint getvalueconstraint
sql2 parser identifi case sensit current sql2 parser convert queri uppercas pars howev identifi kept case sensit instead convert queri uppercas string.equalsignorecas use compar keyword
usag qualifi name javadoc comment within jackrabbit term qualifi name use intern represent jcr name refer accord usag fully-qualifi name within jsr 170 specif base input julian issu 449 phrase adjust jsr 283 match terminolog use xmlns jsr 283 qualifi name refer jcr name form prefix localnam expand name use former call fully-qualifi name order avoid confus would suggest fix javadoc throughout project eventu add explan case method class name mislead
sql2 parser support cast cast data convers yet implement exampl string decim
consolid cnd relat class spi core current spi common core cnd reader/writ consolid i.e core use spi one
sever test case fail declar nt base nt hierarchi node type abstract jsr283 introduc new node type attribut abstract defin nt base nt hierarchynod chang nodetyp follow test case fail fail test testdefinedandlegaltyp org.apache.jackrabbit.test.api.nodetype.canaddchildnodecallwithnodetypetest testresidualandlegaltyp org.apache.jackrabbit.test.api.nodetype.canaddchildnodecallwithnodetypetest test error testaddnodeconstraintviolationexceptionundefinednodetyp org.apache.jackrabbit.test.api.nodetest testremovemandatorynod org.apache.jackrabbit.test.api.nodetest testclonenodesconstraintviolationexcept org.apache.jackrabbit.test.api.workspaceclonetest testcopynodesconstraintviolationexcept org.apache.jackrabbit.test.api.workspacecopybetweenworkspacestest testcopynodesconstraintviolationexcept org.apache.jackrabbit.test.api.workspacecopytest testmovenodesconstraintviolationexcept org.apache.jackrabbit.test.api.workspacemovetest testnodetypeconstraintviolationworkspacewithhandl org.apache.jackrabbit.test.api.serializationtest testnodetypeconstraintviolationsessionwithhandl org.apache.jackrabbit.test.api.serializationtest testnodetypeconstraintviolationworkspac org.apache.jackrabbit.test.api.serializationtest testnodetypeconstraintviolationsess org.apache.jackrabbit.test.api.serializationtest testjoinfilterprimarytyp org.apache.jackrabbit.test.api.query.sqljointest testelementtest org.apache.jackrabbit.test.api.query.elementtest testelementtestanynod org.apache.jackrabbit.test.api.query.elementtest testelementtestanynodentbas org.apache.jackrabbit.test.api.query.elementtest testelementtestanynodeso org.apache.jackrabbit.test.api.query.elementtest testelementtestnametest org.apache.jackrabbit.test.api.query.elementtest testelementtestnametestntbas org.apache.jackrabbit.test.api.query.elementtest testelementtestnametestso org.apache.jackrabbit.test.api.query.elementtest testelementtestnametestsomentwithsn org.apache.jackrabbit.test.api.query.elementtest testnodetyp org.apache.jackrabbit.test.api.observation.addeventlistenertest 's stacktrac fail test javax.jcr.nodetype.constraintviolationexcept nt hierarchynod abstract node type org.apache.jackrabbit.core.nodeimpl.internaladdchildnod nodeimpl.java:768 org.apache.jackrabbit.core.nodeimpl.internaladdnod nodeimpl.java:737 org.apache.jackrabbit.core.nodeimpl.internaladdnod nodeimpl.java:691 org.apache.jackrabbit.core.nodeimpl.addnod nodeimpl.java:2147 org.apache.jackrabbit.test.api.sessiontest.testmoveitemexistsexcept sessiontest.java:69 fail test actual backward compat issu nt base nt hierarchynod non-abstract jcr 1.0 i.e node.addnod foo nt base perfect legal howev jcr 2.0 statement fail mention test fail creat node type nt base nt hierarchynod
deprec org.apache.jackrabbit.api.jackrabbitnodetypemanag 2.0 1.6 jackrabbitnodetypemanag defin 3 method remov version 2.0 sinc longer need nodetyp registernodetyp inputsourc throw saxexcept repositoryexcept nodetyp registernodetyp inputstream string contenttyp throw ioexcept repositoryexcept deal direct regist nodetyp xml cnd sourc sinc n't want support xml serial longer cnd import easili done use spi-common compactnodetypedefread new jcr2.0 node type registr xml support suggest detach reader similar cnd one boolean hasnodetyp string name throw repositoryexcept jcr2.0 api
data store garbag collect continu session close current data store garbag collect continu even session close caus problem
chang secur configur simpl reason default 'd like chang secur configur simpl default enabl ac-manag user manag consequ n't skip correspond test current issu weakrefer see issu jcr-2135 prevent chang config unless someon object would like chang default config soon jcr-2135 solv
node.getrefer string node.getweakrefer string issu node.getrefer string alway return empti iter node.getweakrefer getweakrefer string handl multi-valau refer properti
provid queri support weakrefer revers lookup current implement node.getweakrefer getweakrefer string use fulltext queri order find weak refer particular node requir plaintextextractor enabl search config e.g param name= textfilterclass value= org.apache.jackrabbit.extractor.plaintextextractor provid nativ weakrefernc revers lookup jackrabbit 's qom implement would certain effici
compactnodetypedefread could auto-provid default namespac map omit default namespac jcr nt mix automat regist pars need
avoid prematur public xaitemstatemanag xaitemstatemanag constructor call super constructor localitemstatemanag regist instanc listen shareditemstatemanag construct instanc yet finish access shareditemstatemanag result strang except like follow java.lang.nullpointerexcept org.apache.jackrabbit.core.state.xaitemstatemanager.statemodifi xaitemstatemanager.java:580 org.apache.jackrabbit.core.state.statechangedispatcher.notifystatemodifi statechangedispatcher.java:111 org.apache.jackrabbit.core.state.shareditemstatemanager.statemodifi shareditemstatemanager.java:400 org.apache.jackrabbit.core.virtual.abstractvisprovider.statemodifi abstractvisprovider.java:445 org.apache.jackrabbit.core.state.itemstate.notifystateupd itemstate.java:244 npe caus commitlog field null yet initi final valu
bundledbpersistencemanag consistencyfix n't fix miss non system childnod entri root node bundl check/fix mechan complet skip check root node root node also non system child node entri broken/miss attach patch make check check non system child node entri root node would nice patch if/when accept could also backport 1.5 1.6 branch
remov propdefid nodedefid propdefid nodedefid use quick lookup childnode- properti definit nodetyp registri effect nodetyp heavili use read call property.getdefinit usual check ismultipl flag cours write get definit properti childnod howev pose problem nodetyp chang still use content properti definit chang due alter nodetyp subsequ access properti result invalid propdefid warn log id recomput especi problem upgrad jackrabbit 1.x 2.0 builtin nodetyp defin differ think feasibl remov propdefid nodedefid comput definit demand think implement without perform loss sort signatur item comput quick find definit effect node type furthermor common usecas use properti definit probabl ismultipl check properti interfac need definit lookup last least save 8 byte per item persist layer
deadlock shareditemstatemanag session.mov node.sav multipl thread test case perform action differ workflow instanc store insid jackrabbit repositori time test case hang follow deadlock actiontrigger38 daemon prio=10 tid=0x9060ec00 nid=0x2f7 object.wait 0x8f505000..0x8f505f20 java.lang.thread.st wait object monitor java.lang.object.wait nativ method wait 0xb3ef0208 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock readerlock java.lang.object.wait object.java:485 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock readerlock.acquir unknown sourc lock 0xb3ef0208 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock readerlock org.apache.jackrabbit.core.state.defaultismlock readlockimpl. init defaultismlocking.java:84 org.apache.jackrabbit.core.state.defaultismlock readlockimpl. init defaultismlocking.java:78 org.apache.jackrabbit.core.state.defaultismlocking.acquirereadlock defaultismlocking.java:44 org.apache.jackrabbit.core.state.shareditemstatemanager.acquirereadlock shareditemstatemanager.java:1409 org.apache.jackrabbit.core.state.shareditemstatemanager.hasitemst shareditemstatemanager.java:286 org.apache.jackrabbit.core.state.xaitemstatemanager.hasitemst xaitemstatemanager.java:295 org.apache.jackrabbit.core.state.sessionitemstatemanager.hasitemst sessionitemstatemanager.java:206 org.apache.jackrabbit.core.hierarchymanagerimpl.hasitemst hierarchymanagerimpl.java:164 org.apache.jackrabbit.core.cachinghierarchymanager.nodead cachinghierarchymanager.java:674 org.apache.jackrabbit.core.cachinghierarchymanager.nodead cachinghierarchymanager.java:366 lock 0xb4020630 java.lang.object org.apache.jackrabbit.core.state.statechangedispatcher.notifynodead statechangedispatcher.java:159 org.apache.jackrabbit.core.state.sessionitemstatemanager.nodead sessionitemstatemanager.java:905 org.apache.jackrabbit.core.state.nodestate.notifynodead nodestate.java:852 org.apache.jackrabbit.core.state.nodestate.renamechildnodeentri nodestate.java:370 lock 0xb26df780 org.apache.jackrabbit.core.state.nodest org.apache.jackrabbit.core.nodeimpl.renamechildnod nodeimpl.java:559 org.apache.jackrabbit.core.sessionimpl.mov sessionimpl.java:1034 org.ametys.plugins.repository.defaultsessionfactori sessionwrapper.mov defaultsessionfactory.java:398 org.ametys.plugins.workflow.store.jackrabbitworkflowstore.movetohistori jackrabbitworkflowstore.java:797 com.opensymphony.workflow.abstractworkflow.createnewcurrentstep abstractworkflow.java:1474 com.opensymphony.workflow.abstractworkflow.transitionworkflow abstractworkflow.java:1256 com.opensymphony.workflow.abstractworkflow.doact abstractworkflow.java:567 org.ametys.plugins.workflow.workflow.doact workflow.java:227 org.ametys.plugins.workflow.workflowtestcas actiontrigger.run workflowtestcase.java:195 actiontrigger12 daemon prio=10 tid=0x904dd000 nid=0x2f64 wait monitor entri 0x8fd3f000..0x8fd40020 java.lang.thread.st block object monitor org.apache.jackrabbit.core.cachinghierarchymanager.nodemodifi cachinghierarchymanager.java:306 wait lock 0xb4020630 java.lang.object org.apache.jackrabbit.core.state.statechangedispatcher.notifynodemodifi statechangedispatcher.java:189 org.apache.jackrabbit.core.state.sessionitemstatemanager.nodemodifi sessionitemstatemanager.java:929 org.apache.jackrabbit.core.state.statechangedispatcher.notifynodemodifi statechangedispatcher.java:189 org.apache.jackrabbit.core.state.localitemstatemanager.statemodifi localitemstatemanager.java:446 org.apache.jackrabbit.core.state.xaitemstatemanager.statemodifi xaitemstatemanager.java:595 org.apache.jackrabbit.core.state.statechangedispatcher.notifystatemodifi statechangedispatcher.java:111 org.apache.jackrabbit.core.state.shareditemstatemanager.statemodifi shareditemstatemanager.java:400 org.apache.jackrabbit.core.state.itemstate.notifystateupd itemstate.java:244 org.apache.jackrabbit.core.state.changelog.persist changelog.java:285 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:735 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:1092 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:337 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:347 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:312 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:313 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1103 lock 0xb4004650 org.apache.jackrabbit.core.xasessionimpl org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:858 org.ametys.plugins.repository.defaultsessionfactori sessionwrapper.sav defaultsessionfactory.java:414 org.ametys.plugins.workflow.store.jackrabbitworkflowstore.markfinish jackrabbitworkflowstore.java:757 com.opensymphony.workflow.abstractworkflow.createnewcurrentstep abstractworkflow.java:1473 com.opensymphony.workflow.abstractworkflow.transitionworkflow abstractworkflow.java:1256 com.opensymphony.workflow.abstractworkflow.doact abstractworkflow.java:567 org.ametys.plugins.workflow.workflow.doact workflow.java:227 org.ametys.plugins.workflow.workflowtestcas actiontrigger.run workflowtestcase.java:203 differ session instanc xa use thread node modifi differ actiontrigger38 move node session save yet actiontrigger12 updat anoth node save tri reproduc behavior jackrabbit test case without success need inform test case let know give second tri
remov redund repositoryservice.executequeri method current two executequeri method repositoryservic simplic remov one assum default valu limit offset bind variabl valu
return bind variabl name repositoryservice.checkquerystat proper support jsr 283 bind variabl spi layer need return name bind variabl otherwis jcr2spi implement check unknown name
o.a.j.spi.commons.nodetype.nodetypedefinitionfactori set requir type nodetypedefinitionfactori set requir type properti definit
node.getweakrefer throw unsupportedoperationexcept referenc node.getrefer n't return empti propertyiter point view method behav way prefer throw
test must fail mixin ad near mixin type option test must fail mixin ad rather throw notexecutableexcept test still tri add mixin without check whether implement support
use assembl plugin packag -test jar spi jcr2spi compon test code current packag use jar test-jar goal use test depend compon extra jar plugin invoc creat extra maven build number caus problem snapshot depend repository.apache.org repositori recent start use use assembl plugin creat test jar avoid problem
faster packag standalon jar current standalon jar creat first unpack depend target/class packag result directori tree result jar file take quit write read uncompress class file requir lot disk io could avoid extra copi use bundl assembl plugin build standalon jar
lockablefilerevis thread-saf lockablefilerevis work well across process boundari within jvm method lock unlock must synchron similar databaserevis
provid overrid lock check current check whether session allow write lock node whether allow unlock quit spread throughout code collect allow custom lock manag overrid method alter default behavior
allow pars custom element workspac config repositoryconfigurationpars *config element extend deriv class e.g public loginmoduleconfig parseloginmoduleconfig element secur unfortun parseworkspaceconfig expect inputsourc one add protect workspaceconfig parseworkspaceconfig element root allow return workspaceconfig deriv class without copi entir implement
encapsul repositoryhelp field first step toward test suit run test multipl thread concurr
unnecessari hasitemst call sessionitemstatemanag end sessionitemstatemanager.getitemst itemid under item state manag first ask whether contain item retriev case item state manag know item nosuchitemstateexcept thrown initi check unnecessari getitemst under manag also throw except item exist
parallel test mention mail list 'd like parallel test execut pool repositoryhelp instanc repres distinct repositori ensur test case run parallel interfer suggest start pool two repositori later extend setup
move memoryjourn test main run test filejourn implement window box quit slow mani filedescriptor.sync call 'd like move memoryjourn jackrabbit-cor test main sourc way use test setup
indexingaggregatetest testntfileaggreg fail occasion may happen text extract plain/text resourc time due tough extractor time set indexing-test workspac test check index queue empti execut queri
handl expanded-form jcr name node type *templat class itemdefinitiontempl treat name opqu string instead jcr name exampl set name http //example.org/ foo getnam need return bar foo prefix bar map namesapc http //example.org/
builtin_nodetypes.cnd contain non-ascii char correct decod use webspher jackrabbit ca n't start within webspher follow error caus org.apache.jackrabbit.spi.commons.nodetype.compact.parseexcept ioexcept attempt read input stream org/apache/jackrabbit/core/nodetype/builtin_nodetypes.cnd line 272 caus sun.io.malformedinputexcept sun.io.bytetocharutf8.convert bytetocharutf8.java:262 sun.nio.cs.streamdecod convertersd.convertinto streamdecoder.java:314 sun.nio.cs.streamdecod convertersd.implread streamdecoder.java:345 quick check file contain non ascii-7 charact actual store packag read utf8 somth list translat simplest fix would remov non-ascii7 charact file
eventimpl implement tostr would simplifi log debug
provid possibl import protect item use session import function sessionimport workspaceimport current skip protect item encount import except special case see jcr-2172 workspaceimport postprocessnod specif mandat protect content treat consist manner allow implement either import ignor find attach patch contain initi step allow extend default import behavior instead skip protect item case node complet tree pass separ handler may may abl deal need assert valid format patch includ abstract class protect item import default implement never import protect node behavior today exampl implement ac-cont see work simpl case trivial test chang sessionimport demonstr import protect item would enabl patch n't includ yet chang workspaceimport would +- accord sessionimport chang workspaceimpl/sessionimpl well configur would allow modifi default behavior exampl import protect properti exampl workspac import patch follow limit todo proper handl protect refer properti non-protect ref properti tree defin protect node test care review various importuuidbehavior are/can proper cover special case replace-exist patch addit address inconsist sessionimport attempt import protect content exist protect node skip attempt import protect content n't yet exist first node import constraintviolationexcept child-nod behavior also reflect node-stack first case null push second case first protect node see also jcr-2172 detail
add caus itemstateexcept bundledbpersistencemanager.stor current messag caus except given itemstateexcept
text.escapeillegaljcrchar adjust match 2.0 set illeg char text.escapeillegaljcrchar still contain char illeg jcr 1.0 remov set jcr 2.0
improv user manag contain issu various improv need user manag implement jr-core known improv extens current structur users/group jcr content n't allow easi find user/group id groupid unescap return getid
implement query.getbindvariablenam
implement queryresult.getselectornam
usermanag indexnoderesolver.findnod nonexact fail find valu contain backslash
creat default repositori target one jcr api test get default repositori repositoryfactori default repositori use home directori target
gqltest fail occasion text extract may hit time
replac nodereferencesid nodeid nodereferencesid class simpli wrap nodeid forward essenti method call main benefit nodereferencesid separ class abil distinguish overload exist load method signatur persistencemanag downsid need instanti nodereferencesid wrapper object whenev access refer node propos renam overload method hasreferencesto nodeid getreferencesto nodeid replac nodereferencesid target nodeid wherev use
xatest error commit differ thread xid must block 'm see follow test error quit often ci server work testdistributedthreadaccess org.apache.jackrabbit.core.xatest time elaps 0.213 sec error javax.transaction.systemexcept commit differ thread xid must block org.apache.jackrabbit.core.usertransactionimpl.commit usertransactionimpl.java:147 org.apache.jackrabbit.core.xatest.testdistributedthreadaccess xatest.java:1637 seem system-specif issu ve never seen error local hudson
updat test query.xpath queri sql treat option featur jcr 2.0 query.xpath query.sql option actual deprec either need modifi test pass repositori n't support notexecutableexcept remov altogeth
version oper done workspac current version oper modifi transient state item oper execut although oper workspac oper
move test requir index configur test requir index configur move indexing-test workspac allow us remov index configur default workspac speed jcr api test
changelogrecord throw nullpointerexcept happen userid session creat event null
avoid string concaten abstractbundlepersistencemanag follow line log.debug store bundl bundle.getid chang log.debug store bundl bundle.getid
spi2davex httpclient stringpart use charset us-ascii default diff sent multipart instead urlencod post string properti may garbel reason instanc httpclient stringpart creat without specifi charset case us-ascii use default
append-on index updat current index updat modifi exist file troublesom scenario like backup index share cluster though yet case requir index segment need custom lucen indexdeletionpolici keep index commit given time index segment referenc name also generat segment file must also record generat segment file must generat purg outdat index segment commit
enabl datastor default configur current default configur caus binari properti store derbi databas ineffici standalon server web applic contain run reason default configur
nodeentryimpl.getworkspaceid ineffici nodeentryimpl.getworkspaceid calcul path call call recurs call getworkspaceid result various call path item factori might somewhat expens test scenario repositoryservice.getiteminfo call return ~1000 item process item result 2700000 call getworkspaceid profil data show 98 time process 1000 item spent getworkspaceid relat call
improv background text extract recent discuss mail list see http //markmail.org/message/syt7lc2guzapt7la current approach text extract background thread n't work well especi tika-bas extractor support stream pars mani document type also current *all* extract text stream buffer string pass lucen index would good could somehow get back pass reader lucen
use remote-resources-plugin add licens notic file binari sinc jcrsite-13 remot resourc plugin configur automat add licens notic file binari artifact includ -sourc -javadoc jar adapt configur file get includ correct licens metadata current maintain src/main/resources/meta-inf
renam version manag current versionmanag interfac versionmanagerimpl class oper version storag new jsr283 javax.jcr.version.versionmanag implement jcrversionmanag order avoid confus would like renam follow class o.a.j.core.version.versionmanag o.a.j.core.version.internalversionmanag o.a.j.core.version.versionmanagerimpl o.a.j.core.version.internalversionmanagerimpl o.a.j.core.version.abstractversionmanag o.a.j.core.version.abstractinternalversionmanag o.a.j.core.version.xaversionmanag o.a.j.core.version.xainternalversionmanag o.a.j.core.version.jcrversionmanagerimpl o.a.j.core.version.versionmanagerimpl
unclos file aggreg properti state index regress caus jcr-1990 lucen document node contain aggreg properti may contain extractor job open file handl jcr data binari properti document must dispos properti transfer
mssqlfilesystem jndi sever configur issu sever configur issu use org.apache.jackrabbit.core.fs.db.mssqlfilesystem work configur repository.xml look like filesystem class= org.apache.jackrabbit.core.fs.db.mssqlfilesystem param name= driver value= javax.naming.initialcontext param name= url value= java mydatasourc param name= schema value= mssql param name= schemaobjectprefix value= myprefix_ param name= user value= myusernam param name= password value= mypassword param name= tablespac value= /filesystem unnecessarili specifi usernam password mssqlfilesystem preset empti string instead null funnili enough tablespac preset null lead nullpoint createschemasql
chang access level searchindex nodeindex better inher want chang nodeindex addbinaryvalu logic jr 1.5.6 therefor need creat custom class extend nodeindex chang binari field index creat custom class extend searchindex use custom nodeindex oblig overrid searchindex createtextextractor order store creat textextractor privat attribut put class packag org.apache.jackrabbit.core.query.lucen nodeindex createdoc protect trunk textextractor getter still privat attribut nodeindex createdoc still protect privat method
nodetypedefinitionfactori set propertydefinit isqueryorder
improv behaviour too mani open file occur multiindex may leav unus directori creat attempt creat index segment directori remov error occur e.g too mani open file
jsr 283 evalu capabl
avoid item state read session.logout local item state discard session.logout current cachinghierarchymanag still regist item state listen time caus numer itemstatemanager.hasitemst call unnecessari add overhead logout call addit also contribut potenti lock content shareditemstatemanag
chang behavior javax.jcr.valu get* method stream handl semant javax.jcr.valu simplifi jcr 2.0 section 5.10.5.1 deprec binari behavior unlik jcr 1.0 call get method getstream call getstream valu object never caus illegalstateexcept see https //jsr-283.dev.java.net/issues/show_bug.cgi id=658
malform excerpt content contain markup highlight found markup content use excerpt encod correspond entiti refer howev process broken highlight excerpt case content provid excerpt may lead malform html/xml
itemmanag regist listen earli similar jcr-2168 itemmanag sessionitemstatemanag
binari throw nullpointerexcept precondit repositori datastor disabl step reproduc 1 creat binari stream 2 set binari properti 3 dispos binari 4 get binari properti dispos immedi 5 go 4 binary.dispos throw nullpointerexcept 4 execut second time except thrown properti save 2 see also attach test
binari valu may leav temp file behind follow call leav temp file behind never delet inputstream valuefactori vf vf.createbinari .dispos happen datastor disabl
data store garbag collect ignor remov item gcconcurrenttest fail sometim problem garbag collector stop node properti remov scan instead garbag collector ignor remov item continu test set org.apache.jackrabbit.core.data.testal test run 19 failur 0 error 1 skip 0 time elaps 21.282 sec failur testgc org.apache.jackrabbit.core.data.gcconcurrenttest time elaps 0.578 sec error javax.jcr.invaliditemstateexcept 5fc4130b-aee4-4bef-b51d-21420d78f315/ data item exist anymor org.apache.jackrabbit.core.itemimpl.sanitycheck itemimpl.java:144 org.apache.jackrabbit.core.propertyimpl.getpropertyst propertyimpl.java:89 org.apache.jackrabbit.core.propertyimpl.gettyp propertyimpl.java:773 org.apache.jackrabbit.core.data.garbagecollector.recurs garbagecollector.java:310 org.apache.jackrabbit.core.data.garbagecollector.recurs garbagecollector.java:327 org.apache.jackrabbit.core.data.garbagecollector.recurs garbagecollector.java:327 org.apache.jackrabbit.core.data.garbagecollector.scannod garbagecollector.java:193 org.apache.jackrabbit.core.data.garbagecollector.scan garbagecollector.java:177 org.apache.jackrabbit.core.data.gcthread.run gcthread.java:52 java.lang.thread.run thread.java:619
unsynchron access multiindex index may result concurr modif except java.util.concurrentmodificationexcept java.util.abstractlist itr.checkforcomodif abstractlist.java:372 java.util.abstractlist itr.next abstractlist.java:343 org.apache.jackrabbit.core.query.lucene.multiindex.getindexread multiindex.java:744 org.apache.jackrabbit.core.query.lucene.multiindex.getindexread multiindex.java:712 org.apache.jackrabbit.core.query.lucene.searchindex.getindexread searchindex.java:1024 org.apache.jackrabbit.core.query.lucene.searchindex.executequeri searchindex.java:820 org.apache.jackrabbit.core.query.lucene.singlecolumnqueryresult.executequeri singlecolumnqueryresult.java:78 org.apache.jackrabbit.core.query.lucene.queryresultimpl.getresult queryresultimpl.java:293 org.apache.jackrabbit.core.query.lucene.singlecolumnqueryresult. init singlecolumnqueryresult.java:70 org.apache.jackrabbit.core.query.lucene.queryimpl.execut queryimpl.java:132 org.apache.jackrabbit.core.query.queryimpl.execut queryimpl.java:127 usual unlik recent chang test index flush frequent may caus except
automat upgrad 2.0 jackrabbit 2.0 contain chang compat repositori creat earlier version would nice jackrabbit would automat detect upgrad repositori creat 1.x version
nodedefinitiontemplateimpl.setdefaultprimarytypenam null throw except expect clear name
make qvaluefactoryimpl extens class current final modul therefor copi code kind duplic hard maintain avoid qvaluefactoryimpl would design extens class could reus much code
deprecate/remov unus filesystem featur randomaccessoutputstream current filesystem interfac includ method getrandomaccessoutputstream look like method class randomaccessoutputstream longer use case suggest remov method everywher deprec class
remov duplic code qvaluefactoryimpl spi2dav qvaluefactoryimpl spi2dav contain code duplic spi-common qvaluefactoryimpl jcr-2245 appli spi2dav variant extend factori spi-common simpli first
qvaluefactoryimpl binaryqvalu must return this getbinari basic jcr-2238 spi-common modul binaryqvalu return this getbinari lead file found except binary.dispos delet under temp file issu partial hidden presenc bug binaryqvalue.read randomaccessfil close read might prevent delet temp file
remov duplic code internalvaluefactori jcr-2245 appli duplic code internavaluefactori remov name creat string int creat method non-binari
base64 bug last buffer flush found issu use org.apache.jackrabbit.util.base64.encod inputstream outputstream method appear issu last buffer flush writer creat return method abl work around issu creat writer program call anoth encod method call flush method use data sourc trunk appear
workspacemanager.dispos wait chang feed thread stop workspacemanag current interrupt chang feed thread wait stop
updat idea plugin version use quit outdat version 2.0 recent idea plugin releas 2.2 index jackrabbit-parent/pom.xml jackrabbit-parent/pom.xml revis 802755 +++ jackrabbit-parent/pom.xml work copi -73,7 +73,7 plugin http //maven.apache.org/plugins/maven-idea-plugin/ artifactid maven-idea-plugin /artifactid version 2.0 /version version 2.2 /version configur downloadsourc true /downloadsourc jdklevel 1.5 /jdklevel
discoveri privileg set princip jsr 283 defin mean discov privileg edit session howev way determin privileg princip
activ storag path jsr-283 state 15.12.3 15.12.3 activ storag activ persist node type nt activ system-gener node name activ storag /jcr system/jcr activ far tell current case relat test case org.apache.jackrabbit.test.api.version.activitiestest testactivitiespath appar taken accident jackrabbit ca n't implement jcr requir either need document rais issu jcr expert group
jsr 283 repositori descriptor new method return valu object jcr2spi check descriptor-report jcr-server correspond handl client side etc.etc
remov node share subnod fail simpl testcas set first transact node a1 testrootnode.addnod a1 node a2 testrootnode.addnod a2 a2.addmixin mix shareabl session.sav shareabl node n path a2 workspac workspac session.getworkspac string path a1.getpath /b1 workspace.clon workspace.getnam a2.getpath path fals session.sav anoth shareabl node n share set n path a1/b1 test second transact testrootnode.remov a1 session.sav least transact repositori node remov error thrown instead
unclos session test case test may throw except setup method leav session open open super class setup method jackrabbit-cor realli problem memori footprint session quit small jcr2spi memori footprint consider higher may lead memori error run test
remov unus method redolog.clear method use anymor remov
memoryfilesystem.deletefold delet folder start name memoryfilesystem.deletefold delet folder request folder start given name
enabl filesystem unit test filesystem test implement actual run testal class miss also bug test caus test fail
o.a.j.webdav.jcr.davresourcefactoryimpl createresourc creat versioncontrolledresourc instanc regardless mix version status davresourcefactoryimpl createresourc first call createresourceforitem threat node version-control call isversioncontrol indirect trigger call node getversionhistroy getversionhistroy throw unsupportedrepositoryexcept node non-version lead davexcept call stack consequ everi request non-version node lead unnecessari expens except generat could avoid check mix version status node
enhanc ingr persist bundl handl unicod tini chang ingres.ddl persist bundl handl unicod string
abstractreadablerepositoryservic pass credenti createsessioninfo current abstractreadablerepositoryservice.obtain call checkcredenti follow createsessioninfo pass userid rather credenti mani case implement need credenti creat sessioninfo
skip deploy jackrabbit-standalon jackrabbit-standalon jar current ca n't deploy repository.apache.org server probabl size 'm sure good use case 'd want use standalon jar maven depend maven central n't seem import 'd like make explicit configur deploy plugin skip deploy standalon jar
generifi secur api current secur api name authoriz group interfac use non-gener collections/iter suggest chang
possibl concurr bug workspace.copi hi enclos test case use reproduc concurr bug test case use two con-curr thread execut workspace.copi copi node destin parent node set allowsamenames fals accord javadoc workspace.copi string srcabspath string destabspath method copi node srcabspath new locat destabspath success chang persist immedi need call save. itemexistexcept thrown properti alreadi exist destabspath node alreadi exist name sibl allowed. howev realiti case test case end two child node name pleas note everi run reproduc problem general get problem within 3 10 iter also got invaliditemstateexcept someon kind help confirm bug jackrabbit mayb use jackrabbit wrong way test case test jackrabbit 1.6 branch http //svn.apache.org/repos/asf/jackrabbit/tags/1.6.0 window vista jdk 1.5.0_14 test case also attach conveni thank jervi liu packag org.apache.jackrabbit.cor import org.apache.jackrabbit.test.abstractjcrtest import javax.jcr.itemexistsexcept import javax.jcr.nod import javax.jcr.sess import javax.jcr.valu import javax.jcr.nodeiter import java.util.random import java.util.arraylist import java.util.iter import javax.jcr.nodetype.nodetyp import org.apache.jackrabbit.test.notexecutableexcept import javax.jcr.repositoryexcept import javax.jcr.nodetype.nodetypemanag public class concurrentcopytest extend abstractjcrtest privat static final int num_iter 40 privat static final int num_sess 2 string sourcepath string destpath public void testconcurrentcopi throw except int n 0 n num_iter n++ system.out.println -iter n clean testroot first testrootnode.hasnod concurrentcopytestnod node testnod testrootnode.getnod concurrentcopytestnod testnode.remov testrootnode.sav system.out.println -old node remov creat parent node allowsamenames set fals node snsfnode testrootnode.addnod concurrentcopytestnod nt folder testrootnode.sav sourcepath snsfnode.getpath destpath sourcepath copiedfromconcurrentcopytestnod system.out.println -sourcepath sourcepath system.out.println -destpath destpath first verifi work singl thread session rootsess helper.getsuperusersess rootsession.getworkspac .copi sourcepath destpath test copi destpath expect itemexistsexcept tri rootsession.getworkspac .copi sourcepath destpath test fail node exist destpath test fail catch itemexistsexcept e thread thread new thread num_sess int 0 threads.length i++ creat new session session session helper.getsuperusersess testsess ts new testsess session thread new thread ts t.setnam num_iter n -s t.start log.println thread start thread thread.yield thread.sleep 100 int 0 threads.length i++ thread .join nodeiter result testrootnode.getnod concurrentcopytestnod .getnod copiedfromconcurrentcopytestnod results.hasnext node node results.nextnod system.out.println result node- node.getnam assertequ 1 results.gets inner class class testsess implement runnabl session session string ident random r testsess string ident session session this.ident ident r new random privat void randomsleep long l r.nextint 90 20 tri thread.sleep l catch interruptedexcept ie public void run log.println start string state tri this.session.getworkspac .copi sourcepath destpath session.sav node newnod testrootnode.getnod concurrentcopytestnode/copiedfromconcurrentcopytestnod system.out.println ad node- newnode.getnam session.sav randomsleep catch except e log.println except state e.getmessag e.printstacktrac final session.logout log.println end
restor delet version work throw except java.lang.illegalstateexcept edit mode org.apache.jackrabbit.core.state.localitemstatemanager.createnew localitemstatemanager.java:258 org.apache.jackrabbit.core.version.nodestateex.createchildnod nodestateex.java:561 org.apache.jackrabbit.core.version.nodestateex.addnod nodestateex.java:525 org.apache.jackrabbit.core.version.nodestateex.addnod nodestateex.java:505 org.apache.jackrabbit.core.version.versionmanagerimplrestore.restor versionmanagerimplrestore.java:201 org.apache.jackrabbit.core.versionmanagerimpl.restor versionmanagerimpl.java:240 org.apache.jackrabbit.core.nodeimpl.restor nodeimpl.java:3379 org.apache.jackrabbit.test.api.version.restoretest.testrestoreremov restoretest.java:812
error concurr session import node uuid 21.08.2009 16:22:14 *error* executor 0 connectionrecoverymanag could execut statement reason statement abort would caus duplic key valu uniqu primari key constraint uniqu index identifi sql090821042140130 defin default_bundle'. state/cod 23505/20000 connectionrecoverymanager.java line 453 21.08.2009 16:22:14 *error* executor 0 bundledbpersistencemanag fail write bundl 6c292772-349e-42b3-8255-7729615c67d bundledbpersistencemanager.java line 1212 error 23505 statement abort would caus duplic key valu uniqu primari key constraint uniqu index identifi sql090821042140130 defin default_bundl org.apache.derby.iapi.error.standardexception.newexcept unknown sourc org.apache.derby.impl.sql.execute.indexchanger.insertandcheckdup unknown sourc org.apache.derby.impl.sql.execute.indexchanger.doinsert unknown sourc org.apache.derby.impl.sql.execute.indexchanger.insert unknown sourc org.apache.derby.impl.sql.execute.indexsetchanger.insert unknown sourc org.apache.derby.impl.sql.execute.rowchangerimpl.insertrow unknown sourc org.apache.derby.impl.sql.execute.insertresultset.normalinsertcor unknown sourc org.apache.derby.impl.sql.execute.insertresultset.open unknown sourc org.apache.derby.impl.sql.genericpreparedstatement.execut unknown sourc org.apache.derby.impl.jdbc.embedstatement.executestat unknown sourc org.apache.derby.impl.jdbc.embedpreparedstatement.executestat unknown sourc org.apache.derby.impl.jdbc.embedpreparedstatement.execut unknown sourc org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmtintern connectionrecoverymanager.java:371 org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmtintern connectionrecoverymanager.java:298 org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmt connectionrecoverymanager.java:261 org.apache.jackrabbit.core.persistence.bundle.util.connectionrecoverymanager.executestmt connectionrecoverymanager.java:239 org.apache.jackrabbit.core.persistence.bundle.bundledbpersistencemanager.storebundl bundledbpersistencemanager.java:1209 org.apache.jackrabbit.core.persistence.bundle.abstractbundlepersistencemanager.putbundl abstractbundlepersistencemanager.java:709 org.apache.jackrabbit.core.persistence.bundle.abstractbundlepersistencemanager.storeintern abstractbundlepersistencemanager.java:651 org.apache.jackrabbit.core.persistence.bundle.abstractbundlepersistencemanager.stor abstractbundlepersistencemanager.java:527 org.apache.jackrabbit.core.persistence.bundle.bundledbpersistencemanager.stor bundledbpersistencemanager.java:563 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:724 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:1101 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:351 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:354 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:326 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:326 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1098 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:925 org.apache.jackrabbit.core.concurrentimporttest 1.execut concurrentimporttest.java:73 org.apache.jackrabbit.core.abstractconcurrencytest executor.run abstractconcurrencytest.java:209 java.lang.thread.run thread.java:637
legal jcr name caus unneccessari server-roundtrip assum follow legal qualifi jcr name foo foo bar item name read spi layer first interpret expand form name prefix lookup namespac foo fail name treat qualifi jcr name depend spi implement server-roundtrip requir order determin foo regist namespac
org.apache.jackrabbit.server.remoting.davex.jsonwrit wrong valu type :nodeiterators attribut :nodeiterators attribut serial string valu wherea client expect long valu caus unnecesseri server-roundtrip sinc client n't detect hint
move nodetypestorag spi-common provid default implement facilit implement nodetyp method repositoryservic
improv reusabl abstractrepositoryservic abstractreadablerepositoryservic much function abstractreadablerepositoryservic specif read rather appli implement node type name space descriptor suggest pull function abstractreadablerepositoryservic abstractrepositoryservic
lazi initi itemdefinit item definit current set immedi itemdata instanti access node usual requir read item definit thus necessari load/set earli lazi initi also benefit content migrat upgrad scenario becom easier instead throw except earli jackrabbit could allow access item item definit realli requir oper
sql2 parser may infer type uncastliter static analysi spec say uncastliter alway interpret valu properti type string castliter hand interpret string form valu propertytyp indic also two test case nodenametest need fix accord testlongliter testbooleanliter
incorrect cnd mix etag jackrabbit current defin mix etag follow mix etag mixin current default valu auto-cr handl see jcr-2116 jcr etag string protect autocr think violat spec say mix etag mixin jcr etag string protect autocr also affect predefin node type test jackrabbit-jcr-test mix-etag.txt nodetypenam mix etag supertyp ismixin true hasorderablechildnod fals primaryitemnam null propertydefinit name jcr etag requiredtyp string defaultvalu autocr true mandatori fals onparentvers copi protect true multipl fals rather nodetypenam mix etag supertyp ismixin true hasorderablechildnod fals primaryitemnam null propertydefinit name jcr etag requiredtyp string defaultvalu null autocr true mandatori fals onparentvers copi protect true multipl fals
mandatori jcr activ node miss upgrad mandatori node creat repositori initi empti node miss exist repositori instanc upgrad
o.a.jackrabbit.spi.commons.conversion.namepars assum namespac uri 's regist accord jcr 2.0 3.4.3.4 pars lexic path quot otherwis valid path contain expand name unregist namespac uri alway resolv valid intern represent path /quot current implement assum namespac uri encount expand form name regist otherwis name treat qualifi name
allow import acl unknown princip possibl import acl princip known princip provid yet
issu compil permiss acl provid use search infrastructur check event listen never discard
pathnotfoundexcept item exist follow test case jcr2spi throw pathnotfoundexcept item exist throw mark line comment public void testbug24687 throw repositoryexcept string parentpath testnode.getpath string foldernam folder_ system.currenttimemilli session session gethelp .getreadwritesess session session2 gethelp .getreadonlysess session2.getitem parentpath remov line make failur go away node parent node session.getitem parentpath node todelet parent.addnod foldernam nt folder parent.sav tri item item2 session2.getitem parentpath foldernam wrong throw pathnotfoundexcept assertequ parentpath foldernam item2.getpath final todelete.remov parent.sav assertfals parent.hasnod foldernam
group.addmemeb might add refer instead weakrefer caus member ca n't remov afterward
consolid itemdef/qitemdefinit great deal duplic code itemdef jackrabbit-cor qitemdefinit jackrabbit-spi implement class
regist multipl node type name singl file must fail regist node type file xml cnd contain multipl definit name succeed last definit use right behavior throw except kind file well-form invalid
npe eventstatecollect remov version versionlabel restor version contain histori within 1 transact npe occur debug notic method createeventst enter uuid versionlabel changelog.get id return null caus java.lang.nullpointerexcept org.apache.jackrabbit.core.observation.eventstatecollection.getnodetyp eventstatecollection.java:614 org.apache.jackrabbit.core.observation.eventstatecollection.createeventst eventstatecollection.java:381 org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:697 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:1085 org.apache.jackrabbit.core.state.xaitemstatemanager.prepar xaitemstatemanager.java:163 org.apache.jackrabbit.core.version.xaversionmanager.prepar xaversionmanager.java:509 org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:154 org.apache.jackrabbit.core.xasessionimpl.prepar xasessionimpl.java:331 org.springmodules.jcr.jackrabbit.support.jackrabbitusertransaction.commit jackrabbitusertransaction.java:100 org.springmodules.jcr.jackrabbit.localtransactionmanager.docommit localtransactionmanager.java:192
bad check sv name attribut presenc system view import sax content handler check wrong variabl see 's null sysviewimporthandl name vs. svname patch fix
cnd support jackrabbit-jcr-common would nice cnd pars function spi-common could made avail jcr-common use jcr client n't know anyth spi
jackrabbit-jcr-cli test fail disabl pom suggest enabl test fix issu caus fail
blobfilevalue.read byte b long pos ignor return valu inputstream.skip inputstream.skip long n return long may differ paramet n possibl lower current blobfilevalue.read byte b long pos return valu ignor
allow reus q*definitionbuild qitemdefinitionsbuild would nice reus builder implement qitemdefinitionsbuild elsewher q*definit need built extract relev class use independ make qitemdefinitionsbuild use
remov excess depend jcr-client modul
improv user manag 2 follow issu jcr-2199 alreadi close
open access modifi repositoryimpl.doshutdown requir subclass repositoryimpl want run addit code shutdown otherwis deadlock may occur sequenc lock acquisit ensur jackrabbit requir shutdownlock first acquir actual shutdown code execut
lower log level index updat queue log level current info lower debug
keep webdav except caus davmethodbas exceptionconvert class jackrabbit-webdav jackrabbit-spi2dav n't includ caus throw except base caught caus make harder identifi caus particular problem attach patch fix
jackrabbit-jcr-cli put test data ./target current jackrabbit-jcr-cli compon drop repositori directori repository.xml derby.log file project root run test suit file go insid target
real in-memori repositori unit test desir in-memori repositori hold whole data even propertytype.binari memori actual implement org.apache.jackrabbit.core.persistence.mem.inmempersistencemanag use filesystemblobstor along localfilesystem binari properti serial os-filesystem
zombiehierarchymanag return wrong child node entri replac node zombiehierarchymanag current implement two getchildnodeentri method like 1 look child node old overlay state might contain remov child node 2 found ask super implement ie get child node up-to-d list purpos zombiehm abl return remov item id attic howev behavior imo wrong first find exist child node given name id 1 look child node super implement ie get child node up-to-d list 2 found look old overlay state might remov abl reproduc issu replac node note custom access manag 1.4.x use explain creat /replaced/subnod structur save session remov replac node add /replac /replaced/subnod node rootnod session.getrootnod 1. creat structur /replaced/subnod node test rootnode.addnod replac nt test.addnod subnod nt 2. persist chang session.sav 3. remov node recreat test.remov test rootnode.addnod replac nt 4. creat previous child name test.addnod subnod nt 5 give except test.getnod subnod .getnod complic thing trigger custom access manag base upon jackrabbit 1.4.x back pre-1.5 new secur stuff era access manag would get zombiehm hierarchi manag implement call resolvepath hm check read-access final getnod call tree travers use getchildndeentri nodest name int method would get old node id henc fail would tri retriev real item state manag thus jackrabbit 1.5 2.0 code work fine zombiehm use howev might want fix 1.4.x also check use zombiehm current trunk could n't test explicit implicit changelogbasedhierarchymgr sessionitemstatemanager.getdescendanttransientitemst nodeid itemimpl.validatetransientitem iter itemst iter itemst sessionitemstatemanager.getdescendanttransientitemstatesinatt nodeid
fix notic file match consensus legal team discuss legal-62 relat legal-discuss thread jackrabbit notic file current contain inform n't realli need simpl copyright c statement requir attribut notic
inputstream.read return valu ignor repositoryimpl.loadrootnodeid read inputstreamread use read ignor return valu result problem input stream n't read byte
remov depend edu.oswego.cs.dl.util.concurr edu.oswego.cs.dl.util.concurr mainten mode http //g.oswego.edu/dl/classes/edu/oswego/cs/dl/util/concurrent/package-summary.html advis migrat jdk5 java.util.concurr packag
rep similar xpath work queri rep similar /content/en produc except 24.09.2009 16:56:48.156 *error* 0:0:0:0:0:0:0:1 0 1253804208093 get /libs/cq/search/content/querydebug.html http/1.1 org.apache.sling.engine.impl.slingmainservlet servic uncaught slingexcept java.lang.arrayindexoutofboundsexcept -1 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.visit lucenequerybuilder.java:612 org.apache.jackrabbit.spi.commons.query.relationquerynode.accept relationquerynode.java:115 org.apache.jackrabbit.spi.commons.query.naryquerynode.acceptoperand naryquerynode.java:143 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.visit lucenequerybuilder.java:489 org.apache.jackrabbit.spi.commons.query.locationstepquerynode.accept locationstepquerynode.java:166 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.visit lucenequerybuilder.java:468 org.apache.jackrabbit.spi.commons.query.pathquerynode.accept pathquerynode.java:74 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.visit lucenequerybuilder.java:257 org.apache.jackrabbit.spi.commons.query.queryrootnode.accept queryrootnode.java:115 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.createlucenequeri lucenequerybuilder.java:247 org.apache.jackrabbit.core.query.lucene.lucenequerybuilder.createqueri lucenequerybuilder.java:227 org.apache.jackrabbit.core.query.lucene.queryimpl.execut queryimpl.java:111 org.apache.jackrabbit.core.query.queryimpl.execut queryimpl.java:127
jcr-client test fail server run localhost:80 caus repositoryfactoryimpltest.testgetspi2davrepositori probabl repositoryfactoryimpltest.testgetspi2davexrepositori fix test set requir webdav server test run current test tri connect localhost:80 expect connect fail specif way
java.util.uuid.fromstr slow benchmark show java.util.uuid.fromstr method 10 time slower previous version use jackrabbit-jcr-common method quit heavili use queri section general whenev nodeid creat string 'd like introduc custom string uuid pars code jackrabbit-jcr-common uuid class use nodeid string constructor wdyt
propertyvalu constraint fail implicit selectornam use jcr-sql2 compil jcr-sql2 queri involv propertyvalu constraint use qualifi properti name fail selectornam explicit defin follow queri work select thing thing thing properti abc follow n't select thing thing properti abc thing unecessari leav result second queri result javax.jcr.query.invalidqueryexcept queri select thing thing properti abc expect spec final draft howev state propertyvalu := selectornam propertynam one selector exist queri explicit specif selectornam option
build fail system without x fail test testfilecontain org.apache.jackrabbit.core.query.fulltextquerytest caus java.lang.internalerror ca n't connect x11 window server use :0.0 valu display variabl sun.awt.x11graphicsenvironment.initdisplay nativ method sun.awt.x11graphicsenvironment.access 000 x11graphicsenvironment.java:53 sun.awt.x11graphicsenviron 1.run x11graphicsenvironment.java:142 java.security.accesscontroller.doprivileg nativ method sun.awt.x11graphicsenvironment. clinit x11graphicsenvironment.java:131 java.lang.class.forname0 nativ method java.lang.class.fornam class.java:164 java.awt.graphicsenvironment.getlocalgraphicsenviron graphicsenvironment.java:68 sun.awt.x11.xtoolkit. clinit xtoolkit.java:96 java.lang.class.forname0 nativ method java.lang.class.fornam class.java:164 java.awt.toolkit 2.run toolkit.java:821 java.security.accesscontroller.doprivileg nativ method java.awt.toolkit.getdefaulttoolkit toolkit.java:804 java.awt.toolkit.geteventqueu toolkit.java:1592 java.awt.eventqueue.isdispatchthread eventqueue.java:666 javax.swing.swingutilities.iseventdispatchthread swingutilities.java:1270 javax.swing.text.stylecontext.reclaim stylecontext.java:437 javax.swing.text.stylecontext.addattribut stylecontext.java:294 javax.swing.text.stylecontext namedstyle.addattribut stylecontext.java:1486 javax.swing.text.stylecontext namedstyle.setnam stylecontext.java:1296 javax.swing.text.stylecontext namedstyle. init stylecontext.java:1244 javax.swing.text.stylecontext.addstyl stylecontext.java:90 javax.swing.text.stylecontext. init stylecontext.java:70 javax.swing.text.defaultstyleddocument. init defaultstyleddocument.java:88 org.apache.tika.parser.rtf.rtfparser.pars rtfparser.java:42
restor mix referenc check sessionimpl.getnodebyuuid revis 504623 comment mix referenc check sessionimpl.getnodebyuuid method sinc uuid node expos jcr uuid declar mix referenc 's rather unlik client possibl know intern uuid non-referenc node omit check mix referenc seem therefor reason compromis order improv perform node.isnodetyp name.mix_referenc return node els node uuid node expos throw new itemnotfoundexcept uuid.tostr solv minor perform issu issu client code use node uuid quick way access node downsid slight incompat spec say getnodebyuuid method suppos work mix referenc node jcr 2.0 client use session.getnodebyidentifi method mix referenc limit thus restor origin correct function getnodebyuuid method
unabl delet non session-scop lock node xa environ must first add valid locktoken session tri remov node xa environ result nosuchitemstateexcept state mark destroy problem unlock oper done node mark destroy
itemimpl validatetransientitem incomplet valid mandatori child item itemimpl validatetransientitem iter mandatori child node/properti definit order assert item creat howev check item name defin mandatori item definit present exist item realli mandatori definit exampl mandatori single-valu properti possibl add residu prop ad residu properti name mandatori prop multipl valu chang save without except node n't properti mandatori definit without tri think would possibl child node suggest fix child item mandatory-item-nam make sure 's definit mandatori expect one patch follow
tika-bas type detect jcr-server discuss dev 'd like make jackrabbit-jcr-serv compon use apach tika automat media type detect
problem jackrabbit-standalon 'm problem jackrabbit-standalon compon start proper two issu bundl packag n't includ web-inf/config.xml file assum recent bundl plugin version treat whitespac differ inlin set rmi bind fail local rmi registri alreadi run anoth repositori refer 'm think simpli disabl rmi registri bind use http //localhost:8080/rmi address recommend rmi endpoint
automat type convers longer work string valu longer convert binari requir exampl node n testrootnode.addnod testconvert nt file node content n.addnod jcr content nt resourc content.setproperti jcr lastmodifi calendar.getinst content.setproperti jcr mimetyp text/html content.setproperti jcr data hello n.getsess .save use work previous 2.0 build throw javax.jcr.nodetype.constraintviolationexcept match properti definit found http //www.jcp.org/jcr/1.0 data org.apache.jackrabbit.core.nodetype.effectivenodetype.getapplicablepropertydef effectivenodetype.java:782 org.apache.jackrabbit.core.nodeimpl.getapplicablepropertydefinit nodeimpl.java:747 org.apache.jackrabbit.core.itemmanager.getdefinit itemmanager.java:241 org.apache.jackrabbit.core.itemdata.getdefinit itemdata.java:101 org.apache.jackrabbit.core.itemmanager.canread itemmanager.java:409 org.apache.jackrabbit.core.itemmanager.getitemdata itemmanager.java:383 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:316 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:595 org.apache.jackrabbit.core.nodeimpl.removechildproperti nodeimpl.java:554 org.apache.jackrabbit.core.nodeimpl.removechildproperti nodeimpl.java:534 org.apache.jackrabbit.core.nodeimpl.setproperti nodeimpl.java:2303 org.apache.jackrabbit.core.nodetype.convertdatatypetest.teststringtobinari convertdatatypetest.java:36 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method
tck nodemixinutil exclud mix shareabl mixin test noderemovemixintest testremovesuccess tri remov mixin retriev addabl mixin nodetypeutil getaddablemixinnam add tri remov later addabl mixin retriev complet set mixin test node.canaddmixin howev jackrabbit-cor mix shareabl ad remov test chanc get exact mixin test fail except explicit check core exact case tck exclud special case n't michael found issu
test execut alreadi present mixin org.apache.jackrabbit.test.api.noderemovemixintest.testcheckedin org.apache.jackrabbit.test.api.nodeaddmixintest.testcheckedin fail mixin ad alreadi present node test check trow notexecutableexcept
cachebehaviour observ broken tri fix jcr-2293 discov cachebehaviour observ broken hierarchyeventlistener.onev ignor local event despit comment say otherwis sure way howev local event ignor jcr-2293 probabl also occur cachebehaviour observ nodeentryimpl.refresh event set child node entri incomplet node/properti ad tentat fix issu discov nodeentryimpl.refresh event event listen oper differ nodeentryimpl childnodeentryimpl instanc even though set childnodeentries.complet fals nodeentryimpl.refresh event event listen retriev node entri get differ instanc childnodeentries.complet still set true
unabl add/lock unlock/remov node share session 2 transact tri unlock remov node nodest run sync two oper
util class tranform jcr-sql2 to/from jcr-jqom jcr2 doc specifi contain thing translat one anoth straightforward manner jackrabbit-jcr-common modul offer util class transform one languag anoth generic way exempl string tosql2 queryobjectmodel qom queryobjectmodel tojqom queryobjectmodelfactori factori string queri
classcastexcept org.apache.xerces.parsers.xincludeawareparserconfigur cast org.apache.xerces.xni.parser.xmlparserconfigur deploy jboss 5.1 tri follow step given http //wiki.apache.org/jackrabbit/jackrabbitonjboss get except use jcr-2.0.jar instead jcr-1.0.jar follow except happen jboss server start 2009-10-02 11:49:05,630 error org.jboss.web.tomcat.service.deployers.jbosscontextconfig main xml error pars context.xml org.jboss.xb.binding.jbossxbruntimeexcept fail creat new sax parser org.jboss.xb.binding.unmarshallerfactori unmarshallerfactoryimpl.newunmarshal unmarshallerfactory.java:100 org.jboss.web.tomcat.service.deployers.jbosscontextconfig.processcontextconfig jbosscontextconfig.java:549 org.jboss.web.tomcat.service.deployers.jbosscontextconfig.init jbosscontextconfig.java:536 org.apache.catalina.startup.contextconfig.lifecycleev contextconfig.java:279 org.apache.catalina.util.lifecyclesupport.firelifecycleev lifecyclesupport.java:117 org.apache.catalina.core.standardcontext.init standardcontext.java:5436 org.apache.catalina.core.standardcontext.start standardcontext.java:4148 org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeployintern tomcatdeployment.java:310 org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeploy tomcatdeployment.java:142 org.jboss.web.deployers.abstractwardeployment.start abstractwardeployment.java:461 org.jboss.web.deployers.webmodule.startmodul webmodule.java:118 org.jboss.web.deployers.webmodule.start webmodule.java:97 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 org.jboss.mx.interceptor.reflecteddispatcher.invok reflecteddispatcher.java:157 org.jboss.mx.server.invocation.dispatch invocation.java:96 org.jboss.mx.server.invocation.invok invocation.java:88 org.jboss.mx.server.abstractmbeaninvoker.invok abstractmbeaninvoker.java:264 org.jboss.mx.server.mbeanserverimpl.invok mbeanserverimpl.java:668 org.jboss.system.microcontainer.serviceproxy.invok serviceproxy.java:206 proxy38.start unknown sourc org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:42 org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:37 org.jboss.dependency.plugins.action.simplecontrollercontextaction.simpleinstallact simplecontrollercontextaction.java:62 org.jboss.dependency.plugins.action.accesscontrollercontextaction.instal accesscontrollercontextaction.java:71 org.jboss.dependency.plugins.abstractcontrollercontextactions.instal abstractcontrollercontextactions.java:51 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.system.microcontainer.servicecontrollercontext.instal servicecontrollercontext.java:286 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.servicecontroller.dochang servicecontroller.java:688 org.jboss.system.servicecontroller.start servicecontroller.java:460 org.jboss.system.deployers.servicedeployer.start servicedeployer.java:163 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:99 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:46 org.jboss.deployers.spi.deployer.helpers.abstractsimplerealdeployer.internaldeploy abstractsimplerealdeployer.java:62 org.jboss.deployers.spi.deployer.helpers.abstractrealdeployer.deploy abstractrealdeployer.java:50 org.jboss.deployers.plugins.deployers.deployerwrapper.deploy deployerwrapper.java:171 org.jboss.deployers.plugins.deployers.deployersimpl.dodeploy deployersimpl.java:1439 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1157 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1178 org.jboss.deployers.plugins.deployers.deployersimpl.instal deployersimpl.java:1098 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.deployers.plugins.deployers.deployersimpl.process deployersimpl.java:781 org.jboss.deployers.plugins.main.maindeployerimpl.process maindeployerimpl.java:702 org.jboss.system.server.profileservice.repository.maindeployeradapter.process maindeployeradapter.java:117 org.jboss.system.server.profileservice.repository.profiledeployaction.instal profiledeployaction.java:70 org.jboss.system.server.profileservice.repository.abstractprofileaction.instal abstractprofileaction.java:53 org.jboss.system.server.profileservice.repository.abstractprofileservice.instal abstractprofileservice.java:361 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.server.profileservice.repository.abstractprofileservice.activateprofil abstractprofileservice.java:306 org.jboss.system.server.profileservice.profileservicebootstrap.start profileservicebootstrap.java:271 org.jboss.bootstrap.abstractserverimpl.start abstractserverimpl.java:461 org.jboss.main.boot main.java:221 org.jboss.main 1.run main.java:556 java.lang.thread.run thread.java:619 caus org.jboss.xb.binding.jbossxbexcept fail creat new sax parser org.jboss.xb.binding.parser.sax.saxjbossxbparser. init saxjbossxbparser.java:97 org.jboss.xb.binding.unmarshallerimpl. init unmarshallerimpl.java:56 org.jboss.xb.binding.unmarshallerfactori unmarshallerfactoryimpl.newunmarshal unmarshallerfactory.java:96 73 caus java.lang.classcastexcept org.apache.xerces.parsers.xincludeawareparserconfigur cast org.apache.xerces.xni.parser.xmlparserconfigur org.apache.xerces.parsers.saxparser. init unknown sourc org.apache.xerces.parsers.saxparser. init unknown sourc org.apache.xerces.jaxp.saxparserimpl jaxpsaxparser. init unknown sourc org.apache.xerces.jaxp.saxparserimpl. init unknown sourc org.apache.xerces.jaxp.saxparserfactoryimpl.newsaxpars unknown sourc org.jboss.xb.binding.parser.sax.saxjbossxbparser. init saxjbossxbparser.java:92 75 2009-10-02 11:49:05,645 error org.jboss.web.tomcat.service.deployers.jbosscontextconfig main xml error pars jboss.web/localhost/context.xml.default org.jboss.xb.binding.jbossxbruntimeexcept fail creat new sax parser org.jboss.xb.binding.unmarshallerfactori unmarshallerfactoryimpl.newunmarshal unmarshallerfactory.java:100 org.jboss.web.tomcat.service.deployers.jbosscontextconfig.processcontextconfig jbosscontextconfig.java:549 org.jboss.web.tomcat.service.deployers.jbosscontextconfig.init jbosscontextconfig.java:537 org.apache.catalina.startup.contextconfig.lifecycleev contextconfig.java:279 org.apache.catalina.util.lifecyclesupport.firelifecycleev lifecyclesupport.java:117 org.apache.catalina.core.standardcontext.init standardcontext.java:5436 org.apache.catalina.core.standardcontext.start standardcontext.java:4148 org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeployintern tomcatdeployment.java:310 org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeploy tomcatdeployment.java:142 org.jboss.web.deployers.abstractwardeployment.start abstractwardeployment.java:461 org.jboss.web.deployers.webmodule.startmodul webmodule.java:118 org.jboss.web.deployers.webmodule.start webmodule.java:97 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 org.jboss.mx.interceptor.reflecteddispatcher.invok reflecteddispatcher.java:157 org.jboss.mx.server.invocation.dispatch invocation.java:96 org.jboss.mx.server.invocation.invok invocation.java:88 org.jboss.mx.server.abstractmbeaninvoker.invok abstractmbeaninvoker.java:264 org.jboss.mx.server.mbeanserverimpl.invok mbeanserverimpl.java:668 org.jboss.system.microcontainer.serviceproxy.invok serviceproxy.java:206 proxy38.start unknown sourc org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:42 org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:37 org.jboss.dependency.plugins.action.simplecontrollercontextaction.simpleinstallact simplecontrollercontextaction.java:62 org.jboss.dependency.plugins.action.accesscontrollercontextaction.instal accesscontrollercontextaction.java:71 org.jboss.dependency.plugins.abstractcontrollercontextactions.instal abstractcontrollercontextactions.java:51 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.system.microcontainer.servicecontrollercontext.instal servicecontrollercontext.java:286 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.servicecontroller.dochang servicecontroller.java:688 org.jboss.system.servicecontroller.start servicecontroller.java:460 org.jboss.system.deployers.servicedeployer.start servicedeployer.java:163 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:99 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:46 org.jboss.deployers.spi.deployer.helpers.abstractsimplerealdeployer.internaldeploy abstractsimplerealdeployer.java:62 org.jboss.deployers.spi.deployer.helpers.abstractrealdeployer.deploy abstractrealdeployer.java:50 org.jboss.deployers.plugins.deployers.deployerwrapper.deploy deployerwrapper.java:171 org.jboss.deployers.plugins.deployers.deployersimpl.dodeploy deployersimpl.java:1439 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1157 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1178 org.jboss.deployers.plugins.deployers.deployersimpl.instal deployersimpl.java:1098 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.deployers.plugins.deployers.deployersimpl.process deployersimpl.java:781 org.jboss.deployers.plugins.main.maindeployerimpl.process maindeployerimpl.java:702 org.jboss.system.server.profileservice.repository.maindeployeradapter.process maindeployeradapter.java:117 org.jboss.system.server.profileservice.repository.profiledeployaction.instal profiledeployaction.java:70 org.jboss.system.server.profileservice.repository.abstractprofileaction.instal abstractprofileaction.java:53 org.jboss.system.server.profileservice.repository.abstractprofileservice.instal abstractprofileservice.java:361 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.server.profileservice.repository.abstractprofileservice.activateprofil abstractprofileservice.java:306 org.jboss.system.server.profileservice.profileservicebootstrap.start profileservicebootstrap.java:271 org.jboss.bootstrap.abstractserverimpl.start abstractserverimpl.java:461 org.jboss.main.boot main.java:221 org.jboss.main 1.run main.java:556 java.lang.thread.run thread.java:619 caus org.jboss.xb.binding.jbossxbexcept fail creat new sax parser org.jboss.xb.binding.parser.sax.saxjbossxbparser. init saxjbossxbparser.java:97 org.jboss.xb.binding.unmarshallerimpl. init unmarshallerimpl.java:56 org.jboss.xb.binding.unmarshallerfactori unmarshallerfactoryimpl.newunmarshal unmarshallerfactory.java:96 73 caus java.lang.classcastexcept org.apache.xerces.parsers.xincludeawareparserconfigur cast org.apache.xerces.xni.parser.xmlparserconfigur org.apache.xerces.parsers.saxparser. init unknown sourc org.apache.xerces.parsers.saxparser. init unknown sourc org.apache.xerces.jaxp.saxparserimpl jaxpsaxparser. init unknown sourc org.apache.xerces.jaxp.saxparserimpl. init unknown sourc org.apache.xerces.jaxp.saxparserfactoryimpl.newsaxpars unknown sourc org.jboss.xb.binding.parser.sax.saxjbossxbparser. init saxjbossxbparser.java:92 75 2009-10-02 11:49:05,645 error org.jboss.web.tomcat.service.deployers.jbosscontextconfig main xml error pars web-inf/context.xml org.jboss.xb.binding.jbossxbruntimeexcept fail creat new sax parser org.jboss.xb.binding.unmarshallerfactori unmarshallerfactoryimpl.newunmarshal unmarshallerfactory.java:100 org.jboss.web.tomcat.service.deployers.jbosscontextconfig.processcontextconfig jbosscontextconfig.java:549 org.jboss.web.tomcat.service.deployers.jbosscontextconfig.init jbosscontextconfig.java:540 org.apache.catalina.startup.contextconfig.lifecycleev contextconfig.java:279 org.apache.catalina.util.lifecyclesupport.firelifecycleev lifecyclesupport.java:117 org.apache.catalina.core.standardcontext.init standardcontext.java:5436 org.apache.catalina.core.standardcontext.start standardcontext.java:4148 org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeployintern tomcatdeployment.java:310 org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeploy tomcatdeployment.java:142 org.jboss.web.deployers.abstractwardeployment.start abstractwardeployment.java:461 org.jboss.web.deployers.webmodule.startmodul webmodule.java:118 org.jboss.web.deployers.webmodule.start webmodule.java:97 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 org.jboss.mx.interceptor.reflecteddispatcher.invok reflecteddispatcher.java:157 org.jboss.mx.server.invocation.dispatch invocation.java:96 org.jboss.mx.server.invocation.invok invocation.java:88 org.jboss.mx.server.abstractmbeaninvoker.invok abstractmbeaninvoker.java:264 org.jboss.mx.server.mbeanserverimpl.invok mbeanserverimpl.java:668 org.jboss.system.microcontainer.serviceproxy.invok serviceproxy.java:206 proxy38.start unknown sourc org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:42 org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:37 org.jboss.dependency.plugins.action.simplecontrollercontextaction.simpleinstallact simplecontrollercontextaction.java:62 org.jboss.dependency.plugins.action.accesscontrollercontextaction.instal accesscontrollercontextaction.java:71 org.jboss.dependency.plugins.abstractcontrollercontextactions.instal abstractcontrollercontextactions.java:51 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.system.microcontainer.servicecontrollercontext.instal servicecontrollercontext.java:286 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.servicecontroller.dochang servicecontroller.java:688 org.jboss.system.servicecontroller.start servicecontroller.java:460 org.jboss.system.deployers.servicedeployer.start servicedeployer.java:163 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:99 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:46 org.jboss.deployers.spi.deployer.helpers.abstractsimplerealdeployer.internaldeploy abstractsimplerealdeployer.java:62 org.jboss.deployers.spi.deployer.helpers.abstractrealdeployer.deploy abstractrealdeployer.java:50 org.jboss.deployers.plugins.deployers.deployerwrapper.deploy deployerwrapper.java:171 org.jboss.deployers.plugins.deployers.deployersimpl.dodeploy deployersimpl.java:1439 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1157 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1178 org.jboss.deployers.plugins.deployers.deployersimpl.instal deployersimpl.java:1098 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.deployers.plugins.deployers.deployersimpl.process deployersimpl.java:781 org.jboss.deployers.plugins.main.maindeployerimpl.process maindeployerimpl.java:702 org.jboss.system.server.profileservice.repository.maindeployeradapter.process maindeployeradapter.java:117 org.jboss.system.server.profileservice.repository.profiledeployaction.instal profiledeployaction.java:70 org.jboss.system.server.profileservice.repository.abstractprofileaction.instal abstractprofileaction.java:53 org.jboss.system.server.profileservice.repository.abstractprofileservice.instal abstractprofileservice.java:361 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.server.profileservice.repository.abstractprofileservice.activateprofil abstractprofileservice.java:306 org.jboss.system.server.profileservice.profileservicebootstrap.start profileservicebootstrap.java:271 org.jboss.bootstrap.abstractserverimpl.start abstractserverimpl.java:461 org.jboss.main.boot main.java:221 org.jboss.main 1.run main.java:556 java.lang.thread.run thread.java:619 caus org.jboss.xb.binding.jbossxbexcept fail creat new sax parser org.jboss.xb.binding.parser.sax.saxjbossxbparser. init saxjbossxbparser.java:97 org.jboss.xb.binding.unmarshallerimpl. init unmarshallerimpl.java:56 org.jboss.xb.binding.unmarshallerfactori unmarshallerfactoryimpl.newunmarshal unmarshallerfactory.java:96 73 caus java.lang.classcastexcept org.apache.xerces.parsers.xincludeawareparserconfigur cast org.apache.xerces.xni.parser.xmlparserconfigur org.apache.xerces.parsers.saxparser. init unknown sourc org.apache.xerces.parsers.saxparser. init unknown sourc org.apache.xerces.jaxp.saxparserimpl jaxpsaxparser. init unknown sourc org.apache.xerces.jaxp.saxparserimpl. init unknown sourc org.apache.xerces.jaxp.saxparserfactoryimpl.newsaxpars unknown sourc org.jboss.xb.binding.parser.sax.saxjbossxbparser. init saxjbossxbparser.java:92 75 2009-10-02 11:49:05,786 error org.apache.catalina.startup.contextconfig main mark applic unavail due previous error 2009-10-02 11:49:05,786 error org.apache.catalina.core.standardcontext main context /jackrabbit-webapp-2.0-alpha9 startup fail due previous error 2009-10-02 11:49:06,473 error org.jboss.kernel.plugins.dependency.abstractkernelcontrol main error instal start name=jboss.web.deploy war=/jackrabbit-webapp-2.0-alpha9 state=cr mode=manu requiredstate=instal org.jboss.deployers.spi.deploymentexcept url file /c /applications/jboss-5.1.0.ga/server/default/tmp/ahn1p-6tv4p6-g0bacatm-1-g0bageil-9t/jackrabbit-webapp-2.0-alpha9.war/ deploy fail org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeployintern tomcatdeployment.java:331 org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeploy tomcatdeployment.java:142 org.jboss.web.deployers.abstractwardeployment.start abstractwardeployment.java:461 org.jboss.web.deployers.webmodule.startmodul webmodule.java:118 org.jboss.web.deployers.webmodule.start webmodule.java:97 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 org.jboss.mx.interceptor.reflecteddispatcher.invok reflecteddispatcher.java:157 org.jboss.mx.server.invocation.dispatch invocation.java:96 org.jboss.mx.server.invocation.invok invocation.java:88 org.jboss.mx.server.abstractmbeaninvoker.invok abstractmbeaninvoker.java:264 org.jboss.mx.server.mbeanserverimpl.invok mbeanserverimpl.java:668 org.jboss.system.microcontainer.serviceproxy.invok serviceproxy.java:206 proxy38.start unknown sourc org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:42 org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:37 org.jboss.dependency.plugins.action.simplecontrollercontextaction.simpleinstallact simplecontrollercontextaction.java:62 org.jboss.dependency.plugins.action.accesscontrollercontextaction.instal accesscontrollercontextaction.java:71 org.jboss.dependency.plugins.abstractcontrollercontextactions.instal abstractcontrollercontextactions.java:51 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.system.microcontainer.servicecontrollercontext.instal servicecontrollercontext.java:286 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.servicecontroller.dochang servicecontroller.java:688 org.jboss.system.servicecontroller.start servicecontroller.java:460 org.jboss.system.deployers.servicedeployer.start servicedeployer.java:163 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:99 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:46 org.jboss.deployers.spi.deployer.helpers.abstractsimplerealdeployer.internaldeploy abstractsimplerealdeployer.java:62 org.jboss.deployers.spi.deployer.helpers.abstractrealdeployer.deploy abstractrealdeployer.java:50 org.jboss.deployers.plugins.deployers.deployerwrapper.deploy deployerwrapper.java:171 org.jboss.deployers.plugins.deployers.deployersimpl.dodeploy deployersimpl.java:1439 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1157 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1178 org.jboss.deployers.plugins.deployers.deployersimpl.instal deployersimpl.java:1098 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.deployers.plugins.deployers.deployersimpl.process deployersimpl.java:781 org.jboss.deployers.plugins.main.maindeployerimpl.process maindeployerimpl.java:702 org.jboss.system.server.profileservice.repository.maindeployeradapter.process maindeployeradapter.java:117 org.jboss.system.server.profileservice.repository.profiledeployaction.instal profiledeployaction.java:70 org.jboss.system.server.profileservice.repository.abstractprofileaction.instal abstractprofileaction.java:53 org.jboss.system.server.profileservice.repository.abstractprofileservice.instal abstractprofileservice.java:361 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.server.profileservice.repository.abstractprofileservice.activateprofil abstractprofileservice.java:306 org.jboss.system.server.profileservice.profileservicebootstrap.start profileservicebootstrap.java:271 org.jboss.bootstrap.abstractserverimpl.start abstractserverimpl.java:461 org.jboss.main.boot main.java:221 org.jboss.main 1.run main.java:556 java.lang.thread.run thread.java:619 2009-10-02 11:49:06,598 error org.jboss.kernel.plugins.dependency.abstractkernelcontrol main error instal real name=vfszip /c /applications/jboss-5.1.0.ga/server/default/deploy/jackrabbit-webapp-2.0-alpha9.war/ state=prer mode=manu requiredstate=r org.jboss.deployers.spi.deploymentexcept url file /c /applications/jboss-5.1.0.ga/server/default/tmp/ahn1p-6tv4p6-g0bacatm-1-g0bageil-9t/jackrabbit-webapp-2.0-alpha9.war/ deploy fail org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeployintern tomcatdeployment.java:331 org.jboss.web.tomcat.service.deployers.tomcatdeployment.performdeploy tomcatdeployment.java:142 org.jboss.web.deployers.abstractwardeployment.start abstractwardeployment.java:461 org.jboss.web.deployers.webmodule.startmodul webmodule.java:118 org.jboss.web.deployers.webmodule.start webmodule.java:97 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 org.jboss.mx.interceptor.reflecteddispatcher.invok reflecteddispatcher.java:157 org.jboss.mx.server.invocation.dispatch invocation.java:96 org.jboss.mx.server.invocation.invok invocation.java:88 org.jboss.mx.server.abstractmbeaninvoker.invok abstractmbeaninvoker.java:264 org.jboss.mx.server.mbeanserverimpl.invok mbeanserverimpl.java:668 org.jboss.system.microcontainer.serviceproxy.invok serviceproxy.java:206 proxy38.start unknown sourc org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:42 org.jboss.system.microcontainer.startstoplifecycleaction.installact startstoplifecycleaction.java:37 org.jboss.dependency.plugins.action.simplecontrollercontextaction.simpleinstallact simplecontrollercontextaction.java:62 org.jboss.dependency.plugins.action.accesscontrollercontextaction.instal accesscontrollercontextaction.java:71 org.jboss.dependency.plugins.abstractcontrollercontextactions.instal abstractcontrollercontextactions.java:51 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.system.microcontainer.servicecontrollercontext.instal servicecontrollercontext.java:286 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.servicecontroller.dochang servicecontroller.java:688 org.jboss.system.servicecontroller.start servicecontroller.java:460 org.jboss.system.deployers.servicedeployer.start servicedeployer.java:163 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:99 org.jboss.system.deployers.servicedeployer.deploy servicedeployer.java:46 org.jboss.deployers.spi.deployer.helpers.abstractsimplerealdeployer.internaldeploy abstractsimplerealdeployer.java:62 org.jboss.deployers.spi.deployer.helpers.abstractrealdeployer.deploy abstractrealdeployer.java:50 org.jboss.deployers.plugins.deployers.deployerwrapper.deploy deployerwrapper.java:171 org.jboss.deployers.plugins.deployers.deployersimpl.dodeploy deployersimpl.java:1439 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1157 org.jboss.deployers.plugins.deployers.deployersimpl.doinstallparentfirst deployersimpl.java:1178 org.jboss.deployers.plugins.deployers.deployersimpl.instal deployersimpl.java:1098 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.deployers.plugins.deployers.deployersimpl.process deployersimpl.java:781 org.jboss.deployers.plugins.main.maindeployerimpl.process maindeployerimpl.java:702 org.jboss.system.server.profileservice.repository.maindeployeradapter.process maindeployeradapter.java:117 org.jboss.system.server.profileservice.repository.profiledeployaction.instal profiledeployaction.java:70 org.jboss.system.server.profileservice.repository.abstractprofileaction.instal abstractprofileaction.java:53 org.jboss.system.server.profileservice.repository.abstractprofileservice.instal abstractprofileservice.java:361 org.jboss.dependency.plugins.abstractcontrollercontext.instal abstractcontrollercontext.java:348 org.jboss.dependency.plugins.abstractcontroller.instal abstractcontroller.java:1631 org.jboss.dependency.plugins.abstractcontroller.incrementst abstractcontroller.java:934 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:1082 org.jboss.dependency.plugins.abstractcontroller.resolvecontext abstractcontroller.java:984 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:822 org.jboss.dependency.plugins.abstractcontroller.chang abstractcontroller.java:553 org.jboss.system.server.profileservice.repository.abstractprofileservice.activateprofil abstractprofileservice.java:306 org.jboss.system.server.profileservice.profileservicebootstrap.start profileservicebootstrap.java:271 org.jboss.bootstrap.abstractserverimpl.start abstractserverimpl.java:461 org.jboss.main.boot main.java:221 org.jboss.main 1.run main.java:556 java.lang.thread.run thread.java:619
dont use nt frozennod creat node test case may end tri creat new node type nt frozennod fail
make authorizable.setproperti noisi case failur setproperti fail unspecif warn 's except doesn print use inform except
search result order queri statement search.jsp order
poor perform rang queri use date evalu migrat 1.5 1.6 creat sever test case prove queri perform 1.6 better 1.5 add date properti queri repositori 400,000 node node sever string base properti properti property2 date base properti datestart everi node relat uniqu datestart total date rang span 6 year test base queri //element namespac property='valu order datestart descend time run queri 1.5 1.6 1.5 1.5 second 1.6 1.5 second add date properti //element namespac property='valu datestart =xs datetim 2009-09-24t11:53:23.293-05:00 order datestart descend result 1.5 1.5 second 1.6 3.5 second isol slow implement sortedlucenequeryhit sortedlucenequeryhit present 1.5 run version test queri run 20 time simultan differ time queri run 20 time sequenti test see evid cach take place provid minor perform gain also run 1.6 queri multipl time decreas queri time dramat http //www.nabble.com/date-property-performance-in-1.6-td25704607.html
remov doubl quot illeg xpathsearchchar helper method text sinc lucen 2.4 doubl quot charact end search term illeg must escap
support easi pre-authent login applic authent user need access repositori behalf pre-authent user exampl pre-authent includ sso solut web applic use web-bas authent protocol easili implement jaa loginmodul exampl openid similar situat password may provid simplecredenti thus regular login user name password possibl therefor propos enhanc abstractloginmodul allow set specif attribut simplecredenti attribut map attribut set authent login succeed session user name simplecredenti creat starter might check presenc attribut
session hold locktoken removelocktoken xa environ
jcrutils.getrepositori simpl repositori access discuss mail list would nice trivial simpl way one line code connect repositori repositoryfactori interfac jcr 2.0 defin way client get repositori refer without direct implement depend client still need extra code handl servic provid lookup iter avail repositori factori simplifi client code 'd like introduc jcrutils.getrepositori map string string method take care task mention map string string paramet repositori set repositori repositori jcrutils.getrepositori paramet simplif 'd also like introduc jcrutils.getrepositori string method build paramet map base given repositori uri repositori repositori jcrutils.getrepositori file ///path/to/repositori repositori repositori jcrutils.getrepositori http //localhost:8080/serv set support uri type still defin
add parser callback gql pars gql current hidden implement would nice mechan allow client code get callback whenev field/valu pair pars
node.orderbefor check permiss seem node.orderbefor string string check edit session allow modifi parent neither immedi upon save transient chang issu found alexandr capt thank
nullpointerexcept access about.jsp page miss /meta-inf/notice.txt access http //localhost:8080/about.jsp produc java.lang.nullpointerexcept org.apache.jsp.about_jsp.output org.apache.jsp.about_jsp:39 org.apache.jsp.about_jsp._jspservic org.apache.jsp.about_jsp:103 org.apache.jasper.runtime.httpjspbase.servic httpjspbase.java:109 javax.servlet.http.httpservlet.servic httpservlet.java:820 org.apache.jasper.servlet.jspservletwrapper.servic jspservletwrapper.java:389 org.apache.jasper.servlet.jspservlet.servicejspfil jspservlet.java:486 org.apache.jasper.servlet.jspservlet.servic jspservlet.java:380 javax.servlet.http.httpservlet.servic httpservlet.java:820 org.mortbay.jetty.servlet.servletholder.handl servletholder.java:502 org.mortbay.jetty.servlet.servlethandler.handl servlethandler.java:363 org.mortbay.jetty.security.securityhandler.handl securityhandler.java:216 org.mortbay.jetty.servlet.sessionhandler.handl sessionhandler.java:181 org.mortbay.jetty.handler.contexthandler.handl contexthandler.java:766 org.mortbay.jetty.webapp.webappcontext.handl webappcontext.java:417 org.mortbay.jetty.handler.handlerwrapper.handl handlerwrapper.java:152 org.mortbay.jetty.handler.requestloghandler.handl requestloghandler.java:49 org.mortbay.jetty.handler.handlerwrapper.handl handlerwrapper.java:152 org.mortbay.jetty.server.handl server.java:324 org.mortbay.jetty.httpconnection.handlerequest httpconnection.java:534 org.mortbay.jetty.httpconnect requesthandler.headercomplet httpconnection.java:864 org.mortbay.jetty.httpparser.parsenext httpparser.java:533 org.mortbay.jetty.httpparser.parseavail httpparser.java:207 org.mortbay.jetty.httpconnection.handl httpconnection.java:403 org.mortbay.jetty.bio.socketconnector connection.run socketconnector.java:228 org.mortbay.thread.queuedthreadpool poolthread.run queuedthreadpool.java:522 jar miss follow file /meta-inf/notice.txt /notice.txt /meta-inf/notic problem reproduc jackrabbit-webapp-2.0-beta1.war
html text extractor extract index numer numer addresses/dates/financi figur extract index current html extractor valu handl proper searchabl done via plaintextextractor
repositorycopi copi open-scop lock use repositorycopi make backup repositori open-scop session scope lock lock copi tri restor copi repositori lock gone
problem import node binari properti repositori configur datastor use importxml method workspac import node contain binari properti node import correct valu binari data properti import howev binari data goe db persistencemanag datastor creat new node type use api binari data go datastor
index recoveri may fail redo log contain node part index aggreg searchindex.mergeaggregatednodeindex throw nullpointerexcept index yet set call made recoveri code trigger multiindex constructor
core weakrefer properti object type refer read persist layer seem weakrefer properti proper creat store read refer properti built persist layer reproduc creat new weakrefer properti save chang forc read persist layer case use day 's crx restartet server former weakrefer display refer
buffer i/o indexinfo indexinfo current use plain input/outputstream without buffer
use fieldselector sorted/lucenequeryhit read uuid lucenequeryhit current read complet lucen document also prevent usag under uuid cach
creat scorenod demand sortedlucenequeryhit scorenod current creat full result fetch instead scorenod creat demand request nextscorenod
add basic i/o counter queri handler coupl simpl counter track number i/o oper perform queri execut help debug queri perform issu
avoid docfreq call non-fulltext queri look document frequenc queri term cost i/o use fulltext queri document frequenc influenc relev result node simpl constraint like foo bar may return constant valu docfreq
avoid except thrown final handler repositoryimpl constructor except happen initi repositori might overlay except thrown final handler repositoryimpl constructor see line 382 ff 1 latter except win origin except lost n't log make hard figur real problem problem actual bit self-enforc someth goe wrong startup code shutdown method call actual prone fail might expect broken-startup state case overlay npe happen observationmanagerimpl.getregisteredeventlisten this.dispatch unexpect null 2 think place fix npe guard observationmanagerimpl constructor dispatch try/catch block final log except final succeed tri repositori startup fail clean shutdown catch throwabl shutdown like fail startup broken log.error addit startup fail anoth problem occur shut repositori e 1 http //svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/repositoryimpl.java view=markup 2 overlay except 's stacktrac caus java.lang.nullpointerexcept org.apache.jackrabbit.core.observation.observationmanagerimpl.getregisteredeventlisten observationmanagerimpl.java:143 org.apache.jackrabbit.core.sessionimpl.removeregisteredeventlisten sessionimpl.java:1190 org.apache.jackrabbit.core.sessionimpl.logout sessionimpl.java:1215 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.dodispos repositoryimpl.java:2153 com.day.crx.core.crxrepositoryimpl crxworkspaceinfo.dodispos crxrepositoryimpl.java:1095 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.dispos repositoryimpl.java:2108 org.apache.jackrabbit.core.repositoryimpl.doshutdown repositoryimpl.java:1146 com.day.crx.core.crxrepositoryimpl.doshutdown crxrepositoryimpl.java:845 org.apache.jackrabbit.core.repositoryimpl.shutdown repositoryimpl.java:1098 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:387 com.day.crx.core.crxrepositoryimpl. init crxrepositoryimpl.java:201 com.day.crx.core.crxrepositoryimpl.cr crxrepositoryimpl.java:190 28
bindvari regist jcr-sql2 contain follow fail java.lang.illegalargumentexcept valid variabl queri queri queri qm.createqueri select document document contain document.origin x query.jcr_sql2 query.bindvari x vf.createvalu moo query.getbindvariablenam return empti array fulltextsearchexpress _is_ howev correct pars bindvariablevalueimpl fulltextsearch queryobjectmodelimpl queri .getconstraint .getfulltextsearchexpress instanceof bindvariablevalu
npe observationmanagerimpl.getregisteredeventlisten shutdown broken startup see jcr-2378 variabl dispatch pass null constructor
webdav nullpoint except get tikka detector seem introduc https //issues.apache.org/jira/browse/jcr-2334 05.11.2009 14:28:27 *mark servletengin servlet threw except java.lang.nullpointerexcept org.apache.jackrabbit.server.io.defaulthandler.detect defaulthandler.java:668 org.apache.jackrabbit.server.io.xmlhandler.canexport xmlhandler.java:152 org.apache.jackrabbit.server.io.defaulthandler.canexport defaulthandler.java:557 org.apache.jackrabbit.server.io.propertymanagerimpl.exportproperti propertymanagerimpl.java:58 org.apache.jackrabbit.webdav.simple.davresourceimpl.initproperti davresourceimpl.java:320 org.apache.jackrabbit.webdav.simple.deltavresourceimpl.initproperti deltavresourceimpl.java:248 org.apache.jackrabbit.webdav.simple.versioncontrolledresourceimpl.initproperti versioncontrolledresourceimpl.java:320 org.apache.jackrabbit.webdav.simple.davresourceimpl.getproperti davresourceimpl.java:300 org.apache.jackrabbit.webdav.multistatusresponse. init multistatusresponse.java:181 org.apache.jackrabbit.webdav.multistatus.addresourceproperti multistatus.java:62 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.dopropfind abstractwebdavservlet.java:447 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.execut abstractwebdavservlet.java:235 com.day.crx.j2ee.crxdavservlet.servic crxdavservlet.java:76 com.day.crx.j2ee.resourceservlet.servic resourceservlet.java:97 javax.servlet.http.httpservlet.servic httpservlet.java:802 com.day.j2ee.servletengine.servletruntimeenvironment.servic servletruntimeenvironment.java:228 com.day.j2ee.servletengine.requestdispatcherimpl.dofilt requestdispatcherimpl.java:315 com.day.j2ee.servletengine.requestdispatcherimpl.servic requestdispatcherimpl.java:334 com.day.j2ee.servletengine.requestdispatcherimpl.servic requestdispatcherimpl.java:378 com.day.j2ee.servletengine.servlethandlerimpl.execut servlethandlerimpl.java:313 com.day.j2ee.servletengine.defaultthreadpool dequeuethread.run defaultthreadpool.java:134 java.lang.thread.run thread.java:613
wrong eval order access control entri within singl node node-bas ac seem node-bas access control ac entri within given node current collect wrong order rememb correct work remov point reason n't recal exact vagu idea relat allow-on group anyway play around permiss crx recent found evalu follow setup n't work would expect user member group b c group ace exist given node /a/b/c acl look like deni b allow c would expect allow c would revert previous deni b sinc gui read ace eval order first entri last entri order ad
use executor servic repositori index merg index merger current start thread index merg use repositori wide executor servic would simplifi thing make configur easier
updat depend version commons-collect slf4j derbi depend use 2.0-beta1 could upgrad commons-collect 3.1 3.2.1 slf4j 1.5.3 1.5.8 derbi 10.2.1.6 10.5.3.0 sure derbi two seem drop replac older verison
patch qvaluefactoryimpl.equ n't compar correct equal compar 's uri 's uri poos one valu load yet initi other.uri null return uri.equ uri return other.uri.equ uri els need load binari valu order abl compar 2 valu
index migrat fail properti name prefix other automat index migrat jcr-1363 introduc jackrabbit version 1.5.0 replac separ char name term text properti field util 1.4.x \uffff use migrat use chang overal order properti term lead assert failur see attach test
add time inform event deliveri debug messag contain inform long event listen spend iter deliv event
text extractor imag parser throw except jpeg except thrown upload jpeg imag 16.11.2009 17:20:42 *warn lazytextextractorfield fail extract text binari properti lazytextextractorfield.java line 165 org.apache.tika.exception.tikaexcept tika-198 illeg ioexcept org.apache.tika.parser.image.imagepars c7bc3 org.apache.tika.parser.compositeparser.pars compositeparser.java:125 org.apache.tika.parser.autodetectparser.pars autodetectparser.java:105 org.apache.jackrabbit.core.query.lucene.lazytextextractorfield parsingtask.run lazytextextractorfield.java:160 java.util.concurrent.executor runnableadapter.cal executors.java:417 java.util.concurrent.futuretask sync.innerrun futuretask.java:269 java.util.concurrent.futuretask.run futuretask.java:123 java.util.concurrent.scheduledthreadpoolexecutor scheduledfuturetask.access 301 scheduledthreadpoolexecutor.java:65 java.util.concurrent.scheduledthreadpoolexecutor scheduledfuturetask.run scheduledthreadpoolexecutor.java:168 java.util.concurrent.threadpoolexecutor worker.runtask threadpoolexecutor.java:650 java.util.concurrent.threadpoolexecutor worker.run threadpoolexecutor.java:675 java.lang.thread.run thread.java:613 caus javax.imageio.iioexcept jpeg file start 0x00 0x05 com.sun.imageio.plugins.jpeg.jpegimagereader.readimagehead nativ method com.sun.imageio.plugins.jpeg.jpegimagereader.readnativehead jpegimagereader.java:554 com.sun.imageio.plugins.jpeg.jpegimagereader.checktableson jpegimagereader.java:309 com.sun.imageio.plugins.jpeg.jpegimagereader.gotoimag jpegimagereader.java:431 com.sun.imageio.plugins.jpeg.jpegimagereader.readhead jpegimagereader.java:547 com.sun.imageio.plugins.jpeg.jpegimagereader.getheight jpegimagereader.java:609 org.apache.tika.parser.image.imageparser.pars imageparser.java:47 org.apache.tika.parser.compositeparser.pars compositeparser.java:119 10
accesscontrolentri order entri accesscontrollist order order ac-entri matter access control evalu
administratortest.testadminnodecollidingwithrandomnod failur see follow test failur latest trunk seem affect also sébastien comment jcr-2389 howev n't break hudson build angela 's checkout 'm file bug disabl test abl cut 2.0-beta3 releas look later detail detail failur messag test set org.apache.jackrabbit.core.security.user.testal test run 144 failur 1 error 0 skip 0 time elaps 4.078 sec failur testadminnodecollidingwithrandomnod org.apache.jackrabbit.core.security.user.administratortest time elaps 0.072 sec failur junit.framework.assertionfailederror junit.framework.assert.fail assert.java:47 junit.framework.assert.asserttru assert.java:20 junit.framework.assert.assertfals assert.java:34 junit.framework.assert.assertfals assert.java:41 org.apache.jackrabbit.core.security.user.administratortest.testadminnodecollidingwithrandomnod administratortest.java:205
osgi bundl symbol name chang due chang maven-bundle-plugin see felix-1886 notic jackrabbit-jcr-common 2.0-beta3 assum modul use maven-bundle-plugin affect bundl symbol name chang problemat osgi framework consid old new bundl differ compon instead differ version compon simplest way go back previous symbol name probabl use maven-bundle-plugin config workaround describ felix-1886 jackrabbit parent pom whever plugin configur ll tri suppli patch
observ avoid run memori jackrabbit use unbound observ queue event listen asynchron listen default observ listen slow observ queue get larger larger jvm eventu run memori suggest use maximum queue size 100'000 default ad new event queue block observ listen remov item 'm sure need way configur option probabl system properti enough start still add better way configur set turn somebodi actual need differ valu special case observ listen write repositori therefor caus new event case n't make sens block ad event would block whole system howev warn written log file
insuffici privileg hi jackrabbit dbstore fli creat tabl db dev environ permiss creat tabl fli manual insert dll tabl index applic start although 'm get follow except run applic attach repository.xml log 11/23/09 11:32:04:405 est 0000003a systemout o warn org.apache.jackrabbit.core.config.configurationerrorhandl webcontain 3 warn pars configur line 4 use system id file /usr/local/web/fda/was/61x/svdw0047v61fda/installedapps/afda21network001/osa_registry.ear/osa_registry.war/web-inf/cfg/repository.xml org.xml.sax.saxparseexcept document root element repositori must match doctyp root null 11/23/09 11:32:04:407 est 0000003a systemout o warn org.apache.jackrabbit.core.config.configurationerrorhandl webcontain 3 warn pars configur line 4 use system id file /usr/local/web/fda/was/61x/svdw0047v61fda/installedapps/afda21network001/osa_registry.ear/osa_registry.war/web-inf/cfg/repository.xml org.xml.sax.saxparseexcept document invalid grammar found 11/23/09 11:32:04:977 est 0000003a systemout o info org.apache.jackrabbit.core.repositoryimpl webcontain 3 start repositori 11/23/09 11:32:05:474 est 0000003a systemout o error org.apache.jackrabbit.core.fs.db.databasefilesystem webcontain 3 fail initi file system java.sql.sqlexcept ora-01031 insuffici privileg oracle.jdbc.driver.databaseerror.throwsqlexcept databaseerror.java:112 oracle.jdbc.driver.t4cttioer.processerror t4cttioer.java:331 oracle.jdbc.driver.t4cttioer.processerror t4cttioer.java:288 oracle.jdbc.driver.t4c8oall.rec t4c8oall.java:745 oracle.jdbc.driver.t4cstatement.dooall8 t4cstatement.java:210 oracle.jdbc.driver.t4cstatement.executeforrow t4cstatement.java:961 oracle.jdbc.driver.oraclestatement.doexecutewithtimeout oraclestatement.java:1190 oracle.jdbc.driver.oraclestatement.executeupdateintern oraclestatement.java:1657 oracle.jdbc.driver.oraclestatement.executeupd oraclestatement.java:1626 org.apache.jackrabbit.core.fs.db.oraclefilesystem.checkschema oraclefilesystem.java:211 org.apache.jackrabbit.core.fs.db.databasefilesystem.init databasefilesystem.java:190 org.apache.jackrabbit.core.fs.db.oraclefilesystem.init oraclefilesystem.java:137 org.apache.jackrabbit.core.config.repositoryconfigurationpars 2.getfilesystem repositoryconfigurationparser.java:762 org.apache.jackrabbit.core.config.repositoryconfig.getfilesystem repositoryconfig.java:666 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:262 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:621 org.apache.jackrabbit.core.jndi.bindablerepository.createrepositori bindablerepository.java:140 org.apache.jackrabbit.core.jndi.bindablerepository.init bindablerepository.java:116 org.apache.jackrabbit.core.jndi.bindablerepository. init bindablerepository.java:105 org.apache.jackrabbit.core.jndi.bindablerepositoryfactory.getobjectinst bindablerepositoryfactory.java:51 org.apache.jackrabbit.core.jndi.registryhelper.registerrepositori registryhelper.java:74 com.ssc.soareg.jackrabbit.contentrepository. clinit contentrepository.java:71 com.ssc.soareg.jaxr.registry.client.infomodel.serviceimpl. init serviceimpl.java:177 com.ssc.soareg.governance.client.soalifecyclemanagerimpl.savebusinessservic soalifecyclemanagerimpl.java:259 com.ssc.soareg.registry.server.uploadservlet.servic uploadservlet.java:473 javax.servlet.http.httpservlet.servic httpservlet.java:856 com.ibm.ws.webcontainer.servlet.servletwrapper.servic servletwrapper.java:1068 com.ibm.ws.webcontainer.servlet.servletwrapper.handlerequest servletwrapper.java:543 com.ibm.ws.wswebcontainer.servlet.servletwrapper.handlerequest servletwrapper.java:478 com.ibm.ws.webcontainer.webapp.webapp.handlerequest webapp.java:3357 com.ibm.ws.webcontainer.webapp.webgroup.handlerequest webgroup.java:267 com.ibm.ws.webcontainer.webcontainer.handlerequest webcontainer.java:811 com.ibm.ws.wswebcontainer.webcontainer.handlerequest webcontainer.java:1455 com.ibm.ws.webcontainer.channel.wcchannellink.readi wcchannellink.java:115 com.ibm.ws.http.channel.inbound.impl.httpinboundlink.handlediscrimin httpinboundlink.java:454 com.ibm.ws.http.channel.inbound.impl.httpinboundlink.handlenewinform httpinboundlink.java:383 com.ibm.ws.http.channel.inbound.impl.httpiclreadcallback.complet httpiclreadcallback.java:102 com.ibm.ws.tcp.channel.impl.aioreadcompletionlistener.futurecomplet aioreadcompletionlistener.java:165 com.ibm.io.async.abstractasyncfuture.invokecallback abstractasyncfuture.java:217 com.ibm.io.async.asyncchannelfuture.firecompletionact asyncchannelfuture.java:161 com.ibm.io.async.asyncfuture.complet asyncfuture.java:136 com.ibm.io.async.resulthandler.complet resulthandler.java:195 com.ibm.io.async.resulthandler.runeventprocessingloop resulthandler.java:784 com.ibm.io.async.resulthandl 2.run resulthandler.java:873 com.ibm.ws.util.threadpool worker.run threadpool.java:1473
return null option configur element two recent introduc configur element option configur parser still return instanc element miss configur parser return null element order distinguish case empti element present
repository-2.0.dtd miss introduc new configur element need reflect new dtd version
mixin remov except tri remov mixin non nt unstructur node case nt resourc get follow except unabl alter mixin type javax.jcr.nodetype.constraintviolationexcept match properti definit found http //www.day.com/jcr/cq/1.0 lastrolledout lastrolledout properti defin mixin cq liverelationship tri remov
chainedtermenum omit initi term regress caus jcr-2393
replac commons-log jcl-over-slf4j jackrabbit-webdav jcr-1631 move exclus rule transit commons-log depend commons-httpcli higher level compon like jackrabbit-jca jackrabbit-webapp howev 'm troubl commons-log show downstream project depend direct jackrabbit-webapp jackrabbit-jcr-serv thus 'd like revert jcr-1631 solut push exclus rule back jackrabbit-webapp replac commons-log depend jcl-over-slf4j downstream project alreadi use commons-log still exclud jcl-over-slf4j depend
alreadyclosedexcept initi index creation happen index queue check creat initi index probabl regress caus jcr-2035 caus org.apache.lucene.store.alreadyclosedexcept directori close org.apache.lucene.store.directory.ensureopen directory.java:220 org.apache.lucene.store.fsdirectory.getfil fsdirectory.java:533 org.apache.jackrabbit.core.query.lucene.directory.fsdirectorymanag fsdir.list fsdirectorymanager.java:149 org.apache.lucene.index.segmentinfo findsegmentsfile.run segmentinfos.java:533 org.apache.lucene.index.directoryindexreader.open directoryindexreader.java:115 org.apache.lucene.index.indexreader.open indexreader.java:316 org.apache.lucene.index.indexreader.open indexreader.java:263 org.apache.jackrabbit.core.query.lucene.abstractindex.getindexread abstractindex.java:245 org.apache.jackrabbit.core.query.lucene.abstractindex.removedocu abstractindex.java:225 org.apache.jackrabbit.core.query.lucene.persistentindex.removedocu persistentindex.java:90 org.apache.jackrabbit.core.query.lucene.multiindex deletenode.execut multiindex.java:1952 org.apache.jackrabbit.core.query.lucene.multiindex.executeandlog multiindex.java:1085 org.apache.jackrabbit.core.query.lucene.multiindex.checkindexingqueu multiindex.java:1308 org.apache.jackrabbit.core.query.lucene.multiindex.createindex multiindex.java:1177 org.apache.jackrabbit.core.query.lucene.multiindex.createindex multiindex.java:1191 org.apache.jackrabbit.core.query.lucene.multiindex.createindex multiindex.java:1191 org.apache.jackrabbit.core.query.lucene.multiindex.createindex multiindex.java:1191 assum index merg happen time close index segment
updat lucen 3.0 lucen 3.0 releas 2009/11/25 migrat java 1.5 jackrabbit 2.0 also ad new optim would nice jackrabbit could switch new lucen version
repositoryexcept use bindvari jcr-sql2 contain use bindvari jcr-sql2 contain constraint queri fail repositoryexcept exampl string sql select nt unstructur ischildnod /testroot contain mytext searchexpress queri q superuser.getworkspac .getquerymanag .createqueri sql query.jcr_sql2 q.bindvalu searchexpress superuser.getvaluefactori .createvalu fox q.execut result javax.jcr.repositoryexcept unknown static operand type org.apache.jackrabbit.spi.commons.query.qom.bindvariablevalueimpl 591a4d org.apache.jackrabbit.core.query.lucene.lucenequeryfactoryimpl.cr lucenequeryfactoryimpl.java:215 org.apache.jackrabbit.core.query.lucene.constraint.fulltextconstraint. init fulltextconstraint.java:42 org.apache.jackrabbit.core.query.lucene.constraint.constraintbuild visitor.visit constraintbuilder.java:175 org.apache.jackrabbit.spi.commons.query.qom.fulltextsearchimpl.accept fulltextsearchimpl.java:117 org.apache.jackrabbit.core.query.lucene.constraint.constraintbuild visitor.visit constraintbuilder.java:137 org.apache.jackrabbit.spi.commons.query.qom.andimpl.accept andimpl.java:72 org.apache.jackrabbit.core.query.lucene.constraint.constraintbuilder.cr constraintbuilder.java:82 org.apache.jackrabbit.core.query.lucene.queryobjectmodelimpl.execut queryobjectmodelimpl.java:109 org.apache.jackrabbit.core.query.queryimpl.execut queryimpl.java:127 tri fix issu way access bindvari constraintbuild lucenequeryfactoryimpl constraintbuild pass fulltextsearchimpl qom subtre factori via fulltextconstraint constructor without visit signatur would lucenequeryfactoryimpl creat fulltextsearchimpl fts valu searchexpress could visit staticoperand constraintbuild modifi fulltextsearchimpl constructor accord would impli lucenequeryfactori interfac would need chang accord n't know would mean
read permiss parent node requir access item 's definit session grant permiss given item b lack permiss read 's parent node attempt access definit b mean node.getdefinit property.getdefinit fail accessdeniedexcept similar session abl modifi item b e.g add child node case node sinc implement e.g check item b n't protect determin look definit feel item definit access even parent node read
workspaceaccessmanag defin securitymanag keep user per workspac must test user exist workspaceaccessmanag defin secur manag keep user per workspac current return true upon call grant set string workspac given name exist fine initi check upon session creation obvious n't method call test access workspac name workspac getaccessibleworkspacenam workspac clone copi across workspac instead test specifi princip correspond valid user within workspac identifi given workspacenam
node remov fail accessdeniedexcept hierarchi node access control follow hierarchi illustr setup problem root read permiss everyon subfold permiss user subsubfold permiss user user right node subfold downward tri remov node subsubfold user clear enough permiss remov node soon call session.sav accessdeniedexcept thrown lot debug found possibl caus fault led function aclprovider.aclpermissions.buildresult line refer base sourc code subvers repositori found http //svn.apache.org/viewvc/jackrabbit/tags/1.6.0/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/security/authorization/acl/aclprovider.java view=markup line 458 jackrabbit collect access control entri node want remov parent put variabl entri exampl variabl contain three entri 1. permiss user 2. permiss user 3. read permiss everyon line 460 466 collect access control entri node want remov put localac variabl contain one entri permiss user want abl remov subsubfold user need permiss parent node permiss parent node subsubfold permiss user read permiss everyon 's access check fail line 488 jackrabbit check permiss entri local look localac permiss local els unfortun recogn permiss node subfold local thus permiss parent node subsubfold read permiss everyon remov node sourc error equal check access control entri permiss node subfold consid equal one subsubfold explicit assign permiss remov node permiss user node subfold work fine recogn parent permiss
unabl creat repositori use jackrabbit-webapp directori call jackrabbit alreadi exist mount jackrabbit-webapp.war jetti instal startup follow except error repositorystartupservlet either creat thejackrabbit/bootstrap.properti file error repositorystartupservlet use /config/index.jsp easi configur error repositorystartupservlet repositorystartupservlet initi fail javax.servlet.servletexcept repositori startup configur valid access http //localhost:8080/ forward page http //localhost:8080/bootstrap/missing.jsp creat repositori click creat content repositori button fail complain jackrabbit directori alreadi exist inde find jackrabbit directori jetty_hom start jetti workaround delet jackrabbit directori creat repositori click previous button therefor access newli creat repositori
add new datasourc element repositori dtd connect pool featur jcr-1456 introduc new datasourc configur element jackrabbit ad repositori config dtd
make jackrabbit repositori dtd easier extend would nice downstream project could easili extend jackrabbit repositori configur format ad new configur element repositori root current done custom copi entir dtd would better relev part dtd could simpli includ via extern paramet entiti downstream dtd
avoid maven 3 warn jackrabbit trunk build fine maven 3 alpha releas warn deprec pom variabl unspecifi report plugin version might want fix
session.sav session.refresh boolean reli access root node follow-up issu jcr-2418 edit session allow write subtre n't allow access root node abl save revert chang made transient space within subtre reason sessionimpl.sav sessionimpl.refresh boolean access root node order execut call sinc 's regular call read permiss check although user made attempt *look* root workaround would call item.sav modifi tree obvious visibl user unfortun method deprec jcr 2.0 therefor impress fix method mention
uuiddocid.getdocumentnumb may return illeg valu happen node given uuid present index method return -1 illeg document number must 0 method must return empti array id invalid document docid.getdocumentnumb
cluster broken due duplic cachingpersistencemanag interfac two interfac cachingpersistencemanag packag org.apache.jackrabbit.core.persistence.bundl org.apache.jackrabbit.core.persistence.pool persist manag implement ..bundl interfac n't receiv onexternalupd event requir cluster work move interfac packag org.apache.jackrabbit.core.persist remov second implement chang affect backward compat anyway mani break chang past nodeid uuid exampl
cooperativefilelock improv cooperativefilelock n't test case also way improv avoid except lock file modifi futur stop thread immedi releas lock detect lock repositori bit earlier
escap colon statement jcr contain colon special charact lucen queri parser allow prefix queri term option field name jcr specifi featur thus colon fulltext statement treat regular charact
npe copi node workspace.copi get nullpointerexcept use workspace.copi java.lang.nullpointerexcept org.apache.jackrabbit.core.batcheditemoperations.copynodest batcheditemoperations.java:1834 org.apache.jackrabbit.core.batcheditemoperations.copynodest batcheditemoperations.java:1806 org.apache.jackrabbit.core.batcheditemoperations.copynodest batcheditemoperations.java:1806 org.apache.jackrabbit.core.batcheditemoperations.copi batcheditemoperations.java:423 org.apache.jackrabbit.core.workspaceimpl.internalcopi workspaceimpl.java:444 org.apache.jackrabbit.core.workspaceimpl.copi workspaceimpl.java:666 xxx.myclass.mymeth myclass.java seem happen time error occur sinc use jackrabbit 1.6.0 get error previous version seem get error tri copi node creat jackrabbit 1.4 copi jackrabbit 1.6
occasion indexingqueuetest failur usual follow assert fail junit.framework.assertionfailederror junit.framework.assert.fail assert.java:47 junit.framework.assert.asserttru assert.java:20 junit.framework.assert.asserttru assert.java:27 org.apache.jackrabbit.core.query.lucene.indexingqueuetest.testqueu indexingqueuetest.java:77
patch fix over specif cast core sever place core cast made over concret class interfac need tie algorithm specif implement unnecessarili patch fix
webdav 's propertydefinitionimpl 's toxml n't seem attach queri oper element return dom propertydefinitionimpl.toxml jcr 2.0 extens element qopelem document.createel available_query_operators_el string qop getavailablequeryoper int 0 qops.length i++ element opelem document.createel available_query_operator_el domutil.settext opelem qop qopelem.appendchild opelem return elem n't attach qopelem return dom
upgrad easymock 2.5.2 current depend easymock easymock:1.1 jackrabbit-par pom 's depend manag section depend actual use plan start use soon core upgrad 2.5.2 would give us generic support lot improv bug fix note upgrad chang groupid depend
util method jcrutil 'd like add least follow util method jcrutil log util method simplifi log messag debug print node name type properti name valu string tostr item item make sure node exist return identifi child node child alreadi exist ad use default node type parent node setnod node parent string name ensur isnodetyp type true return node use addnod name type setprimarytyp type need node setnod node parent string name string type ad set see nt folder node add new nt folder node given name node addfold node parent string name ensur nt folder node given name exist node setfold node parent string name ad set nt file node add new nt file/nt resourc structur mime type contain charset paramet jcr encod properti also set node addfil node parent string name string mime inputstream data node addfil node parent string name string mime calendar date inputstream data ensur nt file/nt resourc structur exist given data note type potenti exist jcr content node modifi node setfil node parent string name string mime inputstream data node setfil node parent string name string mime calendar date inputstream data
jcr2spirepositoryfactori make class load robust current jcr2spirepositoryfactori load repositoryservicefactori context class loader osgi environ fail classnotfoundexcept suggest fall back class loader class jcr2spirepositoryfactori case
abstractsess synchron session instanc local namespac map method abstractsess synchron protect concurr access 's troublesom sinc observ deliveri need abl get map even session synchron someth els
except execut sql2/jqom non-admin session constraint correct handl session access node caus javax.jcr.itemnotfoundexcept 21232f29-7a57-35a7-8389-4a0e4a801fc3 org.apache.jackrabbit.core.sessionimpl.getnodebyid sessionimpl.java:545 org.apache.jackrabbit.core.query.lucene.constraint.nodelocalnameoperand.getvalu nodelocalnameoperand.java:44 org.apache.jackrabbit.core.query.lucene.constraint.comparisonconstraint.evalu comparisonconstraint.java:80
repositoryconfig creat jcr2spirepositoryfactori alway return repositoryservic instanc jcr2spirepositoryfactori use default implement repositoryconfig none pass user current default implement return new repositoryservic instanc call getrepositoryservic correct sinc consum repositoryconfig instanc expect repositoryservic instanc everi call
introduc sessioninfo paramet abstractrepositoryservice.createrootnodedefinit spi implement might requir access state current session order fulfil contract abstractrepositoryservice.createrootnodedefinit therefor suggest add sessioninfo paramet method
slow perform due jcr-2138 prevent persist faulti back-refer revis 782898 follow code introduc updaterefer iter local.addedst i.hasnext hasitemst state.getid tri fetch inexist node persist manag depend persist manag implement slow hope way avoid call speed
implement repositoryfactori jcr2dav 's current bit cumbersom set spi2dav instanc two level factori repositoryfactori repositoryservicefactori involv process would easier spi2dav implement repositoryfactori direct downstream user would need provid server uri paramet instead specifi also repositoryservicefactori classnam spi2dav would need depend also jcr2spi chang would actual simplifi downstream project would n't need depend also jcr2spi get jcr dav connect
defaultprincipalprovid collectgroupmembership put wrong princip instanc cach defaultprincipalprovid collectgroupmembership add pass princip instanc cach may caus inconsist cach contain princip obtain provid
break spi2dav depend jcr-server current spi2dav compon depend jcr-server compon troublesom due extra transit depend strict speak necessari architectur point view depend exist most share number jcr-specif webdav constant 'd like push constant jackrabbit-webdav essenti share string jackrabbit-webdav alreadi contain number constant use jcr extens addit constant valu code follow class share jcr-server spi2dav jcrvaluetyp namespacesproperti nodetypesproperti searchresultproperti subscriptionimpl valuesproperti share code jcrvaluetyp subscriptionimpl most map constant valu map could fair easili move jackrabbit-webdav properti class trickier look like would possibl split code separ server- client-sid class jcr-server spi2dav
spi2dav jsr 283 nodetyp manag
automat stage non-maven releas artefact current jackrabbit releas process includ follow manual step addit standard maven releas plugin invoc script version=x.y.z releas version number prepar releas directori mkdir target/ version copi main releas artifact creat releas perform stage cp target/checkout/release-notes.txt target/ version cp target/checkout/target/jackrabbit- version-src.zip* target/ version cp target/checkout/jackrabbit-webapp/target/jackrabbit-webapp- version.war* target/ version cp target/checkout/jackrabbit-jca/target/jackrabbit-jca- version.rar* target/ version cp target/checkout/jackrabbit-standalone/target/jackrabbit-standalone- version.jar* target/ version add md5 sha1 checksum binari target/ version/*.zip target/ version/*ar openssl md5 binari binary.md5 openssl sha1 binari binary.sha done upload releas directori people.apache.org scp -r target/ version people.apache.org public_html/jackrabbit/ version /script 'd like autom step
repositori corrupt concurr chang session concurr write oper use session repositori get corrupt mean itemnotfoundexcept thrown tri remov node concurr write oper support howev believ persist state repositori get corrupt one way solv problem synchron session intern
command line access remot repositori year ago edgar poce implement nice command line jcr access tool call jcr-command n't realli use much code current park sandbox/inact 'd like resurrect codebas integr jackrabbit-standalon implement command line access remot repositori idea would easy-to-us tool simpl test administr task
allow basic regexp namespac prefix index-rul current regular express limit local name make fallback declar match everyth els difficult write i.e write line per namespac node type registri bloat index-rul unnecessarili current properti isregexp= true /properti match properti empti namespac uri propos allow basic regular express prefix match pattern dot star follow would match properti includ namespac properti isregexp= true /properti
improv error report jcrutils.getrepositori servic provid mechan null return valu use repositoryfactori api make bit difficult troubleshoot case repositori access would help jcrutils.getrepositori method report accur failur inform possibl case request repositori found
renam genericrepositoryfactori jndirepositoryfactori genericrepositoryfactori class introduc jcr-2360 sinc refactor function distribut among implementation-specif repositoryfactori class genericrepositoryfactori contain support look repositori jndi would better renam class jndirepositoryfactori troublesom part renam genericrepositoryfactory.uri constant document wiki part canon code snippet access remot repositori base repositori uri latest recommend use jcrutils.getrepositori string uri method constant longer need client code backward compat earlier jackrabbit 2.0 beta may good keep deprec constant least next beta releas
item retriev ineffici refresh repositoryservic getiteminfo return suffici larg batch path second invoc getitem signific slower first string path item session.getitem path i.refresh fals refresh true session.getitem path test setup repositoryservic getiteminfo return 3946 element first invoc take approx 800ms second 3000ms
illegalstateexcept session save follow code throw illegalstateexcept node node session session node.getsess node.setproperti tag test1 node.setproperti tag test2 node.remov session.sav
minor spi2dav exceptionconvert improv would nice exceptionconvert class spi2dav return unsupportedrepositoryoperationexcept instead undeclar unsupportedoperationexcept http 501 respons besid exceptionconverter.gener method clean alway return generat except instead case return other throw final 's unus code chanc java 5 cleanup ll attach patch commit unless anyon object
reduc usag string.intern string.intern use intern namespac uri nameimpl trivial case intern method n't call constant use e.g 'm think empti namespac uri call string.intern way expens check length uri string zero
background thread use jackrabbit classload thread context classload repositoryimpl use thread executor default thread factori background thread thread use jackrabbit class loader classload use load jackrabbit thread context classload current classload use caus new thread great exampl combin sling follow happen jsp sling initi save jackrabbit caus index start done background thread new thread taken pool thread context class loader set thread context classload jsp/sling sling undeploy jackrabbit still hold class loader creat hugh memori leak
jcr2spi versionmanag checkout nodest forward checkout nodest nodeid versionmanag checkout nodest nodest call activ support thus call correspond spi method instead checkout nodest nodeid activityid
collect paramet compactnodetypedefwrit write covari collect qnodetypedefinit paramet compactnodetypedefwrit write method type collect extend qnodetypedefinit
index configur refresh node type registr index configur intern cach speed node type match cach updat new node type registr newli regist node type proper resolv index-rul check see also test case attach patch
includ jackrabbit-jcr-rmi jackrabbit-jcr-servlet main trunk jackrabbit 2.0 includ 2.0 version rmi compon relat jcr-servlet updat
updat licens notic file match updat depend ve made quit depend updat sinc jackrabbit 1.6 need updat licens metadata accord
spi2dav access move referencebl node result pathnotfoundexcept follow code fragment caus pathnotfoundexcept exist path seem way recov session incorrect state assum exist nt file node path /apps/foo/bar.txt node n1 session.getnod /apps/foo/bar.txt node n2 n1.getnod jcr content n2.setproperti jcr data new java.io.bytearrayinputstream string blahblah .getbyt n2.save workspac ws0 session.getworkspac ws0.move /apps/foo /apps/foo1 node n3 session.getnod /apps/foo1/bar.txt node n4 n3.getnod jcr content n4.refresh fals node n5 n3.getnod jcr content pathnotfoundexcept pleas note preceed node.refresh call seem caus inconsist problem n't occur omit call
clone tree contain shareabl node anoth workspac throw itemexistsexcept 's problem tri clone tree anoth workspac tree contain shareabl node let ws1 one workspac contain one node node two sub-nod b c. b c share shareabl sub-nod d b c d d let ws2 second workspac call ws2.clone ws1 /a /a fals throw itemexistsexcept copynodest line 1628 done copynodest check nodeid alreadi present workspac case copi second instanc shareabl node ca n't find specif someth case would logic add share node come across situat least clone probabl copi case n't know would expect clone_remove_exist case might want remov node 's shareabl also add share fix issu handl case node shareabl copi clone case copynodest ll find attach correspond patch think solut ok
test failur run mvn cobertura check look like bytecod instrument done cobertura interfer rather complex xpathtokenmanag class produc javacc easiest workaround seem simpli exclud xpathtokenmanag instrument cobertura
log trace wrapper upgrad jcr api 2.0 jcr log wrapper jcrlog current support jcr 1.0 api upgrad 2.0 also depend jackrabbit-cor remov generic use
improv log lazyitemiter prefetchnext lazyitemiter prefetchnext fail item spell name item respect log messag
reduc number compil warn ad overrid generic appropri add overrid generic possibl reduc number warn issu compil
npe repositoryservic getiteminfo throw itemnotfoundexcept repositoryservic getiteminfo throw itemnotfoundexcept hierarchyentryimpl internalremov case throw npe caus miss null check parent node
add method getid interfac iteminfo iteminfo base nodeinfo propertyinfo declar method getid return type nodeid propertyid respect java 1.5. possibl overrid method covari return type thus propos introduc method getid iteminfo return type itemid common base type nodeid propertyid
promot iteminfo builder class getitemstest top level class org.apache.jackrabbit.jcr2spi.getitem test contain builder iteminfo nodeinfo instanc general promot spi-common
workspaceitemstatefactori createitemst throw classcastexcept first item iteminfo iter return repositoryservic propertyinfo instead nodeinfo classcastexcept thrown rather itemnotfoundexcept
add abil disabl inherit ancestor acl current acl implement walk tree item access root collect acl entri ancestor system easi way restrict access subnod except ad deni entri negat entri inherit parent node 'd like request way turn behavior either node level global level place recurs happen org.apache.jackrabbit.core.security.authorization.acl.aclprovid entries.collectentri nodeimpl node insid method could perhap check global paramet exist properti acl polici node determin whether recurs tree
jackrabbit wrong think nodetyp chang nodetyp re-registr tri node type re-registr jackrabbit 2.0 wrong detect nodetyp chang non-trivi chang exampl nodetyp definit nen profil mix referenc mixin order nen dn string nen cn string string multipl except nodetyp re-registr javax.jcr.repositoryexcept follow nodetyp chang contain non-trivi changes.up trivial chang support see javadoc org.apache.jackrabbit.core.nodetype.nodetypedefdiff org.apache.jackrabbit.core.nodetype.nodetypedefdiff nodetypename= http //netenviron.com/nen/1.0 profil mixinflagdiff=non supertypesdiff=non propertydifferences= org.apache.jackrabbit.core.nodetype.nodetypedefdiff propdefdiff itemname= http //netenviron.com/nen/1.0 dn type=trivi operation=modifi org.apache.jackrabbit.core.nodetype.nodetypedefdiff propdefdiff itemname= http //netenviron.com/nen/1.0 cn type=trivi operation=modifi org.apache.jackrabbit.core.nodetype.nodetypedefdiff propdefdiff itemname= type=trivi operation=modifi childnodedifferences= org.apache.jackrabbit.core.nodetype.nodetypedefdiff childnodedefdiff itemname= type=major operation=remov org.apache.jackrabbit.core.nodetype.nodetypedefdiff childnodedefdiff itemname= type=trivi operation=ad org.apache.jackrabbit.core.nodetype.nodetyperegistry.reregisternodetyp nodetyperegistry.java:442 org.apache.jackrabbit.core.nodetype.nodetyperegistry.reregisternodetyp nodetyperegistry.java:363 org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:589 org.apache.jackrabbit.commons.cnd.cndimporter.registernodetyp cndimporter.java:118 com.netenviron.content.manager.sessionmanager.checkrepositoryschema sessionmanager.java:355 com.netenviron.content.manager.sessionmanager.afterpropertiesset sessionmanager.java:199 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.invokeinitmethod abstractautowirecapablebeanfactory.java:1288 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.initializebean abstractautowirecapablebeanfactory.java:1257 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.docreatebean abstractautowirecapablebeanfactory.java:438 org.springframework.beans.factory.support.abstractautowirecapablebeanfactori 1.run abstractautowirecapablebeanfactory.java:383 java.security.accesscontroller.doprivileg nativ method org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.createbean abstractautowirecapablebeanfactory.java:353 org.springframework.beans.factory.support.abstractbeanfactori 1.getobject abstractbeanfactory.java:245 org.springframework.beans.factory.support.defaultsingletonbeanregistry.getsingleton defaultsingletonbeanregistry.java:169 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:242 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:164 org.springframework.beans.factory.support.beandefinitionvalueresolver.resolverefer beandefinitionvalueresolver.java:269 org.springframework.beans.factory.support.beandefinitionvalueresolver.resolvevalueifnecessari beandefinitionvalueresolver.java:104 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.applypropertyvalu abstractautowirecapablebeanfactory.java:1172 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.populatebean abstractautowirecapablebeanfactory.java:940 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.docreatebean abstractautowirecapablebeanfactory.java:437 org.springframework.beans.factory.support.abstractautowirecapablebeanfactori 1.run abstractautowirecapablebeanfactory.java:383 java.security.accesscontroller.doprivileg nativ method org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.createbean abstractautowirecapablebeanfactory.java:353 org.springframework.beans.factory.support.abstractbeanfactori 1.getobject abstractbeanfactory.java:245 org.springframework.beans.factory.support.defaultsingletonbeanregistry.getsingleton defaultsingletonbeanregistry.java:169 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:242 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:164 org.springframework.beans.factory.support.beandefinitionvalueresolver.resolverefer beandefinitionvalueresolver.java:269 org.springframework.beans.factory.support.beandefinitionvalueresolver.resolvevalueifnecessari beandefinitionvalueresolver.java:104 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.applypropertyvalu abstractautowirecapablebeanfactory.java:1172 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.populatebean abstractautowirecapablebeanfactory.java:940 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.docreatebean abstractautowirecapablebeanfactory.java:437 org.springframework.beans.factory.support.abstractautowirecapablebeanfactori 1.run abstractautowirecapablebeanfactory.java:383 java.security.accesscontroller.doprivileg nativ method org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.createbean abstractautowirecapablebeanfactory.java:353 org.springframework.beans.factory.support.abstractbeanfactori 1.getobject abstractbeanfactory.java:245 org.springframework.beans.factory.support.defaultsingletonbeanregistry.getsingleton defaultsingletonbeanregistry.java:169 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:242 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:164 org.springframework.beans.factory.support.abstractbeanfactory.gettypeforfactorybean abstractbeanfactory.java:1223 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.gettypeforfactorybean abstractautowirecapablebeanfactory.java:582 org.springframework.beans.factory.support.abstractbeanfactory.istypematch abstractbeanfactory.java:438 org.springframework.beans.factory.support.defaultlistablebeanfactory.getbeannamesfortyp defaultlistablebeanfactory.java:214 org.springframework.beans.factory.support.defaultlistablebeanfactory.getbeannamesfortyp defaultlistablebeanfactory.java:189 org.springframework.beans.factory.beanfactoryutils.beannamesfortypeincludingancestor beanfactoryutils.java:143 org.springframework.beans.factory.support.defaultlistablebeanfactory.findautowirecandid defaultlistablebeanfactory.java:614 org.springframework.beans.factory.support.defaultlistablebeanfactory.resolvedepend defaultlistablebeanfactory.java:572 org.springframework.beans.factory.annotation.autowiredannotationbeanpostprocessor autowiredmethodelement.inject autowiredannotationbeanpostprocessor.java:496 org.springframework.beans.factory.annotation.injectionmetadata.injectmethod injectionmetadata.java:87 org.springframework.beans.factory.annotation.autowiredannotationbeanpostprocessor.postprocesspropertyvalu autowiredannotationbeanpostprocessor.java:250 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.populatebean abstractautowirecapablebeanfactory.java:928 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.docreatebean abstractautowirecapablebeanfactory.java:437 org.springframework.beans.factory.support.abstractautowirecapablebeanfactori 1.run abstractautowirecapablebeanfactory.java:383 java.security.accesscontroller.doprivileg nativ method org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.createbean abstractautowirecapablebeanfactory.java:353 org.springframework.beans.factory.support.abstractbeanfactori 1.getobject abstractbeanfactory.java:245 org.springframework.beans.factory.support.defaultsingletonbeanregistry.getsingleton defaultsingletonbeanregistry.java:169 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:242 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:164 org.springframework.beans.factory.support.beandefinitionvalueresolver.resolverefer beandefinitionvalueresolver.java:269 org.springframework.beans.factory.support.beandefinitionvalueresolver.resolvevalueifnecessari beandefinitionvalueresolver.java:104 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.applypropertyvalu abstractautowirecapablebeanfactory.java:1172 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.populatebean abstractautowirecapablebeanfactory.java:940 org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.docreatebean abstractautowirecapablebeanfactory.java:437 org.springframework.beans.factory.support.abstractautowirecapablebeanfactori 1.run abstractautowirecapablebeanfactory.java:383 java.security.accesscontroller.doprivileg nativ method org.springframework.beans.factory.support.abstractautowirecapablebeanfactory.createbean abstractautowirecapablebeanfactory.java:353 org.springframework.beans.factory.support.abstractbeanfactori 1.getobject abstractbeanfactory.java:245 org.springframework.beans.factory.support.defaultsingletonbeanregistry.getsingleton defaultsingletonbeanregistry.java:169 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:242 org.springframework.beans.factory.support.abstractbeanfactory.getbean abstractbeanfactory.java:164 org.springframework.beans.factory.support.defaultlistablebeanfactory.getbeansoftyp defaultlistablebeanfactory.java:299 org.springframework.context.support.abstractapplicationcontext.getbeansoftyp abstractapplicationcontext.java:955 org.springframework.context.support.abstractapplicationcontext.registerlisten abstractapplicationcontext.java:712 org.springframework.context.support.abstractapplicationcontext.refresh abstractapplicationcontext.java:366 org.springframework.web.context.contextloader.createwebapplicationcontext contextloader.java:261 org.springframework.web.context.contextloader.initwebapplicationcontext contextloader.java:199 org.springframework.web.context.contextloaderlistener.contextiniti contextloaderlistener.java:45 org.apache.catalina.core.standardcontext.listenerstart standardcontext.java:3972 org.apache.catalina.core.standardcontext.start standardcontext.java:4467 org.apache.catalina.core.containerbase.addchildintern containerbase.java:791 org.apache.catalina.core.containerbase.addchild containerbase.java:771 org.apache.catalina.core.standardhost.addchild standardhost.java:526 org.apache.catalina.startup.hostconfig.deploywar hostconfig.java:905 org.apache.catalina.startup.hostconfig.deploywar hostconfig.java:740 org.apache.catalina.startup.hostconfig.deployapp hostconfig.java:500 org.apache.catalina.startup.hostconfig.check hostconfig.java:1345 org.apache.catalina.startup.hostconfig.lifecycleev hostconfig.java:303 org.apache.catalina.util.lifecyclesupport.firelifecycleev lifecyclesupport.java:119 org.apache.catalina.core.containerbase.backgroundprocess containerbase.java:1337 org.apache.catalina.core.containerbas containerbackgroundprocessor.processchildren containerbase.java:1601 org.apache.catalina.core.containerbas containerbackgroundprocessor.processchildren containerbase.java:1610 org.apache.catalina.core.containerbas containerbackgroundprocessor.run containerbase.java:1590 java.lang.thread.run thread.java:637
unit test persist manag current test persist manag indirect via jcr-level test case downsid approach test one persist manag implement time need separ build profil switch one implement anoth ensur better coverag consist behaviour across persist manag implement simpl unit test work direct persistencemanag interfac
exclud test instead skip jcr2spi test run spi2jcr modul default configur skip jcr2spi built manual run jcr2spi test like mvn -dtest=mytest -dmaven.test.skip=fals test work howev pom configur seem take preced fix propos exclud test instead skip make possibl manual execut test like mvn -dtest=mytest test
intern error workspaceitemstatefactori createdeepnodest workspaceitemstatefactori createdeepnodest receiv current entri argument anypar throw repositoryexcept messag intern error get deep itemst incorrect probabl leftov jcr-1797 sinc entri valid argument anypar
implement cach mechan iteminfo batch current iteminfo return repositoryservic getiteminfo place hierarchi right away big batch size prohibit expens overhead great quick outweigh overhead network round trip moreov spi implement usual choos batch way determin back persist store requir consum applic jcr side mani item batch might never actual need suggest implement cach iteminfo batch conceptu cach would live insid jcr2spi right spi api actual implement would provid spi implement approach allow fine tune cache/batch size given persist store network environ would also better separ differ concern purpos exist item cach optim requir consum jcr api the applic new iteminfo cach optim specif network environ back persist store number follow
add simpl benchmark tool jcr2spi read perform
spi2davex nodeinfoimpl use hashset instead arraylist childinfo subsequ contain call prohibit expens sinc return equal call exist child info
upgrad tika 0.6 pdfbox 1.0.0 tika version 0.6 use poi 3.6 's notabl smaller -10mb previous version also number improv tika 0.6 sinc 0.5 releas upgrad also forc pdfbox version 1.0.0 0.8.0-incub version tika 0.6 use pdfbox 1.0.0 nice perform gain around 30 faster text extract along improv
inconsist session persist state referentialintegrityexcept referentialintegrityexcept occur session seem subsequ action session may result inconsist session state even inconsist persist state latter even make jackrabbit fail bootstrap index persist state typic rootcaus caus org.apache.jackrabbit.core.state.nosuchitemstateexcept ddb9d3ea-59c1-4eb4-a83e-332f646d4f40 org.apache.jackrabbit.core.state.shareditemstatemanager.getitemst shareditemstatemanager.java:270 org.apache.jackrabbit.core.query.lucene.multiindex.createindex multiindex.java:1082 org.apache.jackrabbit.core.query.lucene.multiindex.createindex multiindex.java:1088 org.apache.jackrabbit.core.query.lucene.multiindex.createinitialindex multiindex.java:395 bootstrap failur java.io.ioexcept error index workspac org.apache.jackrabbit.core.query.lucene.multiindex.createinitialindex multiindex.java:402 org.apache.jackrabbit.core.query.lucene.searchindex.doinit searchindex.java:465 org.apache.jackrabbit.core.query.abstractqueryhandler.init abstractqueryhandler.java:59 org.apache.jackrabbit.core.searchmanager.initializequeryhandl searchmanager.java:553
allow indexingconfigur load classpath indexingconfigur attribut searchindex configur http //wiki.apache.org/jackrabbit/indexingconfigur actual requir absolut filesystem path would nice searchindex would also accept file avail classpath although use variabl like wsp.home similar mani scenario classpath resourc would help exampl creat new workspac directori structur automat creat jackrabbit n't need alreadi avail index configur file attach simpl patch searchindex tri load file classpath found sinc prioriti given old behavior file classpath 's fulli backward compat diff generat trunk would nice patch also 2.0 branch
high memori usag node multi-valu string properti multi-valu string properti token per valu may consum quit memori lot small valu properti memori footprint 2k per valu valu token separ token instanc token use stream buffer 2k byte instead valu concaten whitespac separ token one go
stop text extract maxfieldlength limit reach index larg document text extract often take quit use lot memori even first maxfieldlength default 10000 token use 'd like add maxextractlength paramet use set maximum number charact extract binari default valu paramet could someth like ten time maxfieldlength set
jcrvaluetyp typefromcontenttyp throw illegalargumentexcept type weak-ref uri
jsonwrit miss handl new jcr 2.0 properti type json writer send extra type inform case determin unambigu json string need adjust new properti type ad jcr 2.0
reduc number compil warn ad overrid generic appropri jcr-2482 webdav librari modul use
abstractresourc use jcr createdbi expos dav creator-displaynam jcr 2.0 deltav properti dav creator-displaynam could extract jcr createdbi properti comment abstract resourc creator-displaynam comment valu avail jcr therefor outdat subsequ line
valu getbinari getstream return intern represent type path name found path-rel spi2dav test fail pass time jackrabbit 2.0 batchtest testsetpathvalu quick look seem reason intern path name valu represent expos call valu getbinari valu getstream correspond shortcut properti understand specif method alway return standard jcr path name represent expos valu getstr properti getstr use previous version
omit default batchreadconfig spi2davexrepositoryservicefactori 'd like remov default batchread configur creat spi2davexrepositoryservicefactori ll 79 instead pass null servic configur n't defin batch-read-config test execut e.g given default n't realli optim session short life time read limit amount item general alway read depth 4 n't add benefit case run level1 jcr test jcr2dav far saw n't defin extra batchread-config took 1.5 2.5 13 minut null-config depth2 depth4 strong reason keep default factori least chang test michael think
spi2dav drop q*definitionimpl implement use spi-common q*definitionbuild spi2dav provid separ implement q*definit interfac apart construct duplic code present spi-common instead q*definitionbuild helper could use generat definit instanc
iso8601 use default decimalformat constructor use local specif digit iso8601.java use default decimalformat constructor use local specif decimalformatsymbol runn jackrabbit indian local format produc date use devanagari numer digit save version utf-8 encod much longer usual transport pars decimalformat work timezone.gettimezon gmt+09:30 indian numer digit fail null return iso8601 later traceback occur 2010-02-22 15:14:04,059 http-0.0.0.0-8080-16 error org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanag fail write bundl ff629488-ebb9-4300-a63b-341553cc1140 java.lang.illegalargumentexcept argument null org.apache.jackrabbit.util.iso8601.format iso8601.java:217 org.apache.jackrabbit.core.value.internalvalue.tostr internalvalue.java:531 org.apache.jackrabbit.core.persistence.bundle.util.bundlebinding.writest bundlebinding.java:689 org.apache.jackrabbit.core.persistence.bundle.util.bundlebinding.writebundl bundlebinding.java:273 org.apache.jackrabbit.core.persistence.bundle.bundlefspersistencemanager.storebundl bundlefspersistencemanager.java:664 org.apache.jackrabbit.core.persistence.bundle.abstractbundlepersistencemanager.putbundl abstractbundlepersistencemanager.java:703 org.apache.jackrabbit.core.persistence.bundle.abstractbundlepersistencemanager.stor abstractbundlepersistencemanager.java:643 iso8601 probabl meant char ascii constructor fix local appropri n't encount timezon issu either privat static final decimalformat xx_format new decimalformat 00 new decimalformatsymbol locale.us privat static final decimalformat xxx_format new decimalformat 000 new decimalformatsymbol locale.us privat static final decimalformat xxxx_format new decimalformat 0000 new decimalformatsymbol locale.us
userimport use user.changepassword userimport list limit password valu expect hash alreadi write valu retriev xml-import instead could make use user changepassword implement present jr creat pw-hash password found plain text
make itemid stabl itemid return spi2dav current stabl sens sometim uuid base sometim node referenc properti receiv fulli path base id other receiv id base uuid parent node effici cach introduc jcr-2498 depend stabl id therefor suggest improv spi2dav properti id alway uuid base parent 's node uuid
spi2davex use srcworkspacenam build srcpath clone copi spi2davex provid simpl workaround miss clone cross-workspace-copi spi2dav howev src workspac name n't use build src path
workspaceimport throw except sessio.getworkspac .getimportcontenthandl throw java.lang.unsupportedoperationexcept workspace-import protect node yet implement suggest issu warn instead throw
unabl workspac import xml tika detect xml application/xml thus break org.apache.jackrabbit.server.io.xmlhandl check text/xml
staleitemstateexcept distribut transact use jackrabbit jca compon within weblog 10.3 applic server distribut transact oracl databas jackrabbit jca updat node properti multipl time transact result xaexcept root caus seem staleitemstateexcept see stack-trac googl reveal similar bug fix jackrabbit 1.5.3 look code show propos fix jcr-1554 seem appli jackrabbit 2.0 tag trunk tri appli propos fix trunk code base seem help stack-trac javax.ejb.transactionrolledbacklocalexcept error commit transact nest except javax.transaction.xa.xaexcept weblogic.ejb.container.internal.ejbruntimeutils.throwtransactionrolledbackloc ejbruntimeutils.java:238 weblogic.ejb.container.internal.ejbruntimeutils.throwejbexcept ejbruntimeutils.java:133 weblogic.ejb.container.internal.baselocalobject.postinvoke1 baselocalobject.java:623 weblogic.ejb.container.internal.baselocalobject.postinvoketxretri baselocalobject.java:424 ch.ejpd.sireneit.facade.ejb.ablage.dokumentfacadebean_7xdnsq_dokumentfacadeimpl.updatestructureddoku dokumentfacadebean_7xdnsq_dokumentfacadeimpl.java:340 ch.ejpd.sireneit.access.rest.ablage.dokumentresource.upd dokumentresource.java:453 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 com.sun.jersey.server.impl.model.method.dispatch.abstractresourcemethoddispatchprovid responseoutinvoker._dispatch abstractresourcemethoddispatchprovider.java:175 com.sun.jersey.server.impl.model.method.dispatch.resourcejavamethoddispatcher.dispatch resourcejavamethoddispatcher.java:67 com.sun.jersey.server.impl.uri.rules.httpmethodrule.accept httpmethodrule.java:208 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.resourceclassrule.accept resourceclassrule.java:75 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.rootresourceclassesrule.accept rootresourceclassesrule.java:67 com.sun.jersey.server.impl.application.webapplicationimpl._handlerequest webapplicationimpl.java:724 com.sun.jersey.server.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:689 com.sun.jersey.server.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:680 com.sun.jersey.spi.container.servlet.webcomponent.servic webcomponent.java:324 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:425 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:604 javax.servlet.http.httpservlet.servic httpservlet.java:820 weblogic.servlet.internal.stubsecurityhelp servletserviceaction.run stubsecurityhelper.java:227 weblogic.servlet.internal.stubsecurityhelper.invokeservlet stubsecurityhelper.java:125 weblogic.servlet.internal.servletstubimpl.execut servletstubimpl.java:292 weblogic.servlet.internal.tailfilter.dofilt tailfilter.java:26 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:42 ch.ejpd.lib.webclient.jfa.jfatokenservletfilter.dofilt jfatokenservletfilter.java:108 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:42 weblogic.servlet.internal.webappservletcontext servletinvocationaction.run webappservletcontext.java:3496 weblogic.security.acl.internal.authenticatedsubject.doa authenticatedsubject.java:321 weblogic.security.service.securitymanager.runa unknown sourc weblogic.servlet.internal.webappservletcontext.securedexecut webappservletcontext.java:2180 weblogic.servlet.internal.webappservletcontext.execut webappservletcontext.java:2086 weblogic.servlet.internal.servletrequestimpl.run servletrequestimpl.java:1406 weblogic.work.executethread.execut executethread.java:201 weblogic.work.executethread.run executethread.java:173 javax.transaction.xa.xaexcept org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:171 org.apache.jackrabbit.core.xasessionimpl.commit xasessionimpl.java:346 org.apache.jackrabbit.jca.transactionboundxaresource.commit transactionboundxaresource.java:39 weblogic.connector.security.layer.adapterlayer.commit adapterlayer.java:252 weblogic.connector.transaction.outbound.xawrapper.commit xawrapper.java:113 weblogic.transaction.internal.xaserverresourceinfo.commit xaserverresourceinfo.java:1334 weblogic.transaction.internal.xaserverresourceinfo.commit xaserverresourceinfo.java:578 weblogic.transaction.internal.serverscinfo.startcommit serverscinfo.java:547 weblogic.transaction.internal.servertransactionimpl.localcommit servertransactionimpl.java:2006 weblogic.transaction.internal.servertransactionimpl.globalretrycommit servertransactionimpl.java:2723 weblogic.transaction.internal.servertransactionimpl.globalcommit servertransactionimpl.java:2645 weblogic.transaction.internal.servertransactionimpl.internalcommit servertransactionimpl.java:282 weblogic.transaction.internal.servertransactionimpl.commit servertransactionimpl.java:230 weblogic.ejb.container.internal.baselocalobject.postinvoke1 baselocalobject.java:591 weblogic.ejb.container.internal.baselocalobject.postinvoketxretri baselocalobject.java:424 ch.ejpd.sireneit.facade.ejb.ablage.dokumentfacadebean_7xdnsq_dokumentfacadeimpl.updatestructureddoku dokumentfacadebean_7xdnsq_dokumentfacadeimpl.java:340 ch.ejpd.sireneit.access.rest.ablage.dokumentresource.upd dokumentresource.java:453 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 com.sun.jersey.server.impl.model.method.dispatch.abstractresourcemethoddispatchprovid responseoutinvoker._dispatch abstractresourcemethoddispatchprovider.java:175 com.sun.jersey.server.impl.model.method.dispatch.resourcejavamethoddispatcher.dispatch resourcejavamethoddispatcher.java:67 com.sun.jersey.server.impl.uri.rules.httpmethodrule.accept httpmethodrule.java:208 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.resourceclassrule.accept resourceclassrule.java:75 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.rootresourceclassesrule.accept rootresourceclassesrule.java:67 com.sun.jersey.server.impl.application.webapplicationimpl._handlerequest webapplicationimpl.java:724 com.sun.jersey.server.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:689 com.sun.jersey.server.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:680 com.sun.jersey.spi.container.servlet.webcomponent.servic webcomponent.java:324 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:425 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:604 javax.servlet.http.httpservlet.servic httpservlet.java:820 weblogic.servlet.internal.stubsecurityhelp servletserviceaction.run stubsecurityhelper.java:227 weblogic.servlet.internal.stubsecurityhelper.invokeservlet stubsecurityhelper.java:125 weblogic.servlet.internal.servletstubimpl.execut servletstubimpl.java:292 weblogic.servlet.internal.tailfilter.dofilt tailfilter.java:26 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:42 ch.ejpd.lib.webclient.jfa.jfatokenservletfilter.dofilt jfatokenservletfilter.java:108 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:42 weblogic.servlet.internal.webappservletcontext servletinvocationaction.run webappservletcontext.java:3496 weblogic.security.acl.internal.authenticatedsubject.doa authenticatedsubject.java:321 weblogic.security.service.securitymanager.runa unknown sourc weblogic.servlet.internal.webappservletcontext.securedexecut webappservletcontext.java:2180 weblogic.servlet.internal.webappservletcontext.execut webappservletcontext.java:2086 weblogic.servlet.internal.servletrequestimpl.run servletrequestimpl.java:1406 weblogic.work.executethread.execut executethread.java:201 weblogic.work.executethread.run executethread.java:173 org.apache.jackrabbit.core.transactionexcept unabl prepar transact org.apache.jackrabbit.core.state.xaitemstatemanager.prepar xaitemstatemanager.java:169 org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:154 org.apache.jackrabbit.core.xasessionimpl.commit xasessionimpl.java:346 org.apache.jackrabbit.jca.transactionboundxaresource.commit transactionboundxaresource.java:39 weblogic.connector.security.layer.adapterlayer.commit adapterlayer.java:252 weblogic.connector.transaction.outbound.xawrapper.commit xawrapper.java:113 weblogic.transaction.internal.xaserverresourceinfo.commit xaserverresourceinfo.java:1334 weblogic.transaction.internal.xaserverresourceinfo.commit xaserverresourceinfo.java:578 weblogic.transaction.internal.serverscinfo.startcommit serverscinfo.java:547 weblogic.transaction.internal.servertransactionimpl.localcommit servertransactionimpl.java:2006 weblogic.transaction.internal.servertransactionimpl.globalretrycommit servertransactionimpl.java:2723 weblogic.transaction.internal.servertransactionimpl.globalcommit servertransactionimpl.java:2645 weblogic.transaction.internal.servertransactionimpl.internalcommit servertransactionimpl.java:282 weblogic.transaction.internal.servertransactionimpl.commit servertransactionimpl.java:230 weblogic.ejb.container.internal.baselocalobject.postinvoke1 baselocalobject.java:591 weblogic.ejb.container.internal.baselocalobject.postinvoketxretri baselocalobject.java:424 ch.ejpd.sireneit.facade.ejb.ablage.dokumentfacadebean_7xdnsq_dokumentfacadeimpl.updatestructureddoku dokumentfacadebean_7xdnsq_dokumentfacadeimpl.java:340 ch.ejpd.sireneit.access.rest.ablage.dokumentresource.upd dokumentresource.java:453 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 com.sun.jersey.server.impl.model.method.dispatch.abstractresourcemethoddispatchprovid responseoutinvoker._dispatch abstractresourcemethoddispatchprovider.java:175 com.sun.jersey.server.impl.model.method.dispatch.resourcejavamethoddispatcher.dispatch resourcejavamethoddispatcher.java:67 com.sun.jersey.server.impl.uri.rules.httpmethodrule.accept httpmethodrule.java:208 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.resourceclassrule.accept resourceclassrule.java:75 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.rootresourceclassesrule.accept rootresourceclassesrule.java:67 com.sun.jersey.server.impl.application.webapplicationimpl._handlerequest webapplicationimpl.java:724 com.sun.jersey.server.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:689 com.sun.jersey.server.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:680 com.sun.jersey.spi.container.servlet.webcomponent.servic webcomponent.java:324 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:425 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:604 javax.servlet.http.httpservlet.servic httpservlet.java:820 weblogic.servlet.internal.stubsecurityhelp servletserviceaction.run stubsecurityhelper.java:227 weblogic.servlet.internal.stubsecurityhelper.invokeservlet stubsecurityhelper.java:125 weblogic.servlet.internal.servletstubimpl.execut servletstubimpl.java:292 weblogic.servlet.internal.tailfilter.dofilt tailfilter.java:26 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:42 ch.ejpd.lib.webclient.jfa.jfatokenservletfilter.dofilt jfatokenservletfilter.java:108 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:42 weblogic.servlet.internal.webappservletcontext servletinvocationaction.run webappservletcontext.java:3496 weblogic.security.acl.internal.authenticatedsubject.doa authenticatedsubject.java:321 weblogic.security.service.securitymanager.runa unknown sourc weblogic.servlet.internal.webappservletcontext.securedexecut webappservletcontext.java:2180 weblogic.servlet.internal.webappservletcontext.execut webappservletcontext.java:2086 weblogic.servlet.internal.servletrequestimpl.run servletrequestimpl.java:1406 weblogic.work.executethread.execut executethread.java:201 weblogic.work.executethread.run executethread.java:173 org.apache.jackrabbit.core.state.staleitemstateexcept e1863ec3-4eb7-483b-b1db-7586c089bc64/ modifi extern org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:653 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:1110 org.apache.jackrabbit.core.state.xaitemstatemanager.prepar xaitemstatemanager.java:163 org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:154 org.apache.jackrabbit.core.xasessionimpl.commit xasessionimpl.java:346 org.apache.jackrabbit.jca.transactionboundxaresource.commit transactionboundxaresource.java:39 weblogic.connector.security.layer.adapterlayer.commit adapterlayer.java:252 weblogic.connector.transaction.outbound.xawrapper.commit xawrapper.java:113 weblogic.transaction.internal.xaserverresourceinfo.commit xaserverresourceinfo.java:1334 weblogic.transaction.internal.xaserverresourceinfo.commit xaserverresourceinfo.java:578 weblogic.transaction.internal.serverscinfo.startcommit serverscinfo.java:547 weblogic.transaction.internal.servertransactionimpl.localcommit servertransactionimpl.java:2006 weblogic.transaction.internal.servertransactionimpl.globalretrycommit servertransactionimpl.java:2723 weblogic.transaction.internal.servertransactionimpl.globalcommit servertransactionimpl.java:2645 weblogic.transaction.internal.servertransactionimpl.internalcommit servertransactionimpl.java:282 weblogic.transaction.internal.servertransactionimpl.commit servertransactionimpl.java:230 weblogic.ejb.container.internal.baselocalobject.postinvoke1 baselocalobject.java:591 weblogic.ejb.container.internal.baselocalobject.postinvoketxretri baselocalobject.java:424 ch.ejpd.sireneit.facade.ejb.ablage.dokumentfacadebean_7xdnsq_dokumentfacadeimpl.updatestructureddoku dokumentfacadebean_7xdnsq_dokumentfacadeimpl.java:340 ch.ejpd.sireneit.access.rest.ablage.dokumentresource.upd dokumentresource.java:453 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 com.sun.jersey.server.impl.model.method.dispatch.abstractresourcemethoddispatchprovid responseoutinvoker._dispatch abstractresourcemethoddispatchprovider.java:175 com.sun.jersey.server.impl.model.method.dispatch.resourcejavamethoddispatcher.dispatch resourcejavamethoddispatcher.java:67 com.sun.jersey.server.impl.uri.rules.httpmethodrule.accept httpmethodrule.java:208 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.sublocatorrule.accept sublocatorrule.java:109 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.resourceclassrule.accept resourceclassrule.java:75 com.sun.jersey.server.impl.uri.rules.righthandpathrule.accept righthandpathrule.java:115 com.sun.jersey.server.impl.uri.rules.rootresourceclassesrule.accept rootresourceclassesrule.java:67 com.sun.jersey.server.impl.application.webapplicationimpl._handlerequest webapplicationimpl.java:724 com.sun.jersey.server.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:689 com.sun.jersey.server.impl.application.webapplicationimpl.handlerequest webapplicationimpl.java:680 com.sun.jersey.spi.container.servlet.webcomponent.servic webcomponent.java:324 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:425 com.sun.jersey.spi.container.servlet.servletcontainer.servic servletcontainer.java:604 javax.servlet.http.httpservlet.servic httpservlet.java:820 weblogic.servlet.internal.stubsecurityhelp servletserviceaction.run stubsecurityhelper.java:227 weblogic.servlet.internal.stubsecurityhelper.invokeservlet stubsecurityhelper.java:125 weblogic.servlet.internal.servletstubimpl.execut servletstubimpl.java:292 weblogic.servlet.internal.tailfilter.dofilt tailfilter.java:26 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:42 ch.ejpd.lib.webclient.jfa.jfatokenservletfilter.dofilt jfatokenservletfilter.java:108 weblogic.servlet.internal.filterchainimpl.dofilt filterchainimpl.java:42 weblogic.servlet.internal.webappservletcontext servletinvocationaction.run webappservletcontext.java:3496 weblogic.security.acl.internal.authenticatedsubject.doa authenticatedsubject.java:321 weblogic.security.service.securitymanager.runa unknown sourc weblogic.servlet.internal.webappservletcontext.securedexecut webappservletcontext.java:2180 weblogic.servlet.internal.webappservletcontext.execut webappservletcontext.java:2086 weblogic.servlet.internal.servletrequestimpl.run servletrequestimpl.java:1406 weblogic.work.executethread.execut executethread.java:201 weblogic.work.executethread.run executethread.java:173
reduc memori usag docid implement docid use cach parent child relat node index usual lot duplic object docid instanc use identifi parent node index sibl node docid valu current new docid instanc creat node cach recent use docid reus might help reduc memori usag furthermor docid could repres short instead int possibl
nodest nodestatelisten deadlock java stack inform thread list jmssecondaryapplnjobexecutor-8 org.apache.jackrabbit.core.state.nodestate.getchildnodeentri nodestate.java:300 wait lock 0x9e6c6d08 org.apache.jackrabbit.core.state.nodest org.apache.jackrabbit.core.cachinghierarchymanager.nodemodifi cachinghierarchymanager.java:316 lock 0xa09882a8 java.lang.object org.apache.jackrabbit.core.cachinghierarchymanager.statemodifi cachinghierarchymanager.java:293 org.apache.jackrabbit.core.state.statechangedispatcher.notifystatemodifi statechangedispatcher.java:111 org.apache.jackrabbit.core.state.sessionitemstatemanager.statemodifi sessionitemstatemanager.java:889 org.apache.jackrabbit.core.state.statechangedispatcher.notifystatemodifi statechangedispatcher.java:111 org.apache.jackrabbit.core.state.localitemstatemanager.statemodifi localitemstatemanager.java:452 org.apache.jackrabbit.core.state.xaitemstatemanager.statemodifi xaitemstatemanager.java:602 org.apache.jackrabbit.core.state.statechangedispatcher.notifystatemodifi statechangedispatcher.java:111 org.apache.jackrabbit.core.state.shareditemstatemanager.statemodifi shareditemstatemanager.java:400 org.apache.jackrabbit.core.state.itemstate.notifystateupd itemstate.java:244 org.apache.jackrabbit.core.state.changelog.persist changelog.java:297 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:749 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:1115 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:351 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:354 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:326 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:325 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1111 lock 0x9b1b0be0 org.apache.jackrabbit.core.xasessionimpl org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:915 org.apache.jackrabbit.jca.jcasessionhandle.sav jcasessionhandle.java:180 sun.reflect.generatedmethodaccessor1067.invok unknown sourc sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 sun.reflect.misc.trampoline.invok methodutil.java:36 sun.reflect.generatedmethodaccessor110.invok unknown sourc sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 sun.reflect.misc.methodutil.invok methodutil.java:243 javax.management.modelmbean.requiredmodelmbean.invokemethod requiredmodelmbean.java:1074 javax.management.modelmbean.requiredmodelmbean.invok requiredmodelmbean.java:955 org.springframework.jmx.export.springmodelmbean.invok springmodelmbean.java:88 org.jboss.mx.server.rawdynamicinvoker.invok rawdynamicinvoker.java:164 org.jboss.mx.modelmbean.requiredmodelmbeaninvoker.invok requiredmodelmbeaninvoker.java:127 org.jboss.mx.server.mbeanserverimpl.invok mbeanserverimpl.java:659 org.jboss.system.server.jmx.lazymbeanserver.invok lazymbeanserver.java:291 javax.management.mbeanserverinvocationhandler.invok mbeanserverinvocationhandler.java:288 proxy692.dodiscoverynow unknown sourc org.springframework.jms.listener.abstractmessagelistenercontainer.doinvokelisten abstractmessagelistenercontainer.java:531 org.springframework.jms.listener.abstractmessagelistenercontainer.invokelisten abstractmessagelistenercontainer.java:466 org.springframework.jms.listener.abstractmessagelistenercontainer.doexecutelisten abstractmessagelistenercontainer.java:435 org.springframework.jms.listener.abstractpollingmessagelistenercontainer.doreceiveandexecut abstractpollingmessagelistenercontainer.java:322 org.springframework.jms.listener.abstractpollingmessagelistenercontainer.receiveandexecut abstractpollingmessagelistenercontainer.java:260 org.springframework.jms.listener.defaultmessagelistenercontain asyncmessagelistenerinvoker.invokelisten defaultmessagelistenercontainer.java:944 org.springframework.jms.listener.defaultmessagelistenercontain asyncmessagelistenerinvoker.run defaultmessagelistenercontainer.java:868 java.lang.thread.run thread.java:619 jmssecondaryapplnjobexecutor-7 org.apache.jackrabbit.core.cachinghierarchymanager.nodead cachinghierarchymanager.java:362 wait lock 0xa09882a8 java.lang.object org.apache.jackrabbit.core.state.statechangedispatcher.notifynodead statechangedispatcher.java:159 org.apache.jackrabbit.core.state.sessionitemstatemanager.nodead sessionitemstatemanager.java:947 org.apache.jackrabbit.core.state.nodestate.notifynodead nodestate.java:882 org.apache.jackrabbit.core.state.nodestate.addchildnodeentri nodestate.java:351 lock 0x9e6c6d08 org.apache.jackrabbit.core.state.nodest org.apache.jackrabbit.core.nodeimpl.createchildnod nodeimpl.java:541 lock 0xa00619a8 org.apache.jackrabbit.core.nodeimpl org.apache.jackrabbit.core.nodeimpl.internaladdchildnod nodeimpl.java:802 org.apache.jackrabbit.core.nodeimpl.internaladdnod nodeimpl.java:735 org.apache.jackrabbit.core.nodeimpl.addnodewithuuid nodeimpl.java:2200 lock 0xa00619f8 org.apache.jackrabbit.core.nodeimpl org.apache.jackrabbit.core.nodeimpl.addnod nodeimpl.java:2133 lock 0xa00619f8 org.apache.jackrabbit.core.nodeimpl sun.reflect.generatedmethodaccessor1067.invok unknown sourc sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 sun.reflect.misc.trampoline.invok methodutil.java:36 sun.reflect.generatedmethodaccessor110.invok unknown sourc sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 sun.reflect.misc.methodutil.invok methodutil.java:243 javax.management.modelmbean.requiredmodelmbean.invokemethod requiredmodelmbean.java:1074 javax.management.modelmbean.requiredmodelmbean.invok requiredmodelmbean.java:955 org.springframework.jmx.export.springmodelmbean.invok springmodelmbean.java:88 org.jboss.mx.server.rawdynamicinvoker.invok rawdynamicinvoker.java:164 org.jboss.mx.modelmbean.requiredmodelmbeaninvoker.invok requiredmodelmbeaninvoker.java:127 org.jboss.mx.server.mbeanserverimpl.invok mbeanserverimpl.java:659 org.jboss.system.server.jmx.lazymbeanserver.invok lazymbeanserver.java:291 javax.management.mbeanserverinvocationhandler.invok mbeanserverinvocationhandler.java:288 proxy692.dodiscoverynow unknown sourc org.springframework.jms.listener.abstractmessagelistenercontainer.doinvokelisten abstractmessagelistenercontainer.java:531 org.springframework.jms.listener.abstractmessagelistenercontainer.invokelisten abstractmessagelistenercontainer.java:466 org.springframework.jms.listener.abstractmessagelistenercontainer.doexecutelisten abstractmessagelistenercontainer.java:435 org.springframework.jms.listener.abstractpollingmessagelistenercontainer.doreceiveandexecut abstractpollingmessagelistenercontainer.java:322 org.springframework.jms.listener.abstractpollingmessagelistenercontainer.receiveandexecut abstractpollingmessagelistenercontainer.java:260 org.springframework.jms.listener.defaultmessagelistenercontain asyncmessagelistenerinvoker.invokelisten defaultmessagelistenercontainer.java:944 org.springframework.jms.listener.defaultmessagelistenercontain asyncmessagelistenerinvoker.run defaultmessagelistenercontainer.java:868 java.lang.thread.run thread.java:619 found 1 deadlock
fix simplifi cryptedsimplecredenti credenti retriev userimpl use valid simplecredenti pass repositori login over complex buggi tri match kind credenti variant without hash password particular contain follow problem simplecredenti contain hash pw consid valid password startign someth caus inconsist may even prevent user login improv follow simplecredenti alway expect contain plain text password creation comparison cryptedsimplecredenti creat cryptedsimplecredenti uid/pw howev left unchang specifi pw hash default algorithm turn hash format addit pw also hash form someth whatev someth invalid algorithm
spi2dav iteminfocach caus failur workspac restoretest testrestorewithuuidconflict variant run api version test found workspac restoretest.testrestorewithuuidconfict variant fail precis test pass transient remov versionablenode2 teardown fail upon remov jcr uuid properti move childnod closer look reveal problem caus workspaceitemstatefactori properti entri retriev cach subsequ check path realli match fail test purpos prevent usag cach entri return fals workspaceitemstatefactory.isuptod test pass far know test pass spi2jcr michael could caus flaw iteminfo-cach logic someth specif need adjust spi2dav
jcr2spi remov sanitycheck itemimpl.getsess jcr-911 jcr2spi check respons failur activitiestest testactivitiesrel
jcr-rmi problem larg binari valu report mail list jcr-rmi connect hang given binari valu 's larger default 64kb buffer size
spi2davex session-scop lock token includ if-head detect run api lock test org.apache.jackrabbit.test.api.lock.deeplocktest testparentchilddeeplock fail though use work spi2dav fix simpl sessioninfoimpl.getalllocktoken must use popul if-head done spi2dav
jcr-server npe searchresourceimpl pathvalu path null line 368 searchresourceimpl n't deal null path thus caus npe valuefactori
spi2davex invaliditemstateexcept proper extract ambigu respons error nodetest testsaveinvalidstateexcept sessiontest testsaveinvalidstateexcept fail pathnotfoundexcept instead invaliditemstateexcept rememb alreadi address issu spi2dav long time ago batch write spi2davex back server n't awar distinct n't abl retriev remov item either client side find way distinguish path-not-found extern modifi leav known issu spi2dav ad add quick hack oper write oper path-not-found simpli convert invaliditemstateexcept
spi2davex clear uri-lookup remov node identifi uniqueid test case documentviewimporttest fail setup line 325 abstractimportxmltest sinc uri resolv specifi nodeid still refer node remov initi import would equal caus problem whenev referenc node replac anoth node easili fix clear uri-cach remov alreadi done move
spi2dav observ 's user data properti handl org.apache.jackrabbit.test.api.observ getuserdatatest still fail setup jcr2spi spi2dav ex jcr-server
spi2dav move/reord proper handl observ tck test includ move reorder fail setup jcr2spi spi2dav ex jcr-server
spi2dav eventjourn implement n't look detail realiz eventjournaltest tck fail setup jcr2spi spi2dav ex jcr-server assum due miss implement correspond spi method throw unsupportedrepositoryoperationexcept
spi2dav eventfilt respect impress event filter pass event subscript spi2dav proper respect marcel specif reason alway pass static subscriptioninfo constant node type filter noloc fals subscribemethod spi2dav/repositoryserviceimpl createsubscript guess reason failur testnodetyp org.apache.jackrabbit.test.api.observation.addeventlistenertest testnolocaltru org.apache.jackrabbit.test.api.observation.addeventlistenertest
spi2dav queri offset respect tck queri test setoffsettest fail setup jcr2spi spi2dav ex jcr-server sure whether due miss implement client server part someth complet differ
spi2dav list known issu pom.xml
sism block item state cach load new item shareditemstatemanager.getnonvirtualitemst method contain loaditemst call within synchron cach block prevent item state cach access new item load persist manag least one case caus serious perform drop essenti synchron repositori access reader
set properti transient remov fail pathnotfoundexcept follow test current fail pathnotfoundexcept org.apache.jackrabbit.jcr2spi.addpropertytest testreplacingproperti org.apache.jackrabbit.jcr2spi.addpropertytest testreplacingproperty2 org.apache.jackrabbit.jcr2spi.addpropertytest testaddingproperti org.apache.jackrabbit.jcr2spi.addpropertytest testaddingproperty2
creat node type nt hierarchynod deriv jcr 1.0 compliant repositori fail creat node type nt hierarchynod deriv jcr 1.0 compliant repositori auto-cr properti name jcr creat get default valu except javax.jcr.repositoryexcept createfromdefinit implement http //www.jcp.org/jcr/1.0 creat code sessionitemstatemanag computesystemgeneratedpropertyvalu handl jcr creat found node type mix creat jcr 1.0 howev properti declar nt hierarchynod ad extra case would allow interoper repositori
spi2davex batch fail create/modifi properti non-ascii charact name spi2davex batch implement fail upon creation/modif properti type valu sent separ stringpart binarypart contain non-ascii charact properti name ve seen due limit httpclient 3.x part senddispositionhead alway write part name ascii-byt relat discuss 1 specif complianc usabl address look server-sid part reveal org.apache.commons.fileupload.fileuploadbas fileitemiteratorimpl prepar receiv non-ascii charact header valu simpl test also show curl perfect abl send utf-8 part name base inform given fact spi2dav server-sid part intend communic one rather kind custom client suggest add simpl fix patch part use within spi2davex btw httpclient 4.x seem workaround problem 2 1 http //www.mail-archive.com/httpclient-dev jakarta.apache.org/msg04637.html 2 https //issues.apache.org/jira/browse/httpclient-293
deadlock insid xasess weblog one client deploy weblog 9.2 observ jackrabbit session go stale load test observ releas 1.6.1 migrat due concurr relat issu jcr-2081 jcr-2237 effect 2.0.0 could final reproduc issu local seem boil wls invok sequenc prepar releas commit one xa session multipl thread seem break assumpt thread-bound java.util.concurrent-rwlock base defaultismlock class effect setactivexid method defaultismlock rwlock fail old activ xid yet clear result session deadlock 's invoc stack code activ executethread 27 queue weblogic.kernel.default self-tun daemon prio=1 tid=0x33fc3ec0 nid=0x2324 object.wait 0x2156a000..0x2156beb0 java.lang.object.wait nativ method wait 0x68a54698 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock java.lang.object.wait object.java:474 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock.acquir unknown sourc lock 0x68a54698 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock org.apache.jackrabbit.core.state.defaultismlock 1. init defaultismlocking.java:64 org.apache.jackrabbit.core.state.defaultismlocking.acquirewritelock defaultismlocking.java:61 org.apache.jackrabbit.core.version.abstractversionmanager.acquirewritelock abstractversionmanager.java:146 org.apache.jackrabbit.core.version.xaversionmanag 1.prepar xaversionmanager.java:562 org.apache.jackrabbit.core.transactioncontext.prepar transactioncontext.java:154 lock 0x6dc2ad88 org.apache.jackrabbit.core.transactioncontext org.apache.jackrabbit.core.xasessionimpl.prepar xasessionimpl.java:331 org.apache.jackrabbit.jca.transactionboundxaresource.prepar transactionboundxaresource.java:68 weblogic.connector.security.layer.adapterlayer.prepar adapterlayer.java:397 weblogic.connector.transaction.outbound.xawrapper.prepar xawrapper.java:297 weblogic.transaction.internal.xaserverresourceinfo.prepar xaserverresourceinfo.java:1276 weblogic.transaction.internal.xaserverresourceinfo.prepar xaserverresourceinfo.java:499 weblogic.transaction.internal.serverscinfo 1.execut serverscinfo.java:335 weblogic.kernel.kernel.executeifidl kernel.java:243 weblogic.transaction.internal.serverscinfo.startprepar serverscinfo.java:326 weblogic.transaction.internal.servertransactionimpl.localprepar servertransactionimpl.java:2516 weblogic.transaction.internal.servertransactionimpl.globalprepar servertransactionimpl.java:2211 weblogic.transaction.internal.servertransactionimpl.internalcommit servertransactionimpl.java:266 weblogic.transaction.internal.servertransactionimpl.commit servertransactionimpl.java:227 weblogic.transaction.internal.transactionmanagerimpl.commit transactionmanagerimpl.java:283 org.springframework.transaction.jta.jtatransactionmanager.docommit jtatransactionmanager.java:1028 org.springframework.transaction.support.abstractplatformtransactionmanager.processcommit abstractplatformtransactionmanager.java:709 org.springframework.transaction.support.abstractplatformtransactionmanager.commit abstractplatformtransactionmanager.java:678 code
improv reusabl jca packag jackrabbit-jca packag current hardcod refer jackrabbit-cor make difficult reus packag relat code jcr implement repositoryfactori interfac jcr 2.0 avoid hard depend
data store garbag collect log delet file total size data store garbag collect list name total size delet file
sql2 queri suppli column selector fail npe getcolumnnam prepar execut sql2 queri jcr 2.0 follow querymanag qm jcrsession.getworkspac .getquerymanag string querystr select order customeraccountuuid cust atl order order queri queri qm.createqueri querystr query.jcr_sql2 queryresult queryresult query.execut follow queri fail select order customeraccountuuid atl order order java.lang.nullpointerexcept org.apache.jackrabbit.commons.query.sql2.qomformatter.issimplenam qomformatter.java:577 org.apache.jackrabbit.commons.query.sql2.qomformatter.formatnam qomformatter.java:567 org.apache.jackrabbit.commons.query.sql2.qomformatter.format qomformatter.java:452 org.apache.jackrabbit.commons.query.sql2.qomformatter.format qomformatter.java:123 org.apache.jackrabbit.commons.query.sql2.qomformatter.format qomformatter.java:117 line 452 c.getcolumnnam return null follow queri fine select order customeraccountuuid cust atl order order use test case http //svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-spi-commons/src/test/resources/org/apache/jackrabbit/spi/commons/query/sql2/test.sql2.txt view=markup guidelin cheer jame
spi2davex uri-lookup clear reorder referenc same-name-s
add usermanager.creategroup string groupid method discuss dev list 1 think would use consist insid api usermanager.creategroup string groupid method specif method would creat group given groupid must code null /code br link creategroup princip string specifi groupid name simpl code princip /code implement intermedi path code null /code param groupid id new group must code null /code return new code group /code throw authorizableexistsexcept case given groupid alreadi use anoth link authoriz link authoriz getid id exist throw repositoryexcept anoth error occur group creategroup string groupid throw authorizableexistsexcept repositoryexcept 1 http //markmail.org/message/rjofzg4t3kiht7xv
sql2 queri qomformatt creat incorrect condit follow queri pars select test test test.nam hello test.id 3 sql statement generat becom select test test test.nam hello test.id 3 pars differ becom select test test test.nam hello test.id 3
spi2dav overwrit header specifi move copi caus failur api test fail test org.apache.jackrabbit.test.api.workspacecopysamenamesibstest testcopynodesnodeexistsatdestpath org.apache.jackrabbit.test.api.workspacemovesamenamesibstest testmovenodesnodeexistsatdestpath would fix set overwrit header f als howev n't fit case same-sam sibl would allow copy/mov destin exist item would succeed jcr
pleas spi2dav creat test-jar davex-on-sl integr test need test class spi2dav
extract test content load jackrabbitrepositorystub discuss http //markmail.org/message/vl5ldnfbocccccxw
implement jcr-jackrabbit repositori uri current file uri use jackrabbit repositoryfactoryimpl class make hard support extra paramet prevent jcr implement use similar repositori uri pattern thus propos start support jcr-jackrabbit uri pattern addit current file pattern
perform ac evalu 1 perform access control evalu main focus read perform resource-bas access control .a.j.c/s/authorization/acl/* comparison admin vs. anonym full permiss comparis shortcut acl-evalu comparison jr 1.4 vs jr 2.0 actual compar day 's crx alreadi provid custom ac stuff jr 1.4 2 potenti problem would expect signific problem found aclprovid retrieveresultentri calcul effect ace session separ b aclpermiss instanc regist event listen order keep result cach date c aclpermiss resolut form path item nearest exist item
row.getvalu rep excerpt may throw arrayindexoutofboundsexcept happen match node properti configur use excerpt
incorrect excerpt index aggreg incorrect excerpt may creat relev node index aggreg configur node properti configur node scope index exclud use excerpt
dbinputstream support mark /reset exhaust dbdatastor implement use dbinputstream read binari properti databas new binari properti creat jackrabbit attempt index tika 's charsetdetector use process mark input stream read first 8000 byte reset stream result stacktrac shown end issu follow two condit hold true properti larger minrecordlength configur datastor properti smaller 8000 byte dbinputstream need follow properti 1. lazi instanti under stream 2. auto-clos under stream eof reach 3. fulli support mark /reset even under stream auto-clos due 2 12.03.2010 15:53:28 *warn lazytextextractorfield fail extract text binari properti lazytextextractorfield.java line 165 java.io.eofexcept org.apache.jackrabbit.core.data.db.dbinputstream.reset dbinputstream.java:180 org.apache.tika.io.proxyinputstream.reset proxyinputstream.java:156 org.apache.tika.io.proxyinputstream.reset proxyinputstream.java:156 org.apache.tika.parser.txt.charsetdetector.settext charsetdetector.java:131 org.apache.tika.parser.txt.txtparser.pars txtparser.java:77 org.apache.tika.parser.compositeparser.pars compositeparser.java:120 org.apache.tika.parser.autodetectparser.pars autodetectparser.java:101 org.apache.tika.parser.autodetectparser.pars autodetectparser.java:114 org.apache.jackrabbit.core.query.lucene.lazytextextractorfield parsingtask.run lazytextextractorfield.java:160 java.util.concurrent.executor runnableadapter.cal executors.java:441 java.util.concurrent.futuretask sync.innerrun futuretask.java:303 java.util.concurrent.futuretask.run futuretask.java:138 java.util.concurrent.scheduledthreadpoolexecutor scheduledfuturetask.access 301 scheduledthreadpoolexecutor.java:98 java.util.concurrent.scheduledthreadpoolexecutor scheduledfuturetask.run scheduledthreadpoolexecutor.java:207 java.util.concurrent.threadpoolexecutor worker.runtask threadpoolexecutor.java:886 java.util.concurrent.threadpoolexecutor worker.run threadpoolexecutor.java:908 java.lang.thread.run thread.java:619
sism.checkaddedchildnod prevent merg concurr chang regress caus jcr-2456 check method report fals posit prevent merg concurr remov child node check done local item state connect share state mean getaddedchildnod alway return complet list local child node addit merg attempt also done check mean imposs handl concurr remov child node
deprec xasess xasess interfac jackrabbit-api extend session singl getxaresourc method idea transact client transact manag test whether session implement xasess get xaresourc instanc use bind session distribut transact essenti code session instanceof xasess return xasess session .getxaresourc work fine except extra depend jackrabbit-api introduc code otherwis would need jcr api sinc link transaction-en session relat xaresourc instanc alway one-to-on could avoid depend make session direct implement xaresourc lead code like session instanceof xaresourc return xaresourc session essenti jackrabbit-jcr-rmi 2.0.0 avoid jackrabbit-api depend maintain xa transact support 'd like extend solut also part jackrabbit
invaliditemstateexcept attempt concurr non conflict write 'm problem concurr addit node parent node jackrabbit ve attach simpl test start bunch thread add node parent node concurr add lock get work howev accord mail list work without lock howev test alway fail javax.jcr.invaliditemstateexcept item save modifi extern node /testpar org.apache.jackrabbit.core.itemimpl.gettransientst itemimpl.java:281 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:939 org.mule.galaxy.impl.jackrabbitconcurrentwritetest 1.run jackrabbitconcurrentwritetest.java:71 'm use jackrabbit 1.6.1 verbos node type nodetyp name= galaxi nosibl ismixin= fals hasorderablechildnodes= fals primaryitemname= propertydefinit name= requiredtype= undefin onparentversion= copi propertydefinit name= requiredtype= undefin onparentversion= copi multiple= true childnodedefinit name= defaultprimarytype= nt unstructur onparentversion= copi samenamesiblings= fals supertyp supertyp nt base /supertyp supertyp mix referenc /supertyp supertyp mix lockabl /supertyp /supertyp /nodetyp test packag org.mule.galaxy.impl import java.io.fil import java.io.ioexcept import java.io.inputstream import java.util.arraylist import java.util.list import java.util.uuid import java.util.concurrent.countdownlatch import java.util.concurrent.timeunit import javax.jcr.loginexcept import javax.jcr.nod import javax.jcr.repositori import javax.jcr.repositoryexcept import javax.jcr.sess import javax.jcr.simplecredenti import junit.framework.testcas import org.apache.commons.io.fileutil import org.apache.jackrabbit.api.jackrabbitnodetypemanag import org.apache.jackrabbit.core.repositoryimpl import org.apache.jackrabbit.core.transientrepositori import org.apache.jackrabbit.core.config.repositoryconfig public class jackrabbitconcurrentwritetest extend testcas privat repositori repositori privat session session privat string parentuuid privat boolean continueloop true public void setup throw except fileutils.deletedirectori new file repositori file repodir new file repositori repodir.mkdir repositoryconfig config repositoryconfig.cr new file src/test/resources/meta-inf/jackrabbit-repo-test.xml repodir repositori repositoryimpl.cr config session createsess createcustomnodetyp session parentuuid session.getrootnod .addnod testpar galaxi nosibl .getuuid session.sav session.logout privat session createsess throw loginexcept repositoryexcept return repository.login new simplecredenti usernam password .tochararray public void testconcurr throw except final list except except new arraylist except int threadcount 20 final countdownlatch latch new countdownlatch threadcount int 0 threadcount i++ thread thread new thread overrid public void run tri continueloop session session createsess tri node node session.getnodebyuuid parentuuid node.addnod uuid.randomuuid .tostr node.sav session.sav final session.logout catch repositoryexcept e exceptions.add e continueloop fals latch.countdown thread.start latch.await 10 timeunit.second continueloop fals except e except e.printstacktrac assertequ 0 exceptions.s public void createcustomnodetyp session session throw repositoryexcept ioexcept get jackrabbitnodetypemanag workspac note must cast generic jcr nodetypemanag jackrabbit-specif implement see http //jackrabbit.apache.org/node-types.html jackrabbitnodetypemanag manag jackrabbitnodetypemanag session.getworkspac .getnodetypemanag regist custom node type defin cnd file inputstream thread.currentthread .getcontextclassload .getresourceasstream org/mule/galaxy/impl/jcr/nodetypes.xml manager.registernodetyp jackrabbitnodetypemanager.text_xml
nullpointerexcept use ancestor axi index configur happen index-rul match root node type condit use ancestor axi
spi2dav temp file clean batch submit batch includ larger binari properti back temp file clean submit suggest dispos case
occasion testdatastoregarbagecollect test failur past day hudson build start fail everi follow jackrabbit-cor test failur javax.jcr.nosuchworkspaceexcept secur org.apache.jackrabbit.core.repositoryimpl.getworkspaceinfo repositoryimpl.java:786 org.apache.jackrabbit.core.repositoryimpl.getsystemsess repositoryimpl.java:985 org.apache.jackrabbit.core.repositoryimpl.getsecuritymanag repositoryimpl.java:471 org.apache.jackrabbit.core.repositoryimpl.login repositoryimpl.java:1496 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:380 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:123 org.apache.jackrabbit.core.data.datastoreapitest.testdatastoregarbagecollect datastoreapitest.java:55
switch log4j logback logback http //logback.qos.ch/ nativ slf4j implement mani way superior log4j see http //logback.qos.ch/reasonstoswitch.html notabl includ packag version inform log stack trace http //logback.qos.ch/reasonstoswitch.html packagingdata realli use mani case
spi2davex unspecif badrequest error instead error code match repositoryexcept jsondiffhandl nodehandl server part jcr remot may throw ioexcept error occur result unspecif badrequest respons even problem sourc someth specif e.g lock node first glanc think make diffexcept subclass ioexcept would allow generat much specif respons code even includ origin except detail attach patch n't time care test conform test pass
miss synchron internalversionhistoryimpl internalversionhistoryimpl object access modifi concurr multipl session rare case result corrupt intern cach map data structur access cach map proper synchron
coarser granular node type unregistr notif unregist multipl node type time intern notif method call separ type caus problem first notif trigger regener full virtual node type tree later notif call fail log error virtualnodetypestatemanag remov type longer better approach would send name unregist node type collect
usermanager.getauthoriz may fail invalidqueryexcept happen princip name contain apostroph
webdav mkcol directori alreadi exist generat illegalstateexcept perform mkcol resourc alreadi exist follow thrown 31.03.2010 16:14:10.760 *error* 127.0.0.1 1270012450463 mkcol /org.apache.sling.launchpad.testing-6-snapshot/app http/1.1 org.apache.sling.engine.impl.slingmainservlet servic uncaught throwabl java.lang.illegalstateexcept respons alreadi commit org.apache.sling.engine.impl.slinghttpservletresponseimpl.checkcommit slinghttpservletresponseimpl.java:398 org.apache.sling.engine.impl.slinghttpservletresponseimpl.setstatus slinghttpservletresponseimpl.java:265 org.apache.jackrabbit.webdav.webdavresponseimpl.setstatus webdavresponseimpl.java:276 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.domkcol abstractwebdavservlet.java:548 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.execut abstractwebdavservlet.java:256 org.apache.jackrabbit.webdav.server.abstractwebdavservlet.servic abstractwebdavservlet.java:196 javax.servlet.http.httpservlet.servic httpservlet.java:820 org.apache.sling.engine.impl.request.requestdata.servic requestdata.java:523 think return senderror requir abstractwebdavservlet.domkcol protect void domkcol webdavrequest request webdavrespons respons davresourc resourc throw ioexcept davexcept davresourc parentresourc resource.getcollect parentresourc null || parentresource.exist || parentresource.iscollect parent exist collect response.senderror davservletresponse.sc_conflict return shortcut mkcol allow deleted/non-exist resourc resource.exist response.senderror davservletresponse.sc_method_not_allow return request.getcontentlength 0 || request.gethead transfer-encod null parentresource.addmemb resourc getinputcontext request request.getinputstream els parentresource.addmemb resourc getinputcontext request null response.setstatus davservletresponse.sc_cr
upgrad tika 0.7 apach tika 0.7 avail 's probabl late 2.1 releas ll upgrad depend trunk jackrabbit 2.2
make cach limit configur cach set cachemanag class jcr-619 adjust programmat jcr-725 would nice also way set system properti ideal part repositori configur
sessionimpl.createsess use subject/logincontext sessionimpl.createsess string use loginctx/subject creat new session caus problem session.logout call origin instanc suggest fix creat new subject new session instanc
save concurr session execut random oper caus corrupt jcr run attach unit test sever concurr session add move remov node index remov repositori start repositori inconsist state index rebuild also lot except occur see see output patch.txt note unit test also suffer deadlock issu http //issues.apache.org/jira/browse/jcr-2525 half time
abstractloginmodul log warn anonym login current credenti avail tri default anonym authent warn log abstractloginmodul whenev anonym login made sinc normal situat log messag debug info level
remov first version throw javax.jcr.referentialintegrityexcept referentialintegrityexcept occur delet first version succeed root version delet version work fine stack javax.jcr.referentialintegrityexcept unabl remov version least referenc org.apache.jackrabbit.core.version.internalversionhistoryimpl.removevers internalversionhistoryimpl.java:379 org.apache.jackrabbit.core.version.internalversionmanagerbase.internalremovevers internalversionmanagerbase.java:684 org.apache.jackrabbit.core.version.internalversionmanagerimpl 5.run internalversionmanagerimpl.java:495 org.apache.jackrabbit.core.version.internalversionmanagerimpl dynamicescfactory.dosourc internalversionmanagerimpl.java:760 org.apache.jackrabbit.core.version.internalversionmanagerimpl.removevers internalversionmanagerimpl.java:493 org.apache.jackrabbit.core.version.internalxaversionmanager.removevers internalxaversionmanager.java:264 org.apache.jackrabbit.core.version.versionhistoryimpl.removevers versionhistoryimpl.java:253 code simpl versionhistori vh session.getworkspac .getversionmanag .getversionhistori path vh.removevers version version first version succeed root version
defaultloginmodul perform anonym login case unsupport credenti implement repository.login call unsupport credenti implement defaultloginmodul getcredenti return null thus anonym login expect behavior point view howev login unsupport credenti would handl loginmodul modul abl handl login would consequ fail
improv javadoc user getcredenti user getcredenti meant return credenti use repositori login javadoc interfac n't make clear
abstractwebdavservlet add protect method sendunauthor
defaulthighlighter.java encod illeg xml charact merg excerpt method protect string mergefrag defaulthighlighter.java illeg xml charact encod place
nosuchitemstateexcept checkin removevers xa environ remov version checkin node differ transact differ session fail nosuchitemstateexcept refer uuid previous remov version ll attach test demonstr problem
includ webdav litmus test jackrabbit integr test would great integr litmus test http //www.webdav.org/neon/litmus/ integr test suit
iteminfocacheimpl.getnodeinfo .getpropertyinfo might clear relev entri iteminfocacheimpl.getnodeinfo .getpropertyinfo remov retriev entri cach sinc entri might cach id path entir identifi path remov cach re retriev id
itemstatemap warn node type chang report alreadi jcr-1105 itemstatemap log warn cach item state overwritten n't normal happen turn virtual item state provid root virtual tree modifi probabl common situat node type modifi case luckili troublesom virtual tree function log warn annoy 's relev part stack trace problem occur org.apache.jackrabbit.core.state.itemstatemap.put itemstatemap.java:72 org.apache.jackrabbit.core.virtual.abstractvisprovider.cach abstractvisprovider.java:324 org.apache.jackrabbit.core.virtual.abstractvisprovider.createnodest abstractvisprovider.java:284 org.apache.jackrabbit.core.nodetype.virtual.virtualnodetypestateprovider.createnodetypest virtualnodetypestateprovider.java:157 org.apache.jackrabbit.core.nodetype.virtual.virtualnodetypestateprovider.createrootnodest virtualnodetypestateprovider.java:80 org.apache.jackrabbit.core.virtual.abstractvisprovider.statediscard abstractvisprovider.java:470 org.apache.jackrabbit.core.state.itemstate.notifystatediscard itemstate.java:226 org.apache.jackrabbit.core.state.itemstate.discard itemstate.java:370 org.apache.jackrabbit.core.nodetype.virtual.virtualnodetypestateprovider.onnodetypesremov virtualnodetypestateprovider.java:139 org.apache.jackrabbit.core.nodetype.virtual.virtualnodetypestatemanager.nodetypesunregist virtualnodetypestatemanager.java:199 org.apache.jackrabbit.core.nodetype.virtual.virtualnodetypestatemanager.nodetypereregist virtualnodetypestatemanager.java:174 org.apache.jackrabbit.core.nodetype.nodetyperegistry.notifyreregist nodetyperegistry.java:1821 org.apache.jackrabbit.core.nodetype.nodetyperegistry.reregisternodetyp nodetyperegistry.java:433 org.apache.jackrabbit.core.nodetype.nodetyperegistry.reregisternodetyp nodetyperegistry.java:364 org.apache.jackrabbit.core.nodetype.nodetypemanagerimpl.registernodetyp nodetypemanagerimpl.java:591 org.apache.jackrabbit.commons.cnd.cndimporter.registernodetyp cndimporter.java:118
improv intern represent date valu date valu current intern repres java.util.calendar object calendar object huge memori footprint approx 200byte per instanc mutabl suggest replac intern date represent iso8601 format string immut approx 85-90 smaller footprint
authoriz getproperti setproperti deal relativepath authoriz getproperti setproperti defin properti identifi name jcr item base implement could easili deal relat path instead also retriev write properti child node rep authoriz node
principalbas acl edit fail principalnam differ authorizableid issu report alexk edit permiss princip whose name differ id correspond user/group fail accesscontrolexcept quick look main problem caus aceditor assum last segment path correspond princip name n't true principalnam differ id
reduc memori usag parentaxisscor parentaxisscor keep map non-default score calcul parent match context scorer case score equal default score still may scorer therefor use first score valu default instead current use 1.0f
spi2davex reduc memori footprint node/propertyinfoimpl in-memori footprint o.a.jackrabbit.spi2davex.nodeinfoimpl propertyinfoimp quit big
system-view export/import multi-valu properti respect jcr 2.0 jcr 2.0 defin specif system-view export multi-valu properti properti one valu attribut sv multipl attribut sv properti tag written output stream result anyway add one manual tri import modifi system-view multi-valu properti valu recogn properti simpli store like single-valu one
registernodetyp implement cli registernodetyp list standalon client implement
loginmoduleconfig allow specifi principalprovider-nam addit class gill metz report issu regard login modul configur day 's crx base jackrabbit previous version allow specifi multipl prinicp provid class differ configur jr 2.0 2.1 support pp class name use key registri allow specifi separ key/nam
useraccesscontrolprovid handl user dont jackrabbit manag princip user node inconsist jr core 2.0.0 useraccesscontrolprovider.compilepermiss princip relat user node found set read compil permiss provid set give session read access entir secur workspac regardless path user node found instanc useraccesscontrolprovider.compilepermiss use useraccesscontrolprovider.compilepermissions.buildresult check user node user node permiss deni regardless path although first case never happen instal jackrabbit custom principalmanag suspect base impl useraccesscontrolprovider.compilepermissions.buildresult deni access secur workspac correspond user node set princip sinc effect jr unless extern princip manag bit hard produc compact unit test issu found look code
move backward compat test trunk discuss dev 'd like move backward compat test jackrabbit sandbox trunk
concurr session.mov oper failur perform concurr move oper may caus failur similar follow javax.jcr.repositoryexcept unabl updat item node org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1147 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:920 concurrentmovetest 1.execut concurrentmovetest.java:30 org.apache.jackrabbit.core.abstractconcurrencytest executor.run abstractconcurrencytest.java:209 java.lang.thread.run thread.java:637 caus org.apache.jackrabbit.core.state.itemstateexcept unabl resolv path item 79a0fbdb-49fd-4830-a842-5ab11842cd17 org.apache.jackrabbit.core.observation.eventstatecollection.getpath eventstatecollection.java:683 org.apache.jackrabbit.core.observation.eventstatecollection.createeventst eventstatecollection.java:268 org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:702 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:1110 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:1140 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:351 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:354 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:326 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:328 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1141 4 caus javax.jcr.itemnotfoundexcept fail build path 79a0fbdb-49fd-4830-a842-5ab11842cd17 826f0c19-9956-402a-9c0d-93089eedcc1c child entri 79a0fbdb-49fd-4830-a842-5ab11842cd17 org.apache.jackrabbit.core.hierarchymanagerimpl.buildpath hierarchymanagerimpl.java:291 org.apache.jackrabbit.core.cachinghierarchymanager.buildpath cachinghierarchymanager.java:198 org.apache.jackrabbit.core.hierarchymanagerimpl.getpath hierarchymanagerimpl.java:395 org.apache.jackrabbit.core.cachinghierarchymanager.getpath cachinghierarchymanager.java:232 org.apache.jackrabbit.core.observation.eventstatecollection.getpath eventstatecollection.java:678 13
weird error ad node use abstract/mixin nodetyp tri add node file abstract nodetyp i.e nt base follow error report javax.jcr.nodetype.constraintviolationexcept file abstract use primari node type correct word could javax.jcr.nodetype.constraintviolationexcept allow add node file http //www.jcp.org/jcr/nt/1.0 base abstract use primari node type
disabl user add disabl user function prevent exist user login repositori
litmus prophighunicod test failur jre 1.5 webdav litmus test suit contain test case write read unicod charact x10000 ca n't repres singl 16-bit char java instead charact store surrog pair two 16-bit char unfortun xalan xml serial use sun jre 1.5 incorrect encod two separ charact utf-8 lead follow litmus test failur run prop 17. prophighunicod pass 18. propget fail propfind /default/litmus/prop2 xml pars error line 1 well-form invalid token
jackrabbitpars tika 0.7 parser hi tri implement custom parser found follow problem sinc tika 0.7 possibl implement custom parser specifi servic provid configur file meta-inf/services/org.apache.tika.parser.pars way would need maintain custom tika-config.xml file 'd like implement custom parser problem jackrabbitpars n't abl instanti autodetectpars default constructor instanti use default tikaconfig constructor basic tika 0.7 tikaconfig.gettikaconfig instanti tikaconfig use default constructor instead access tika-config.xml file with packag read servic provid configur file popul parser map 'm propos chang jackrabbitpars instanti autodetectpars use default constructor way use tika version 0.7 could easili implement parser wo n't reason maintain tika-config.xml also sort backward compat would maintain use autodetectpars default constructor tikaconfig instanti use tikaconfig.gettikaconfig wich tika version 0.7 call tikaconfig inputstream constructor whcih read configur direct packag basic jackrabbitpars look like public jackrabbitpars parser new autodetectpars thank dan
avoid item state read session.logout follow issu jcr-2231 's second cachinghierarchymanag attach localitemstatemanag unregist late caus read shareditemstatemanag session logout hierarchi manag unregist listen state manag dispos
xml text extract jackrabbit 1.x access extern resourc discuss user add follow code extractorhandl class public inputsourc resolveent string publicid string systemid return new inputsourc new bytearrayinputstream new byte 0
accesscontrolmanag geteffectivepolici string may expos ac content without proper permiss implement accesscontrolmanag geteffectivepolici string defaultaccessmanag check session allow read ac content specifi path howev result may also includ polici effect abspath visibl edit session read_ac permiss deni e.g ancestor node could read edit session mean getpolici
reduc temporari memori usag hierarchi cach initi initi hierarchi cach temporarili use memori linear size index segment process split multipl phase limit memori usag fix amount temporari memori usag index segment current 170 byte per node
propertyimpl.getnod namepropertytest use differ except document jcr api javadoc property.getnod method 's javadoc 1 list 3 type except valueformatexcept itemnotfoundexcept repositoryexcept itemnotfoundexcept thrown target node could found howev namepropertytest.testgetproperti method check pathnotfoundexcept rather document itemnotfoundexcept see 2 line 189 jackrabbit 's implement propertyimpl see 3 line 539 deleg session.getnod absolutepath property.getpar .getnod relativepath method document throw pathnotfoundexcept see 4 5 therefor unit test propertyimpl.getnod implement appear disagr jcr 2.0 api javadoc 1 http //www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/property.html getnod 2 http //svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-jcr-tests/src/main/java/org/apache/jackrabbit/test/api/namepropertytest.java revision=772352 view=markup 3 http //svn.apache.org/viewvc/jackrabbit/trunk/jackrabbit-core/src/main/java/org/apache/jackrabbit/core/propertyimpl.java revision=948827 view=markup 4 http //www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/session.html getnod java.lang.str 5 http //www.day.com/maven/javax.jcr/javadocs/jcr-2.0/javax/jcr/node.html getnod java.lang.str
provid mean display effect polici given set princip jsr 283 current defin accesscontrolmanag geteffectivepolici string nodepath would allow permiss relat ui display polici contribut particular set privileg addit api defin accesscontrolmanag getprivileg string nodepath return privileg edit session specifi path order addit flexibl start add custom extens jackrabbitaccesscontrolmanag allow e.g retriev privileg set princip hat specifi path would like extend addit provid method allow retriev effect polici set princip current achiev reli specif access control model make assumpt 's implement obvious isn't desir effect
n't silent merg session-loc transient chang extern chang save current extern chang i.e chang commit session silent merg transient chang might potenti caus concurr issues/inconsist transient state see e.g jcr-2632 would probabl better isol transient chang extern chang re save true copy-on-writ
add onworkspaceinconsist log workspac perform re-index startup inconsist process fail new onworkspaceinconsist log log inconsist reindex-process fail
longer set date properti use long valu attempt set date properti long valu throw javax.jcr.nodetype.constraintviolationexcept work jackrabbit 1.6.2 reproduc node node session.getitem node node.addnod dummi nt resourc valuefactori vf session.getvaluefactori valu vf.createvalu 1234 3 creat longvalu node.setproperti jcr lastmodifi valu system.out.println node.getproperti jcr lastmodifi expect result date around 1970 print system.out actual result javax.jcr.nodetype.constraintviolationexcept match properti definit found http //www.jcp.org/jcr/1.0 lastmodifi org.apache.jackrabbit.core.nodetype.effectivenodetype.getapplicablepropertydef effectivenodetype.java:770 org.apache.jackrabbit.core.nodeimpl.getapplicablepropertydefinit nodeimpl.java:911 org.apache.jackrabbit.core.itemmanager.getdefinit itemmanager.java:224 org.apache.jackrabbit.core.itemdata.getdefinit itemdata.java:97 org.apache.jackrabbit.core.propertydata.getpropertydefinit propertydata.java:53 org.apache.jackrabbit.core.propertyimpl.getdefinit propertyimpl.java:729 org.apache.jackrabbit.core.nodeimpl.setproperti nodeimpl.java:2512 accord jukka zit 1 might side-effect jcr-2170 1 mail thread dev jackrabbit.apache.org http //markmail.org/message/hn3snufsogjvldad
initvers crash npe delet old version get serious problem access version histori stacktrac java.lang.nullpointerexcept org.apache.jackrabbit.core.version.versioniteratorimpl.initvers versioniteratorimpl.java:169 org.apache.jackrabbit.core.version.versioniteratorimpl. init versioniteratorimpl.java:87 org.apache.jackrabbit.core.version.versioniteratorimpl. init versioniteratorimpl.java:72 org.apache.jackrabbit.core.version.versionhistoryimpl.getallvers versionhistoryimpl.java:92 step threw code see method currentversion.getsuccessor return empti array versionhistori seem corrupt
embed derbi fail jboss jmx-relat conflict jboss fail start due bug derby-10.4.2.0 depend again derby-10.4.2.1 seem bug fix info https //issues.apache.org/jira/browse/derby-3887 pleas includ fix upcom 1.6.3
defaultaccessmanag hasprivileg string set privileg n't close compil permiss defaultaccessmanag hasprivileg string set privileg retriev compil permiss specifi set princip ac provid omit compiledpermiss close call return
fail remov previous assign mixin jackrabbit fail remov previous assign mixin work fine version 1.6.1
jcr unit test use invalid queri accord section 8.5.2.11 jcr 1.0 specif option support properti select order claus explicit defin node type list claus defin subtyp node type option support specifi properti select orderbi claus explicit defin node type list claus defin mixin node type may assign node instanc type mention select claus howev two test method org.apache.jackrabbit.test.api.query.sqljointest class produc execut queri use claus differ properti node type list claus testjoinntbas method produc queri use follow code stringbuff queri new stringbuff select query.append ntbase .append .append testmixin query.append query.append testnodetyp .append .append jcrpath query.append query.append mixreferenc .append .append jcrpath query.append .append jcrpath .append like query.append .append testroot .append code produc valid queri testnodetyp set nt base testmixin set mix referenc select nt base mix referenc nt base.jcr path mix referenceable.jcr path howev valu testnodetyp testmixin use produc invalid queri criteria refer tupl sourc exist claus exampl testnodetyp type testmixin mixin queri becom select nt base mixin type.jcr path mix referenceable.jcr path code correct simpli use testnodetyp claus similar bug testjoinfilterprimarytyp method use code stringbuff queri new stringbuff select query.append testnodetyp .append .append ntbase query.append query.append testnodetyp .append .append jcrpath query.append query.append mixreferenc .append .append jcrpath query.append .append jcrpath .append like query.append .append testroot .append code realli never produc valid queri sinc claus use testnodetyp nt base node type wherea claus use testnodetyp mix referenc type exampl testnodetyp valu type queri becom select type nt base type.jcr path mix referenceable.jcr path
jcr test ad node type test abstract node ad children contrari jcr 2.0 specif tck test method testlegalandresidualtyp canaddchildnodecallwithnodetypetest class pick node residu type filter abstract node exampl local test nt hierarchynod select local variabl type sinc abstract node type direct assign node 1 canaddchildnod anypropertynam nt hierarchynod must return fals howev sinc test assum non-abstract node type chosen expect canaddchildnod string string return true could fix nodetypeutil.locatechildnodedef extend add extra argument allow disallow abstract type extra argument use filter type use testlegalandresidualtyp locatechildnodedef automat exclud abstract type manner automat exclud protect type 1 section 3.7.1.3 jcr2 specif
noderefer lost delet set refer save cycl ve written follow snippet illustr issu node root session.getrootnod node root.addnod node b root.addnod b b.addmixin mix referenc a.setproperti p b root.sav system.out.println b.getrefer .getsiz correct return 1 a.setproperti p node null a.setproperti p b root.sav system.out.println b.getrefer .getsiz return 0 changelog process ad refer process delet one persist noderefer final wrong ve set prioriti issu critic persist refer count corrupt simpl workaround first remov properti save add properti satisfi
improv read cach uuid given document number cachingindexreader.docu int n fieldselector fieldselector creat new field cach uuid lucen field implement alway string.intern field name quit slow probabl implement specif use case know name alreadi intern e.g uuidfield implement fieldabl
optim readonlyindexreader.read int doc int freq method current implement trivial use next doc freq read block filter delet doc
abstractloginmodul must call abort commit abstractloginmodule.commit current may call abort detect login succeed abort reset state login modul includ state share multipl login modul like princip subject actual multipl modul delet share state set login modul moreov method commit call overal authent succeed thus seem strang call abort within commit
cach also fail princip lookup princip cach jackrabbit normal good job ensur good perform critic area like acl evaul howev cach includ success princip lookup ace refer miss mistyp princip caus notabl perform issu new princip lookup need whenev node cover acl access solv problem propos extend princip cach also cover negat princip lookup
filedatastor ignor return code setlastmodifi garbag collect depend file modif date success updat record touch mark phase result silent failur catastroph loss file sweep phase filedatastore.getrecordifstor howev check return code setlastmodifi believ bitten dev deploy ran disk space substanti portion datastor delet best explan come setlastmodifi call start silent fail lead massiv overkil sweep also call setlastmodifi filedatastore.addrecord strict correct face gc i.e need resolut offset also must succeed file writabl risk incorrect collect patch follow
node.hasproperti relat path throw classcastexcept call node.hasproperti relat path travers higher root node throw classcastexcept itemid return hierarchymanagerimpl.resolvepath root node id blind cast hierarchymanagerimpl.resolvepropertypath throw classcastexcept issu hasproperty/resolvepropertypath call resolvepath goe higher root node wrong get root node id return result
filedatastor check lastmodifi error result accord javadoc file.lastmodifi return valu may indic error 0l file exist i/o error occur accord filedatastor check return valu rather treat actual modif time 0 patch follow
move first-level node given /nodea session.mov /nodea /nodeb throw except javax.jcr.pathnotfoundexcept ancestor degre 1 org.apache.jackrabbit.spi.commons.name.pathfactoryimpl pathimpl.getancestor pathfactoryimpl.java:481 org.apache.jackrabbit.core.retention.retentionregistryimpl.haseffectiveretent retentionregistryimpl.java:291 org.apache.jackrabbit.core.itemvalidator.hasretent itemvalidator.java:426 org.apache.jackrabbit.core.itemvalidator.checkcondit itemvalidator.java:328 org.apache.jackrabbit.core.itemvalidator.checkremov itemvalidator.java:281 org.apache.jackrabbit.core.sessionimpl.mov sessionimpl.java:1075 org.apache.jackrabbit.core.moveatroottest.testmoveatroot moveatroottest.java:54 sun.reflect.nativemethodaccessorimpl.invoke0 nativ method sun.reflect.nativemethodaccessorimpl.invok nativemethodaccessorimpl.java:39 sun.reflect.delegatingmethodaccessorimpl.invok delegatingmethodaccessorimpl.java:25 java.lang.reflect.method.invok method.java:597 junit.framework.testcase.runtest testcase.java:154 junit.framework.testcase.runbar testcase.java:127 junit.framework.testresult 1.protect testresult.java:106 junit.framework.testresult.runprotect testresult.java:124 junit.framework.testresult.run testresult.java:109 junit.framework.testcase.run testcase.java:118 org.apache.jackrabbit.test.abstractjcrtest.run abstractjcrtest.java:456 junit.framework.testsuite.runtest testsuite.java:208 junit.framework.testsuite.run testsuite.java:203 org.eclipse.jdt.internal.junit.runner.junit3.junit3testreference.run junit3testreference.java:130 org.eclipse.jdt.internal.junit.runner.testexecution.run testexecution.java:38 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:467 org.eclipse.jdt.internal.junit.runner.remotetestrunner.runtest remotetestrunner.java:683 org.eclipse.jdt.internal.junit.runner.remotetestrunner.run remotetestrunner.java:390 org.eclipse.jdt.internal.junit.runner.remotetestrunner.main remotetestrunner.java:197
xmlpersistancemanag n't preserv properti 's multivalu attribut multi-valu properti persist later read use xmlpersistencemanag multivalu attribut lost i.e propertystate.ismultivalu return alway fals
provid renam method node current renam node nuisanc node 's parent order child node parent child node must search successor node move node must move new name order successor furthermor case move node last node must special case thus propos provid function direct renam node
set query.setoffset pass result total return negat getsiz instead zero 1 queri return 3 result 2 set query.setoffset 10 pass total 3 3 row/nodeiterator.gets return -7 incorrect expect getsiz return 0
provid util handl larg number child nodes/properti jackrabbit cope well flat hierarchi hierarchi node mani child node and/or properti current recommend situat manual add intermedi node would nice util adds/remov intermedi node need expos flat view user util expos larg number nodes/properti sequenc parametr order nodes/properti appear sequenc provid method lookup/add/remov nodes/properti key organ node/properti under jcr hierarchi way effici oper easili understand user look hierarchi
improv equal binari valu current implement spi2dav 's equal method binari valu symmetr moreov forc valu load instead tri determin equal examin etag last-modifi header
log per test case thank switch logback ago jcr-2584 start take advantag nice new featur like one describ 1 trick ll abl split current pretti larg jcr.log test log file separ log file per test case make much easier review log written particular test 1 http //www.nalinmakar.com/2010/07/28/logging-tests-to-separate-files/
jackrabbit perform test suit 'd like set multi-vers perform test suit insid jackrabbit-core/src/test/perform similar compat test suit ad jcr-2631 perform test suit would produc compar perform number number simpl benchmark test across differ jackrabbit version includ latest snapshot
add support encrpt db password repository.xml basic issu https //issues.apache.org/jira/browse/jcr-2673 reopen jcr-2673 file new one instead reason jira lot compani allow store password clear text sorri dont know implement yet hope least requir clear thank
consolid type safe wrapper commons-collect class various place defin type safe wrapper class commons-collect i.e filteriter transformiter like would like consolid one singl place
improv read/writ concurr 'd like set perform test help identifi worst bottleneck various kind concurr read-on read-writ access pattern identifi 'm hope fix least bottleneck
allow wildcard restrict resource-bas ace
usermanag add membership cach due weakrefer natur group member retriev group given authoriz member expens correspond api call node getweakrefer execut queri fallback search disabl travers complet group tree n't free either would therefor suggest add cach authoriz nodeid group nodeid get clear upon modif group membership group remov n't need extra observ cach may potenti obsolet principal-bas cach defaultprincipalprovid
reduc log level multiindex delet obsolet index multiindex class issu log messag info level obsolet index delet quit often segment delet later retri warn ignor http //dev.day.com/kb/content/wiki/kb/crx/troubleshooting/unabletodeleteobsoleteindex.html would nice reduc log level debug peopl maintain project awar jackarabbit detail sometim scare warn thank advanc kind regard sergiy
evalu membershipcach jcr-2703 obsolet cach defaultprincipalprovid
improv perform save node larg number child node e.g 10k child node entri jcr-307 brought signific improv wrt save node larg number child node unfortun jcr-2579 broke part optim see nodestate.setchildnodeentri list
merg jcr-benchmark perform test suit jackrabbit-jcr-benchmark compon current live jcr common area activ plan releas compon afaiui 's far use perform test suit set jcr-2695 avoid extra complex spread test code multipl compon trunk 'd like merg jcr-benchmark compon back jackrabbit trunk perform test suit tests/perform
miss xpath escap query.jsp report canberk bolat adeo secur privat communic search.jsp script jackrabbit-webapp miss escap inject path relat queri construct xpath statement analysi show issu secur implic treat normal bug report search.jsp string q request.getparamet q q null q.length 0 string stmt q.startswith relat string path q.substr relat .length stmt //element nt file rep similar jcr content path /jcr content /rep excerpt order jcr score descend queryterm similar b text.encodeillegalxmlcharact path /b
add support larg number user group current implement sever factor limit number user group group membership record multi valu properti scale well member group collect eager scale well propos add complementari support record group membership node structur current solut node structur would similar user group add intermedi node group reach certain threshold number user
btreemanag need flexibl mechan ignor intern properti current btreemanag implement hard code logic ignor jcr primarytyp properti mechan parametr btreemanag set properti ignor
dirti intern state transaction-rollback global transact contain manag transact run follow code insid global transact jta contain manag transact caus problem session session getrepsoitorysess node rootnod session.getrootnod node test rootnode.addnod test test.addmixin ctvrepositorykonstanten.node_mix_typ_vers session.sav throw new runtimeexcept testexcept everythink fine execut second time get org.apache.jackrabbit.core.state.nosuchitemstateexcept org.apache.jackrabbit.core.state.nosuchitemstateexcept b36d91bc-8687-428c-a767-2e087b13191a org.apache.jackrabbit.core.state.shareditemstatemanager.getitemst shareditemstatemanager.java:270 org.apache.jackrabbit.core.state.localitemstatemanager.getnodest localitemstatemanager.java:107 org.apache.jackrabbit.core.state.localitemstatemanager.getitemst localitemstatemanager.java:172 org.apache.jackrabbit.core.state.xaitemstatemanager.getitemst xaitemstatemanager.java:260 org.apache.jackrabbit.core.version.nodestateex.stor nodestateex.java:519 org.apache.jackrabbit.core.version.nodestateex.stor nodestateex.java:489 org.apache.jackrabbit.core.version.abstractversionmanager.getparentnod abstractversionmanager.java:414 org.apache.jackrabbit.core.version.abstractversionmanager.createversionhistori abstractversionmanager.java:357 org.apache.jackrabbit.core.version.xaversionmanager.createversionhistori xaversionmanager.java:148 org.apache.jackrabbit.core.version.abstractversionmanager.getversionhistori abstractversionmanager.java:273 org.apache.jackrabbit.core.itemimpl.initversionhistori itemimpl.java:738 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1097 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:915 org.apache.jackrabbit.jca.jcasessionhandle.sav jcasessionhandle.java:180 de.continentale.repo.ctvrepository.erstelledoku ctvrepository.java:2267 think intern state clean rollback restart runtim applic server solv may caus like jcr-2503 jcr-2613
usermanag n't read cach membership session pend group chang backward compat reason read group membership access overal cach case pend group chang current implemem alway read cach caus regress test-cas day reli accur group membership inform unsav group-memb chang
select disabl check itemvalid would like abl select disabl check itemvalid scope oper perform method sessionst class would provid simpl mean intern modifi exampl protect item current modif must done manual item state level approach error prone dri upcom patch place set protect properti would look like final node parent final valu valu sessionst sessionst sessioncontext.getsessionst properti properti sessionstate.performuncheck new sessionoper properti public properti perform sessioncontext context throw repositoryexcept return parent.setproperti foo valu itemvalidator.check_constraint user need access session context order disabl check make usabl insid jackrabbit
improv join queri perform current implement sql2 join queri perform well pretti much non-trivi data set
oracledatabasejourn assum oracl default oraclefilesystem oraclepersistencemanag assum default certain properti driver databasetyp default extend oracledatabasejourn consist eas use
incorrect result join multivalu properti look like join condit multivalu properti use one multipl valu comparison
incorrect outer join tck test tck test case outer join seem incorrect specif expect result set testrightouterjoin1 testleftouterjoin2 test case equijoinconditiontest invalid shown testrightouterjoin1 result set null n1 n1 n2 n2 n2 n1 node propertyname2 properti set first tupl never occur regardless join type sinc n2 alreadi match exist node even null n2 includ result set correct result set queri seem n1 n2 n2 n2 testleftouterjoin2 result set n1 null n2 n1 n2 n2 tupl n1 leftmost node possibl correct result set would n2 n1 n2 n2 unfortun correct result set n't actual exercis outer join function i.e none node return tupl null ll need modifi test case setup fix
chang session.mov top-level node n't seen second session ll attach test case basic creat two session creat top-level node first session save move top-level node use first session second session tri itemexist path node return true fals
add tostr method qom tree class qom tree class render sql2 tostr method would make debug qom code quit bit easier
add filter rangeiter would use filteredrangeiter util class use appli arbitrari filter rangeiter
except miss namespac cnd file clearer messag use attach cnd file call cndimporter.registernodetyp follow messag return except unabl pars cnd input error set name sling resourcetyp sling resourcetyp bundl //23.0:0/sling-inf/nodetypes/types.cnd line 24 issu line 24 sling namespac includ messag state namespac miss prefix understood
wrong argument check btreemanag constructor constructor btreemanag argument check maxchildren minchildren wrong instead 2 minchildren maxchildren throw new illegalargumentexcept maxchildren must least twice minchildren 2 minchildren maxchildren throw new illegalargumentexcept maxchildren must least twice minchildren
postgresql fail guess valid queri use postgresql follow warn appear log file *warn org.apache.jackrabbit.core.util.db.connectionfactori main fail guess valid queri url jdbc postgresql
make collect group membership inform lazi jcr-2710 ad scalabl content model store group membership inform leverag new model would prefer group membership collect lazi i.e group getdeclaredmemb group getmemb construct list member front
add user manag perform test add perform test valid jcr-2710 relat measur perform creat user group adding/remov user to/from group done repositori configur one old content model group membership properti one new content model introduc jcr-2710 group membership b-tree like node structur
exclud javacc-gener code static analysi javacc-gener code spi-common exclud static analysi done tool like sonar
lockmethod.getresponseaslockdiscoveri fail status==201 rfc 4918 section 9.10.6 specifi 201 valid respons code lock 201 creat lock request unmap url request succeed result creation new resourc valu dav lockdiscoveri properti includ respons bodi howev lockmethod.getresponseaslockdiscoveri would fail scenario org.apache.jackrabbit.webdav.davexcept creat org.apache.jackrabbit.webdav.client.methods.davmethodbase.getresponseexcept davmethodbase.java:164 org.apache.jackrabbit.webdav.client.methods.lockmethod.getresponseaslockdiscoveri lockmethod.java:119 reason lockmethod:175 return statuscod davservletresponse.sc_ok return statuscod davservletresponse.sc_ok || statuscod ==davservletresponse.sc_cr
inconsist bitsetkey comparison hi encount problem bitsetentcacheimpl bitsetkey comparison 3 bitset b c defin bit 0,4,17,38,60,63 b bit 4,17,38,52,59,60 c bit 0,17,38,60,61,63 call bitsetkey.compareto method pair get b b c c correct lead inconsist treeset 2 bitset contain one singl word max bit 63 method compar first 32 msb enough case compar bit problem differ 32 msb b c big fit integ b 403701824 c 2952790080 differ 2549088256 posit bigger integer.max_valu make -1745879040 negat cast int order fix shift either bigger order fit sign integ 33 instead 32 simpl -1 0 +1 could return
make sessionprovid pluggabl jcrwebdavserverservlet although 's sessionprovid interfac o.a.j.serv sessionproviderimpl implement class hard-cod jcrwebdavserverservlet
except messag authorizableimpl includ full traceback warn level number place authourizableimpl log.warn traceback would fine howev product sling quit easi attempt set properti authoriz generat traceback log soon fill could block log user manag feel wrong would possibl log messag warn level put singl log line debug level put full traceback
jackrabbit-cor produc test jar 'm write custom filesystem implement would nice abl reus abstractfilesystemtest
allow abstractfilesystemtest.getfilesystem throw except
rfc4918ifheadertest.testputiflocktoken could fail 412 precondit fail org.apache.jackrabbit.webdav.server.rfc4918ifheadertest:110 webdav-test lock request initi timeout 1800 millisecond round timeout second-1 org.apache.jackrabbit.webdav.header.timeoutheader:46 assert final block must fail 412 precondit fail lock expir cf rfc 4918 section 10.4.10 lock request initi higher timeout least sever second
miss child node automat remov entri session attribut set node point non-exist child node repositori inconsist current child node silent ignor read oper far tell howev tri add anoth child node name except thrown messag say child node name alreadi exist also parent node ca n't remov one solut remov bad child node entri session attribut org.apache.jackrabbit.autofixcorrupt set default repositori chang secret simplecredenti cred new simplecredenti cred.setattribut org.apache.jackrabbit.autofixcorrupt true rep.login cred 's perfect solut might better throw except basic prevent chang anoth solut implement would renam miss child node entri tri add child node name exampl add current date/tim random digit conflict continu ad new child node
improv log session oper 'd like add follow log featur sessionoper use mdc 1 make possibl filter redirect log base session use add simpl debug-level time inform execut sessionoper help pinpoint perform issu classifi sessionoper read write oper log warn instead current debug messag concurr write session 1 http //logback.qos.ch/manual/mdc.html
classcastexcept groupimpl.iscyclicmembership given three group one user follow membership relat group1 group2 group3 group2 user x y mean x contain y. group3.addmemb group1 throw classcastexcept reason search type i.e usermanager.search_type_group honor correct construct transit membership relat
avoid element array pathimpl path handl code spi-common show quit often thread dump profil result current implement quit bit repetit alloc copi path element array abl streamlin simplifi path handl code track latest path element refer parent path effici may need adjust path pathfactori method declar current assum element array -base path also spi
sleep possibl endless loop observationdispatch rate-limit code ad jcr-2402 prevent observ queue grow larg good idea current implement bit troublesom sinc block thread still hold journal lock sism reader lock sessionst lock caus deadlock heavi workload observ listen attempt reus session recommended/support still happen write repositori quit like solv problem move rate-limit code outsid scope intern lock
concurrentmodificationexcept indexmerg indexmerger.start method caus follow concurrentmodificationexcept thrown sinc n't protect concurr access busymerg list worker start start method remov busymerg list make possibl quick worker concurr modifi list start method finish iter java.util.concurrentmodificationexcept java.util.abstractlist itr.checkforcomodif abstractlist.java:372 java.util.abstractlist itr.next abstractlist.java:343 org.apache.jackrabbit.core.query.lucene.indexmerger.start indexmerger.java:122 org.apache.jackrabbit.core.query.lucene.multiindex. init multiindex.java:325 org.apache.jackrabbit.core.query.lucene.searchindex.doinit searchindex.java:507 org.apache.jackrabbit.core.query.abstractqueryhandler.init abstractqueryhandler.java:78 org.apache.jackrabbit.core.config.repositoryconfigurationpars 1.getqueryhandl repositoryconfigurationparser.java:630 org.apache.jackrabbit.core.config.workspaceconfig.getqueryhandl workspaceconfig.java:215 org.apache.jackrabbit.core.config.workspaceconfig.getqueryhandl workspaceconfig.java:215 org.apache.jackrabbit.core.searchmanager. init searchmanager.java:173 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.getsearchmanag repositoryimpl.java:1868 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.dopostiniti repositoryimpl.java:2077 org.apache.jackrabbit.core.repositoryimpl workspaceinfo.initi repositoryimpl.java:1996 org.apache.jackrabbit.core.repositoryimpl.initstartupworkspac repositoryimpl.java:535
provid relat simpl way disabl anonym access secur workspac discuss thread http //sling.markmail.org/thread/st52jejjuxykfxtj secur workspac default configur accesscontrolprovid provid fix access control polici i.e o.a.j.core.security.user.useraccesscontrolprovid order prevent anonym access security-rel node requir use altern accesscontrolprovid attach patch provid simpler mechan ad param name= anonymousaccesstosecurityworkspac value= fals configur defaultsecuritymanag anonym access secur workspac forbidden
close session twice n't write warn log close session twice follow warn written log file jcr-2741 session alreadi close see chain except trace session close think second close simpli ignor without warn
multistatusrespons call resource.getproperti current constructor multistatusrespons call resource.getproperti even propfindtyp propfind_by_properti inconveni properti expens generat request multistatusrespons constructor paramet propfind_by_properti propfindtyp propfind_by_properti propnam propnameset prop resource.getproperti propnam prop null status200.addcont prop els status404.addcont propnam els
jackrabbit-pool- thread prevent process stop repositori close session still log process n't termin non-daemon thread name jackrabbit-pool- n test case public class testthreadpreventsexit public static void main string throw except new transientrepositori .login new simplecredenti new char 0 program n't stop non-daemon thread introduc part https //issues.apache.org/jira/browse/jcr-2465 fix use daemon thread
deadlock defaultismlock seem bug defaultismlock detect part jcr-2746 1 main thread get read lock 2 observationmanag thread tri lock write block still read lock 3 main thread tri get second read lock block wait write lock bug introduc part jcr-2089 use java.util.concurr revis 995411 995412 think safe solut revert commit add test case defaultismlock chang later test case requir effici solut relat complic
concurrentmodificationexcept webdav updat fix jcr-2750 start see follow except jcr2dav integr test java.util.concurrentmodificationexcept null java.util.linkedhashmap linkedhashiterator.nextentri linkedhashmap.java:365 na:1.5.0_22 java.util.linkedhashmap valueiterator.next linkedhashmap.java:380 na:1.5.0_22 java.util.abstractcollection.toarray abstractcollection.java:176 na:1.5.0_22 org.apache.jackrabbit.webdav.multistatus.getrespons multistatus.java:122 jackrabbit-webdav-2.2-snapshot.jar:2.2-snapshot org.apache.jackrabbit.webdav.multistatus.toxml multistatus.java:151 jackrabbit-webdav-2.2-snapshot.jar:2.2-snapshot org.apache.jackrabbit.webdav.webdavresponseimpl.sendxmlrespons webdavresponseimpl.java:145 jackrabbit-webdav-2.2-snapshot.jar:2.2-snapshot org.apache.jackrabbit.webdav.webdavresponseimpl.sendmultistatus webdavresponseimpl.java:113 jackrabbit-webdav-2.2-snapshot.jar:2.2-snapshot org.apache.jackrabbit.webdav.server.abstractwebdavservlet.doupd abstractwebdavservlet.java:1117 jackrabbit-webdav-2.2-snapshot.jar:2.2-snapshot org.apache.jackrabbit.webdav.server.abstractwebdavservlet.execut abstractwebdavservlet.java:327 jackrabbit-webdav-2.2-snapshot.jar:2.2-snapshot org.apache.jackrabbit.webdav.server.abstractwebdavservlet.servic abstractwebdavservlet.java:201 jackrabbit-webdav-2.2-snapshot.jar:2.2-snapshot javax.servlet.http.httpservlet.servic httpservlet.java:820 servlet-api-2.5-20081211.jar na org.mortbay.jetty.servlet.servletholder.handl servletholder.java:511 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.servlet.servlethandler.handl servlethandler.java:390 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.handler.contexthandler.handl contexthandler.java:765 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.handler.handlercollection.handl handlercollection.java:114 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.handler.handlerwrapper.handl handlerwrapper.java:152 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.server.handl server.java:326 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.httpconnection.handlerequest httpconnection.java:542 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.httpconnect requesthandler.cont httpconnection.java:938 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.httpparser.parsenext httpparser.java:755 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.httpparser.parseavail httpparser.java:218 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.httpconnection.handl httpconnection.java:404 jetty-6.1.22.jar:6.1.22 org.mortbay.jetty.bio.socketconnector connection.run socketconnector.java:228 jetty-6.1.22.jar:6.1.22 org.mortbay.thread.queuedthreadpool poolthread.run queuedthreadpool.java:582 jetty-util-6.1.22.jar:6.1.22 instead someth caus jcr-2750 look like deeper problem jcr_2750 fix uncov far tell concurrentmodificationexcept come abstractresource.elisten class may end concurr modifi multistatus respons 's serial
session.sav potenti caus endless loop read permiss deni root node current session n't read permiss root node call session.sav trigger call sessionitemstatemanager.getidofroottransientnodest order find root minim subtre includ transient state might caus endless loop depend transient chang
collaps nest express execut queri multipl express predic lead score valu depend order operand exampl follow queri jcr contain prop1 foo jcr contain prop2 foo jcr contain prop3 foo order jcr score descend return slight differ result compar jcr contain prop3 foo jcr contain prop1 foo jcr contain prop2 foo order jcr score descend intern jackrabbit pars predic first queri tree orexpr orexpr contain prop1 foo contain prop2 foo contain prop3 foo lucen calcul score inner express first outer equival nest express properti name differ sequenc queri translat intern singl express three operand way score valu alway irrespect order operand
use hash code instead sequenc number string index use index number instead namespac uri string mani place two-way map namespac uri index number default store repository-glob ns_idx.properti file index number alloc use linear sequenc problem approach two repositori easili end differ string index map make practic imposs make low-level copi workspac content across repositori ultim solut problem would store namespac uri closer store content ideal implement detail persist manag easier short-term solut would decreas chanc two repositori differ string index map simpl backwards-compat way use hash code namespac uri basi alloc new index number hash collis fair unlik handl increment intial hash code collis avoid common case collis uniform hash function chanc collis less 1 even tousand regist namespac solut allow workspac copi repositori without worri namespac index map
add shortcut method cndimport make easier rereigst node type cndimport two argument registernodetyp method nice shortcut order rereigst node type use non-shortcut method attach patch add three-argu method provid shortcut reregistr
optim bundl serial number way could use make bundl serial optim thoma alreadi done work jackrabbit 3 sandbox 'd like appli optim also trunk
drop dumpabl interfac beliv o.a.j.core.util.dump interfac origin use diagnost purpos afaiui n't use anywher anymor 'd like drop interfac refactor dump method various jackrabbit class detail tostr method would use debugg general-purpos diagnost tool
jackrabbitindexread prevent use docnumbercach jackrabbitindexread introduc 1.5 jcr-1363 unfortun overwrit method termdoc term mean default implement indexread use bypass docnumbercach built cachingindexread use uuid term look individu document
jcr-sql2 count claus provid whenev provid where-claus sql2 select jcr/jackrabbit provid hit count e.g select nt unstructur order jcr score return hit count query.execut .getrow .getsiz wherea select nt unstructur entiti custom order jcr score n't
databas connect leak dbcp mysql observ use dbcp mysql observ modifi content repositori see abandon connect connect pool
avoid string.intern uuid term creat lucen term somewhat expens usual call string.intern field string jackrabbit use uuid term quit heavili resolv hierarchi constraint lucen also provid factori method term creat new term instanc given valu field name avoid string.intern jackrabbit use factori method whenev creat term uuid field
initi size concurrentcach depend number segment avail processor caus build failur machin test run oom initi memori footprint concurrentcach machin 8k mani test keep refer kind repositori object node session x-manag mean concurrentcach instanc garbag collect immedi test run think overal initi size cach independ number segment see propos patch
simplifi repositori uri format jndi lookup jndirepositoryfactori class togeth jcrutil current support follow repositori uri format jcrutils.getrepositori jndi name-of-repositori jcrutils.getrepositori jndi //ignor org.apache.jackrabbit.repository.jndi.name=name-of-repositori other-paramet first uri format allow extra jndi environ set pass second one pretti verbos simpli ignor author path part uri 'd like add support follow simplifi format make easi provid repositori name along initi context factori name look jcrutils.getrepositori jndi //initial-context-factory/name-of-repositori extra jndi environ set could still includ addit queri paramet backward compat previous format would guarante base presenc absenc org.apache.jackrabbit.repository.jndi.nam paramet hierarch uri
replac extend mixin 's supertyp problemat node.addmixin node.removemixin check avoid redund mixin set node node save eg 2 mixin mix mix aa mix aa mix node n mix aa n.addmixin mix effect sinc 's regard redund remov mix aa first add mix a. first problem appli mixin type programmat sure remov first ad new one 2nd problem occur mix mandatori properti somehow downgrad mix aa mix inform lost save call result unabl save node n javax.jcr.nodetype.constraintviolationexcept /test/a mandatori properti prop exist need touch properti otherwis work work n.removemixin mix aa n.addmixin mix n.setproperti prop n.getproperti prop .getvalu session.sav
access control repositori level api oper open issu guess sinc jackrabbit 1.0 repositori level write oper lack kind permiss check issu rais specif jsr 283 1 n't made specif left implement jackrabbit 2.0 affect follow part api namespac registr node type registr workspac creation/remov base issu report david current anonym user write namespac registri probabl undesir could least add minim restrict addit would like take discuss jsr 333 1 https //jsr-283.dev.java.net/issues/show_bug.cgi id=486
node.removemixin fail mixin defin protect child node node.removemixin fail mixin remov defin protect child node problem caus line 253 removemixinoper
best effort merg concurr modif includ chang mixin type current nodestatemerg merg method immedi abort mixin type 2 node
filedatastor perform improv seen jcr-2695 filedatastor slow file system file oper file.exist file.isdirectori replac tri catch inspect return valu previous method file.renameto
itemmanager.tostr caus stackoverflowerror
nodestatemerger.merg abort primari type 2 state compar nodestatemerg merg current abort mixin type pass state overlay state equal jsr 283 mixin type also primari type node modifi consist reason nodestatemerg merg abort return fals primari type
effectivenodetyp getnamednodedef return array qitemdefinit instead qnodedefinit thus requir unnecessari cast
cluster sync alway done call session.refresh session.refresh suppos synchron cluster chang n't alway happen special syncdelay low reason wrong assumpt clusternode.sync code avoid duplic sync call n't alway work expect follow algorithm use int count synccount synclock.acquir count synccount journalsync synccount++ synclock.releas problem background thread might line synccount++ session.refresh call main thread believ journalsync alreadi call thus n't call
indexmerg synchron issu repositori shutdown insert larg number node ~200000 repositori close session get follow except 19:42:40.556 jackrabbit-pool-5 debug o.a.j.core.query.lucene.indexmerg busi merg worker 2 19:42:40.556 jackrabbit-pool-3 debug o.a.j.core.query.lucene.indexmerg accept merg request 19:42:40.556 jackrabbit-pool-5 debug o.a.j.core.query.lucene.indexmerg worker finish 19:42:40.556 jackrabbit-pool-3 debug o.a.j.core.query.lucene.indexmerg creat new index 19:42:40.557 jackrabbit-pool-3 debug o.a.j.core.query.lucene.indexmerg get index reader multiindex 19:42:40.640 main info c.a.kmp.generator.jpatojcrimport end jcr save 19:42:40.849 main info o.a.j.core.transientrepositori session close 19:42:40.849 main info o.a.jackrabbit.core.repositoryimpl shut repositori 19:42:40.849 main debug o.a.j.core.query.lucene.indexmerg dispos indexmerg 19:42:40.849 main debug o.a.j.core.query.lucene.indexmerg quit flag set 19:42:40.849 main info o.a.j.core.query.lucene.searchindex index close repository/repository/index 19:42:40.850 main info o.a.jackrabbit.core.repositoryimpl shut workspac default 19:42:40.850 main info o.a.j.c.o.observationdispatch notif eventlisten stop 19:42:40.850 main debug o.a.j.core.query.lucene.indexmerg dispos indexmerg 19:42:40.850 main debug o.a.j.core.query.lucene.indexmerg quit flag set 19:42:40.850 main debug o.a.j.core.query.lucene.indexmerg indexmerger.work thread stop 19:42:40.855 main debug o.a.j.core.query.lucene.indexmerg index ad name=_6h numdocs=890 19:42:41.367 jackrabbit-pool-3 debug o.a.j.core.query.lucene.indexmerg delet index _6g 19:42:41.393 main info o.a.j.core.query.lucene.searchindex index close repository/workspaces/default/index 19:42:41.410 jackrabbit-pool-3 error o.a.j.core.query.lucene.indexmerg error merg index org.apache.lucene.store.alreadyclosedexcept indexwrit close org.apache.lucene.index.indexwriter.ensureopen indexwriter.java:412 lucene-core-2.4.1.jar:2.4.1 750176 2009-03-04 21:56:52 org.apache.lucene.index.indexwriter.ensureopen indexwriter.java:417 lucene-core-2.4.1.jar:2.4.1 750176 2009-03-04 21:56:52 org.apache.lucene.index.indexwriter.starttransact indexwriter.java:2511 lucene-core-2.4.1.jar:2.4.1 750176 2009-03-04 21:56:52 org.apache.lucene.index.indexwriter.addindex indexwriter.java:3273 lucene-core-2.4.1.jar:2.4.1 750176 2009-03-04 21:56:52 org.apache.jackrabbit.core.query.lucene.persistentindex.addindex persistentindex.java:114 jackrabbit-core-2.1.1.jar:2.1.1 org.apache.jackrabbit.core.query.lucene.indexmerg worker.run indexmerger.java:525 jackrabbit-core-2.1.1.jar:2.1.1 java.util.concurrent.executor runnableadapter.cal executors.java:441 na:1.6.0_20 java.util.concurrent.futuretask sync.innerrun futuretask.java:303 na:1.6.0_20 java.util.concurrent.futuretask.run futuretask.java:138 na:1.6.0_20 java.util.concurrent.scheduledthreadpoolexecutor scheduledfuturetask.access 301 scheduledthreadpoolexecutor.java:98 na:1.6.0_20 java.util.concurrent.scheduledthreadpoolexecutor scheduledfuturetask.run scheduledthreadpoolexecutor.java:207 na:1.6.0_20 java.util.concurrent.threadpoolexecutor worker.runtask threadpoolexecutor.java:886 na:1.6.0_20 java.util.concurrent.threadpoolexecutor worker.run threadpoolexecutor.java:908 na:1.6.0_20 java.lang.thread.run thread.java:619 na:1.6.0_20 19:42:41.420 jackrabbit-pool-3 debug o.a.j.core.query.lucene.indexmerg worker finish 19:42:41.839 main info o.a.j.c.p.b.derbypersistencemanag databas repository/workspaces/default/db shutdown problem reproduc appar lucen index close indexmerg worker thread termin root caus seem atomicboolean indexmerger.worker.termin alway true enclos patch solv problem use case
provid jackrabbitnod setmixin string mixinnam method assum follow scenario mixin declar mandatori properti p mixin extend node n mixin a' 'd like migrate/downgrad node n mixin current 's easi way replac assign mixin assign first result nop sinc would redund remov first remov mandatori properti p. new method setmixin string would allow migrat node mixin preserv share content semant setmixin string would similar node.setprimarytyp string
tostr caus stackoverflowerror regress jcr-2763
jcr like node name possibl exact match node name would use also use jcr like node name
typo nodetyperegistri seem littl typo introduc nodetyperegistri illustr stack trace caus javax.jcr.repositoryexcept intern error invalid resourc nodetypes/custom_nodetypes.xml org.apache.jackrabbit.core.nodetype.nodetyperegistry. init nodetyperegistry.java:703 jackrabbit-core-2.2-snapshot.jar:2.2-snapshot org.apache.jackrabbit.core.repositoryimpl.createnodetyperegistri repositoryimpl.java:422 jackrabbit-core-2.2-snapshot.jar na org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:294 jackrabbit-core-2.2-snapshot.jar na happen use dbfilesystem root filesystem n't caus problem 2.1.1 patch attach ticket correct issu
initi seededsecurerandom may slow system read /dev/random slow altern seed algorithm use initi org.apache.jackrabbit.core.id.seededsecurerandom singleton may slow synchron thread call seededsecurerandom.getinst wait 1 second singleton initi time would like add entropi altern seed algorithm
restor node fail partial done within xa transact problem occur follow sequenc step 1 creat version node child grandchild 2 perform check-in version node give version-label 3 perform restor use version-label 4 access grandchild step 4 fail step 3 execut within transact transact use step 4 succeed test-cas attach execut within xatest.java http //svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-core/src/test/java/org/apache/jackrabbit/core/xatest.java public void testrestor throw except session session null tri session gethelp .getsuperusersess make sure testnod exist begin test nodeiter ni session.getrootnod .getnod ni.hasnext node anod ni.nextnod anode.getnam .equal testnod anode.remov 1 creat testnod child grandchild session.getrootnod .addnod testnod .addmixin nodetype.mix_version session.getrootnod .getnod testnod .addnod child .addnod grandchild session.sav 2 check testnod give version-label version version session.getworkspac .getversionmanag .checkin session.getrootnod .getnod testnod .getpath session.getworkspac .getversionmanag .getversionhistori session.getrootnod .getnod testnod .getpath .addversionlabel version.getnam testlabel fals 3 restor label usertransact utx new usertransactionimpl session utx.begin session.getworkspac .getversionmanag .restorebylabel session.getrootnod .getnod testnod .getpath testlabel true utx.commit 4 tri get grandchild fail restor done within transact session.getrootnod .getnod testnod .getnod child .getnod grandchild final session null session.logout
jcamanagedconnectionfactori chain caus except jcamanagedconnectionfactori method opensess createrepositori throw resourceexcept without set caus except result actual error swallow silent step run code point reveal actual error eg persist store configur error appear pool except jukka zit 12-oct-2010 said constructor avail j2ee version 1.3 ve use resourceexception.setlinkedexcept method see jcr-761 address need could either upgrad platform requir j2ee 1.4 start use j2se method exception.initcaus instead setlinkedexcept file improv issu jira
qpropertydefinitionimpl.equ implement incorrect
implement search facil user group implement search facil user group support search user and/or group certain properti valu either direct user/group node sub node full text search user and/or group node sub node inclusion/exclus base group membership i.e restrict search member group group certain member order page
deprec non-bundl persist manag bundl persist recommend default sinc jackrabbit 1.3 littl reason anyon use non-bundl persist anymor thus 'd like deprec non-bundl pms jackrabbit 2.2 target remov jackrabbit 3.0
deprec non-pool bundl db persist manag jcr-1456 jackrabbit 2.0 introduc databas connect pool decid keep exist databas bundl persist manag intact avoid potenti regress n't seen problem even though pool bundl persist default sinc 2.0 releas think would safe deprec non-pool bundl db pms order remov duplic code alreadi complic chang within o.a.j.persist 'd also take extra step make o.a.j.p.bundl class extend respect o.a.j.p.pool class would automat allow also old non-pool configur benefit connect pool
add isdeclaredmemb method group suggest add method check whether authoriz declar member group current method check membership includ indirect membership
jackrabbit utilit upgrad jackrabbit 2.1.0 'm includ patch jcrutil project sandbox s3 datastor work 2.1.0 well vfs also use tika mime type resolut pleas look feel free improv someth play n't stress test
concurrentmodificationexcept sessionitemstatemanager.getidofroottransientnodest sessionitemstatemanager.getidofroottransientnodest throw concurrentmodificationexcept line 607 's snippet code code nodeid id candidateid nodeid.equ id || hiermgr.isancestor id nodeid alreadi candid descend thereof skip skip true break hiermgr.isancestor nodeid id candid descend remov candidateids.remov id code ca n't use collection.remov object middl iter probabl chang use iterator.remov code iter nodeid nodeiditor candidateids.iter nodeiditor.hasnext nodeid id nodeiditor.next nodeid.equ id || hiermgr.isancestor id nodeid alreadi candid descend thereof skip skip true break hiermgr.isancestor nodeid id candid descend remov nodeiditor.remov code idea could differ workaround issu
hop 0 sampl app n't exit on-daemon thread pool-1-thread-1 start sampl app hop 0 hop sampl app repositori directori applic n't exit non-daemon thread name pool-1-thread-1
lock expir almost immedi timeouthint long.max_valu given javax.jcr.lock.lockmanag api lock string abspath boolean isdeep boolean issessionscop long timeouthint string ownerinfo timeouttim second comput follow o.a.j.core.lock.lockinfo updatetimeouttim long system.currenttimemilli 999 1000 round this.timeouttim timeouthint timeouthandl o.a.j.core.lock.lockmanagerimpl run everi second check whether timeout expir o.a.j.core.lock.lockinfo isexpir public boolean isexpir return timeouttim long.max_valu timeouttim 1000 system.currenttimemilli obvious latter condit true begin replac trick
error creat db2 tabl journal hi guy first congratul fantast job 'm deploy jackrattbit-jca resourc adapt cluster webspher environ use db2 store data realiz miss code add db2 support jackrabbit-cor org.apache.jackrabbit.core.util.db method guessvalidationqueri last one adjust follow add db2 valid queri privat string guessvalidationqueri string url url.contain derbi return valu 1 els url.contain mysql return select 1 els url.contain sqlserver || url.contain jtds return select 1 els url.contain oracl return select validationqueri dual els url.contain h2 return select 1 els url.contain db2 return valu 1 log.warn fail guess valid queri url url return null final touch ddl build tabl jackrabbit-cor src/main/resources/org/apache/jackrabbit/core/journ ad file name db2.dll follow actual copi derby.dl licens apach softwar foundat asf one contributor licens agreement see notic file distribut work addit inform regard copyright ownership asf licens file apach licens version 2.0 licens may use file except complianc licens may obtain copi licens http //www.apache.org/licenses/license-2.0 unless requir applic law agre write softwar distribut licens distribut basi without warranti condit kind either express impli see licens specif languag govern permiss limit licens creat tabl schemaobjectprefix journal revision_id bigint null journal_id varchar 255 producer_id varchar 255 revision_data blob creat uniqu index schemaobjectprefix journal_idx schemaobjectprefix journal revision_id creat tabl schemaobjectprefix global_revis revision_id bigint null creat uniqu index schemaobjectprefix global_revision_idx schemaobjectprefix global_revis revision_id creat tabl schemaobjectprefix local_revis journal_id varchar 255 null revision_id bigint null insert one revis counter record help avoid race condit insert schemaobjectprefix global_revis valu 0 best regard j marco
allow overrid lockmanag creation current repository.getlockmanag intern creat new lock manag need jackrabbit provid extens point jcr repositori extend creat custom lock manag
allow whitespac base64 encod binari field xml import file import file use session.importxml binari properti valu base64 encod howev put whitespac xml file binari becom long line file manag whilespac could put common base base64 encod file
overwrit cach entri warn use multipl concurr session ll find *lots* log entri like 03.11.2010 21:17:03 *warn itemstatereferencecach overwrit cach entri ad79ca57-5eb1-4b7d-a439-a9fd73cc8c5a itemstatereferencecache.java line 176 actual legitim warn sinc 's siginific risk data loss/inconsist involv appar regress chang introduc jcr-2699 specif svn r1004223
login perform drop use defaultaccessmanag jcr-2700 caus drop login perform use defaultaccessmanag drop caus initi lru map use compiledpermissionsimpl
repositori unlock version manag init fail assert enabl follow test case work expect except assert enabl java -ea connect conn drivermanager.getconnect jdbc derbi repository/version/db create=tru statement stat conn.createstat stat.execut creat tabl version_bundl id int transientrepositori rep new transientrepositori tri rep.login new simplecredenti new char 0 catch except e ignor rep.shutdown stat.execut drop tabl version_bundl new transientrepositori .login new simplecredenti new char 0 reason assert repositorycontext.getinternalversionmanag assert repositori lock releas repositori shutdown
upgrad tika 0.8 apach tika version 0.8 avail upgrad benefit various fix improv includ version
finegrainedismlock problem finegrainedismlock strategi suffer deadlock issu report jcr-2753 defaultismlock addit finegrainedismlock class also fail function proper xa transact sinc use current thread instead current transact id track re-entr
consist check/fix n't work psql persist manag psql n't save blob direct tabl row instead save link put binari stream somewher els general consist check method bundledbpersistencemanag n't take account ve fix chang getbyt blob method bundledbpersistencemanag getbyt resultset overrid psql
replac trackinginpustream common io trackinginputstream class jackrabbit-cor implement essenti function common io class countinginputstream
add repositoryexcept jackrabbitaccesscontrollist getrestrictionnam getrestrictiontyp throughout jcr jackrabbit api method includ name process defin throw repositoryexcept case error relat name process due lack specif except javax.jcr packag space unfortun forgot jackrabbitaccesscontrollist jackrabbitaccesscontrolentri latter alreadi address 2.2 releas would like fix jackrabbitaccesscontrollist interfac well subsequ also fix implement current proper cope name
fals predic alway return true org.apache.jackrabbit.spi.commons.iterator.predicates..fals alway return true instead fals
test depend jackrabbit core o.a.j.c.security.user.xpathqueryevalu o.a.j.c.security.user.xpathqueryevalu wrong import import org.apache.jackrabbit.test.api.util.text instead import org.apache.jackrabbit.util.text
internalversionmanag deadlock chang jcr-2753 expos internalversionmanag class follow deadlock scenario java.lang.thread.st wait object monitor java.lang.object.wait nativ method wait 0x0000000085edb5a0 org.apache.jackrabbit.core.state.defaultismlock java.lang.object.wait object.java:485 org.apache.jackrabbit.core.state.defaultismlocking.acquirereadlock defaultismlocking.java:92 lock 0x0000000085edb5a0 org.apache.jackrabbit.core.state.defaultismlock org.apache.jackrabbit.core.version.internalversionmanagerbase.acquirereadlock internalversionmanagerbase.java:192 org.apache.jackrabbit.core.version.internalversionmanagerimpl.getitem internalversionmanagerimpl.java:324 org.apache.jackrabbit.core.version.internalversionmanagerbase.createinternalversionitem internalversionmanagerbase.java:761 org.apache.jackrabbit.core.version.internalversionmanagerimpl.getitem internalversionmanagerimpl.java:329 lock 0x0000000085edb770 org.apache.commons.collections.map.referencemap org.apache.jackrabbit.core.version.internalversionmanagerbase.getversionhistori internalversionmanagerbase.java:130 org.apache.jackrabbit.core.version.internalversionmanagerimpl.getversionhistori internalversionmanagerimpl.java:70 org.apache.jackrabbit.core.version.internalversionmanagerimpl 4.run internalversionmanagerimpl.java:415 org.apache.jackrabbit.core.version.internalversionmanagerimpl dynamicescfactory.dosourc internalversionmanagerimpl.java:720 org.apache.jackrabbit.core.version.internalversionmanagerimpl.checkin internalversionmanagerimpl.java:407 org.apache.jackrabbit.core.version.internalxaversionmanager.checkin internalxaversionmanager.java:251 org.apache.jackrabbit.core.version.versionmanagerimplbase.checkoutcheckin versionmanagerimplbase.java:190 org.apache.jackrabbit.core.versionmanagerimpl.access 100 versionmanagerimpl.java:72 org.apache.jackrabbit.core.versionmanagerimpl 1.perform versionmanagerimpl.java:121 org.apache.jackrabbit.core.versionmanagerimpl 1.perform versionmanagerimpl.java:114 org.apache.jackrabbit.core.session.sessionstate.perform sessionstate.java:200 org.apache.jackrabbit.core.versionmanagerimpl.perform versionmanagerimpl.java:95 org.apache.jackrabbit.core.versionmanagerimpl.checkin versionmanagerimpl.java:114 org.apache.jackrabbit.core.versionmanagerimpl.checkin versionmanagerimpl.java:100 java.lang.thread.st block object monitor org.apache.jackrabbit.core.version.internalversionmanagerimpl.getitem internalversionmanagerimpl.java:327 wait lock 0x0000000085edb770 org.apache.commons.collections.map.referencemap org.apache.jackrabbit.core.version.internalxaversionmanager.getitem internalxaversionmanager.java:442 org.apache.jackrabbit.core.version.internalversionmanagerbase.getversionhistori internalversionmanagerbase.java:130 org.apache.jackrabbit.core.version.internalxaversionmanager.getversionhistori internalxaversionmanager.java:58 org.apache.jackrabbit.core.version.versionhistoryimpl.getinternalversionhistori versionhistoryimpl.java:78 org.apache.jackrabbit.core.version.versionhistoryimpl.issam versionhistoryimpl.java:278 org.apache.jackrabbit.core.version.versionhistoryimpl.checkownvers versionhistoryimpl.java:326 org.apache.jackrabbit.core.version.versionhistoryimpl.getversionlabel versionhistoryimpl.java:218 problem referencemap synchron object 0x0000000085edb770 interfer general read/writ lock mechan
offset work correct user/group queri restrict group member user/group queri scope *and* limit claus offset work correct builder.setscop contributor fals builder.setlimit 100 50 case result often offset 100 instead place 100
crash ad node cluster big journal psql db ad new node cluster big journal psql databas applic run memori new node crash except applic exit code 137 's psql fetchsiz specifi result queri load memori pass applic furthermor specif fetchsiz work transact mode effect autocommit true configur connectionhelp
make defaultsecuritymanag default secur manag instead simplesecuritymanag jcr-2164 made defaultsecuritymanag default secur manag test run howev repository.xml includ jackrabbit core one cluster test still refer simplesecuritymanag consist reason think make sens chang place defaultsecuritymanag
poor perform isdescendantnod sql 2 queri use latest sourc code notic bad perform sql-2 queri use isdescendantnod constraint larg sub-tre exampl queri select jnt news news isdescendantnod news /root/sit order news date desc execut 600ms select jnt news news order news date desc execut 4ms look problem yourkit profil seem culprit constraint build use recurs lucen search build list descend node id privat queri getdescendantnodequeri descendantnod dn jackrabbitindexsearch searcher throw repositoryexcept ioexcept booleanqueri queri new booleanqueri tri linkedlist nodeid id new linkedlist nodeid nodeimpl ancestor nodeimpl session.getnod dn.getancestorpath ids.add ancestor.getnodeid ids.isempti string id ids.removefirst .tostr queri q new jackrabbittermqueri new term fieldnames.par id queryhit hit searcher.evalu q scorenod sn hits.nextscorenod sn null query.add q ids.add sn.getnodeid sn hits.nextscorenod sn null catch pathnotfoundexcept e query.add new jackrabbittermqueri new term fieldnames.uuid invalid-node-id never match return queri exampl generat 2800 lucen queri culprit wonder would n't faster retriev id use jcr retriev list child id probabl also miss n't seem find perform test constraint
unclos thread jackrabbit tomcat integr test ad jcr-2831 show follow warn jackrabbit thread remain place even repositori close 08-dec-2010 12:14:58 org.apache.catalina.loader.webappclassload clearreferencesthread sever web applic appear start thread name timer-1 fail stop like creat memori leak 08-dec-2010 12:14:58 org.apache.catalina.loader.webappclassload clearreferencesthread sever web applic appear start thread name dynamicpooledexecutor fail stop like creat memori leak 08-dec-2010 12:14:58 org.apache.catalina.loader.webappclassload clearreferencesthread sever web applic appear start thread name timer-2 fail stop like creat memori leak would best close background thread even singleton daemon thread thus unlik caus troubl left unattend
test failur jcr-rmi jcr2dav integr test current fail jcr-rmi testclonenodesaccessdeni org.apache.jackrabbit.test.api.workspaceclonetest testcopynodesaccessdeni org.apache.jackrabbit.test.api.workspacecopybetweenworkspacestest testcopynodesaccessdeni org.apache.jackrabbit.test.api.workspacecopytest testmovenodesaccessdeni org.apache.jackrabbit.test.api.workspacemovetest testimperson org.apache.jackrabbit.test.api.impersonatetest testcheckpermiss org.apache.jackrabbit.test.api.checkpermissiontest testremoveitem4 org.apache.jackrabbit.test.api.sessionremoveitemtest testreadonlypermiss org.apache.jackrabbit.test.api.haspermissiontest testgetprivileg org.apache.jackrabbit.test.api.security.rsessionaccesscontroldiscoverytest testnothasprivileg org.apache.jackrabbit.test.api.security.rsessionaccesscontroldiscoverytest testgetapplicablepolici org.apache.jackrabbit.test.api.security.rsessionaccesscontrolpolicytest testgetpolici org.apache.jackrabbit.test.api.security.rsessionaccesscontrolpolicytest testgeteffectivepolici org.apache.jackrabbit.test.api.security.rsessionaccesscontrolpolicytest testmovenod org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testsetproperti org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testsetvalu org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testdeletenod org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testdeleteproperti org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testworkspacemovenod org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testcopynod org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest jcr2dav testclonenodesaccessdeni org.apache.jackrabbit.test.api.workspaceclonetest testcopynodesaccessdeni org.apache.jackrabbit.test.api.workspacecopybetweenworkspacestest testcopynodesaccessdeni org.apache.jackrabbit.test.api.workspacecopytest testmovenodesaccessdeni org.apache.jackrabbit.test.api.workspacemovetest testcheckpermiss org.apache.jackrabbit.test.api.checkpermissiontest testremoveitem4 org.apache.jackrabbit.test.api.sessionremoveitemtest testreadonlypermiss org.apache.jackrabbit.test.api.haspermissiontest testmovenod org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testsetproperti org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testsetvalu org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testdeletenod org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testdeleteproperti org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testworkspacemovenod org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest testcopynod org.apache.jackrabbit.test.api.security.rsessionaccesscontroltest
tika regress 0.8 notabl problem tika 0.8 name tika-548 tika-556 may advers affect user jackrabbit 2.2 sinc n't tika 0.9 releas avail yet ll add workaround issu jackrabbit
inconsist everyon group creat user manag current everyon princip use defin ace appli regular user repositori hardcod princip manag lead inconsist group user creat within user manag princip name everyon
avoid path resolut case non-wildcard ace follow-up jcr-2573 ad abil specifi wildcard-ac-entri default resourc base access control manag lead alway resolv id pass accesscontrolprovid canread order abl proper evalu wildcard-ac present could improv minor refactor postpon path resolut omit wildcard-ac compar
constraintsplitter.getselectornam n't support fulltextsearch constraint constraint type fulltextsearch miss test type org.apache.jackrabbit.core.query.lucene.join.constraintsplitter.getselectornam constraint method submit qom queri full-text constraint throw javax.jcr.unsupportedrepositoryoperationexcept repositori report support queri session.getrepositori .getdescriptorvalu repository.query_full_text_search_support .getboolean return true typic stack trace javax.jcr.unsupportedrepositoryoperationexcept unknown constraint type contain r. jcr titl rega -apa org.apache.jackrabbit.core.query.lucene.join.constraintsplitter.getselectornam constraintsplitter.java:177 org.apache.jackrabbit.core.query.lucene.join.constraintsplitter.getselectornam constraintsplitter.java:195 org.apache.jackrabbit.core.query.lucene.join.constraintsplitter.getselectornam constraintsplitter.java:157 org.apache.jackrabbit.core.query.lucene.join.constraintsplitter.split constraintsplitter.java:106 org.apache.jackrabbit.core.query.lucene.join.constraintsplitter.split constraintsplitter.java:104 org.apache.jackrabbit.core.query.lucene.join.constraintsplitter. init constraintsplitter.java:80 org.apache.jackrabbit.core.query.lucene.join.queryengine.execut queryengine.java:162 org.apache.jackrabbit.core.query.lucene.join.queryengine.execut queryengine.java:147 org.apache.jackrabbit.core.query.queryobjectmodelimpl.execut queryobjectmodelimpl.java:114
maxcount work correct user/group queri restrict group member user/group queri scope *and* limit claus maxcount work correct builder.setscop contributor fals builder.setlimit 0 50 case result might contain result relat jcr-2829
nodebasedgroup ismemb princip shortcut everyon group
usermanagerimpl typo compatiblejr16 config option constant
rmi problem prevent proper startup jackrabbit webapp troubl bind repositori rmi registri prevent entir jackrabbit webapp start proper sinc rmi seldom primari function webapp 's appropri simpli log warn case
authent mechan base login token implement authent mechan apart simpl credenti allow credenti built login token could reli fact jackrabbit store user data repositori ad addit inform generat token expir time addit secur paramet could store addit subnod user use match login altern way authent system
support multi-selector constraint join queri current join implement n't support constraint refer one selector exampl follow queri possibl select type inner join type b a.foo b.bar a.baz x b.baz y' limit result way join execut split queri per-selector compon merg result base given join condit simpl often ineffici solut would process constraint post-process filter like alreadi complex constraint type
add option make sort user/group queri case insensit sort string properti current case sensit user/group search way specifi whether sort shuld case sensit
writer block forev wait updat oper thread 1 call session.sav write lock thread 2 xa prepar wait thread 1 finegrainedismlocking.acquirewritelock thread 1 's save call shareditemstatemanager.upd end perform write-lock downgrad read-lock end updat end call readlock.releas finegrainedismlocking.readlockimpl releas think activewriterid current transat notifi writer activewriterid reset downgrad seem relat jcr-2753 thread 1 wait forev
upgrad latest slf4j logback fix jcr-2836 ran lbclassic-183 1 's fix recent logback releas get fix upgrad logback slf4j jackrabbit 2.3 1 http //jira.qos.ch/browse/lbclassic-183
make open scope lock recover lock token open scope lock current tie session creat lock session die whatev reason way recov lock unlock node theoret way ad lock token anoth session case lock token avail fortun spec allow relax behaviour think would make sens allow session user unlock node still complianc spec would make unlock lock node possibl programmat way
make version recoveri extens current jcr-2551 recoveri lost version histori implement within protect method repositoryimpl workspaceinfo.doiniti howev implement way ca n't re-us subclass repositorycheck public class creat new method doversionrecoveri contain code jcr-2551
intern timeout handl transactioncontext xa spec conform problem 2 phase transact xa spec permit rb* return code respons xa_commit xa spec say follow rb* return code xa_commit section resourc manag commit work done behalf transact branch upon return resourc manag roll back branch work releas held resourc valu may return tmonephas set flag essenti two return code xa_commit j2ee contain handl sensibl xa_ok normal case xa_rmfail rmfail caus contain retri commit transact return code result heurist transact outcom non-atom xa environ tmonephas set flag xa_rbtimeout permit return code contain transact servic anyth ensur atom outcom xaresourc fail honour promis abl commit made answer xa_ok respons xa_prepar intern timeout handl rollback jackrabbit xaresourc time exceed prepar commit commit method alway throw xa_rbtimeout handl timeout intern make contain 2 phase transact
jackrabbit log nullpointerexcept shutdown version manag n't initi open repositori fail version manag initi shutdown method log nullpointerexcept tri close version manag nuisanc
session importxml ca n't handl proper uuid collis user insuffici permiss import referenc node node uuid workspac session suffici permiss read import fail matter importuuidbehavior chosen xml import success anoth repositori user read access sessionimpl.java public nodeimpl getnodebyid nodeid id tri return nodeimpl getitemmanag .getitem id catch accessdeniedexcept ade throw new itemnotfoundexcept id.tostr sessionimporter.java public void startnod nodeinfo nodeinfo list propinfo node null creat node id null els potenti uuid conflict nodeimpl conflict tri conflict session.getnodebyid id catch itemnotfoundexcept inf conflict null conflict null resolv uuid conflict jcr 1.0 spec say lack read access item block access inform content item inform exist item probabl true intern import otherwis mean read access entir workspac must grant user could success use import_uuid_create_new behaviour
use out-of-process text extract upcom tika 0.9 releas contain high use out-of-process text extract featur tika-416 use also jackrabbit
dead lock defaultismlock jackrabbit 2.2 's org.apache.jackrabbit.core.state.defaultismlock defect caus dead lock concurr use case use case follow 1 thread appli read lock activ reader hold read lock 2 thread b appli write lock thread b wait thread 's read end could see code snippet jackrabbit sourc readercount current activ reader writerswaiting++ writerid null issamethreadid writerid currentid readercount 0 wait 3 thread appli anoth read lock wait sinc writer wait dead lock happen writerid null writercount 0 issamethreadid writerid currentid writerswait 0 wait sinc lock defaultismlock global lock think thread alreadi hold reader lock could get reader lock creat fix idea
cluster node type register/unregist deadlock deadlock occur two cluster node concurr regist unregist node type reason nodetyperegistry.registernodetyp synchron call eventchannel.regist ntdef call abstractjournal.lockandsync tri lock abstractjournal.rwlock hand abstractjournal.sync lock abstractjournal.rwlock call nodetyperecord.process call nodetyperegistry.unregisternodetyp also synchron possibl solut either nodetyperegistri n't synchron object call eventchannel method nodetyperegistri lock abstractjournal.rwlock synchron might solut
failur connect mysql databas jackrabbit start session leav .lock file repositori subsequ session creat thread investig robust jackrabbit face unexpect databas error databas unavail particular case attempt start jackrabbit session use transientrepositori databas yet run correct fail howev attempt creat anoth session within thread short except occur say repositori alreadi lock would expect repositori folder lock mayb code meant remov .lock file trigger uncaught except pleas see attach file -a test class reproduc problem -mi repository.xml config -the log file quantel.txt detail stack trace
accesscontrolmanag setpolici may fail new applic polici despit jcr modifyaccesscontrol privileg grant sequenc accesscontrolmanager.getapplicablepolici modifi accesscontrolmanag setpolici fail due bug ac evalu target ac-item yet exist case wrong parent node use ac-evalu
transient repositori use configur datasourc transientrepositori use repositori configur datasourc construct verifi oracl derbi configur transientrepositori close first time connectionfactori class set boolean valu name close true thereaft use connectionfactori throw runtim except follow stacktrac thrown second attempt util repositori 2011-01-25 08:12:14 databasefilesystem error fail initi file system java.lang.illegalstateexcept factori alreadi close org.apache.jackrabbit.core.util.db.connectionfactory.sanitycheck connectionfactory.java:213 org.apache.jackrabbit.core.util.db.connectionfactory.getdatabasetyp connectionfactory.java:134 org.apache.jackrabbit.core.fs.db.dbfilesystem.getdatasourc dbfilesystem.java:228 org.apache.jackrabbit.core.fs.db.databasefilesystem.init databasefilesystem.java:190 org.apache.jackrabbit.core.config.repositoryconfigurationpars 6.getfilesystem repositoryconfigurationparser.java:1057 org.apache.jackrabbit.core.config.repositoryconfig.getfilesystem repositoryconfig.java:892 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:284 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:602 org.apache.jackrabbit.core.transientrepositori 1.getrepositori transientrepository.java:179 org.apache.jackrabbit.core.transientrepository.startrepositori transientrepository.java:279 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:375 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:123 com.intellij.rt.execution.application.appmain.main appmain.java:115 2011-01-25 08:12:14 repositoryimpl error fail start repositori file system initi failur javax.jcr.repositoryexcept file system initi failur org.apache.jackrabbit.core.config.repositoryconfigurationpars 6.getfilesystem repositoryconfigurationparser.java:1060 org.apache.jackrabbit.core.config.repositoryconfig.getfilesystem repositoryconfig.java:892 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:284 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:602 org.apache.jackrabbit.core.transientrepositori 1.getrepositori transientrepository.java:179 org.apache.jackrabbit.core.transientrepository.startrepositori transientrepository.java:279 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:375 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:123 transientrepositorytest.addnodetorepositori transientrepositorytest.java:32 transientrepositorytest.shouldnotfailwhenusingtransientrepositorytwic transientrepositorytest.java:26 com.intellij.rt.execution.application.appmain.main appmain.java:115 caus org.apache.jackrabbit.core.fs.filesystemexcept fail initi file system org.apache.jackrabbit.core.fs.db.databasefilesystem.init databasefilesystem.java:210 org.apache.jackrabbit.core.config.repositoryconfigurationpars 6.getfilesystem repositoryconfigurationparser.java:1057 42 caus java.lang.illegalstateexcept factori alreadi close org.apache.jackrabbit.core.util.db.connectionfactory.sanitycheck connectionfactory.java:213 org.apache.jackrabbit.core.util.db.connectionfactory.getdatabasetyp connectionfactory.java:134 org.apache.jackrabbit.core.fs.db.dbfilesystem.getdatasourc dbfilesystem.java:228 org.apache.jackrabbit.core.fs.db.databasefilesystem.init databasefilesystem.java:190 43 2011-01-25 08:12:14 repositoryimpl error error close version manag java.lang.nullpointerexcept org.apache.jackrabbit.core.repositoryimpl.doshutdown repositoryimpl.java:1117 org.apache.jackrabbit.core.repositoryimpl.shutdown repositoryimpl.java:1063 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:388 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:602 org.apache.jackrabbit.core.transientrepositori 1.getrepositori transientrepository.java:179 org.apache.jackrabbit.core.transientrepository.startrepositori transientrepository.java:279 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:375 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:123 transientrepositorytest.addnodetorepositori transientrepositorytest.java:32 transientrepositorytest.shouldnotfailwhenusingtransientrepositorytwic transientrepositorytest.java:26 com.intellij.rt.execution.application.appmain.main appmain.java:115 2011-01-25 08:12:14 repositoryimpl error addit startup fail anoth unexpect problem occur shut repositori java.lang.nullpointerexcept org.apache.jackrabbit.core.repositoryimpl.doshutdown repositoryimpl.java:1136 org.apache.jackrabbit.core.repositoryimpl.shutdown repositoryimpl.java:1063 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:388 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:602 org.apache.jackrabbit.core.transientrepositori 1.getrepositori transientrepository.java:179 org.apache.jackrabbit.core.transientrepository.startrepositori transientrepository.java:279 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:375 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:123 transientrepositorytest.addnodetorepositori transientrepositorytest.java:32 transientrepositorytest.shouldnotfailwhenusingtransientrepositorytwic transientrepositorytest.java:26 com.intellij.rt.execution.application.appmain.main appmain.java:115 javax.jcr.repositoryexcept file system initi failur org.apache.jackrabbit.core.config.repositoryconfigurationpars 6.getfilesystem repositoryconfigurationparser.java:1060 org.apache.jackrabbit.core.config.repositoryconfig.getfilesystem repositoryconfig.java:892 org.apache.jackrabbit.core.repositoryimpl. init repositoryimpl.java:284 org.apache.jackrabbit.core.repositoryimpl.cr repositoryimpl.java:602 org.apache.jackrabbit.core.transientrepositori 1.getrepositori transientrepository.java:179 org.apache.jackrabbit.core.transientrepository.startrepositori transientrepository.java:279 org.apache.jackrabbit.core.transientrepository.login transientrepository.java:375 org.apache.jackrabbit.commons.abstractrepository.login abstractrepository.java:123 transientrepositorytest.addnodetorepositori transientrepositorytest.java:32 transientrepositorytest.shouldnotfailwhenusingtransientrepositorytwic transientrepositorytest.java:26 com.intellij.rt.execution.application.appmain.main appmain.java:115 caus org.apache.jackrabbit.core.fs.filesystemexcept fail initi file system org.apache.jackrabbit.core.fs.db.databasefilesystem.init databasefilesystem.java:210 org.apache.jackrabbit.core.config.repositoryconfigurationpars 6.getfilesystem repositoryconfigurationparser.java:1057 42 caus java.lang.illegalstateexcept factori alreadi close org.apache.jackrabbit.core.util.db.connectionfactory.sanitycheck connectionfactory.java:213 org.apache.jackrabbit.core.util.db.connectionfactory.getdatabasetyp connectionfactory.java:134 org.apache.jackrabbit.core.fs.db.dbfilesystem.getdatasourc dbfilesystem.java:228 org.apache.jackrabbit.core.fs.db.databasefilesystem.init databasefilesystem.java:190 43
datastor chang modifi date fail file open read window file open read window n't allow chang last modifi time use file.setlastmodifi org.apache.jackrabbit.core.data.datastoreexcept fail updat record modifi date 2ac72495fd1e270777821b8a872903c79c84a8d9 org.apache.jackrabbit.core.data.filedatastore.addrecord filedatastore.java:250 org.apache.jackrabbit.core.value.blobindatastore.getinst blobindatastore.java:119 org.apache.jackrabbit.core.value.internalvalue.getblobfilevalu internalvalue.java:619 org.apache.jackrabbit.core.value.internalvalue.cr internalvalue.java:369 org.apache.jackrabbit.core.value.internalvaluefactory.cr internalvaluefactory.java:94 org.apache.jackrabbit.core.value.valuefactoryimpl.createbinari valuefactoryimpl.java:74 test case possibl workaround import java.io.fil import java.io.fileinputstream import java.io.randomaccessfil public class test public static void main string arg throw except string name test.txt file test new file name randomaccessfil r new randomaccessfil name rw r.write 0 r.close long mod test.lastmodifi thread.sleep 3000 fileinputstream new fileinputstream name test.setlastmodifi test.lastmodifi +1 test.canwrit system.out.println ca n't write name els system.out.println canwrit ok r new randomaccessfil name rw int old r.read r.seek 0 r.write old r.close els system.out.println setlastmodifi ok system.out.println modifi old mod system.out.println modifi test.lastmodifi in.clos system.out.println input close test.setlastmodifi test.lastmodifi +1 test.canwrit system.out.println ca n't write name els system.out.println canwrit ok els system.out.println setlastmodifi ok new file name .delet
add way locat full text extract problem full text index binari document fail various reason current log generic error messag case make difficult user locat problem review reindex improv make log inform ad mechan locat troublesom document
exclud netcdf depend discuss mail list netcdf depend get tika sinc version 0.8 use rare case thus justifi ad size overhead thus exclud default instal
org.apache.jackrabbit.server.io.ioutil gettempfil miss dot tmp suffix line 168 file tmpfile file.createtempfil __importcontext tmp suffix tmp use dot miss file tmpfile file.createtempfil __importcontext .tmp
extend consist check bundledbpersistencemanag 's fix child-par relat could happen child node childnodeentri parent node get someth like javax.jcr.itemnotfoundexcept fail build path node1 parentnod child entri node1 tri retriev path node1 handl case fix consist check
sql azur support cluster index tri instal jackrabbit window azur cloud use sql azur one limit sql azur need cluster index work current implement jackrabbit creat index cluster
save fail set binari properti twice set binari properti twice discard blob valu first properti state remov chang changelog result error save javax.jcr.repositoryexcept blobfilevalu dispos org.apache.jackrabbit.core.value.refcountingblobfilevalue.copi refcountingblobfilevalue.java:105 attach patch add respect test jcr2spi test
deadlock version oper cluster environ version oper cluster may end deadlock write oper version store acquir version manag 's write lock n1.vw subsequ cluster journal 's write lock n1.jw anoth cluster node 's write oper workspac acquir journal 's write lock n2.jw first process journal record log chang concern version store version manag 's read lock n2.vr acquir order deliv first cluster node reach n1.vw second reach n2.jw deadlock scenario take place second cluster node synchron latest journal chang reach n2.jr first cluster node n1.vw
databasejourn java.lang.illegalstateexcept alreadi batch mode use databas journal databas fail follow stack trace java.lang.illegalstateexcept alreadi batch mode org.apache.jackrabbit.core.util.db.connectionhelper.startbatch connectionhelper.java:212 org.apache.jackrabbit.core.journal.databasejournal.dosync databasejournal.java:449 org.apache.jackrabbit.core.journal.abstractjournal.lockandsync abstractjournal.java:254 org.apache.jackrabbit.core.journal.defaultrecordproducer.append defaultrecordproducer.java:51 org.apache.jackrabbit.core.cluster.clusternod workspaceupdatechannel.updatecr clusternode.java:539 org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:559 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:1457 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:1487 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:351 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:354
node.orderbefor jackrabbitnode.renam check abil modifi children-collect parent node current implement node.orderbefor jackrabbitnode.renam perform valid execut move oper includ remov origin node howev method mention includ manipul child-node-collect parent subset current check therefor permiss check adjust accord
move tika-pars depend deploy packag discuss mail list would better tika-pars depend parser librari pull transit includ deploy packag direct jackrabbit-cor would make easier peopl set custom lightweight deploy partial full text extract function ll first need wait tika 0.9 current custom pdfparser class jackrabbit-cor workaround problem tika 0.8 time thorough review transit parser depend includ least rome bouncycastl librari flag potenti unnecessari
add sessionimpl isadminorsystem sever place jackrabbit-cor need find execut session either systemsess correspond admin user current code analys session subject copi throughout jackrabbit-cor would like replac helper method sessionimpl
split privilegeregistri per-sess manag instanc repositori level registri order resolv privilegeregistri relat todo within jackrabbit-cor would like split method privilegeregistri use per-sess level includ jcr-name add manag class present session context consequ respons registri limit read/build privileg definit would present repositorycontext deprec method would cover manag addit name consist use nodetyp namespac
namespac comparison namespace.java n't work node return null expect empti string node return null node.getnamespaceuri namespace.empty_namespac expect empti string comparison fail knowledg null namespaceuri treat
occasion jca test failur discuss jcr-2870 jca packag test occasion fail assert failur transientrepository.startrepositori n't seen jcr-2870 n't look like chang could possibl trigger failur except perhap subt affect garbag collect thus 'm open new issu track separ problem base analysi far look like problem someth referencemap use transientrepositori track open session fact problem occur occasion system support assumpt relat non-determinist process like garbag collect
deadlock acl.entrycollector itemmanag 's anoth three-way deadlock ve encount thread hold downgrad sism write lock start deliv observ event synchron listen thread b want write someth block wait sism write lock sinc hold lock thread c want read someth block wait sism read lock sinc b wait lock normal scenario handl without problem 's problem session use thread c synchron observ listen attempt read someth repositori event deliveri case follow happen thread c hold itemmanag synchron lock higher call chain observ listen code call thread attempt read someth repositori block tri acquir itemmanag synchron lock sinc c hold principl scenario never happen observ listen much less synchron one never tri use session might alreadi use anoth thread unfortun entrycollector class o.a.j.core.security.authorization.acl follow guidelin lead deadlock shown thread 127.0.0.1 1297191119365 post /bin/wcmcommand http/1.0 nid=1179 state=block wait 0x11c329fd org.apache.jackrabbit.core.itemmanag lock 0x11c329fd org.apache.jackrabbit.core.itemmanag own 127.0.0.1 1297191138443 post /bin/wcmcommand http/1.0 id=67 org.apache.jackrabbit.core.itemmanager.getnod itemmanager.java:653 org.apache.jackrabbit.core.itemmanager.getnod itemmanager.java:605 org.apache.jackrabbit.core.sessionimpl.getnod sessionimpl.java:1406 org.apache.jackrabbit.core.security.authorization.acl.entrycollector.onev entrycollector.java:253 org.apache.jackrabbit.core.observation.eventconsumer.consumeev eventconsumer.java:246 org.apache.jackrabbit.core.observation.observationdispatcher.dispatchev observationdispatcher.java:214 org.apache.jackrabbit.core.observation.eventstatecollection.dispatch eventstatecollection.java:475 org.apache.jackrabbit.core.state.shareditemstatemanag update.end shareditemstatemanager.java:786 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:1488 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:349 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:354 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:324 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:328 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1141 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:920 thread b thread-2438 nid=2582 state=wait wait 0x166e790 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock lock 0x166e790 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock java.lang.object.wait nativ method java.lang.object.wait object.java:485 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock writerlock.acquir unknown sourc org.apache.jackrabbit.core.state.defaultismlock writelockimpl. init defaultismlocking.java:76 org.apache.jackrabbit.core.state.defaultismlock writelockimpl. init defaultismlocking.java:70 org.apache.jackrabbit.core.state.defaultismlocking.acquirewritelock defaultismlocking.java:64 org.apache.jackrabbit.core.state.shareditemstatemanager.acquirewritelock shareditemstatemanager.java:1808 org.apache.jackrabbit.core.state.shareditemstatemanager.access 200 shareditemstatemanager.java:112 org.apache.jackrabbit.core.state.shareditemstatemanag update.begin shareditemstatemanager.java:565 org.apache.jackrabbit.core.state.shareditemstatemanager.beginupd shareditemstatemanager.java:1458 org.apache.jackrabbit.core.state.shareditemstatemanager.upd shareditemstatemanager.java:1488 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:349 org.apache.jackrabbit.core.state.xaitemstatemanager.upd xaitemstatemanager.java:354 org.apache.jackrabbit.core.state.localitemstatemanager.upd localitemstatemanager.java:324 org.apache.jackrabbit.core.state.sessionitemstatemanager.upd sessionitemstatemanager.java:328 org.apache.jackrabbit.core.itemimpl.sav itemimpl.java:1141 org.apache.jackrabbit.core.sessionimpl.sav sessionimpl.java:920 thread c 127.0.0.1 1297191138443 post /bin/wcmcommand http/1.0 nid=67 state=wait wait 0xf820edb edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock readerlock lock 0xf820edb edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock readerlock java.lang.object.wait nativ method java.lang.object.wait object.java:485 edu.oswego.cs.dl.util.concurrent.writerpreferencereadwritelock readerlock.acquir unknown sourc org.apache.jackrabbit.core.state.defaultismlock readlockimpl. init defaultismlocking.java:102 org.apache.jackrabbit.core.state.defaultismlock readlockimpl. init defaultismlocking.java:96 org.apache.jackrabbit.core.state.defaultismlocking.acquirereadlock defaultismlocking.java:53 org.apache.jackrabbit.core.state.shareditemstatemanager.acquirereadlock shareditemstatemanager.java:1794 org.apache.jackrabbit.core.state.shareditemstatemanager.getitemst shareditemstatemanager.java:257 org.apache.jackrabbit.core.state.localitemstatemanager.getnodest localitemstatemanager.java:107 org.apache.jackrabbit.core.state.localitemstatemanager.getitemst localitemstatemanager.java:171 org.apache.jackrabbit.core.state.sessionitemstatemanager.getitemst sessionitemstatemanager.java:200 org.apache.jackrabbit.core.itemmanager.getitemdata itemmanager.java:391 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:337 org.apache.jackrabbit.core.itemmanager.getitem itemmanager.java:638 org.apache.jackrabbit.core.security.authorization.acl.aclprovid aclpermissions.canread aclprovider.java:507 lock java.lang.object 6ad9b475 org.apache.jackrabbit.core.security.defaultaccessmanager.canread defaultaccessmanager.java:251 org.apache.jackrabbit.core.query.lucene.queryresultimpl.isaccessgr queryresultimpl.java:374 org.apache.jackrabbit.core.query.lucene.queryresultimpl.collectscorenod queryresultimpl.java:353 org.apache.jackrabbit.core.query.lucene.queryresultimpl.getresult queryresultimpl.java:310 org.apache.jackrabbit.core.query.lucene.singlecolumnqueryresult. init singlecolumnqueryresult.java:70 org.apache.jackrabbit.core.query.lucene.queryimpl.execut queryimpl.java:133 org.apache.jackrabbit.core.query.queryimpl.execut queryimpl.java:127
versionmanagerimplrestor internalrestorefrozen method ident versus equal bug method protect void internalrestorefrozen nodestateex state internalfrozennod freez versionselector vsel set internalvers restor boolean removeexist boolean copi versionmanagerimplrestor class line 557 code perform instead call nodeid.equ method ran problem code execut tri restor folder node throw itemexistsexcept sinc sibl allow folder node
larg fetch size potenti deleteri effect vm memori requir use oracl sinc releas 10g oracl jdbc driver use fetch size alloc buffer cach row data cf http //www.oracle.com/technetwork/database/enterprise-edition/memory.pdf r1060431 hard-cod fetch size resultset-return statement 10,000 valu signific potenti deleteri effect heap space requir even moderately-s repositori exampl bundl tabl oracle.ddl two column node_id raw 16 bundle_data blob requir 16 b 4 kb buffer space respect requir buffer 40 mb 16+4096 10000 41120000 issu describ jcr-2832 truli specif postgresql think resolut move postgresql-specif connectionhelp subclass fail way overrid hard-cod valu oracleconnectionhelp
abstractloginmodul logout credenti clare subject.getpubliccredenti class n't back subject intern set abstractloginmodul logout clear credenti list retriev call subject.getpubliccredenti class n't desir effect return set n't back subject intern credenti set see api document javax.security.auth.subject
sessionimpl getsubject return unmodifi subject secur reason subject expos sessionimpl getsubject unmodifi least chang made modifi subject hold session current see follow option get set readon flag subject associ session b getsubject return new instanc subject characterist subject associ session c getsubject return new readon subject instanc prefer solut c n't chang characterist subject unmodifi status transpar caller sinc modifi subject fail without forc api consum read javadoc know chang subject reflect session would drawback b
webdavresponseimpl cach transformerfactori jackrabbitresponeimpl.sendxmlrespons creat instanc transformerfactori invoc see transformerfactori initi consum signific amount time complex logic insid code java.lang.string.intern nativ method java.util.jar.attribut name. init attributes.java:449 java.util.jar.attributes.putvalu attributes.java:151 java.util.jar.attributes.read attributes.java:404 java.util.jar.manifest.read manifest.java:234 sun.security.util.signaturefileverifier.processimpl signaturefileverifier.java:188 sun.security.util.signaturefileverifier.process signaturefileverifier.java:176 java.util.jar.jarverifier.processentri jarverifier.java:277 java.util.jar.jarverifier.upd jarverifier.java:188 java.util.jar.jarfile.initializeverifi jarfile.java:321 java.util.jar.jarfile.getinputstream jarfile.java:386 sun.net.www.protocol.jar.jarurlconnection.getinputstream jarurlconnection.java:144 java.net.url.openstream url.java:1009 java.lang.classloader.getresourceasstream classloader.java:1170 javax.xml.transform.securitysupport 4.run securitysupport.java:94 java.security.accesscontroller.doprivileg nativ method javax.xml.transform.securitysupport.getresourceasstream securitysupport.java:87 javax.xml.transform.factoryfinder.findjarserviceprovid factoryfinder.java:250 javax.xml.transform.factoryfinder.find factoryfinder.java:223 javax.xml.transform.transformerfactory.newinst transformerfactory.java:102 org.apache.jackrabbit.webdav.webdavresponseimpl.sendxmlrespons webdavresponseimpl.java:163 code transformerfactori cach static field privat static final transofmerfactori transformerfactori transformerfactory.newinst
remov jcr-common depend jackrabbit-webdav look jcr-2896 happen see jackrabbit-webdav contain depend jcr-common never intend want get rid webdav librari depend jcr